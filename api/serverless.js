"use strict";var xF=Object.create;var Lc=Object.defineProperty;var FF=Object.getOwnPropertyDescriptor;var MF=Object.getOwnPropertyNames;var VF=Object.getPrototypeOf,zF=Object.prototype.hasOwnProperty;var $=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),UF=(t,e)=>{for(var r in e)Lc(t,r,{get:e[r],enumerable:!0})},kw=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of MF(e))!zF.call(t,s)&&s!==r&&Lc(t,s,{get:()=>e[s],enumerable:!(n=FF(e,s))||n.enumerable});return t};var qw=(t,e,r)=>(r=t!=null?xF(VF(t)):{},kw(e||!t||!t.__esModule?Lc(r,"default",{value:t,enumerable:!0}):r,t)),HF=t=>kw(Lc({},"__esModule",{value:!0}),t);var jw=$((Gce,KF)=>{KF.exports={name:"dotenv",version:"16.0.3",description:"Loads environment variables from .env file",main:"lib/main.js",types:"lib/main.d.ts",exports:{".":{require:"./lib/main.js",types:"./lib/main.d.ts",default:"./lib/main.js"},"./config":"./config.js","./config.js":"./config.js","./lib/env-options":"./lib/env-options.js","./lib/env-options.js":"./lib/env-options.js","./lib/cli-options":"./lib/cli-options.js","./lib/cli-options.js":"./lib/cli-options.js","./package.json":"./package.json"},scripts:{"dts-check":"tsc --project tests/types/tsconfig.json",lint:"standard","lint-readme":"standard-markdown",pretest:"npm run lint && npm run dts-check",test:"tap tests/*.js --100 -Rspec",prerelease:"npm test",release:"standard-version"},repository:{type:"git",url:"git://github.com/motdotla/dotenv.git"},keywords:["dotenv","env",".env","environment","variables","config","settings"],readmeFilename:"README.md",license:"BSD-2-Clause",devDependencies:{"@types/node":"^17.0.9",decache:"^4.6.1",dtslint:"^3.7.0",sinon:"^12.0.1",standard:"^16.0.4","standard-markdown":"^7.1.0","standard-version":"^9.3.2",tap:"^15.1.6",tar:"^6.1.11",typescript:"^4.5.4"},engines:{node:">=12"}}});var Lw=$((Jce,Fc)=>{var BF=require("fs"),Dw=require("path"),GF=require("os"),JF=jw(),YF=JF.version,WF=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/mg;function XF(t){let e={},r=t.toString();r=r.replace(/\r\n?/mg,`
`);let n;for(;(n=WF.exec(r))!=null;){let s=n[1],i=n[2]||"";i=i.trim();let o=i[0];i=i.replace(/^(['"`])([\s\S]*)\1$/mg,"$2"),o==='"'&&(i=i.replace(/\\n/g,`
`),i=i.replace(/\\r/g,"\r")),e[s]=i}return e}function wp(t){console.log(`[dotenv@${YF}][DEBUG] ${t}`)}function QF(t){return t[0]==="~"?Dw.join(GF.homedir(),t.slice(1)):t}function ZF(t){let e=Dw.resolve(process.cwd(),".env"),r="utf8",n=!!(t&&t.debug),s=!!(t&&t.override);t&&(t.path!=null&&(e=QF(t.path)),t.encoding!=null&&(r=t.encoding));try{let i=xc.parse(BF.readFileSync(e,{encoding:r}));return Object.keys(i).forEach(function(o){Object.prototype.hasOwnProperty.call(process.env,o)?(s===!0&&(process.env[o]=i[o]),n&&wp(s===!0?`"${o}" is already defined in \`process.env\` and WAS overwritten`:`"${o}" is already defined in \`process.env\` and was NOT overwritten`)):process.env[o]=i[o]}),{parsed:i}}catch(i){return n&&wp(`Failed to load ${e} ${i.message}`),{error:i}}}var xc={config:ZF,parse:XF};Fc.exports.config=xc.config;Fc.exports.parse=xc.parse;Fc.exports=xc});var Fw=$((Yce,xw)=>{"use strict";function eM(t){var e=new t,r=e;function n(){var i=e;return i.next?e=i.next:(e=new t,r=e),i.next=null,i}function s(i){r.next=i,r=i}return{get:n,release:s}}xw.exports=eM});var Sp=$((Wce,Ep)=>{"use strict";var tM=Fw();function Mw(t,e,r){if(typeof t=="function"&&(r=e,e=t,t=null),r<1)throw new Error("fastqueue concurrency must be greater than 1");var n=tM(rM),s=null,i=null,o=0,a=null,u={push:m,drain:Gr,saturated:Gr,pause:c,paused:!1,concurrency:r,running:l,resume:d,idle:p,length:f,getQueue:h,unshift:v,empty:Gr,kill:w,killAndDrain:_,error:y};return u;function l(){return o}function c(){u.paused=!0}function f(){for(var b=s,T=0;b;)b=b.next,T++;return T}function h(){for(var b=s,T=[];b;)T.push(b.value),b=b.next;return T}function d(){if(u.paused){u.paused=!1;for(var b=0;b<u.concurrency;b++)o++,g()}}function p(){return o===0&&u.length()===0}function m(b,T){var S=n.get();S.context=t,S.release=g,S.value=b,S.callback=T||Gr,S.errorHandler=a,o===u.concurrency||u.paused?i?(i.next=S,i=S):(s=S,i=S,u.saturated()):(o++,e.call(t,S.value,S.worked))}function v(b,T){var S=n.get();S.context=t,S.release=g,S.value=b,S.callback=T||Gr,o===u.concurrency||u.paused?s?(S.next=s,s=S):(s=S,i=S,u.saturated()):(o++,e.call(t,S.value,S.worked))}function g(b){b&&n.release(b);var T=s;T?u.paused?o--:(i===s&&(i=null),s=T.next,T.next=null,e.call(t,T.value,T.worked),i===null&&u.empty()):--o===0&&u.drain()}function w(){s=null,i=null,u.drain=Gr}function _(){s=null,i=null,u.drain(),u.drain=Gr}function y(b){a=b}}function Gr(){}function rM(){this.value=null,this.callback=Gr,this.next=null,this.release=Gr,this.context=null,this.errorHandler=null;var t=this;this.worked=function(r,n){var s=t.callback,i=t.errorHandler,o=t.value;t.value=null,t.callback=Gr,t.errorHandler&&i(r,o),s.call(t.context,r,n),t.release(t)}}function nM(t,e,r){typeof t=="function"&&(r=e,e=t,t=null);function n(c,f){e.call(this,c).then(function(h){f(null,h)},f)}var s=Mw(t,n,r),i=s.push,o=s.unshift;return s.push=a,s.unshift=u,s.drained=l,s;function a(c){var f=new Promise(function(h,d){i(c,function(p,m){if(p){d(p);return}h(m)})});return f.catch(Gr),f}function u(c){var f=new Promise(function(h,d){o(c,function(p,m){if(p){d(p);return}h(m)})});return f.catch(Gr),f}function l(){if(s.idle())return new Promise(function(h){h()});var c=s.drain,f=new Promise(function(h){s.drain=function(){c(),h()}});return f}}Ep.exports=Mw;Ep.exports.promise=nM});var Pp=$((Xce,Vw)=>{"use strict";var{inherits:sM,format:Rp}=require("util");function Si(t,e,r=Error){if(!t)throw new Error("Avvio error code must not be empty");if(!e)throw new Error("Avvio base error message must not be empty");function n(s,i,o){if(!new.target)return new n(s,i,o);Error.captureStackTrace(this,n),this.code=t,this.message=e,this.name="AvvioError",s&&i&&o?this.message=Rp(e,s,i,o):s&&i?this.message=Rp(e,s,i):s?this.message=Rp(e,s):this.message=e}return n.prototype[Symbol.toStringTag]="Error",n.prototype.toString=function(){return`${this.name} [${this.code}]: ${this.message}`},sM(n,r),n}Vw.exports={createError:Si,AVV_ERR_EXPOSE_ALREADY_DEFINED:Si("AVV_ERR_EXPOSE_ALREADY_DEFINED","'%s' () is already defined, specify an expose option"),AVV_ERR_CALLBACK_NOT_FN:Si("AVV_ERR_CALLBACK_NOT_FN","Callback for '%s' hook is not a function. Received: '%s'"),AVV_ERR_PLUGIN_NOT_VALID:Si("AVV_ERR_PLUGIN_NOT_VALID","Plugin must be a function or a promise. Received: '%s'"),AVV_ERR_ROOT_PLG_BOOTED:Si("AVV_ERR_PLUGIN_NOT_VALID","Root plugin has already booted"),AVV_ERR_PARENT_PLG_LOADED:Si("AVV_ERR_PARENT_PLG_LOADED","Impossible to load '%s' plugin because the parent '%s' was already loaded"),AVV_ERR_READY_TIMEOUT:Si("AVV_ERR_READY_TIMEOUT","Plugin did not start in time: '%s'. You may have forgotten to call 'done' function or to resolve a Promise")}});var Uw=$((Qce,zw)=>{zw.exports=function t(e,r,n){r===void 0&&(r=""),n||(n={});var s=function(u){var l={"\u2502":"|","\u2514":"`","\u251C":"+","\u2500":"-","\u252C":"-"};return n.unicode===!1?l[u]:u};typeof e=="string"&&(e={label:e});var i=e.nodes||[],o=(e.label||"").split(`
`),a=`
`+r+(i.length?s("\u2502"):" ")+" ";return r+o.join(a)+`
`+i.map(function(u,l){var c=l===i.length-1,f=u.nodes&&u.nodes.length,h=r+(c?" ":s("\u2502"))+" ";return r+s(c?"\u2514":"\u251C")+s("\u2500")+s(f?"\u252C":"\u2500")+" "+t(u,h,n).slice(r.length+2)}).join("")}});var Yw=$((Zce,Jw)=>{"use strict";var iM=Uw(),Hw=Symbol("avvio.TimeTree.untrackNode"),Tp=Symbol("avvio.TimeTree.trackNode"),Kw=Symbol("avvio.TimeTree.getParent"),Bw=Symbol("avvio.TimeTree.getNode"),Gw=Symbol("avvio.TimeTree.addNode"),Op=class{constructor(){this.root=null,this.tableId=new Map,this.tableLabel=new Map}[Tp](e){this.tableId.set(e.id,e),this.tableLabel.has(e.label)?this.tableLabel.get(e.label).push(e):this.tableLabel.set(e.label,[e])}[Hw](e){this.tableId.delete(e.id);let r=this.tableLabel.get(e.label);if(r.id){this.tableLabel.delete(e.label);return}r.pop(),r.length===0&&this.tableLabel.delete(e.label)}[Kw](e){if(e===null)return this.root;let r=this.tableLabel.get(e);return r.id?r:r[r.length-1]}[Bw](e){return this.tableId.get(e)}[Gw](e,r,n){if(e===null)return this.root={id:"root",label:r,start:n,nodes:[]},this[Tp](this.root),this.root.id;let i=this[Kw](e),o=`${r}-${Math.random()}`,a={id:o,parent:e,start:n,label:r,nodes:[]};return i.nodes.push(a),this[Tp](a),o}start(e,r,n=Date.now()){return this[Gw](e,r,n)}stop(e,r=Date.now()){let n=this[Bw](e);n&&(n.stop=r,n.diff=n.stop-n.start||0,this[Hw](n))}toJSON(){return Object.assign({},this.root)}prittyPrint(){let e=n=>(n.label=`${n.label} ${n.diff} ms`,n.nodes.length>0&&(n.nodes=n.nodes.map(s=>e(s))),n),r=e(this.toJSON());return iM(r)}};Jw.exports=Op});var Xw=$((efe,Ww)=>{var To=1e3,Oo=To*60,No=Oo*60,Ri=No*24,oM=Ri*7,aM=Ri*365.25;Ww.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return uM(t);if(r==="number"&&isFinite(t))return e.long?cM(t):lM(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function uM(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*aM;case"weeks":case"week":case"w":return r*oM;case"days":case"day":case"d":return r*Ri;case"hours":case"hour":case"hrs":case"hr":case"h":return r*No;case"minutes":case"minute":case"mins":case"min":case"m":return r*Oo;case"seconds":case"second":case"secs":case"sec":case"s":return r*To;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function lM(t){var e=Math.abs(t);return e>=Ri?Math.round(t/Ri)+"d":e>=No?Math.round(t/No)+"h":e>=Oo?Math.round(t/Oo)+"m":e>=To?Math.round(t/To)+"s":t+"ms"}function cM(t){var e=Math.abs(t);return e>=Ri?Mc(t,e,Ri,"day"):e>=No?Mc(t,e,No,"hour"):e>=Oo?Mc(t,e,Oo,"minute"):e>=To?Mc(t,e,To,"second"):t+" ms"}function Mc(t,e,r,n){var s=e>=r*1.5;return Math.round(t/r)+" "+n+(s?"s":"")}});var Np=$((tfe,Qw)=>{function fM(t){r.debug=r,r.default=r,r.coerce=u,r.disable=i,r.enable=s,r.enabled=o,r.humanize=Xw(),r.destroy=l,Object.keys(t).forEach(c=>{r[c]=t[c]}),r.names=[],r.skips=[],r.formatters={};function e(c){let f=0;for(let h=0;h<c.length;h++)f=(f<<5)-f+c.charCodeAt(h),f|=0;return r.colors[Math.abs(f)%r.colors.length]}r.selectColor=e;function r(c){let f,h=null,d,p;function m(...v){if(!m.enabled)return;let g=m,w=Number(new Date),_=w-(f||w);g.diff=_,g.prev=f,g.curr=w,f=w,v[0]=r.coerce(v[0]),typeof v[0]!="string"&&v.unshift("%O");let y=0;v[0]=v[0].replace(/%([a-zA-Z%])/g,(T,S)=>{if(T==="%%")return"%";y++;let N=r.formatters[S];if(typeof N=="function"){let A=v[y];T=N.call(g,A),v.splice(y,1),y--}return T}),r.formatArgs.call(g,v),(g.log||r.log).apply(g,v)}return m.namespace=c,m.useColors=r.useColors(),m.color=r.selectColor(c),m.extend=n,m.destroy=r.destroy,Object.defineProperty(m,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(d!==r.namespaces&&(d=r.namespaces,p=r.enabled(c)),p),set:v=>{h=v}}),typeof r.init=="function"&&r.init(m),m}function n(c,f){let h=r(this.namespace+(typeof f>"u"?":":f)+c);return h.log=this.log,h}function s(c){r.save(c),r.namespaces=c,r.names=[],r.skips=[];let f,h=(typeof c=="string"?c:"").split(/[\s,]+/),d=h.length;for(f=0;f<d;f++)h[f]&&(c=h[f].replace(/\*/g,".*?"),c[0]==="-"?r.skips.push(new RegExp("^"+c.slice(1)+"$")):r.names.push(new RegExp("^"+c+"$")))}function i(){let c=[...r.names.map(a),...r.skips.map(a).map(f=>"-"+f)].join(",");return r.enable(""),c}function o(c){if(c[c.length-1]==="*")return!0;let f,h;for(f=0,h=r.skips.length;f<h;f++)if(r.skips[f].test(c))return!1;for(f=0,h=r.names.length;f<h;f++)if(r.names[f].test(c))return!0;return!1}function a(c){return c.toString().substring(2,c.toString().length-2).replace(/\.\*\?$/,"*")}function u(c){return c instanceof Error?c.stack||c.message:c}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}Qw.exports=fM});var Zw=$((Mr,Vc)=>{Mr.formatArgs=hM;Mr.save=pM;Mr.load=mM;Mr.useColors=dM;Mr.storage=yM();Mr.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Mr.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function dM(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function hM(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+Vc.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,s=>{s!=="%%"&&(r++,s==="%c"&&(n=r))}),t.splice(n,0,e)}Mr.log=console.debug||console.log||(()=>{});function pM(t){try{t?Mr.storage.setItem("debug",t):Mr.storage.removeItem("debug")}catch{}}function mM(){let t;try{t=Mr.storage.getItem("debug")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}function yM(){try{return localStorage}catch{}}Vc.exports=Np()(Mr);var{formatters:gM}=Vc.exports;gM.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var tE=$((rfe,eE)=>{"use strict";eE.exports=(t,e=process.argv)=>{let r=t.startsWith("-")?"":t.length===1?"-":"--",n=e.indexOf(r+t),s=e.indexOf("--");return n!==-1&&(s===-1||n<s)}});var sE=$((nfe,nE)=>{"use strict";var _M=require("os"),rE=require("tty"),Jr=tE(),{env:jt}=process,qs;Jr("no-color")||Jr("no-colors")||Jr("color=false")||Jr("color=never")?qs=0:(Jr("color")||Jr("colors")||Jr("color=true")||Jr("color=always"))&&(qs=1);"FORCE_COLOR"in jt&&(jt.FORCE_COLOR==="true"?qs=1:jt.FORCE_COLOR==="false"?qs=0:qs=jt.FORCE_COLOR.length===0?1:Math.min(parseInt(jt.FORCE_COLOR,10),3));function Ip(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function Cp(t,e){if(qs===0)return 0;if(Jr("color=16m")||Jr("color=full")||Jr("color=truecolor"))return 3;if(Jr("color=256"))return 2;if(t&&!e&&qs===void 0)return 0;let r=qs||0;if(jt.TERM==="dumb")return r;if(process.platform==="win32"){let n=_M.release().split(".");return Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in jt)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(n=>n in jt)||jt.CI_NAME==="codeship"?1:r;if("TEAMCITY_VERSION"in jt)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(jt.TEAMCITY_VERSION)?1:0;if(jt.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in jt){let n=parseInt((jt.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(jt.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(jt.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(jt.TERM)||"COLORTERM"in jt?1:r}function vM(t){let e=Cp(t,t&&t.isTTY);return Ip(e)}nE.exports={supportsColor:vM,stdout:Ip(Cp(!0,rE.isatty(1))),stderr:Ip(Cp(!0,rE.isatty(2)))}});var oE=$((zt,Uc)=>{var $M=require("tty"),zc=require("util");zt.init=TM;zt.log=SM;zt.formatArgs=wM;zt.save=RM;zt.load=PM;zt.useColors=bM;zt.destroy=zc.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");zt.colors=[6,2,3,4,5,1];try{let t=sE();t&&(t.stderr||t).level>=2&&(zt.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}zt.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(s,i)=>i.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),t[r]=n,t},{});function bM(){return"colors"in zt.inspectOpts?!!zt.inspectOpts.colors:$M.isatty(process.stderr.fd)}function wM(t){let{namespace:e,useColors:r}=this;if(r){let n=this.color,s="\x1B[3"+(n<8?n:"8;5;"+n),i=`  ${s};1m${e} \x1B[0m`;t[0]=i+t[0].split(`
`).join(`
`+i),t.push(s+"m+"+Uc.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=EM()+e+" "+t[0]}function EM(){return zt.inspectOpts.hideDate?"":new Date().toISOString()+" "}function SM(...t){return process.stderr.write(zc.format(...t)+`
`)}function RM(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function PM(){return process.env.DEBUG}function TM(t){t.inspectOpts={};let e=Object.keys(zt.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=zt.inspectOpts[e[r]]}Uc.exports=Np()(zt);var{formatters:iE}=Uc.exports;iE.o=function(t){return this.inspectOpts.colors=this.useColors,zc.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};iE.O=function(t){return this.inspectOpts.colors=this.useColors,zc.inspect(t,this.inspectOpts)}});var kp=$((sfe,Ap)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?Ap.exports=Zw():Ap.exports=oE()});var aE=$((ife,Dp)=>{"use strict";var OM=Sp(),NM=require("events").EventEmitter,IM=require("util").inherits,Dt=kp()("avvio"),{AVV_ERR_READY_TIMEOUT:CM}=Pp(),qp=Symbol.for("plugin-meta");function AM(t,e){return t[qp]&&t[qp].name?t[qp].name:typeof e<"u"&&typeof e!="function"&&e.name?e.name:t.name?t.name:t.toString().split(`
`).slice(0,2).map(r=>r.trim()).join(" -- ")}function kM(){let t={};return t.promise=new Promise((e,r)=>{t.resolve=e,t.reject=r}),t}function Io(t,e,r,n,s){this.started=!1,this.func=e,this.opts=r,this.onFinish=null,this.parent=t,this.timeout=s===void 0?t._timeout:s,this.name=AM(e,r),this.isAfter=n,this.q=OM(t,qM,1),this.q.pause(),this._error=null,this.loaded=!1,this._promise=null}IM(Io,NM);Io.prototype.exec=function(t,e){let r=this.func,n=!1,s=this.name;if(this.parent._error&&!this.isAfter){Dt("skipping loading of plugin as parent errored and it is not an after",s),process.nextTick(e);return}if(this.isAfter)this.server=t;else try{this.server=this.parent.override(t,r,this.opts)}catch(u){return Dt("override errored",s),e(u)}this.opts=typeof this.opts=="function"?this.opts(this.server):this.opts,Dt("exec",s);let i,o=u=>{if(n){Dt("loading complete",s);return}this._error=u,Dt(u?"exec errored":"exec completed",s),n=!0,i&&clearTimeout(i),e(u)};this.timeout>0&&(Dt("setting up timeout",s,this.timeout),i=setTimeout(function(){Dt("timed out",s),i=null;let u=new CM(s);u.fn=r,o(u)},this.timeout)),this.started=!0,this.emit("start",this.server?this.server.name:null,this.name,Date.now());let a=r(this.server,this.opts,o);a&&typeof a.then=="function"&&(Dt("exec: resolving promise",s),a.then(()=>process.nextTick(o),u=>process.nextTick(o,u)))};Io.prototype.loadedSoFar=function(){if(this.loaded)return Promise.resolve();let t=()=>{this.server.after((r,n)=>{this._error=r,this.q.pause(),r?(Dt("rejecting promise",this.name,r),this._promise.reject(r)):(Dt("resolving promise",this.name),this._promise.resolve()),this._promise=null,process.nextTick(n,r)}),this.q.resume()},e;return this._promise?e=Promise.resolve():(this._promise=kM(),e=this._promise.promise,this.server?t():this.on("start",t)),e};Io.prototype.enqueue=function(t,e){Dt("enqueue",this.name,t.name),this.emit("enqueue",this.server?this.server.name:null,this.name,Date.now()),this.q.push(t,e)};Io.prototype.finish=function(t,e){Dt("finish",this.name,t);let r=()=>{this.loaded||(Dt("loaded",this.name),this.emit("loaded",this.server?this.server.name:null,this.name,Date.now()),this.loaded=!0,e(t))};if(t){this._promise&&(this._promise.reject(t),this._promise=null),r();return}let n=()=>{if(Dt("check",this.name,this.q.length(),this.q.running(),this._promise),this.q.length()===0&&this.q.running()===0)if(this._promise){let s=()=>{Dt("wrap"),queueMicrotask(n)};this._promise.resolve(),this._promise.promise.then(s,s),this._promise=null}else r();else Dt("delayed",this.name),this.q.drain=()=>{Dt("drain",this.name),this.q.drain=jM,queueMicrotask(n)}};queueMicrotask(n),this.q.resume()};function qM(t,e){let r=this;process.nextTick(jp.bind(r),t,e)}function jp(t,e){if(typeof t.func.then=="function"){t.func.then(n=>{typeof n.default=="function"&&(n=n.default),t.func=n,jp.call(this,t,e)},e);return}let r=this._current[0];this._current.unshift(t),t.exec(r&&r.server||this._server,n=>{t.finish(n,s=>{this._current.shift(),e(s)})})}function jM(){}Dp.exports=Io;Dp.exports.loadPlugin=jp});var dE=$((ofe,Vp)=>{"use strict";var uE=Sp(),DM=require("events").EventEmitter,LM=require("util").inherits,{AVV_ERR_EXPOSE_ALREADY_DEFINED:Lp,AVV_ERR_CALLBACK_NOT_FN:su,AVV_ERR_PLUGIN_NOT_VALID:xM,AVV_ERR_ROOT_PLG_BOOTED:FM,AVV_ERR_READY_TIMEOUT:MM}=Pp(),VM=Yw(),Mp=aE(),Co=kp()("avvio"),Hc=Symbol("kAvvio"),xp=Symbol("kThenifyDoNotWrap");function zM(t,e,r){let n=e.expose||{},s=n.use||"use",i=n.after||"after",o=n.ready||"ready",a=n.onClose||"onClose",u=n.close||"close";if(t[s])throw new Lp(s);if(t[i])throw new Lp(i);if(t[o])throw new Lp(o);t[s]=function(l,c){return r.use(l,c),this},Object.defineProperty(t,"then",{get:cE.bind(r)}),t[Hc]=!0,t[i]=function(l){return typeof l!="function"?r._loadRegistered():(r.after(Fp(l,this)),this)},t[o]=function(l){if(l&&typeof l!="function")throw new su(o,typeof l);return r.ready(l?Fp(l,this):void 0)},t[a]=function(l){if(typeof l!="function")throw new su(a,typeof l);return r.onClose(GM(l,this)),this},t[u]=function(l){if(l&&typeof l!="function")throw new su(u,typeof l);return l?(r.close(Fp(l,this)),this):r.close()}}function Lt(t,e,r){if(typeof t=="function"&&arguments.length===1&&(r=t,e={},t=null),typeof e=="function"&&(r=e,e={}),e=e||{},!(this instanceof Lt)){let n=new Lt(t,e,r);return t&&zM(t,e,n),n}e.autostart!==!1&&(e.autostart=!0),t=t||this,this._timeout=Number(e.timeout)||0,this._server=t,this._current=[],this._error=null,this._isOnCloseHandlerKey=Symbol("isOnCloseHandler"),this._lastUsed=null,this.setMaxListeners(0),r&&this.once("start",r),this.started=!1,this.booted=!1,this.pluginTree=new VM,this._readyQ=uE(this,fE,1),this._readyQ.pause(),this._readyQ.drain=()=>{this.emit("start"),this._readyQ.drain=lE},this._closeQ=uE(this,BM,1),this._closeQ.pause(),this._closeQ.drain=()=>{this.emit("close"),this._closeQ.drain=lE},this._doStart=null,this._root=new Mp(this,UM.bind(this),e,!1,0),this._root.once("start",(n,s,i)=>{let o=this.pluginTree.start(null,s,i);this._root.once("loaded",(a,u,l)=>{this.pluginTree.stop(o,l)})}),Mp.loadPlugin.call(this,this._root,n=>{Co("root plugin ready");try{this.emit("preReady"),this._root=null}catch(s){n=n||this._error||s}if(n){if(this._error=n,this._readyQ.length()===0)throw n}else this.booted=!0;this._readyQ.resume()})}function UM(t,e,r){this._doStart=r,e.autostart&&this.start()}LM(Lt,DM);Lt.prototype.start=function(){return this.started=!0,process.nextTick(this._doStart),this};Lt.prototype.override=function(t,e,r){return t};function HM(t){if(t&&typeof t=="object"&&typeof t.default=="function"&&(t=t.default),!(t&&(typeof t=="function"||typeof t.then=="function")))throw new xM(typeof t);return t}Lt.prototype[Hc]=!0;Lt.prototype.use=function(t,e){return this._lastUsed=this._addPlugin(t,e,!1),this};Lt.prototype._loadRegistered=function(){let t=this._current[0];return!this.started&&!this.booted&&process.nextTick(()=>this._root.q.resume()),t?t.loadedSoFar():Promise.resolve()};Object.defineProperty(Lt.prototype,"then",{get:cE});Lt.prototype._addPlugin=function(t,e,r){if(t=HM(t),e=e||{},this.booted)throw new FM;let n=this._current[0],s=new Mp(this,t,e,r);if(s.once("start",(i,o,a)=>{let u=this.pluginTree.start(n.name,o,a);s.once("loaded",(l,c,f)=>{this.pluginTree.stop(u,f)})}),n.loaded)throw new Error(s.name,n.name);return n.enqueue(s,i=>{i&&(this._error=i)}),s};Lt.prototype.after=function(t){if(!t)return this._loadRegistered();this._addPlugin(e.bind(this),{},!0);function e(r,n,s){fE.call(this,t,s)}return this};Lt.prototype.onClose=function(t){if(typeof t!="function")throw new Error("not a function");t[this._isOnCloseHandlerKey]=!0,this._closeQ.unshift(t,e.bind(this));function e(r){r&&(this._error=r)}return this};Lt.prototype.close=function(t){let e;if(t){if(typeof t!="function")throw new su("close",typeof t)}else e=new Promise(function(r,n){t=function(s){if(s)return n(s);r()}});return this.ready(()=>{this._error=null,this._closeQ.push(t),process.nextTick(this._closeQ.resume.bind(this._closeQ))}),e};Lt.prototype.ready=function(t){if(t){if(typeof t!="function")throw new su("ready",typeof t);this._readyQ.push(t),queueMicrotask(this.start.bind(this));return}return new Promise((e,r)=>{this._readyQ.push(s),this.start();let n=this._current[0].server;function s(i,o,a){i?r(i):e(n),process.nextTick(a)}})};Lt.prototype.prettyPrint=function(){return this.pluginTree.prittyPrint()};Lt.prototype.toJSON=function(){return this.pluginTree.toJSON()};function lE(){}function cE(){if(this.booted){Co("thenify returning null because we are already booted");return}if(this[xp]){this[xp]=!1;return}return Co("thenify"),(t,e)=>this._loadRegistered().then(()=>(this[xp]=!0,t(this._server)),e)}function fE(t,e){let r=this._server,n=this._error,s;if(this._error=null,t.length===0)this._error=n,s=t(),s&&!s[Hc]&&typeof s.then=="function"?s.then(()=>process.nextTick(e),i=>process.nextTick(e,i)):process.nextTick(e);else if(t.length===1)s=t(n),s&&!s[Hc]&&typeof s.then=="function"?s.then(()=>process.nextTick(e),i=>process.nextTick(e,i)):process.nextTick(e);else if(this._timeout===0){let i=o=>{this._error=o,e(this._error)};t.length===2?t(n,i):t(n,r,i)}else KM.call(this,t,n,r,e)}function KM(t,e,r,n){let s=t.name;Co("setting up ready timeout",s,this._timeout);let i=setTimeout(()=>{Co("timed out",s),i=null;let a=new MM(s);a.fn=t,this._error=a,n(a)},this._timeout);t.length===2?t(e,o.bind(this)):t(e,r,o.bind(this));function o(a){i&&(clearTimeout(i),this._error=a,n(this._error))}}function BM(t,e){let r=this._server,n=t[this._isOnCloseHandlerKey];if(t.length===0||t.length===1){let s;n?s=t(r):s=t(this._error),s&&typeof s.then=="function"?(Co("resolving close/onClose promise"),s.then(()=>process.nextTick(e),i=>process.nextTick(e,i))):process.nextTick(e)}else t.length===2?t(n?r:this._error,e):n?t(r,e):t(this._error,r,e)}function GM(t,e){return r.bind(e);function r(n,s){let i;t.length===0?(i=t(),i&&i.then?i.then(function(){process.nextTick(s)},s):process.nextTick(s)):t.length===1?(i=t(this),i&&i.then?i.then(function(){process.nextTick(s)},s):process.nextTick(s)):t(this,s)}}function Fp(t,e){return r.bind(e);function r(n,s){let i;t?t.length===0?(i=t(),i&&i.then?i.then(function(){process.nextTick(s,n)},s):process.nextTick(s,n)):t.length===1?(i=t(n),i&&i.then?i.then(function(){process.nextTick(s)},s):process.nextTick(s)):t.length===2?t(n,s):t(n,this,s):process.nextTick(s)}}Vp.exports=Lt;Vp.exports.express=function(t){return Lt(t,{expose:{use:"load"}})}});var xt=$((afe,hE)=>{"use strict";var JM={kAvvioBoot:Symbol("fastify.avvioBoot"),kChildren:Symbol("fastify.children"),kServerBindings:Symbol("fastify.serverBindings"),kBodyLimit:Symbol("fastify.bodyLimit"),kRoutePrefix:Symbol("fastify.routePrefix"),kLogLevel:Symbol("fastify.logLevel"),kLogSerializers:Symbol("fastify.logSerializers"),kHooks:Symbol("fastify.hooks"),kContentTypeParser:Symbol("fastify.contentTypeParser"),kState:Symbol("fastify.state"),kOptions:Symbol("fastify.options"),kDisableRequestLogging:Symbol("fastify.disableRequestLogging"),kPluginNameChain:Symbol("fastify.pluginNameChain"),kRouteContext:Symbol("fastify.context"),kPublicRouteContext:Symbol("fastify.routeOptions"),kSchemaController:Symbol("fastify.schemaController"),kSchemaHeaders:Symbol("headers-schema"),kSchemaParams:Symbol("params-schema"),kSchemaQuerystring:Symbol("querystring-schema"),kSchemaBody:Symbol("body-schema"),kSchemaResponse:Symbol("response-schema"),kSchemaErrorFormatter:Symbol("fastify.schemaErrorFormatter"),kSchemaVisited:Symbol("fastify.schemas.visited"),kRequest:Symbol("fastify.Request"),kRequestPayloadStream:Symbol("fastify.RequestPayloadStream"),kRequestAcceptVersion:Symbol("fastify.RequestAcceptVersion"),kRequestCacheValidateFns:Symbol("fastify.request.cache.validateFns"),kFourOhFour:Symbol("fastify.404"),kCanSetNotFoundHandler:Symbol("fastify.canSetNotFoundHandler"),kFourOhFourLevelInstance:Symbol("fastify.404LogLevelInstance"),kFourOhFourContext:Symbol("fastify.404ContextKey"),kDefaultJsonParse:Symbol("fastify.defaultJSONParse"),kReply:Symbol("fastify.Reply"),kReplySerializer:Symbol("fastify.reply.serializer"),kReplyIsError:Symbol("fastify.reply.isError"),kReplyHeaders:Symbol("fastify.reply.headers"),kReplyTrailers:Symbol("fastify.reply.trailers"),kReplyHasStatusCode:Symbol("fastify.reply.hasStatusCode"),kReplyHijacked:Symbol("fastify.reply.hijacked"),kReplyStartTime:Symbol("fastify.reply.startTime"),kReplyNextErrorHandler:Symbol("fastify.reply.nextErrorHandler"),kReplyEndTime:Symbol("fastify.reply.endTime"),kReplyErrorHandlerCalled:Symbol("fastify.reply.errorHandlerCalled"),kReplyIsRunningOnErrorHook:Symbol("fastify.reply.isRunningOnErrorHook"),kReplySerializerDefault:Symbol("fastify.replySerializerDefault"),kReplyCacheSerializeFns:Symbol("fastify.reply.cache.serializeFns"),kTestInternals:Symbol("fastify.testInternals"),kErrorHandler:Symbol("fastify.errorHandler"),kHasBeenDecorated:Symbol("fastify.hasBeenDecorated"),kKeepAliveConnections:Symbol("fastify.keepAliveConnections"),kRouteByFastify:Symbol("fastify.routeByFastify")};hE.exports=JM});var Hp=$((ufe,Kc)=>{"use strict";var{format:zp}=require("util");function Up(){let t={},e=new Map,r=Object.create(null);function n(i,o,a,{unlimited:u=!1}={}){if(!i)throw new Error("Warning name must not be empty");if(!o)throw new Error("Warning code must not be empty");if(!a)throw new Error("Warning message must not be empty");if(typeof u!="boolean")throw new Error("Warning opts.unlimited must be a boolean");if(o=o.toUpperCase(),t[o]!==void 0)throw new Error(`The code '${o}' already exist`);function l(c,f,h){let d;return c&&f&&h?d=zp(a,c,f,h):c&&f?d=zp(a,c,f):c?d=zp(a,c):d=a,{code:o,name:i,message:d}}return Object.assign(r,{unlimited:u}),e.set(o,u),t[o]=l,t[o]}function s(i,o,a,u){if(e.get(i)===!0&&r.unlimited===!1)return;if(t[i]===void 0)throw new Error(`The code '${i}' does not exist`);e.set(i,!0);let l=t[i](o,a,u);process.emitWarning(l.message,l.name,l.code)}return{create:n,emit:s,emitted:e}}Kc.exports=Up;Kc.exports.default=Up;Kc.exports.processWarning=Up});var Pi=$((lfe,pE)=>{"use strict";var yn=Hp()();yn.create("FastifyDeprecation","FSTDEP005",'You are accessing the deprecated "request.connection" property. Use "request.socket" instead.');yn.create("FastifyDeprecation","FSTDEP006","You are decorating Request/Reply with a reference type. This reference is shared amongst all requests. Use onRequest hook instead. Property: %s");yn.create("FastifyDeprecation","FSTDEP007",'You are trying to set a HEAD route using "exposeHeadRoute" route flag when a sibling route is already set. See documentation for more info.');yn.create("FastifyDeprecation","FSTDEP008",'You are using route constraints via the route { version: "..." } option, use { constraints: { version: "..." } } option instead.');yn.create("FastifyDeprecation","FSTDEP009",'You are using a custom route versioning strategy via the server { versioning: "..." } option, use { constraints: { version: "..." } } option instead.');yn.create("FastifyDeprecation","FSTDEP010",'Modifying the "reply.sent" property is deprecated. Use the "reply.hijack()" method instead.');yn.create("FastifyDeprecation","FSTDEP011",'Variadic listen method is deprecated. Please use ".listen(optionsObject)" instead. The variadic signature will be removed in `fastify@5`.');yn.create("FastifyDeprecation","FSTDEP012",'Request#context property access is deprecated. Please use "Request#routeConfig" or "Request#routeSchema" instead for accessing Route settings. The "Request#context" will be removed in `fastify@5`.');yn.create("FastifyDeprecation","FSTDEP013",'Direct return of "trailers" function is deprecated. Please use "callback" or "async-await" for return value. The support of direct return will removed in `fastify@5`.');yn.create("FastifyDeprecation","FSTDEP014","You are trying to set/access the default route. This property is deprecated. Please, use setNotFoundHandler if you want to custom a 404 handler or the wildcard (*) to match all routes.");pE.exports=yn});var mE=$((cfe,Gc)=>{"use strict";var{inherits:YM,format:Bc}=require("util");function Kp(t,e,r=500,n=Error){if(!t)throw new Error("Fastify error code must not be empty");if(!e)throw new Error("Fastify error message must not be empty");t=t.toUpperCase();function s(i,o,a){if(!new.target)return new s(...arguments);switch(Error.captureStackTrace(this,s),this.name="FastifyError",this.code=t,arguments.length){case 3:this.message=Bc(e,i,o,a);break;case 2:this.message=Bc(e,i,o);break;case 1:this.message=Bc(e,i);break;case 0:this.message=e;break;default:this.message=Bc(e,...arguments)}this.statusCode=r||void 0}return s.prototype[Symbol.toStringTag]="Error",s.prototype.toString=function(){return`${this.name} [${this.code}]: ${this.message}`},YM(s,n),s}Gc.exports=Kp;Gc.exports.default=Kp;Gc.exports.createError=Kp});var er=$((ffe,Jc)=>{"use strict";var H=mE(),Ao={FST_ERR_NOT_FOUND:H("FST_ERR_NOT_FOUND","Not Found",404),FST_ERR_OPTIONS_NOT_OBJ:H("FST_ERR_OPTIONS_NOT_OBJ","Options must be an object",500,TypeError),FST_ERR_QSP_NOT_FN:H("FST_ERR_QSP_NOT_FN","querystringParser option should be a function, instead got '%s'",500),FST_ERR_SCHEMA_CONTROLLER_BUCKET_OPT_NOT_FN:H("FST_ERR_SCHEMA_CONTROLLER_BUCKET_OPT_NOT_FN","schemaController.bucket option should be a function, instead got '%s'",500),FST_ERR_SCHEMA_ERROR_FORMATTER_NOT_FN:H("FST_ERR_SCHEMA_ERROR_FORMATTER_NOT_FN","schemaErrorFormatter option should be a non async function. Instead got '%s'.",500),FST_ERR_AJV_CUSTOM_OPTIONS_OPT_NOT_OBJ:H("FST_ERR_AJV_CUSTOM_OPTIONS_OPT_NOT_OBJ","sajv.customOptions option should be an object, instead got '%s'",500),FST_ERR_AJV_CUSTOM_OPTIONS_OPT_NOT_ARR:H("FST_ERR_AJV_CUSTOM_OPTIONS_OPT_NOT_ARR","sajv.plugins option should be an array, instead got '%s'",500),FST_ERR_VERSION_CONSTRAINT_NOT_STR:H("FST_ERR_VERSION_CONSTRAINT_NOT_STR","Version constraint should be a string.",500),FST_ERR_CTP_ALREADY_PRESENT:H("FST_ERR_CTP_ALREADY_PRESENT","Content type parser '%s' already present."),FST_ERR_CTP_INVALID_TYPE:H("FST_ERR_CTP_INVALID_TYPE","The content type should be a string or a RegExp",500,TypeError),FST_ERR_CTP_EMPTY_TYPE:H("FST_ERR_CTP_EMPTY_TYPE","The content type cannot be an empty string",500,TypeError),FST_ERR_CTP_INVALID_HANDLER:H("FST_ERR_CTP_INVALID_HANDLER","The content type handler should be a function",500,TypeError),FST_ERR_CTP_INVALID_PARSE_TYPE:H("FST_ERR_CTP_INVALID_PARSE_TYPE","The body parser can only parse your data as 'string' or 'buffer', you asked '%s' which is not supported.",500,TypeError),FST_ERR_CTP_BODY_TOO_LARGE:H("FST_ERR_CTP_BODY_TOO_LARGE","Request body is too large",413,RangeError),FST_ERR_CTP_INVALID_MEDIA_TYPE:H("FST_ERR_CTP_INVALID_MEDIA_TYPE","Unsupported Media Type: %s",415),FST_ERR_CTP_INVALID_CONTENT_LENGTH:H("FST_ERR_CTP_INVALID_CONTENT_LENGTH","Request body size did not match Content-Length",400,RangeError),FST_ERR_CTP_EMPTY_JSON_BODY:H("FST_ERR_CTP_EMPTY_JSON_BODY","Body cannot be empty when content-type is set to 'application/json'",400),FST_ERR_CTP_INSTANCE_ALREADY_STARTED:H("FST_ERR_CTP_INSTANCE_ALREADY_STARTED",'Cannot call "%s" when fastify instance is already started!',400),FST_ERR_DEC_ALREADY_PRESENT:H("FST_ERR_DEC_ALREADY_PRESENT","The decorator '%s' has already been added!"),FST_ERR_DEC_DEPENDENCY_INVALID_TYPE:H("FST_ERR_DEC_DEPENDENCY_INVALID_TYPE","The dependencies of decorator '%s' must be of type Array."),FST_ERR_DEC_MISSING_DEPENDENCY:H("FST_ERR_DEC_MISSING_DEPENDENCY","The decorator is missing dependency '%s'."),FST_ERR_DEC_AFTER_START:H("FST_ERR_DEC_AFTER_START","The decorator '%s' has been added after start!"),FST_ERR_HOOK_INVALID_TYPE:H("FST_ERR_HOOK_INVALID_TYPE","The hook name must be a string",500,TypeError),FST_ERR_HOOK_INVALID_HANDLER:H("FST_ERR_HOOK_INVALID_HANDLER","%s hook should be a function, instead got %s",500,TypeError),FST_ERR_HOOK_INVALID_ASYNC_HANDLER:H("FST_ERR_HOOK_INVALID_ASYNC_HANDLER","Async function has too many arguments. Async hooks should not use the 'done' argument.",500,TypeError),FST_ERR_HOOK_NOT_SUPPORTED:H("FST_ERR_HOOK_NOT_SUPPORTED","%s hook not supported!",500,TypeError),FST_ERR_MISSING_MIDDLEWARE:H("FST_ERR_MISSING_MIDDLEWARE","You must register a plugin for handling middlewares, visit fastify.io/docs/latest/Reference/Middleware/ for more info.",500),FST_ERR_HOOK_TIMEOUT:H("FST_ERR_HOOK_TIMEOUT","A callback for '%s' hook timed out. You may have forgotten to call 'done' function or to resolve a Promise"),FST_ERR_LOG_INVALID_DESTINATION:H("FST_ERR_LOG_INVALID_DESTINATION","Cannot specify both logger.stream and logger.file options"),FST_ERR_LOG_INVALID_LOGGER:H("FST_ERR_LOG_INVALID_LOGGER","Invalid logger object provided. The logger instance should have these functions(s): '%s'."),FST_ERR_REP_INVALID_PAYLOAD_TYPE:H("FST_ERR_REP_INVALID_PAYLOAD_TYPE","Attempted to send payload of invalid type '%s'. Expected a string or Buffer.",500,TypeError),FST_ERR_REP_ALREADY_SENT:H("FST_ERR_REP_ALREADY_SENT","Reply was already sent."),FST_ERR_REP_SENT_VALUE:H("FST_ERR_REP_SENT_VALUE","The only possible value for reply.sent is true."),FST_ERR_SEND_INSIDE_ONERR:H("FST_ERR_SEND_INSIDE_ONERR","You cannot use `send` inside the `onError` hook"),FST_ERR_SEND_UNDEFINED_ERR:H("FST_ERR_SEND_UNDEFINED_ERR","Undefined error has occurred"),FST_ERR_BAD_STATUS_CODE:H("FST_ERR_BAD_STATUS_CODE","Called reply with an invalid status code: %s"),FST_ERR_BAD_TRAILER_NAME:H("FST_ERR_BAD_TRAILER_NAME","Called reply.trailer with an invalid header name: %s"),FST_ERR_BAD_TRAILER_VALUE:H("FST_ERR_BAD_TRAILER_VALUE","Called reply.trailer('%s', fn) with an invalid type: %s. Expected a function."),FST_ERR_FAILED_ERROR_SERIALIZATION:H("FST_ERR_FAILED_ERROR_SERIALIZATION","Failed to serialize an error. Error: %s. Original error: %s"),FST_ERR_MISSING_SERIALIZATION_FN:H("FST_ERR_MISSING_SERIALIZATION_FN",'Missing serialization function. Key "%s"'),FST_ERR_MISSING_CONTENTTYPE_SERIALIZATION_FN:H("FST_ERR_MISSING_CONTENTTYPE_SERIALIZATION_FN",'Missing serialization function. Key "%s:%s"'),FST_ERR_REQ_INVALID_VALIDATION_INVOCATION:H("FST_ERR_REQ_INVALID_VALIDATION_INVOCATION",'Invalid validation invocation. Missing validation function for HTTP part "%s" nor schema provided.'),FST_ERR_SCH_MISSING_ID:H("FST_ERR_SCH_MISSING_ID","Missing schema $id property"),FST_ERR_SCH_ALREADY_PRESENT:H("FST_ERR_SCH_ALREADY_PRESENT","Schema with id '%s' already declared!"),FST_ERR_SCH_CONTENT_MISSING_SCHEMA:H("FST_ERR_SCH_CONTENT_MISSING_SCHEMA","Schema is missing for the content type '%s'"),FST_ERR_SCH_DUPLICATE:H("FST_ERR_SCH_DUPLICATE","Schema with '%s' already present!"),FST_ERR_SCH_VALIDATION_BUILD:H("FST_ERR_SCH_VALIDATION_BUILD","Failed building the validation schema for %s: %s, due to error %s"),FST_ERR_SCH_SERIALIZATION_BUILD:H("FST_ERR_SCH_SERIALIZATION_BUILD","Failed building the serialization schema for %s: %s, due to error %s"),FST_ERR_SCH_RESPONSE_SCHEMA_NOT_NESTED_2XX:H("FST_ERR_SCH_RESPONSE_SCHEMA_NOT_NESTED_2XX",'response schemas should be nested under a valid status code, e.g { 2xx: { type: "object" } }'),FST_ERR_HTTP2_INVALID_VERSION:H("FST_ERR_HTTP2_INVALID_VERSION","HTTP2 is available only from node >= 8.8.1"),FST_ERR_INIT_OPTS_INVALID:H("FST_ERR_INIT_OPTS_INVALID","Invalid initialization options: '%s'"),FST_ERR_FORCE_CLOSE_CONNECTIONS_IDLE_NOT_AVAILABLE:H("FST_ERR_FORCE_CLOSE_CONNECTIONS_IDLE_NOT_AVAILABLE","Cannot set forceCloseConnections to 'idle' as your HTTP server does not support closeIdleConnections method"),FST_ERR_DUPLICATED_ROUTE:H("FST_ERR_DUPLICATED_ROUTE","Method '%s' already declared for route '%s'"),FST_ERR_BAD_URL:H("FST_ERR_BAD_URL","'%s' is not a valid url component",400),FST_ERR_ASYNC_CONSTRAINT:H("FST_ERR_ASYNC_CONSTRAINT","Unexpected error from async constraint",500),FST_ERR_DEFAULT_ROUTE_INVALID_TYPE:H("FST_ERR_DEFAULT_ROUTE_INVALID_TYPE","The defaultRoute type should be a function",500,TypeError),FST_ERR_INVALID_URL:H("FST_ERR_INVALID_URL","URL must be a string. Received '%s'",400),FST_ERR_ROUTE_OPTIONS_NOT_OBJ:H("FST_ERR_ROUTE_OPTIONS_NOT_OBJ",'Options for "%s:%s" route must be an object',500),FST_ERR_ROUTE_DUPLICATED_HANDLER:H("FST_ERR_ROUTE_DUPLICATED_HANDLER",'Duplicate handler for "%s:%s" route is not allowed!',500),FST_ERR_ROUTE_HANDLER_NOT_FN:H("FST_ERR_ROUTE_HANDLER_NOT_FN","Error Handler for %s:%s route, if defined, must be a function",500),FST_ERR_ROUTE_MISSING_HANDLER:H("FST_ERR_ROUTE_MISSING_HANDLER",'Missing handler function for "%s:%s" route.',500),FST_ERR_ROUTE_METHOD_NOT_SUPPORTED:H("FST_ERR_ROUTE_METHOD_NOT_SUPPORTED","%s method is not supported.",500),FST_ERR_ROUTE_BODY_VALIDATION_SCHEMA_NOT_SUPPORTED:H("FST_ERR_ROUTE_BODY_VALIDATION_SCHEMA_NOT_SUPPORTED","Body validation schema for %s:%s route is not supported!",500),FST_ERR_ROUTE_BODY_LIMIT_OPTION_NOT_INT:H("FST_ERR_ROUTE_BODY_LIMIT_OPTION_NOT_INT","'bodyLimit' option must be an integer > 0. Got '%s'",500,TypeError),FST_ERR_ROUTE_REWRITE_NOT_STR:H("FST_ERR_ROUTE_BODY_LIMIT_OPTION_NOT_INT",'Rewrite url for "%s" needs to be of type "string" but received "%s"',500),FST_ERR_REOPENED_CLOSE_SERVER:H("FST_ERR_REOPENED_CLOSE_SERVER","Fastify has already been closed and cannot be reopened"),FST_ERR_REOPENED_SERVER:H("FST_ERR_REOPENED_SERVER","Fastify is already listening"),FST_ERR_INSTANCE_ALREADY_LISTENING:H("FST_ERR_INSTANCE_ALREADY_LISTENING","Fastify instance is already listening. %s"),FST_ERR_PLUGIN_VERSION_MISMATCH:H("FST_ERR_PLUGIN_VERSION_MISMATCH","fastify-plugin: %s - expected '%s' fastify version, '%s' is installed"),FST_ERR_PLUGIN_NOT_PRESENT_IN_INSTANCE:H("FST_ERR_PLUGIN_NOT_PRESENT_IN_INSTANCE","The decorator '%s'%s is not present in %s"),FST_ERR_PLUGIN_CALLBACK_NOT_FN:H("FST_ERR_PLUGIN_CALLBACK_NOT_FN","fastify-plugin: %s"),FST_ERR_PLUGIN_NOT_VALID:H("FST_ERR_PLUGIN_NOT_VALID","fastify-plugin: %s"),FST_ERR_ROOT_PLG_BOOTED:H("FST_ERR_ROOT_PLG_BOOTED","fastify-plugin: %s"),FST_ERR_PARENT_PLUGIN_BOOTED:H("FST_ERR_PARENT_PLUGIN_BOOTED","fastify-plugin: %s"),FST_ERR_PLUGIN_TIMEOUT:H("FST_ERR_PLUGIN_TIMEOUT","fastify-plugin: %s")};function WM(t,e){return e.cause=t,e}Jc.exports=Ao;Jc.exports.appendStackTrace=WM;Jc.exports.AVVIO_ERRORS_MAP={AVV_ERR_CALLBACK_NOT_FN:Ao.FST_ERR_PLUGIN_CALLBACK_NOT_FN,AVV_ERR_PLUGIN_NOT_VALID:Ao.FST_ERR_PLUGIN_NOT_VALID,AVV_ERR_ROOT_PLG_BOOTED:Ao.FST_ERR_ROOT_PLG_BOOTED,AVV_ERR_PARENT_PLG_LOADED:Ao.FST_ERR_PARENT_PLUGIN_BOOTED,AVV_ERR_READY_TIMEOUT:Ao.FST_ERR_PLUGIN_TIMEOUT}});var SE=$((dfe,Gp)=>{"use strict";var XM=require("http"),QM=require("https"),ZM=require("dns"),yE=Pi(),{kState:Vr,kOptions:eV,kServerBindings:tV}=xt(),{FST_ERR_HTTP2_INVALID_VERSION:rV,FST_ERR_REOPENED_CLOSE_SERVER:vE,FST_ERR_REOPENED_SERVER:$E}=er();Gp.exports.createServer=nV;Gp.exports.compileValidateHTTPVersion=iV;function nV(t,e){let r=wE(t,e);return{server:r,listen:n};function n(s,...i){let o=i.slice(-1).pop(),a=Object.prototype.toString.call(arguments[0]);if(arguments.length===0)s=Bp([]);else if(arguments.length>0&&a!=="[object Object]"&&a!=="[object Function]")yE.emit("FSTDEP011"),s=Bp(Array.from(arguments)),o=s.cb;else if(i.length>1){yE.emit("FSTDEP011");let l=s.path?[s.path]:[s.port??0,s.host??"localhost"];Object.assign(s,Bp([...l,...i]))}else s.cb=o;let u;if(s.path==null?u=s.host??"localhost":u=s.host,Object.prototype.hasOwnProperty.call(s,"host")===!1&&(s.host=u),u==="localhost"&&(s.cb=(l,c)=>{if(l){o(l,c);return}gE.call(this,r,e,t,s,()=>{this[Vr].listening=!0,o(null,c)})}),o===void 0){let l=sV.call(this,r,s);return u==="localhost"?l.then(c=>new Promise((f,h)=>{gE.call(this,r,e,t,s,()=>{this[Vr].listening=!0,f(c)})})):l}this.ready(bE.call(this,r,s))}}function gE(t,e,r,n,s){this[Vr].listening=!1,ZM.lookup(n.host,{all:!0},(i,o)=>{if(i){s();return}let a=0,u=0,l=t.address();for(let f of o)if(f.address!==l.address){a++;let h=Object.assign({},n,{host:f.address,port:l.port,cb:m=>{u++,m||this[tV].push(d),u===a&&s()}}),d=wE(r,e),p=()=>{d.close(()=>{})};d.on("upgrade",t.emit.bind(t,"upgrade")),t.on("unref",p),t.on("close",p),t.on("error",p),bE.call(this,d,h)()}if(a===0){s();return}let c=t.unref;t.unref=function(){c.call(t),t.emit("unref")}})}function bE(t,e){let r=n=>{if(t.removeListener("error",r),n)this[Vr].listening=!1,e.cb(n,null);else{let s=EE.call(this,t);e.cb(null,s)}};return n=>{if(n!=null)return e.cb(n);if(this[Vr].listening&&this[Vr].closing)return e.cb(new vE,null);if(this[Vr].listening)return e.cb(new $E,null);t.once("error",r),t.listen(e,r),this[Vr].listening=!0}}function sV(t,e){return this[Vr].listening&&this[Vr].closing?Promise.reject(new vE):this[Vr].listening?Promise.reject(new $E):this.ready().then(()=>{let r,n=new Promise((i,o)=>{r=a=>{this[Vr].listening=!1,o(a)},t.once("error",r)}),s=new Promise((i,o)=>{t.listen(e,()=>{t.removeListener("error",r),i(EE.call(this,t))}),this[Vr].listening=!0});return Promise.race([n,s])})}function iV(t){let e=!1,r=new Map;return t.serverFactory&&(e=!0),t.http2?(r.set("2.0",!0),t.https&&t.https.allowHTTP1===!0&&(r.set("1.1",!0),r.set("1.0",!0))):(r.set("1.1",!0),r.set("1.0",!0)),function(s){return e||r.has(s)}}function wE(t,e){let r=null;return t.serverFactory?r=t.serverFactory(e,t):t.http2?(t.https?r=_E().createSecureServer(t.https,e):r=_E().createServer(e),r.on("session",aV(t.http2SessionTimeout))):(t.https?r=QM.createServer(t.https,e):r=XM.createServer(t.http,e),r.keepAliveTimeout=t.keepAliveTimeout,r.requestTimeout=t.requestTimeout,t.maxRequestsPerSocket>0&&(r.maxRequestsPerSocket=t.maxRequestsPerSocket)),t.serverFactory||r.setTimeout(t.connectionTimeout),r}function Bp(t){if(t.length===0)return{port:0,host:"localhost"};let r={cb:typeof t[t.length-1]=="function"?t.pop():void 0},n=t[0],s=t.length,i=t[s-1];return typeof n=="string"&&isNaN(n)?(r.path=n,r.backlog=s>1?i:void 0):(r.port=s>=1&&Number.isInteger(n)?n:oV(n),r.host=s>=2&&t[1]?t[1]:"localhost",r.backlog=s>=3?t[2]:void 0),r}function oV(t){let e=Number(t);return e>=0&&!Number.isNaN(e)&&Number.isInteger(e)?e:0}function EE(t){let e=t.address(),r=typeof e=="string";return r||(e.address.indexOf(":")===-1?e=e.address+":"+e.port:e="["+e.address+"]:"+e.port),e=(r?"":"http"+(this[eV].https?"s":"")+"://")+e,this.log.info("Server listening at "+e),e}function _E(){try{return require("http2")}catch{throw new rV}}function aV(t){return function(e){e.setTimeout(t,uV)}}function uV(){this.close()}});var Ti=$((hfe,IE)=>{"use strict";var lV=["onRoute","onRegister","onReady","onClose"],TE=["onTimeout","onRequest","preParsing","preValidation","preSerialization","preHandler","onSend","onResponse","onError","onRequestAbort"],OE=TE.concat(lV),{FST_ERR_HOOK_INVALID_TYPE:cV,FST_ERR_HOOK_INVALID_HANDLER:fV,FST_ERR_SEND_UNDEFINED_ERR:Yp,FST_ERR_HOOK_TIMEOUT:dV,FST_ERR_HOOK_NOT_SUPPORTED:hV,AVVIO_ERRORS_MAP:RE,appendStackTrace:PE}=er(),{kChildren:Jp,kHooks:pV}=xt();function Yc(){this.onRequest=[],this.preParsing=[],this.preValidation=[],this.preSerialization=[],this.preHandler=[],this.onResponse=[],this.onSend=[],this.onError=[],this.onRoute=[],this.onRegister=[],this.onReady=[],this.onTimeout=[],this.onRequestAbort=[]}Yc.prototype.validate=function(t,e){if(typeof t!="string")throw new cV;if(OE.indexOf(t)===-1)throw new hV(t);if(typeof e!="function")throw new fV(t,Object.prototype.toString.call(e))};Yc.prototype.add=function(t,e){this.validate(t,e),this[t].push(e)};function mV(t){let e=new Yc;return e.onRequest=t.onRequest.slice(),e.preParsing=t.preParsing.slice(),e.preValidation=t.preValidation.slice(),e.preSerialization=t.preSerialization.slice(),e.preHandler=t.preHandler.slice(),e.onSend=t.onSend.slice(),e.onResponse=t.onResponse.slice(),e.onError=t.onError.slice(),e.onRoute=t.onRoute.slice(),e.onRegister=t.onRegister.slice(),e.onTimeout=t.onTimeout.slice(),e.onRequestAbort=t.onRequestAbort.slice(),e.onReady=[],e}function NE(t,e,r,n){let s=r[pV][t],i=0,o=0;u();function a(c){if(c){c.code==="AVV_ERR_READY_TIMEOUT"?c=PE(c,new dV(t)):c=RE[c.code]!=null?PE(c,new RE[c.code](c.message)):c,n(c);return}n()}function u(c){if(c){a(c);return}if(i===s.length&&o===r[Jp].length){i===0&&o===0?a():e(function(h,d){a(h),d(h)});return}if(i===s.length&&o<r[Jp].length){let f=r[Jp][o++];NE(t,e,f,u);return}e(l(s[i++],r)),u()}function l(c,f){return function(h,d){if(h){d(h);return}if(c.length===1){try{c.call(f,d)}catch(p){d(p)}return}try{let p=c.call(f);if(p&&typeof p.then=="function"){p.then(d,d);return}}catch(p){h=p}d(h)}}}function yV(t,e,r,n,s){let i=0;function o(l){if(l||i===t.length){s(l,r,n);return}let c;try{c=e(t[i++],r,n,o)}catch(f){o(f);return}c&&typeof c.then=="function"&&c.then(a,u)}function a(){o()}function u(l){l||(l=new Yp),s(l,r,n)}o()}function gV(t,e,r,n,s){let i=0;function o(l,c){if(l){s(l,e,r,n);return}if(c!==void 0&&(n=c),i===t.length){s(null,e,r,n);return}let f;try{f=t[i++](e,r,n,o)}catch(h){o(h);return}f&&typeof f.then=="function"&&f.then(a,u)}function a(l){o(null,l)}function u(l){l||(l=new Yp),s(l,e,r,n)}o()}function _V(t,e,r,n){let s=0;function i(u){if(u||s===t.length){n(u,r);return}let l;try{l=e(t[s++],r,i)}catch(c){i(c);return}l&&typeof l.then=="function"&&l.then(o,a)}function o(){i()}function a(u){u||(u=new Yp),n(u,r)}i()}function vV(t,e,r,n){if(r.sent!==!0)return t(e,r,n)}IE.exports={Hooks:Yc,buildHooks:mV,hookRunner:yV,onSendHookRunner:gV,onRequestAbortHookRunner:_V,hookIterator:vV,hookRunnerApplication:NE,lifecycleHooks:TE,supportedHooks:OE}});var Zp=$((pfe,AE)=>{"use strict";var{kSchemaHeaders:Qc,kSchemaParams:Wp,kSchemaQuerystring:Xp,kSchemaBody:Qp,kSchemaResponse:CE}=xt(),$V=/^[1-5]{1}[0-9]{2}$|^[1-5]xx$|^default$/,{FST_ERR_SCH_RESPONSE_SCHEMA_NOT_NESTED_2XX:bV}=er();function wV(t,e){if(!t.schema||!t.schema.response)return;let{method:r,url:n}=t.config||{};t[CE]=Object.keys(t.schema.response).reduce(function(s,i){let o=t.schema.response[i];if(i=i.toLowerCase(),!$V.exec(i))throw new bV;if(o.content){let a={};for(let u of Object.keys(o.content)){let l=o.content[u].schema;a[u]=e({schema:l,url:n,method:r,httpStatus:i,contentType:u})}s[i]=a}else s[i]=e({schema:o,url:n,method:r,httpStatus:i});return s},{})}function EV(t,e,r){let{schema:n}=t;if(!n)return;let{method:s,url:i}=t.config||{},o=n.headers;if(o&&(r||Object.getPrototypeOf(o)!==Object.prototype))t[Qc]=e({schema:o,method:s,url:i,httpPart:"headers"});else if(o){let a={};Object.keys(o).forEach(u=>{a[u]=o[u]}),a.required instanceof Array&&(a.required=a.required.map(u=>u.toLowerCase())),o.properties&&(a.properties={},Object.keys(o.properties).forEach(u=>{a.properties[u.toLowerCase()]=o.properties[u]})),t[Qc]=e({schema:a,method:s,url:i,httpPart:"headers"})}else if(Object.hasOwnProperty.call(n,"headers"))throw new Error("headers schema is undefined");if(n.body)t[Qp]=e({schema:n.body,method:s,url:i,httpPart:"body"});else if(Object.hasOwnProperty.call(n,"body"))throw new Error("body schema is undefined");if(n.querystring)t[Xp]=e({schema:n.querystring,method:s,url:i,httpPart:"querystring"});else if(Object.hasOwnProperty.call(n,"querystring"))throw new Error("querystring schema is undefined");if(n.params)t[Wp]=e({schema:n.params,method:s,url:i,httpPart:"params"});else if(Object.hasOwnProperty.call(n,"params"))throw new Error("params schema is undefined")}function Wc(t,e,r){let n=e[r]===void 0,s=t&&t(n?null:e[r]);return s===!1?t.errors:s&&s.error?s.error:(s&&s.value&&(e[r]=s.value),!1)}function SV(t,e){let r=Wc(t[Wp],e,"params");if(r)return Xc(r,"params",t.schemaErrorFormatter);let n=Wc(t[Qp],e,"body");if(n)return Xc(n,"body",t.schemaErrorFormatter);let s=Wc(t[Xp],e,"query");if(s)return Xc(s,"querystring",t.schemaErrorFormatter);let i=Wc(t[Qc],e,"headers");return i?Xc(i,"headers",t.schemaErrorFormatter):null}function Xc(t,e,r){if(t instanceof Error)return t.statusCode=t.statusCode||400,t.validationContext=t.validationContext||e,t;let n=r(t,e);return n.statusCode=n.statusCode||400,n.validation=t,n.validationContext=e,n}AE.exports={symbols:{bodySchema:Qp,querystringSchema:Xp,responseSchema:CE,paramsSchema:Wp,headersSchema:Qc},compileSchemasForValidation:EV,compileSchemasForSerialization:wV,validate:SV}});var em=$((mfe,qE)=>{"use strict";var{kReplyIsError:kE,kReplyHijacked:RV}=xt();function PV(t,e){t.then(function(r){if(e[RV]!==!0&&(r!==void 0||e.sent===!1&&e.raw.headersSent===!1&&e.request.raw.aborted===!1))try{e.send(r)}catch(n){e[kE]=!0,e.send(n)}},function(r){if(e.sent===!0){e.log.error({err:r},"Promise errored, but reply.sent = true was set");return}e[kE]=!0;try{e.send(r)}catch(n){e.send(n)}})}qE.exports=PV});var sm=$((yfe,nm)=>{"use strict";var{validate:TV}=Zp(),{hookRunner:jE,hookIterator:DE}=Ti(),OV=em(),{kReplyIsError:Zc,kRouteContext:Ds}=xt();function NV(t,e,r){if(r.sent===!0)return;if(t!=null){r[Zc]=!0,r.send(t);return}let n=e.raw.method,s=e.headers,i=e[Ds];if(n==="GET"||n==="HEAD"){js(e,r);return}let o=s["content-type"];if(n==="POST"||n==="PUT"||n==="PATCH"||n==="TRACE"||n==="SEARCH"){o===void 0?s["transfer-encoding"]===void 0&&(s["content-length"]==="0"||s["content-length"]===void 0)?js(e,r):i.contentTypeParser.run("",js,e,r):i.contentTypeParser.run(o,js,e,r);return}if(n==="OPTIONS"||n==="DELETE"){o!==void 0&&(s["transfer-encoding"]!==void 0||s["content-length"]!==void 0)?i.contentTypeParser.run(o,js,e,r):js(e,r);return}js(e,r)}function js(t,e){try{t[Ds].preValidation!==null?jE(t[Ds].preValidation,DE,t,e,tm):tm(null,t,e)}catch(r){tm(r,t,e)}}function tm(t,e,r){if(r.sent===!0)return;if(t!=null){r[Zc]=!0,r.send(t);return}let n=TV(r[Ds],e);if(n){if(r[Ds].attachValidation===!1){r.send(n);return}r.request.validationError=n}e[Ds].preHandler!==null?jE(e[Ds].preHandler,DE,e,r,rm):rm(null,e,r)}function rm(t,e,r){if(r.sent)return;if(t!=null){r[Zc]=!0,r.send(t);return}let n;try{n=e[Ds].handler(e,r)}catch(s){r[Zc]=!0,r.send(s);return}n!==void 0&&(n!==null&&typeof n.then=="function"?OV(n,r):r.send(n))}nm.exports=NV;nm.exports[Symbol.for("internals")]={handler:js,preHandlerCallback:rm}});var xE=$((gfe,LE)=>{"use strict";function ko(){}var IV={fatal:ko,error:ko,warn:ko,info:ko,debug:ko,trace:ko};Object.defineProperty(LE,"exports",{get(){return Object.create(IV)}})});var om=$((_fe,VE)=>{"use strict";var iu=t=>t&&typeof t.message=="string",im=t=>{if(!t)return;let e=t.cause;if(typeof e=="function"){let r=t.cause();return iu(r)?r:void 0}else return iu(e)?e:void 0},FE=(t,e)=>{if(!iu(t))return"";let r=t.stack||"";if(e.has(t))return r+`
causes have become circular...`;let n=im(t);return n?(e.add(t),r+`
caused by: `+FE(n,e)):r},CV=t=>FE(t,new Set),ME=(t,e,r)=>{if(!iu(t))return"";let n=r?"":t.message||"";if(e.has(t))return n+": ...";let s=im(t);if(s){e.add(t);let i=typeof t.cause=="function";return n+(i?"":": ")+ME(s,e,i)}else return n},AV=t=>ME(t,new Set);VE.exports={isErrorLike:iu,getErrorCause:im,stackWithCauses:CV,messageWithCauses:AV}});var am=$((vfe,UE)=>{"use strict";var kV=Symbol("circular-ref-tag"),ef=Symbol("pino-raw-err-ref"),zE=Object.create({},{type:{enumerable:!0,writable:!0,value:void 0},message:{enumerable:!0,writable:!0,value:void 0},stack:{enumerable:!0,writable:!0,value:void 0},aggregateErrors:{enumerable:!0,writable:!0,value:void 0},raw:{enumerable:!1,get:function(){return this[ef]},set:function(t){this[ef]=t}}});Object.defineProperty(zE,ef,{writable:!0,value:{}});UE.exports={pinoErrProto:zE,pinoErrorSymbols:{seen:kV,rawSymbol:ef}}});var BE=$(($fe,KE)=>{"use strict";KE.exports=lm;var{messageWithCauses:qV,stackWithCauses:jV,isErrorLike:HE}=om(),{pinoErrProto:DV,pinoErrorSymbols:LV}=am(),{seen:um}=LV,{toString:xV}=Object.prototype;function lm(t){if(!HE(t))return t;t[um]=void 0;let e=Object.create(DV);e.type=xV.call(t.constructor)==="[object Function]"?t.constructor.name:t.name,e.message=qV(t),e.stack=jV(t),Array.isArray(t.errors)&&(e.aggregateErrors=t.errors.map(r=>lm(r)));for(let r in t)if(e[r]===void 0){let n=t[r];HE(n)?r!=="cause"&&!Object.prototype.hasOwnProperty.call(n,um)&&(e[r]=lm(n)):e[r]=n}return delete t[um],e.raw=t,e}});var JE=$((bfe,GE)=>{"use strict";GE.exports=rf;var{isErrorLike:cm}=om(),{pinoErrProto:FV,pinoErrorSymbols:MV}=am(),{seen:tf}=MV,{toString:VV}=Object.prototype;function rf(t){if(!cm(t))return t;t[tf]=void 0;let e=Object.create(FV);e.type=VV.call(t.constructor)==="[object Function]"?t.constructor.name:t.name,e.message=t.message,e.stack=t.stack,Array.isArray(t.errors)&&(e.aggregateErrors=t.errors.map(r=>rf(r))),cm(t.cause)&&!Object.prototype.hasOwnProperty.call(t.cause,tf)&&(e.cause=rf(t.cause));for(let r in t)if(e[r]===void 0){let n=t[r];cm(n)?Object.prototype.hasOwnProperty.call(n,tf)||(e[r]=rf(n)):e[r]=n}return delete t[tf],e.raw=t,e}});var QE=$((wfe,XE)=>{"use strict";XE.exports={mapHttpRequest:zV,reqSerializer:WE};var fm=Symbol("pino-raw-req-ref"),YE=Object.create({},{id:{enumerable:!0,writable:!0,value:""},method:{enumerable:!0,writable:!0,value:""},url:{enumerable:!0,writable:!0,value:""},query:{enumerable:!0,writable:!0,value:""},params:{enumerable:!0,writable:!0,value:""},headers:{enumerable:!0,writable:!0,value:{}},remoteAddress:{enumerable:!0,writable:!0,value:""},remotePort:{enumerable:!0,writable:!0,value:""},raw:{enumerable:!1,get:function(){return this[fm]},set:function(t){this[fm]=t}}});Object.defineProperty(YE,fm,{writable:!0,value:{}});function WE(t){let e=t.info||t.socket,r=Object.create(YE);if(r.id=typeof t.id=="function"?t.id():t.id||(t.info?t.info.id:void 0),r.method=t.method,t.originalUrl)r.url=t.originalUrl;else{let n=t.path;r.url=typeof n=="string"?n:t.url?t.url.path||t.url:void 0}return t.query&&(r.query=t.query),t.params&&(r.params=t.params),r.headers=t.headers,r.remoteAddress=e&&e.remoteAddress,r.remotePort=e&&e.remotePort,r.raw=t.raw||t,r}function zV(t){return{req:WE(t)}}});var rS=$((Efe,tS)=>{"use strict";tS.exports={mapHttpResponse:UV,resSerializer:eS};var dm=Symbol("pino-raw-res-ref"),ZE=Object.create({},{statusCode:{enumerable:!0,writable:!0,value:0},headers:{enumerable:!0,writable:!0,value:""},raw:{enumerable:!1,get:function(){return this[dm]},set:function(t){this[dm]=t}}});Object.defineProperty(ZE,dm,{writable:!0,value:{}});function eS(t){let e=Object.create(ZE);return e.statusCode=t.headersSent?t.statusCode:null,e.headers=t.getHeaders?t.getHeaders():t._headers,e.raw=t,e}function UV(t){return{res:eS(t)}}});var pm=$((Sfe,nS)=>{"use strict";var hm=BE(),HV=JE(),nf=QE(),sf=rS();nS.exports={err:hm,errWithCause:HV,mapHttpRequest:nf.mapHttpRequest,mapHttpResponse:sf.mapHttpResponse,req:nf.reqSerializer,res:sf.resSerializer,wrapErrorSerializer:function(e){return e===hm?e:function(n){return e(hm(n))}},wrapRequestSerializer:function(e){return e===nf.reqSerializer?e:function(n){return e(nf.reqSerializer(n))}},wrapResponseSerializer:function(e){return e===sf.resSerializer?e:function(n){return e(sf.resSerializer(n))}}}});var mm=$((Rfe,sS)=>{"use strict";function KV(t,e){return e}sS.exports=function(){let e=Error.prepareStackTrace;Error.prepareStackTrace=KV;let r=new Error().stack;if(Error.prepareStackTrace=e,!Array.isArray(r))return;let n=r.slice(2),s=[];for(let i of n)i&&s.push(i.getFileName());return s}});var oS=$((Pfe,iS)=>{"use strict";var{createContext:BV,runInContext:GV}=require("vm");iS.exports=JV;function JV(t={}){let{ERR_PATHS_MUST_BE_STRINGS:e=()=>"fast-redact - Paths must be (non-empty) strings",ERR_INVALID_PATH:r=n=>`fast-redact \u2013 Invalid path (${n})`}=t;return function({paths:s}){s.forEach(i=>{if(typeof i!="string")throw Error(e());try{if(//.test(i))throw Error();let o=new Proxy({},{get:()=>o,set:()=>{throw Error()}}),a=(i[0]==="["?"":".")+i.replace(/^\*/,"\u3007").replace(/\.\*/g,".\u3007").replace(/\[\*\]/g,"[\u3007]");if(/\n|\r|;/.test(a)||/\/\*/.test(a))throw Error();GV(`
          (function () {
            'use strict'
            o${a}
            if ([o${a}].length !== 1) throw Error()
          })()
        `,BV({o,"\u3007":null}),{codeGeneration:{strings:!1,wasm:!1}})}catch{throw Error(r(i))}})}}});var of=$((Tfe,aS)=>{"use strict";aS.exports=/[^.[\]]+|\[((?:.)*?)\]/g});var lS=$((Ofe,uS)=>{"use strict";var YV=of();uS.exports=WV;function WV({paths:t}){let e=[];var r=0;let n=t.reduce(function(s,i,o){var a=i.match(YV).map(c=>c.replace(/'|"|`/g,""));let u=i[0]==="[";a=a.map(c=>c[0]==="["?c.substr(1,c.length-2):c);let l=a.indexOf("*");if(l>-1){let c=a.slice(0,l),f=c.join("."),h=a.slice(l+1,a.length),d=h.length>0;r++,e.push({before:c,beforeStr:f,after:h,nested:d})}else s[i]={path:a,val:void 0,precensored:!1,circle:"",escPath:JSON.stringify(i),leadingBracket:u};return s},{});return{wildcards:e,wcLen:r,secret:n}}});var fS=$((Nfe,cS)=>{"use strict";var XV=of();cS.exports=QV;function QV({secret:t,serialize:e,wcLen:r,strict:n,isCensorFct:s,censorFctTakesPath:i},o){let a=Function("o",`
    if (typeof o !== 'object' || o == null) {
      ${r2(n,e)}
    }
    const { censor, secret } = this
    ${ZV(t,s,i)}
    this.compileRestore()
    ${e2(r>0,s,i)}
    ${t2(e)}
  `).bind(o);return e===!1&&(a.restore=u=>o.restore(u)),a}function ZV(t,e,r){return Object.keys(t).map(n=>{let{escPath:s,leadingBracket:i,path:o}=t[n],a=i?1:0,u=i?"":".",l=[];for(var c;(c=XV.exec(n))!==null;){let[,p]=c,{index:m,input:v}=c;m>a&&l.push(v.substring(0,m-(p?0:1)))}var f=l.map(p=>`o${u}${p}`).join(" && ");f.length===0?f+=`o${u}${n} != null`:f+=` && o${u}${n} != null`;let h=`
      switch (true) {
        ${l.reverse().map(p=>`
          case o${u}${p} === censor:
            secret[${s}].circle = ${JSON.stringify(p)}
            break
        `).join(`
`)}
      }
    `,d=r?`val, ${JSON.stringify(o)}`:"val";return`
      if (${f}) {
        const val = o${u}${n}
        if (val === censor) {
          secret[${s}].precensored = true
        } else {
          secret[${s}].val = val
          o${u}${n} = ${e?`censor(${d})`:"censor"}
          ${h}
        }
      }
    `}).join(`
`)}function e2(t,e,r){return t===!0?`
    {
      const { wildcards, wcLen, groupRedact, nestedRedact } = this
      for (var i = 0; i < wcLen; i++) {
        const { before, beforeStr, after, nested } = wildcards[i]
        if (nested === true) {
          secret[beforeStr] = secret[beforeStr] || []
          nestedRedact(secret[beforeStr], o, before, after, censor, ${e}, ${r})
        } else secret[beforeStr] = groupRedact(o, before, censor, ${e}, ${r})
      }
    }
  `:""}function t2(t){return t===!1?"return o":`
    var s = this.serialize(o)
    this.restore(o)
    return s
  `}function r2(t,e){return t===!0?"throw Error('fast-redact: primitives cannot be redacted')":e===!1?"return o":"return this.serialize(o)"}});var ym=$((Ife,hS)=>{"use strict";hS.exports={groupRedact:s2,groupRestore:n2,nestedRedact:o2,nestedRestore:i2};function n2({keys:t,values:e,target:r}){if(r==null)return;let n=t.length;for(var s=0;s<n;s++){let i=t[s];r[i]=e[s]}}function s2(t,e,r,n,s){let i=dS(t,e);if(i==null)return{keys:null,values:null,target:null,flat:!0};let o=Object.keys(i),a=o.length,u=e.length,l=s?[...e]:void 0,c=new Array(a);for(var f=0;f<a;f++){let h=o[f];c[f]=i[h],s?(l[u]=h,i[h]=r(i[h],l)):n?i[h]=r(i[h]):i[h]=r}return{keys:o,values:c,target:i,flat:!0}}function i2(t){let e=t.length;for(var r=0;r<e;r++){let{key:s,target:i,value:o}=t[r];if(af(i,s)&&(i[s]=o),typeof i=="object"){let a=Object.keys(i);for(var n=0;n<a.length;n++){let u=a[n],l=i[u];af(l,s)&&(l[s]=o)}}}}function o2(t,e,r,n,s,i,o){let a=dS(e,r);if(a==null)return;let u=Object.keys(a),l=u.length;for(var c=0;c<l;c++){let f=u[c],{value:h,parent:d,exists:p}=a2(a,f,r,n,s,i,o);p===!0&&d!==null&&t.push({key:n[n.length-1],target:d,value:h})}return t}function af(t,e){return t!=null?"hasOwn"in Object?Object.hasOwn(t,e):Object.prototype.hasOwnProperty.call(t,e):!1}function a2(t,e,r,n,s,i,o){let a=n.length,u=a-1,l=e;var c=-1,f,h,d,p=null,m=!0,v=null;if(d=f=t[e],typeof f!="object")return{value:null,parent:null,exists:m};for(;f!=null&&++c<a;){if(e=n[c],p=d,e!=="*"&&!v&&!(typeof f=="object"&&e in f)){m=!1;break}if(!(e==="*"&&(v=e,c!==u))){if(v){let w=Object.keys(f);for(var g=0;g<w.length;g++){let _=w[g],y=f[_],b=e==="*";(b||typeof y=="object"&&y!==null&&e in y)&&(b?d=y:d=y[e],h=c!==u?d:i?o?s(d,[...r,l,...n]):s(d):s,b?f[_]=h:y[e]===h?m=!1:y[e]=h===void 0&&s!==void 0||af(y,e)&&h===d?y[e]:h)}v=null}else d=f[e],h=c!==u?d:i?o?s(d,[...r,l,...n]):s(d):s,f[e]=af(f,e)&&h===d||h===void 0&&s!==void 0?f[e]:h,f=f[e];if(typeof f!="object")break;d===p&&(m=!1)}}return{value:d,parent:p,exists:m}}function dS(t,e){for(var r=-1,n=e.length,s=t;s!=null&&++r<n;)s=s[e[r]];return s}});var mS=$((Cfe,pS)=>{"use strict";var{groupRestore:u2,nestedRestore:l2}=ym();pS.exports=c2;function c2({secret:t,wcLen:e}){return function(){if(this.restore)return;let n=Object.keys(t),s=f2(t,n),i=e>0,o=i?{secret:t,groupRestore:u2,nestedRestore:l2}:{secret:t};this.restore=Function("o",d2(s,n,i)).bind(o)}}function f2(t,e){return e.map(r=>{let{circle:n,escPath:s,leadingBracket:i}=t[r],a=n?`o.${n} = secret[${s}].val`:`o${i?"":"."}${r} = secret[${s}].val`,u=`secret[${s}].val = undefined`;return`
      if (secret[${s}].val !== undefined) {
        try { ${a} } catch (e) {}
        ${u}
      }
    `}).join("")}function d2(t,e,r){return`
    const secret = this.secret
    ${r===!0?`
    const keys = Object.keys(secret)
    const len = keys.length
    for (var i = len - 1; i >= ${e.length}; i--) {
      const k = keys[i]
      const o = secret[k]
      if (o.flat === true) this.groupRestore(o)
      else this.nestedRestore(o)
      secret[k] = null
    }
  `:""}
    ${t}
    return o
  `}});var gS=$((Afe,yS)=>{"use strict";yS.exports=h2;function h2(t){let{secret:e,censor:r,compileRestore:n,serialize:s,groupRedact:i,nestedRedact:o,wildcards:a,wcLen:u}=t,l=[{secret:e,censor:r,compileRestore:n}];return s!==!1&&l.push({serialize:s}),u>0&&l.push({groupRedact:i,nestedRedact:o,wildcards:a,wcLen:u}),Object.assign(...l)}});var $S=$((kfe,vS)=>{"use strict";var _S=oS(),p2=lS(),m2=fS(),y2=mS(),{groupRedact:g2,nestedRedact:_2}=ym(),v2=gS(),$2=of(),b2=_S(),gm=t=>t;gm.restore=gm;var w2="[REDACTED]";_m.rx=$2;_m.validator=_S;vS.exports=_m;function _m(t={}){let e=Array.from(new Set(t.paths||[])),r="serialize"in t&&(t.serialize===!1||typeof t.serialize=="function")?t.serialize:JSON.stringify,n=t.remove;if(n===!0&&r!==JSON.stringify)throw Error("fast-redact \u2013 remove option may only be set when serializer is JSON.stringify");let s=n===!0?void 0:"censor"in t?t.censor:w2,i=typeof s=="function",o=i&&s.length>1;if(e.length===0)return r||gm;b2({paths:e,serialize:r,censor:s});let{wildcards:a,wcLen:u,secret:l}=p2({paths:e,censor:s}),c=y2({secret:l,wcLen:u}),f="strict"in t?t.strict:!0;return m2({secret:l,wcLen:u,serialize:r,strict:f,isCensorFct:i,censorFctTakesPath:o},v2({secret:l,censor:s,compileRestore:c,serialize:r,groupRedact:g2,nestedRedact:_2,wildcards:a,wcLen:u}))}});var qo=$((qfe,bS)=>{"use strict";var E2=Symbol("pino.setLevel"),S2=Symbol("pino.getLevel"),R2=Symbol("pino.levelVal"),P2=Symbol("pino.useLevelLabels"),T2=Symbol("pino.useOnlyCustomLevels"),O2=Symbol("pino.mixin"),N2=Symbol("pino.lsCache"),I2=Symbol("pino.chindings"),C2=Symbol("pino.asJson"),A2=Symbol("pino.write"),k2=Symbol("pino.redactFmt"),q2=Symbol("pino.time"),j2=Symbol("pino.timeSliceIndex"),D2=Symbol("pino.stream"),L2=Symbol("pino.stringify"),x2=Symbol("pino.stringifySafe"),F2=Symbol("pino.stringifiers"),M2=Symbol("pino.end"),V2=Symbol("pino.formatOpts"),z2=Symbol("pino.messageKey"),U2=Symbol("pino.errorKey"),H2=Symbol("pino.nestedKey"),K2=Symbol("pino.nestedKeyStr"),B2=Symbol("pino.mixinMergeStrategy"),G2=Symbol("pino.msgPrefix"),J2=Symbol("pino.wildcardFirst"),Y2=Symbol.for("pino.serializers"),W2=Symbol.for("pino.formatters"),X2=Symbol.for("pino.hooks"),Q2=Symbol.for("pino.metadata");bS.exports={setLevelSym:E2,getLevelSym:S2,levelValSym:R2,useLevelLabelsSym:P2,mixinSym:O2,lsCacheSym:N2,chindingsSym:I2,asJsonSym:C2,writeSym:A2,serializersSym:Y2,redactFmtSym:k2,timeSym:q2,timeSliceIndexSym:j2,streamSym:D2,stringifySym:L2,stringifySafeSym:x2,stringifiersSym:F2,endSym:M2,formatOptsSym:V2,messageKeySym:z2,errorKeySym:U2,nestedKeySym:H2,wildcardFirstSym:J2,needsMetadataGsym:Q2,useOnlyCustomLevelsSym:T2,formattersSym:W2,hooksSym:X2,nestedKeyStrSym:K2,mixinMergeStrategySym:B2,msgPrefixSym:G2}});var bm=$((jfe,RS)=>{"use strict";var $m=$S(),{redactFmtSym:Z2,wildcardFirstSym:uf}=qo(),{rx:vm,validator:ez}=$m,wS=ez({ERR_PATHS_MUST_BE_STRINGS:()=>"pino \u2013 redacted paths must be strings",ERR_INVALID_PATH:t=>`pino \u2013 redact paths array contains an invalid path (${t})`}),ES="[Redacted]",SS=!1;function tz(t,e){let{paths:r,censor:n}=rz(t),s=r.reduce((a,u)=>{vm.lastIndex=0;let l=vm.exec(u),c=vm.exec(u),f=l[1]!==void 0?l[1].replace(/^(?:"|'|`)(.*)(?:"|'|`)$/,"$1"):l[0];if(f==="*"&&(f=uf),c===null)return a[f]=null,a;if(a[f]===null)return a;let{index:h}=c,d=`${u.substr(h,u.length-1)}`;return a[f]=a[f]||[],f!==uf&&a[f].length===0&&a[f].push(...a[uf]||[]),f===uf&&Object.keys(a).forEach(function(p){a[p]&&a[p].push(d)}),a[f].push(d),a},{}),i={[Z2]:$m({paths:r,censor:n,serialize:e,strict:SS})},o=(...a)=>e(typeof n=="function"?n(...a):n);return[...Object.keys(s),...Object.getOwnPropertySymbols(s)].reduce((a,u)=>{if(s[u]===null)a[u]=l=>o(l,[u]);else{let l=typeof n=="function"?(c,f)=>n(c,[u,...f]):n;a[u]=$m({paths:s[u],censor:l,serialize:e,strict:SS})}return a},i)}function rz(t){if(Array.isArray(t))return t={paths:t,censor:ES},wS(t),t;let{paths:e,censor:r=ES,remove:n}=t;if(Array.isArray(e)===!1)throw Error("pino \u2013 redact must contain an array of strings");return n===!0&&(r=void 0),wS({paths:e,censor:r}),{paths:e,censor:r}}RS.exports=tz});var TS=$((Dfe,PS)=>{"use strict";var nz=()=>"",sz=()=>`,"time":${Date.now()}`,iz=()=>`,"time":${Math.round(Date.now()/1e3)}`,oz=()=>`,"time":"${new Date(Date.now()).toISOString()}"`;PS.exports={nullTime:nz,epochTime:sz,unixTime:iz,isoTime:oz}});var NS=$((Lfe,OS)=>{"use strict";function az(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}OS.exports=uz;function uz(t,e,r){var n=r&&r.stringify||az,s=1;if(typeof t=="object"&&t!==null){var i=e.length+s;if(i===1)return t;var o=new Array(i);o[0]=n(t);for(var a=1;a<i;a++)o[a]=n(e[a]);return o.join(" ")}if(typeof t!="string")return t;var u=e.length;if(u===0)return t;for(var l="",c=1-s,f=-1,h=t&&t.length||0,d=0;d<h;){if(t.charCodeAt(d)===37&&d+1<h){switch(f=f>-1?f:0,t.charCodeAt(d+1)){case 100:case 102:if(c>=u||e[c]==null)break;f<d&&(l+=t.slice(f,d)),l+=Number(e[c]),f=d+2,d++;break;case 105:if(c>=u||e[c]==null)break;f<d&&(l+=t.slice(f,d)),l+=Math.floor(Number(e[c])),f=d+2,d++;break;case 79:case 111:case 106:if(c>=u||e[c]===void 0)break;f<d&&(l+=t.slice(f,d));var p=typeof e[c];if(p==="string"){l+="'"+e[c]+"'",f=d+2,d++;break}if(p==="function"){l+=e[c].name||"<anonymous>",f=d+2,d++;break}l+=n(e[c]),f=d+2,d++;break;case 115:if(c>=u)break;f<d&&(l+=t.slice(f,d)),l+=String(e[c]),f=d+2,d++;break;case 37:f<d&&(l+=t.slice(f,d)),l+="%",f=d+2,d++,c--;break}++c}++d}return f===-1?t:(f<h&&(l+=t.slice(f)),l)}});var Em=$((xfe,wm)=>{"use strict";if(typeof SharedArrayBuffer<"u"&&typeof Atomics<"u"){let e=function(r){if((r>0&&r<1/0)===!1)throw typeof r!="number"&&typeof r!="bigint"?TypeError("sleep: ms must be a number"):RangeError("sleep: ms must be a number that is greater than 0 but less than Infinity");Atomics.wait(t,0,0,Number(r))},t=new Int32Array(new SharedArrayBuffer(4));wm.exports=e}else{let t=function(e){if((e>0&&e<1/0)===!1)throw typeof e!="number"&&typeof e!="bigint"?TypeError("sleep: ms must be a number"):RangeError("sleep: ms must be a number that is greater than 0 but less than Infinity");let n=Date.now()+Number(e);for(;n>Date.now(););};wm.exports=t}});var qS=$((Ffe,kS)=>{"use strict";var br=require("fs"),lz=require("events"),cz=require("util").inherits,IS=require("path"),CS=Em(),Sm=100,fz=16*1024;function AS(t,e){e._opening=!0,e._writing=!0,e._asyncDrainScheduled=!1;function r(i,o){if(i){e._reopening=!1,e._writing=!1,e._opening=!1,e.sync?process.nextTick(()=>{e.listenerCount("error")>0&&e.emit("error",i)}):e.emit("error",i);return}e.fd=o,e.file=t,e._reopening=!1,e._opening=!1,e._writing=!1,e.sync?process.nextTick(()=>e.emit("ready")):e.emit("ready"),!e._reopening&&!e._writing&&e._len>e.minLength&&!e.destroyed&&jo(e)}let n=e.append?"a":"w",s=e.mode;if(e.sync)try{e.mkdir&&br.mkdirSync(IS.dirname(t),{recursive:!0});let i=br.openSync(t,n,s);r(null,i)}catch(i){throw r(i),i}else e.mkdir?br.mkdir(IS.dirname(t),{recursive:!0},i=>{if(i)return r(i);br.open(t,n,s,r)}):br.open(t,n,s,r)}function wr(t){if(!(this instanceof wr))return new wr(t);let{fd:e,dest:r,minLength:n,maxLength:s,maxWrite:i,sync:o,append:a=!0,mode:u,mkdir:l,retryEAGAIN:c,fsync:f}=t||{};if(e=e||r,this._bufs=[],this._len=0,this.fd=-1,this._writing=!1,this._writingBuf="",this._ending=!1,this._reopening=!1,this._asyncDrainScheduled=!1,this._hwm=Math.max(n||0,16387),this.file=null,this.destroyed=!1,this.minLength=n||0,this.maxLength=s||0,this.maxWrite=i||fz,this.sync=o||!1,this._fsync=f||!1,this.append=a||!1,this.mode=u,this.retryEAGAIN=c||(()=>!0),this.mkdir=l||!1,typeof e=="number")this.fd=e,process.nextTick(()=>this.emit("ready"));else if(typeof e=="string")AS(e,this);else throw new Error("SonicBoom supports only file descriptors and files");if(this.minLength>=this.maxWrite)throw new Error(`minLength should be smaller than maxWrite (${this.maxWrite})`);this.release=(h,d)=>{if(h){if((h.code==="EAGAIN"||h.code==="EBUSY")&&this.retryEAGAIN(h,this._writingBuf.length,this._len-this._writingBuf.length))if(this.sync)try{CS(Sm),this.release(void 0,0)}catch(m){this.release(m)}else setTimeout(()=>{br.write(this.fd,this._writingBuf,"utf8",this.release)},Sm);else this._writing=!1,this.emit("error",h);return}if(this.emit("write",d),this._len-=d,this._len<0&&(this._len=0),this._writingBuf=this._writingBuf.slice(d),this._writingBuf.length){if(!this.sync){br.write(this.fd,this._writingBuf,"utf8",this.release);return}try{do{let m=br.writeSync(this.fd,this._writingBuf,"utf8");this._len-=m,this._writingBuf=this._writingBuf.slice(m)}while(this._writingBuf)}catch(m){this.release(m);return}}this._fsync&&br.fsyncSync(this.fd);let p=this._len;this._reopening?(this._writing=!1,this._reopening=!1,this.reopen()):p>this.minLength?jo(this):this._ending?p>0?jo(this):(this._writing=!1,lf(this)):(this._writing=!1,this.sync?this._asyncDrainScheduled||(this._asyncDrainScheduled=!0,process.nextTick(dz,this)):this.emit("drain"))},this.on("newListener",function(h){h==="drain"&&(this._asyncDrainScheduled=!1)})}function dz(t){t.listenerCount("drain")>0&&(t._asyncDrainScheduled=!1,t.emit("drain"))}cz(wr,lz);wr.prototype.write=function(t){if(this.destroyed)throw new Error("SonicBoom destroyed");let e=this._len+t.length,r=this._bufs;return this.maxLength&&e>this.maxLength?(this.emit("drop",t),this._len<this._hwm):(r.length===0||r[r.length-1].length+t.length>this.maxWrite?r.push(""+t):r[r.length-1]+=t,this._len=e,!this._writing&&this._len>=this.minLength&&jo(this),this._len<this._hwm)};wr.prototype.flush=function(){if(this.destroyed)throw new Error("SonicBoom destroyed");this._writing||this.minLength<=0||(this._bufs.length===0&&this._bufs.push(""),jo(this))};wr.prototype.reopen=function(t){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this._opening){this.once("ready",()=>{this.reopen(t)});return}if(this._ending)return;if(!this.file)throw new Error("Unable to reopen a file descriptor, you must pass a file to SonicBoom");if(this._reopening=!0,this._writing)return;let e=this.fd;this.once("ready",()=>{e!==this.fd&&br.close(e,r=>{if(r)return this.emit("error",r)})}),AS(t||this.file,this)};wr.prototype.end=function(){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this._opening){this.once("ready",()=>{this.end()});return}this._ending||(this._ending=!0,!this._writing&&(this._len>0&&this.fd>=0?jo(this):lf(this)))};wr.prototype.flushSync=function(){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this.fd<0)throw new Error("sonic boom is not ready yet");!this._writing&&this._writingBuf.length>0&&(this._bufs.unshift(this._writingBuf),this._writingBuf="");let t="";for(;this._bufs.length||t.length;){t.length<=0&&(t=this._bufs[0]);try{let e=br.writeSync(this.fd,t,"utf8");t=t.slice(e),this._len=Math.max(this._len-e,0),t.length<=0&&this._bufs.shift()}catch(e){if((e.code==="EAGAIN"||e.code==="EBUSY")&&!this.retryEAGAIN(e,t.length,this._len-t.length))throw e;CS(Sm)}}};wr.prototype.destroy=function(){this.destroyed||lf(this)};function jo(t){let e=t.release;if(t._writing=!0,t._writingBuf=t._writingBuf||t._bufs.shift()||"",t.sync)try{let r=br.writeSync(t.fd,t._writingBuf,"utf8");e(null,r)}catch(r){e(r)}else br.write(t.fd,t._writingBuf,"utf8",e)}function lf(t){if(t.fd===-1){t.once("ready",lf.bind(null,t));return}t.destroyed=!0,t._bufs=[],t.fd!==1&&t.fd!==2?br.close(t.fd,e):setImmediate(e);function e(r){if(r){t.emit("error",r);return}t._ending&&!t._writing&&t.emit("finish"),t.emit("close")}}wr.SonicBoom=wr;wr.default=wr;kS.exports=wr});var Rm=$((Mfe,MS)=>{"use strict";var Ls={exit:[],beforeExit:[]},jS={exit:pz,beforeExit:mz},DS=new FinalizationRegistry(yz);function hz(t){Ls[t].length>0||process.on(t,jS[t])}function LS(t){Ls[t].length>0||process.removeListener(t,jS[t])}function pz(){xS("exit")}function mz(){xS("beforeExit")}function xS(t){for(let e of Ls[t]){let r=e.deref(),n=e.fn;r!==void 0&&n(r,t)}}function yz(t){for(let e of["exit","beforeExit"]){let r=Ls[e].indexOf(t);Ls[e].splice(r,r+1),LS(e)}}function FS(t,e,r){if(e===void 0)throw new Error("the object can't be undefined");hz(t);let n=new WeakRef(e);n.fn=r,DS.register(e,n),Ls[t].push(n)}function gz(t,e){FS("exit",t,e)}function _z(t,e){FS("beforeExit",t,e)}function vz(t){DS.unregister(t);for(let e of["exit","beforeExit"])Ls[e]=Ls[e].filter(r=>{let n=r.deref();return n&&n!==t}),LS(e)}MS.exports={register:gz,registerBeforeExit:_z,unregister:vz}});var VS=$((Vfe,$z)=>{$z.exports={name:"thread-stream",version:"2.3.0",description:"A streaming way to send data to a Node.js Worker Thread",main:"index.js",types:"index.d.ts",dependencies:{"real-require":"^0.2.0"},devDependencies:{"@types/node":"^18.0.0","@types/tap":"^15.0.0",desm:"^1.3.0",fastbench:"^1.0.1",husky:"^8.0.1","sonic-boom":"^3.0.0",standard:"^17.0.0",tap:"^16.2.0","ts-node":"^10.8.0",typescript:"^4.7.2","why-is-node-running":"^2.2.2"},scripts:{test:"standard && npm run transpile && tap test/*.test.*js && tap --ts test/*.test.*ts","test:ci":"standard && npm run transpile && npm run test:ci:js && npm run test:ci:ts","test:ci:js":'tap --no-check-coverage --coverage-report=lcovonly "test/**/*.test.*js"',"test:ci:ts":'tap --ts --no-check-coverage --coverage-report=lcovonly "test/**/*.test.*ts"',"test:yarn":'npm run transpile && tap "test/**/*.test.js" --no-check-coverage',transpile:"sh ./test/ts/transpile.sh",prepare:"husky install"},standard:{ignore:["test/ts/**/*"]},repository:{type:"git",url:"git+https://github.com/mcollina/thread-stream.git"},keywords:["worker","thread","threads","stream"],author:"Matteo Collina <hello@matteocollina.com>",license:"MIT",bugs:{url:"https://github.com/mcollina/thread-stream/issues"},homepage:"https://github.com/mcollina/thread-stream#readme"}});var US=$((zfe,zS)=>{"use strict";function bz(t,e,r,n,s){let i=Date.now()+n,o=Atomics.load(t,e);if(o===r){s(null,"ok");return}let a=o,u=l=>{Date.now()>i?s(null,"timed-out"):setTimeout(()=>{a=o,o=Atomics.load(t,e),o===a?u(l>=1e3?1e3:l*2):o===r?s(null,"ok"):s(null,"not-equal")},l)};u(1)}function wz(t,e,r,n,s){let i=Date.now()+n,o=Atomics.load(t,e);if(o!==r){s(null,"ok");return}let a=u=>{Date.now()>i?s(null,"timed-out"):setTimeout(()=>{o=Atomics.load(t,e),o!==r?s(null,"ok"):a(u>=1e3?1e3:u*2)},u)};a(1)}zS.exports={wait:bz,waitDiff:wz}});var KS=$((Ufe,HS)=>{"use strict";HS.exports={WRITE_INDEX:4,READ_INDEX:8}});var WS=$((Kfe,YS)=>{"use strict";var{version:Ez}=VS(),{EventEmitter:Sz}=require("events"),{Worker:Rz}=require("worker_threads"),{join:Pz}=require("path"),{pathToFileURL:Tz}=require("url"),{wait:Oz}=US(),{WRITE_INDEX:Er,READ_INDEX:xn}=KS(),Nz=require("buffer"),Iz=require("assert"),D=Symbol("kImpl"),Cz=Nz.constants.MAX_STRING_LENGTH,ff=class{constructor(e){this._value=e}deref(){return this._value}},Az=global.FinalizationRegistry||class{register(){}unregister(){}},kz=global.WeakRef||ff,BS=new Az(t=>{t.exited||t.terminate()});function qz(t,e){let{filename:r,workerData:n}=e,i=("__bundlerPathsOverrides"in globalThis?globalThis.__bundlerPathsOverrides:{})["thread-stream-worker"]||Pz(__dirname,"lib","worker.js"),o=new Rz(i,{...e.workerOpts,trackUnmanagedFds:!1,workerData:{filename:r.indexOf("file://")===0?r:Tz(r).href,dataBuf:t[D].dataBuf,stateBuf:t[D].stateBuf,workerData:{$context:{threadStreamVersion:Ez},...n}}});return o.stream=new ff(t),o.on("message",jz),o.on("exit",JS),BS.register(t,o),o}function GS(t){Iz(!t[D].sync),t[D].needDrain&&(t[D].needDrain=!1,t.emit("drain"))}function cf(t){let e=Atomics.load(t[D].state,Er),r=t[D].data.length-e;if(r>0){if(t[D].buf.length===0){t[D].flushing=!1,t[D].ending?Im(t):t[D].needDrain&&process.nextTick(GS,t);return}let n=t[D].buf.slice(0,r),s=Buffer.byteLength(n);s<=r?(t[D].buf=t[D].buf.slice(r),df(t,n,cf.bind(null,t))):t.flush(()=>{if(!t.destroyed){for(Atomics.store(t[D].state,xn,0),Atomics.store(t[D].state,Er,0);s>t[D].data.length;)r=r/2,n=t[D].buf.slice(0,r),s=Buffer.byteLength(n);t[D].buf=t[D].buf.slice(r),df(t,n,cf.bind(null,t))}})}else if(r===0){if(e===0&&t[D].buf.length===0)return;t.flush(()=>{Atomics.store(t[D].state,xn,0),Atomics.store(t[D].state,Er,0),cf(t)})}else Fn(t,new Error("overwritten"))}function jz(t){let e=this.stream.deref();if(e===void 0){this.exited=!0,this.terminate();return}switch(t.code){case"READY":this.stream=new kz(e),e.flush(()=>{e[D].ready=!0,e.emit("ready")});break;case"ERROR":Fn(e,t.err);break;case"EVENT":Array.isArray(t.args)?e.emit(t.name,...t.args):e.emit(t.name,t.args);break;default:Fn(e,new Error("this should not happen: "+t.code))}}function JS(t){let e=this.stream.deref();e!==void 0&&(BS.unregister(e),e.worker.exited=!0,e.worker.off("exit",JS),Fn(e,t!==0?new Error("the worker thread exited"):null))}var Tm=class extends Sz{constructor(e={}){if(super(),e.bufferSize<4)throw new Error("bufferSize must at least fit a 4-byte utf-8 char");this[D]={},this[D].stateBuf=new SharedArrayBuffer(128),this[D].state=new Int32Array(this[D].stateBuf),this[D].dataBuf=new SharedArrayBuffer(e.bufferSize||4*1024*1024),this[D].data=Buffer.from(this[D].dataBuf),this[D].sync=e.sync||!1,this[D].ending=!1,this[D].ended=!1,this[D].needDrain=!1,this[D].destroyed=!1,this[D].flushing=!1,this[D].ready=!1,this[D].finished=!1,this[D].errored=null,this[D].closed=!1,this[D].buf="",this.worker=qz(this,e)}write(e){if(this[D].destroyed)return Om(this,new Error("the worker has exited")),!1;if(this[D].ending)return Om(this,new Error("the worker is ending")),!1;if(this[D].flushing&&this[D].buf.length+e.length>=Cz)try{Pm(this),this[D].flushing=!0}catch(r){return Fn(this,r),!1}if(this[D].buf+=e,this[D].sync)try{return Pm(this),!0}catch(r){return Fn(this,r),!1}return this[D].flushing||(this[D].flushing=!0,setImmediate(cf,this)),this[D].needDrain=this[D].data.length-this[D].buf.length-Atomics.load(this[D].state,Er)<=0,!this[D].needDrain}end(){this[D].destroyed||(this[D].ending=!0,Im(this))}flush(e){if(this[D].destroyed){typeof e=="function"&&process.nextTick(e,new Error("the worker has exited"));return}let r=Atomics.load(this[D].state,Er);Oz(this[D].state,xn,r,1/0,(n,s)=>{if(n){Fn(this,n),process.nextTick(e,n);return}if(s==="not-equal"){this.flush(e);return}process.nextTick(e)})}flushSync(){this[D].destroyed||(Pm(this),Nm(this))}unref(){this.worker.unref()}ref(){this.worker.ref()}get ready(){return this[D].ready}get destroyed(){return this[D].destroyed}get closed(){return this[D].closed}get writable(){return!this[D].destroyed&&!this[D].ending}get writableEnded(){return this[D].ending}get writableFinished(){return this[D].finished}get writableNeedDrain(){return this[D].needDrain}get writableObjectMode(){return!1}get writableErrored(){return this[D].errored}};function Om(t,e){setImmediate(()=>{t.emit("error",e)})}function Fn(t,e){t[D].destroyed||(t[D].destroyed=!0,e&&(t[D].errored=e,Om(t,e)),t.worker.exited?setImmediate(()=>{t[D].closed=!0,t.emit("close")}):t.worker.terminate().catch(()=>{}).then(()=>{t[D].closed=!0,t.emit("close")}))}function df(t,e,r){let n=Atomics.load(t[D].state,Er),s=Buffer.byteLength(e);return t[D].data.write(e,n),Atomics.store(t[D].state,Er,n+s),Atomics.notify(t[D].state,Er),r(),!0}function Im(t){if(!(t[D].ended||!t[D].ending||t[D].flushing)){t[D].ended=!0;try{t.flushSync();let e=Atomics.load(t[D].state,xn);Atomics.store(t[D].state,Er,-1),Atomics.notify(t[D].state,Er);let r=0;for(;e!==-1;){if(Atomics.wait(t[D].state,xn,e,1e3),e=Atomics.load(t[D].state,xn),e===-2){Fn(t,new Error("end() failed"));return}if(++r===10){Fn(t,new Error("end() took too long (10s)"));return}}process.nextTick(()=>{t[D].finished=!0,t.emit("finish")})}catch(e){Fn(t,e)}}}function Pm(t){let e=()=>{t[D].ending?Im(t):t[D].needDrain&&process.nextTick(GS,t)};for(t[D].flushing=!1;t[D].buf.length!==0;){let r=Atomics.load(t[D].state,Er),n=t[D].data.length-r;if(n===0){Nm(t),Atomics.store(t[D].state,xn,0),Atomics.store(t[D].state,Er,0);continue}else if(n<0)throw new Error("overwritten");let s=t[D].buf.slice(0,n),i=Buffer.byteLength(s);if(i<=n)t[D].buf=t[D].buf.slice(n),df(t,s,e);else{for(Nm(t),Atomics.store(t[D].state,xn,0),Atomics.store(t[D].state,Er,0);i>t[D].buf.length;)n=n/2,s=t[D].buf.slice(0,n),i=Buffer.byteLength(s);t[D].buf=t[D].buf.slice(n),df(t,s,e)}}}function Nm(t){if(t[D].flushing)throw new Error("unable to flush while flushing");let e=Atomics.load(t[D].state,Er),r=0;for(;;){let n=Atomics.load(t[D].state,xn);if(n===-2)throw Error("_flushSync failed");if(n!==e)Atomics.wait(t[D].state,xn,n,1e3);else break;if(++r===10)throw new Error("_flushSync took too long (10s)")}}YS.exports=Tm});var km=$((Bfe,XS)=>{"use strict";var{createRequire:Dz}=require("module"),Lz=mm(),{join:Cm,isAbsolute:xz}=require("path"),Fz=Em(),Am=Rm(),Mz=WS();function Vz(t){Am.register(t,Uz),Am.registerBeforeExit(t,Hz),t.on("close",function(){Am.unregister(t)})}function zz(t,e,r){let n=new Mz({filename:t,workerData:e,workerOpts:r});n.on("ready",s),n.on("close",function(){process.removeListener("exit",i)}),process.on("exit",i);function s(){process.removeListener("exit",i),n.unref(),r.autoEnd!==!1&&Vz(n)}function i(){n.closed||(n.flushSync(),Fz(100),n.end())}return n}function Uz(t){t.ref(),t.flushSync(),t.end(),t.once("close",function(){t.unref()})}function Hz(t){t.flushSync()}function Kz(t){let{pipeline:e,targets:r,levels:n,dedupe:s,options:i={},worker:o={},caller:a=Lz()}=t,u=typeof a=="string"?[a]:a,l="__bundlerPathsOverrides"in globalThis?globalThis.__bundlerPathsOverrides:{},c=t.target;if(c&&r)throw new Error("only one of target or targets can be specified");return r?(c=l["pino-worker"]||Cm(__dirname,"worker.js"),i.targets=r.map(h=>({...h,target:f(h.target)}))):e&&(c=l["pino-pipeline-worker"]||Cm(__dirname,"worker-pipeline.js"),i.targets=e.map(h=>({...h,target:f(h.target)}))),n&&(i.levels=n),s&&(i.dedupe=s),zz(f(c),i,o);function f(h){if(h=l[h]||h,xz(h)||h.indexOf("file://")===0)return h;if(h==="pino/file")return Cm(__dirname,"..","file.js");let d;for(let p of u)try{d=Dz(p).resolve(h);break}catch{continue}if(!d)throw new Error(`unable to determine transport target for "${h}"`);return d}}XS.exports=Kz});var mf=$((Gfe,lR)=>{"use strict";var QS=NS(),{mapHttpRequest:Bz,mapHttpResponse:Gz}=pm(),qm=qS(),ZS=Rm(),{lsCacheSym:Jz,chindingsSym:nR,writeSym:eR,serializersSym:sR,formatOptsSym:tR,endSym:Yz,stringifiersSym:iR,stringifySym:oR,stringifySafeSym:jm,wildcardFirstSym:aR,nestedKeySym:Wz,formattersSym:uR,messageKeySym:Xz,errorKeySym:Qz,nestedKeyStrSym:Zz,msgPrefixSym:hf}=qo(),{isMainThread:eU}=require("worker_threads"),tU=km();function Do(){}function rU(t,e){if(!e)return r;return function(...s){e.call(this,s,r,t)};function r(n,...s){if(typeof n=="object"){let i=n;n!==null&&(n.method&&n.headers&&n.socket?n=Bz(n):typeof n.setHeader=="function"&&(n=Gz(n)));let o;i===null&&s.length===0?o=[null]:(i=s.shift(),o=s),typeof this[hf]=="string"&&i!==void 0&&i!==null&&(i=this[hf]+i),this[eR](n,QS(i,o,this[tR]),t)}else{let i=n===void 0?s.shift():n;typeof this[hf]=="string"&&i!==void 0&&i!==null&&(i=this[hf]+i),this[eR](null,QS(i,s,this[tR]),t)}}}function rR(t){let e="",r=0,n=!1,s=255,i=t.length;if(i>100)return JSON.stringify(t);for(var o=0;o<i&&s>=32;o++)s=t.charCodeAt(o),(s===34||s===92)&&(e+=t.slice(r,o)+"\\",r=o,n=!0);return n?e+=t.slice(r):e=t,s<32?JSON.stringify(t):'"'+e+'"'}function nU(t,e,r,n){let s=this[oR],i=this[jm],o=this[iR],a=this[Yz],u=this[nR],l=this[sR],c=this[uR],f=this[Xz],h=this[Qz],d=this[Jz][r]+n;d=d+u;let p;c.log&&(t=c.log(t));let m=o[aR],v="";for(let w in t)if(p=t[w],Object.prototype.hasOwnProperty.call(t,w)&&p!==void 0){l[w]?p=l[w](p):w===h&&l.err&&(p=l.err(p));let _=o[w]||m;switch(typeof p){case"undefined":case"function":continue;case"number":Number.isFinite(p)===!1&&(p=null);case"boolean":_&&(p=_(p));break;case"string":p=(_||rR)(p);break;default:p=(_||s)(p,i)}if(p===void 0)continue;v+=',"'+w+'":'+p}let g="";if(e!==void 0){p=l[f]?l[f](e):e;let w=o[f]||m;switch(typeof p){case"function":break;case"number":Number.isFinite(p)===!1&&(p=null);case"boolean":w&&(p=w(p)),g=',"'+f+'":'+p;break;case"string":p=(w||rR)(p),g=',"'+f+'":'+p;break;default:p=(w||s)(p,i),g=',"'+f+'":'+p}}return this[Wz]&&v?d+this[Zz]+v.slice(1)+"}"+g+a:d+v+g+a}function sU(t,e){let r,n=t[nR],s=t[oR],i=t[jm],o=t[iR],a=o[aR],u=t[sR],l=t[uR].bindings;e=l(e);for(let c in e)if(r=e[c],(c!=="level"&&c!=="serializers"&&c!=="formatters"&&c!=="customLevels"&&e.hasOwnProperty(c)&&r!==void 0)===!0){if(r=u[c]?u[c](r):r,r=(o[c]||a||s)(r,i),r===void 0)continue;n+=',"'+c+'":'+r}return n}function iU(t){return t.write!==t.constructor.prototype.write}function pf(t){let e=new qm(t);return e.on("error",r),!t.sync&&eU&&(ZS.register(e,oU),e.on("close",function(){ZS.unregister(e)})),e;function r(n){if(n.code==="EPIPE"){e.write=Do,e.end=Do,e.flushSync=Do,e.destroy=Do;return}e.removeListener("error",r),e.emit("error",n)}}function oU(t,e){t.destroyed||(e==="beforeExit"?(t.flush(),t.on("drain",function(){t.end()})):t.flushSync())}function aU(t){return function(r,n,s={},i){if(typeof s=="string")i=pf({dest:s}),s={};else if(typeof i=="string"){if(s&&s.transport)throw Error("only one of option.transport or stream can be specified");i=pf({dest:i})}else if(s instanceof qm||s.writable||s._writableState)i=s,s={};else if(s.transport){if(s.transport instanceof qm||s.transport.writable||s.transport._writableState)throw Error("option.transport do not allow stream, please pass to option directly. e.g. pino(transport)");if(s.transport.targets&&s.transport.targets.length&&s.formatters&&typeof s.formatters.level=="function")throw Error("option.transport.targets do not allow custom level formatters");let u;s.customLevels&&(u=s.useOnlyCustomLevels?s.customLevels:Object.assign({},s.levels,s.customLevels)),i=tU({caller:n,...s.transport,levels:u})}if(s=Object.assign({},t,s),s.serializers=Object.assign({},t.serializers,s.serializers),s.formatters=Object.assign({},t.formatters,s.formatters),s.prettyPrint)throw new Error("prettyPrint option is no longer supported, see the pino-pretty package (https://github.com/pinojs/pino-pretty)");let{enabled:o,onChild:a}=s;return o===!1&&(s.level="silent"),a||(s.onChild=Do),i||(iU(process.stdout)?i=process.stdout:i=pf({fd:process.stdout.fd||1})),{opts:s,stream:i}}}function uU(t,e){try{return JSON.stringify(t)}catch{try{return(e||this[jm])(t)}catch{return'"[unable to serialize, circular reference is too complex to analyze]"'}}}function lU(t,e,r){return{level:t,bindings:e,log:r}}function cU(t){let e=Number(t);return typeof t=="string"&&Number.isFinite(e)?e:t===void 0?1:t}lR.exports={noop:Do,buildSafeSonicBoom:pf,asChindings:sU,asJson:nU,genLog:rU,createArgsNormalizer:aU,stringify:uU,buildFormatters:lU,normalizeDestFileDescriptor:cU}});var yf=$((Jfe,fR)=>{"use strict";var{lsCacheSym:fU,levelValSym:Dm,useOnlyCustomLevelsSym:dU,streamSym:hU,formattersSym:pU,hooksSym:mU}=qo(),{noop:yU,genLog:Oi}=mf(),gn={trace:10,debug:20,info:30,warn:40,error:50,fatal:60},cR={fatal:t=>{let e=Oi(gn.fatal,t);return function(...r){let n=this[hU];if(e.call(this,...r),typeof n.flushSync=="function")try{n.flushSync()}catch{}}},error:t=>Oi(gn.error,t),warn:t=>Oi(gn.warn,t),info:t=>Oi(gn.info,t),debug:t=>Oi(gn.debug,t),trace:t=>Oi(gn.trace,t)},Lm=Object.keys(gn).reduce((t,e)=>(t[gn[e]]=e,t),{}),gU=Object.keys(Lm).reduce((t,e)=>(t[e]='{"level":'+Number(e),t),{});function _U(t){let e=t[pU].level,{labels:r}=t.levels,n={};for(let s in r){let i=e(r[s],Number(s));n[s]=JSON.stringify(i).slice(0,-1)}return t[fU]=n,t}function vU(t,e){if(e)return!1;switch(t){case"fatal":case"error":case"warn":case"info":case"debug":case"trace":return!0;default:return!1}}function $U(t){let{labels:e,values:r}=this.levels;if(typeof t=="number"){if(e[t]===void 0)throw Error("unknown level value"+t);t=e[t]}if(r[t]===void 0)throw Error("unknown level "+t);let n=this[Dm],s=this[Dm]=r[t],i=this[dU],o=this[mU].logMethod;for(let a in r){if(s>r[a]){this[a]=yU;continue}this[a]=vU(a,i)?cR[a](o):Oi(r[a],o)}this.emit("level-change",t,s,e[n],n,this)}function bU(t){let{levels:e,levelVal:r}=this;return e&&e.labels?e.labels[r]:""}function wU(t){let{values:e}=this.levels,r=e[t];return r!==void 0&&r>=this[Dm]}function EU(t=null,e=!1){let r=t?Object.keys(t).reduce((i,o)=>(i[t[o]]=o,i),{}):null,n=Object.assign(Object.create(Object.prototype,{Infinity:{value:"silent"}}),e?null:Lm,r),s=Object.assign(Object.create(Object.prototype,{silent:{value:1/0}}),e?null:gn,t);return{labels:n,values:s}}function SU(t,e,r){if(typeof t=="number"){if(![].concat(Object.keys(e||{}).map(i=>e[i]),r?[]:Object.keys(Lm).map(i=>+i),1/0).includes(t))throw Error(`default level:${t} must be included in custom levels`);return}let n=Object.assign(Object.create(Object.prototype,{silent:{value:1/0}}),r?null:gn,e);if(!(t in n))throw Error(`default level:${t} must be included in custom levels`)}function RU(t,e){let{labels:r,values:n}=t;for(let s in e){if(s in n)throw Error("levels cannot be overridden");if(e[s]in r)throw Error("pre-existing level values cannot be used for new levels")}}fR.exports={initialLsCache:gU,genLsCache:_U,levelMethods:cR,getLevel:bU,setLevel:$U,isLevelEnabled:wU,mappings:EU,levels:gn,assertNoLevelCollisions:RU,assertDefaultLevelFound:SU}});var xm=$((Yfe,dR)=>{"use strict";dR.exports={version:"8.11.0"}});var ER=$((Xfe,wR)=>{"use strict";var{EventEmitter:PU}=require("events"),{lsCacheSym:TU,levelValSym:OU,setLevelSym:Mm,getLevelSym:hR,chindingsSym:Vm,parsedChindingsSym:NU,mixinSym:IU,asJsonSym:_R,writeSym:CU,mixinMergeStrategySym:AU,timeSym:kU,timeSliceIndexSym:qU,streamSym:vR,serializersSym:Ni,formattersSym:Fm,errorKeySym:jU,useOnlyCustomLevelsSym:DU,needsMetadataGsym:LU,redactFmtSym:xU,stringifySym:FU,formatOptsSym:MU,stringifiersSym:VU,msgPrefixSym:pR}=qo(),{getLevel:zU,setLevel:UU,isLevelEnabled:HU,mappings:KU,initialLsCache:BU,genLsCache:GU,assertNoLevelCollisions:JU}=yf(),{asChindings:$R,asJson:YU,buildFormatters:mR,stringify:yR}=mf(),{version:WU}=xm(),XU=bm(),QU=class{},bR={constructor:QU,child:ZU,bindings:eH,setBindings:tH,flush:iH,isLevelEnabled:HU,version:WU,get level(){return this[hR]()},set level(t){this[Mm](t)},get levelVal(){return this[OU]},set levelVal(t){throw Error("levelVal is read-only")},[TU]:BU,[CU]:nH,[_R]:YU,[hR]:zU,[Mm]:UU};Object.setPrototypeOf(bR,PU.prototype);wR.exports=function(){return Object.create(bR)};var gR=t=>t;function ZU(t,e){if(!t)throw Error("missing bindings for child Pino");e=e||{};let r=this[Ni],n=this[Fm],s=Object.create(this);if(e.hasOwnProperty("serializers")===!0){s[Ni]=Object.create(null);for(let c in r)s[Ni][c]=r[c];let u=Object.getOwnPropertySymbols(r);for(var i=0;i<u.length;i++){let c=u[i];s[Ni][c]=r[c]}for(let c in e.serializers)s[Ni][c]=e.serializers[c];let l=Object.getOwnPropertySymbols(e.serializers);for(var o=0;o<l.length;o++){let c=l[o];s[Ni][c]=e.serializers[c]}}else s[Ni]=r;if(e.hasOwnProperty("formatters")){let{level:u,bindings:l,log:c}=e.formatters;s[Fm]=mR(u||n.level,l||gR,c||n.log)}else s[Fm]=mR(n.level,gR,n.log);if(e.hasOwnProperty("customLevels")===!0&&(JU(this.levels,e.customLevels),s.levels=KU(e.customLevels,s[DU]),GU(s)),typeof e.redact=="object"&&e.redact!==null||Array.isArray(e.redact)){s.redact=e.redact;let u=XU(s.redact,yR),l={stringify:u[xU]};s[FU]=yR,s[VU]=u,s[MU]=l}typeof e.msgPrefix=="string"&&(s[pR]=(this[pR]||"")+e.msgPrefix),s[Vm]=$R(s,t);let a=e.level||this.level;return s[Mm](a),this.onChild(s),s}function eH(){let e=`{${this[Vm].substr(1)}}`,r=JSON.parse(e);return delete r.pid,delete r.hostname,r}function tH(t){let e=$R(this,t);this[Vm]=e,delete this[NU]}function rH(t,e){return Object.assign(e,t)}function nH(t,e,r){let n=this[kU](),s=this[IU],i=this[jU],o=this[AU]||rH,a;t==null?a={}:t instanceof Error?(a={[i]:t},e===void 0&&(e=t.message)):(a=t,e===void 0&&t.msg===void 0&&t[i]&&(e=t[i].message)),s&&(a=o(a,s(a,r)));let u=this[_R](a,e,r,n),l=this[vR];l[LU]===!0&&(l.lastLevel=r,l.lastObj=a,l.lastMsg=e,l.lastTime=n.slice(this[qU]),l.lastLogger=this),l.write(u)}function sH(){}function iH(){let t=this[vR];"flush"in t&&t.flush(sH)}});var OR=$((Km,TR)=>{"use strict";var{hasOwnProperty:gf}=Object.prototype,Ci=Hm();Ci.configure=Hm;Ci.stringify=Ci;Ci.default=Ci;Km.stringify=Ci;Km.configure=Hm;TR.exports=Ci;var oH=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]|[\ud800-\udbff](?![\udc00-\udfff])|(?:[^\ud800-\udbff]|^)[\udc00-\udfff]/;function xs(t){return t.length<5e3&&!oH.test(t)?`"${t}"`:JSON.stringify(t)}function zm(t){if(t.length>200)return t.sort();for(let e=1;e<t.length;e++){let r=t[e],n=e;for(;n!==0&&t[n-1]>r;)t[n]=t[n-1],n--;t[n]=r}return t}var aH=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Object.getPrototypeOf(new Int8Array)),Symbol.toStringTag).get;function Um(t){return aH.call(t)!==void 0&&t.length!==0}function SR(t,e,r){t.length<r&&(r=t.length);let n=e===","?"":" ",s=`"0":${n}${t[0]}`;for(let i=1;i<r;i++)s+=`${e}"${i}":${n}${t[i]}`;return s}function uH(t){if(gf.call(t,"circularValue")){let e=t.circularValue;if(typeof e=="string")return`"${e}"`;if(e==null)return e;if(e===Error||e===TypeError)return{toString(){throw new TypeError("Converting circular structure to JSON")}};throw new TypeError('The "circularValue" argument must be of type string or the value null or undefined')}return'"[Circular]"'}function RR(t,e){let r;if(gf.call(t,e)&&(r=t[e],typeof r!="boolean"))throw new TypeError(`The "${e}" argument must be of type boolean`);return r===void 0?!0:r}function PR(t,e){let r;if(gf.call(t,e)){if(r=t[e],typeof r!="number")throw new TypeError(`The "${e}" argument must be of type number`);if(!Number.isInteger(r))throw new TypeError(`The "${e}" argument must be an integer`);if(r<1)throw new RangeError(`The "${e}" argument must be >= 1`)}return r===void 0?1/0:r}function Ii(t){return t===1?"1 item":`${t} items`}function lH(t){let e=new Set;for(let r of t)(typeof r=="string"||typeof r=="number")&&e.add(String(r));return e}function cH(t){if(gf.call(t,"strict")){let e=t.strict;if(typeof e!="boolean")throw new TypeError('The "strict" argument must be of type boolean');if(e)return r=>{let n=`Object can not safely be stringified. Received type ${typeof r}`;throw typeof r!="function"&&(n+=` (${r.toString()})`),new Error(n)}}}function Hm(t){t={...t};let e=cH(t);e&&(t.bigint===void 0&&(t.bigint=!1),"circularValue"in t||(t.circularValue=Error));let r=uH(t),n=RR(t,"bigint"),s=RR(t,"deterministic"),i=PR(t,"maximumDepth"),o=PR(t,"maximumBreadth");function a(h,d,p,m,v,g){let w=d[h];switch(typeof w=="object"&&w!==null&&typeof w.toJSON=="function"&&(w=w.toJSON(h)),w=m.call(d,h,w),typeof w){case"string":return xs(w);case"object":{if(w===null)return"null";if(p.indexOf(w)!==-1)return r;let _="",y=",",b=g;if(Array.isArray(w)){if(w.length===0)return"[]";if(i<p.length+1)return'"[Array]"';p.push(w),v!==""&&(g+=v,_+=`
${g}`,y=`,
${g}`);let O=Math.min(w.length,o),q=0;for(;q<O-1;q++){let Z=a(String(q),w,p,m,v,g);_+=Z!==void 0?Z:"null",_+=y}let L=a(String(q),w,p,m,v,g);if(_+=L!==void 0?L:"null",w.length-1>o){let Z=w.length-o-1;_+=`${y}"... ${Ii(Z)} not stringified"`}return v!==""&&(_+=`
${b}`),p.pop(),`[${_}]`}let T=Object.keys(w),S=T.length;if(S===0)return"{}";if(i<p.length+1)return'"[Object]"';let N="",A="";v!==""&&(g+=v,y=`,
${g}`,N=" ");let I=Math.min(S,o);s&&!Um(w)&&(T=zm(T)),p.push(w);for(let O=0;O<I;O++){let q=T[O],L=a(q,w,p,m,v,g);L!==void 0&&(_+=`${A}${xs(q)}:${N}${L}`,A=y)}if(S>o){let O=S-o;_+=`${A}"...":${N}"${Ii(O)} not stringified"`,A=y}return v!==""&&A.length>1&&(_=`
${g}${_}
${b}`),p.pop(),`{${_}}`}case"number":return isFinite(w)?String(w):e?e(w):"null";case"boolean":return w===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(w);default:return e?e(w):void 0}}function u(h,d,p,m,v,g){switch(typeof d=="object"&&d!==null&&typeof d.toJSON=="function"&&(d=d.toJSON(h)),typeof d){case"string":return xs(d);case"object":{if(d===null)return"null";if(p.indexOf(d)!==-1)return r;let w=g,_="",y=",";if(Array.isArray(d)){if(d.length===0)return"[]";if(i<p.length+1)return'"[Array]"';p.push(d),v!==""&&(g+=v,_+=`
${g}`,y=`,
${g}`);let S=Math.min(d.length,o),N=0;for(;N<S-1;N++){let I=u(String(N),d[N],p,m,v,g);_+=I!==void 0?I:"null",_+=y}let A=u(String(N),d[N],p,m,v,g);if(_+=A!==void 0?A:"null",d.length-1>o){let I=d.length-o-1;_+=`${y}"... ${Ii(I)} not stringified"`}return v!==""&&(_+=`
${w}`),p.pop(),`[${_}]`}p.push(d);let b="";v!==""&&(g+=v,y=`,
${g}`,b=" ");let T="";for(let S of m){let N=u(S,d[S],p,m,v,g);N!==void 0&&(_+=`${T}${xs(S)}:${b}${N}`,T=y)}return v!==""&&T.length>1&&(_=`
${g}${_}
${w}`),p.pop(),`{${_}}`}case"number":return isFinite(d)?String(d):e?e(d):"null";case"boolean":return d===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(d);default:return e?e(d):void 0}}function l(h,d,p,m,v){switch(typeof d){case"string":return xs(d);case"object":{if(d===null)return"null";if(typeof d.toJSON=="function"){if(d=d.toJSON(h),typeof d!="object")return l(h,d,p,m,v);if(d===null)return"null"}if(p.indexOf(d)!==-1)return r;let g=v;if(Array.isArray(d)){if(d.length===0)return"[]";if(i<p.length+1)return'"[Array]"';p.push(d),v+=m;let N=`
${v}`,A=`,
${v}`,I=Math.min(d.length,o),O=0;for(;O<I-1;O++){let L=l(String(O),d[O],p,m,v);N+=L!==void 0?L:"null",N+=A}let q=l(String(O),d[O],p,m,v);if(N+=q!==void 0?q:"null",d.length-1>o){let L=d.length-o-1;N+=`${A}"... ${Ii(L)} not stringified"`}return N+=`
${g}`,p.pop(),`[${N}]`}let w=Object.keys(d),_=w.length;if(_===0)return"{}";if(i<p.length+1)return'"[Object]"';v+=m;let y=`,
${v}`,b="",T="",S=Math.min(_,o);Um(d)&&(b+=SR(d,y,o),w=w.slice(d.length),S-=d.length,T=y),s&&(w=zm(w)),p.push(d);for(let N=0;N<S;N++){let A=w[N],I=l(A,d[A],p,m,v);I!==void 0&&(b+=`${T}${xs(A)}: ${I}`,T=y)}if(_>o){let N=_-o;b+=`${T}"...": "${Ii(N)} not stringified"`,T=y}return T!==""&&(b=`
${v}${b}
${g}`),p.pop(),`{${b}}`}case"number":return isFinite(d)?String(d):e?e(d):"null";case"boolean":return d===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(d);default:return e?e(d):void 0}}function c(h,d,p){switch(typeof d){case"string":return xs(d);case"object":{if(d===null)return"null";if(typeof d.toJSON=="function"){if(d=d.toJSON(h),typeof d!="object")return c(h,d,p);if(d===null)return"null"}if(p.indexOf(d)!==-1)return r;let m="";if(Array.isArray(d)){if(d.length===0)return"[]";if(i<p.length+1)return'"[Array]"';p.push(d);let y=Math.min(d.length,o),b=0;for(;b<y-1;b++){let S=c(String(b),d[b],p);m+=S!==void 0?S:"null",m+=","}let T=c(String(b),d[b],p);if(m+=T!==void 0?T:"null",d.length-1>o){let S=d.length-o-1;m+=`,"... ${Ii(S)} not stringified"`}return p.pop(),`[${m}]`}let v=Object.keys(d),g=v.length;if(g===0)return"{}";if(i<p.length+1)return'"[Object]"';let w="",_=Math.min(g,o);Um(d)&&(m+=SR(d,",",o),v=v.slice(d.length),_-=d.length,w=","),s&&(v=zm(v)),p.push(d);for(let y=0;y<_;y++){let b=v[y],T=c(b,d[b],p);T!==void 0&&(m+=`${w}${xs(b)}:${T}`,w=",")}if(g>o){let y=g-o;m+=`${w}"...":"${Ii(y)} not stringified"`}return p.pop(),`{${m}}`}case"number":return isFinite(d)?String(d):e?e(d):"null";case"boolean":return d===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(d);default:return e?e(d):void 0}}function f(h,d,p){if(arguments.length>1){let m="";if(typeof p=="number"?m=" ".repeat(Math.min(p,10)):typeof p=="string"&&(m=p.slice(0,10)),d!=null){if(typeof d=="function")return a("",{"":h},[],d,m,"");if(Array.isArray(d))return u("",h,[],lH(d),m,"")}if(m.length!==0)return l("",h,[],m,"")}return c("",h,[])}return f}});var AR=$((Qfe,CR)=>{"use strict";var Bm=Symbol.for("pino.metadata"),{levels:NR}=yf(),IR=Object.create(NR);IR.silent=1/0;var fH=NR.info;function dH(t,e){let r=0;t=t||[],e=e||{dedupe:!1};let n=IR;e.levels&&typeof e.levels=="object"&&(n=e.levels);let s={write:i,add:a,flushSync:o,end:u,minLevel:0,streams:[],clone:l,[Bm]:!0};return Array.isArray(t)?t.forEach(a,s):a.call(s,t),t=null,s;function i(c){let f,h=this.lastLevel,{streams:d}=this,p=0,m;for(let v=pH(d.length,e.dedupe);yH(v,d.length,e.dedupe);v=mH(v,e.dedupe))if(f=d[v],f.level<=h){if(p!==0&&p!==f.level)break;if(m=f.stream,m[Bm]){let{lastTime:g,lastMsg:w,lastObj:_,lastLogger:y}=this;m.lastLevel=h,m.lastTime=g,m.lastMsg=w,m.lastObj=_,m.lastLogger=y}m.write(c),e.dedupe&&(p=f.level)}else if(!e.dedupe)break}function o(){for(let{stream:c}of this.streams)typeof c.flushSync=="function"&&c.flushSync()}function a(c){if(!c)return s;let f=typeof c.write=="function"||c.stream,h=c.write?c:c.stream;if(!f)throw Error("stream object needs to implement either StreamEntry or DestinationStream interface");let{streams:d}=this,p;typeof c.levelVal=="number"?p=c.levelVal:typeof c.level=="string"?p=n[c.level]:typeof c.level=="number"?p=c.level:p=fH;let m={stream:h,level:p,levelVal:void 0,id:r++};return d.unshift(m),d.sort(hH),this.minLevel=d[0].level,s}function u(){for(let{stream:c}of this.streams)typeof c.flushSync=="function"&&c.flushSync(),c.end()}function l(c){let f=new Array(this.streams.length);for(let h=0;h<f.length;h++)f[h]={level:c,stream:this.streams[h].stream};return{write:i,add:a,minLevel:c,streams:f,clone:l,flushSync:o,[Bm]:!0}}}function hH(t,e){return t.level-e.level}function pH(t,e){return e?t-1:0}function mH(t,e){return e?t-1:t+1}function yH(t,e,r){return r?t>=0:t<e}CR.exports=dH});var KR=$((Zfe,Yr)=>{"use strict";var gH=require("os"),MR=pm(),_H=mm(),vH=bm(),VR=TS(),$H=ER(),zR=qo(),{configure:bH}=OR(),{assertDefaultLevelFound:wH,mappings:UR,genLsCache:EH,levels:SH}=yf(),{createArgsNormalizer:RH,asChindings:PH,buildSafeSonicBoom:kR,buildFormatters:TH,stringify:Gm,normalizeDestFileDescriptor:qR,noop:OH}=mf(),{version:NH}=xm(),{chindingsSym:jR,redactFmtSym:IH,serializersSym:DR,timeSym:CH,timeSliceIndexSym:AH,streamSym:kH,stringifySym:LR,stringifySafeSym:Jm,stringifiersSym:xR,setLevelSym:qH,endSym:jH,formatOptsSym:DH,messageKeySym:LH,errorKeySym:xH,nestedKeySym:FH,mixinSym:MH,useOnlyCustomLevelsSym:VH,formattersSym:FR,hooksSym:zH,nestedKeyStrSym:UH,mixinMergeStrategySym:HH,msgPrefixSym:KH}=zR,{epochTime:HR,nullTime:BH}=VR,{pid:GH}=process,JH=gH.hostname(),YH=MR.err,WH={level:"info",levels:SH,messageKey:"msg",errorKey:"err",nestedKey:null,enabled:!0,base:{pid:GH,hostname:JH},serializers:Object.assign(Object.create(null),{err:YH}),formatters:Object.assign(Object.create(null),{bindings(t){return t},level(t,e){return{level:e}}}),hooks:{logMethod:void 0},timestamp:HR,name:void 0,redact:null,customLevels:null,useOnlyCustomLevels:!1,depthLimit:5,edgeLimit:100},XH=RH(WH),QH=Object.assign(Object.create(null),MR);function Ym(...t){let e={},{opts:r,stream:n}=XH(e,_H(),...t),{redact:s,crlf:i,serializers:o,timestamp:a,messageKey:u,errorKey:l,nestedKey:c,base:f,name:h,level:d,customLevels:p,mixin:m,mixinMergeStrategy:v,useOnlyCustomLevels:g,formatters:w,hooks:_,depthLimit:y,edgeLimit:b,onChild:T,msgPrefix:S}=r,N=bH({maximumDepth:y,maximumBreadth:b}),A=TH(w.level,w.bindings,w.log),I=Gm.bind({[Jm]:N}),O=s?vH(s,I):{},q=s?{stringify:O[IH]}:{stringify:I},L="}"+(i?`\r
`:`
`),Z=PH.bind(null,{[jR]:"",[DR]:o,[xR]:O,[LR]:Gm,[Jm]:N,[FR]:A}),Pe="";f!==null&&(h===void 0?Pe=Z(f):Pe=Z(Object.assign({},f,{name:h})));let V=a instanceof Function?a:a?HR:BH,te=V().indexOf(":")+1;if(g&&!p)throw Error("customLevels is required if useOnlyCustomLevels is set true");if(m&&typeof m!="function")throw Error(`Unknown mixin type "${typeof m}" - expected "function"`);if(S&&typeof S!="string")throw Error(`Unknown msgPrefix type "${typeof S}" - expected "string"`);wH(d,p,g);let ct=UR(p,g);return Object.assign(e,{levels:ct,[VH]:g,[kH]:n,[CH]:V,[AH]:te,[LR]:Gm,[Jm]:N,[xR]:O,[jH]:L,[DH]:q,[LH]:u,[xH]:l,[FH]:c,[UH]:c?`,${JSON.stringify(c)}:{`:"",[DR]:o,[MH]:m,[HH]:v,[jR]:Pe,[FR]:A,[zH]:_,silent:OH,onChild:T,[KH]:S}),Object.setPrototypeOf(e,$H()),EH(e),e[qH](d),e}Yr.exports=Ym;Yr.exports.destination=(t=process.stdout.fd)=>typeof t=="object"?(t.dest=qR(t.dest||process.stdout.fd),kR(t)):kR({dest:qR(t),minLength:0});Yr.exports.transport=km();Yr.exports.multistream=AR();Yr.exports.levels=UR();Yr.exports.stdSerializers=QH;Yr.exports.stdTimeFunctions=Object.assign({},VR);Yr.exports.symbols=zR;Yr.exports.version=NH;Yr.exports.default=Ym;Yr.exports.pino=Ym});var Xm=$((ede,JR)=>{"use strict";var ZH=xE(),_f=KR(),{serializersSym:BR}=_f.symbols,{FST_ERR_LOG_INVALID_DESTINATION:e4,FST_ERR_LOG_INVALID_LOGGER:t4}=er();function GR(t){if(t.stream&&t.file)throw new e4;t.file&&(t.stream=_f.destination(t.file),delete t.file);let e=t.logger,r=t.genReqId,n=null;return e?(t.logger=void 0,t.genReqId=void 0,e[BR]&&(t.serializers=Object.assign({},t.serializers,e[BR])),n=e.child({},t),t.logger=e,t.genReqId=r):n=_f(t,t.stream),n}var Wm={req:function(e){return{method:e.method,url:e.url,version:e.headers&&e.headers["accept-version"],hostname:e.hostname,remoteAddress:e.ip,remotePort:e.socket?e.socket.remotePort:void 0}},err:_f.stdSerializers.err,res:function(e){return{statusCode:e.statusCode}}};function r4(){let t=process.hrtime();return t[0]*1e3+t[1]/1e6}function n4(t){if(!t.logger){let n=ZH;return n.child=()=>n,{logger:n,hasLogger:!1}}if(s4(t.logger))return{logger:GR({logger:t.logger,serializers:Object.assign({},Wm,t.logger.serializers)}),hasLogger:!0};let e={};return Object.prototype.toString.call(t.logger)==="[object Object]"&&Reflect.ownKeys(t.logger).forEach(n=>{Object.defineProperty(e,n,{value:t.logger[n],writable:!0,enumerable:!0,configurable:!0})}),e.level=e.level||"info",e.serializers=Object.assign({},Wm,e.serializers),t.logger=e,{logger:GR(t.logger),hasLogger:!0}}function s4(t){let e=["info","error","debug","fatal","warn","trace","child"],r=e.filter(n=>!t[n]||typeof t[n]!="function");if(r.length){if(r.length===e.length)return!1;throw t4(r.join(","))}else return!0}JR.exports={createLogger:n4,serializers:Wm,now:r4}});var ou=$((tde,YR)=>{"use strict";YR.exports=i4;function Lo(t){return t instanceof Buffer?Buffer.from(t):new t.constructor(t.buffer.slice(),t.byteOffset,t.length)}function i4(t){if(t=t||{},t.circles)return o4(t);return t.proto?n:r;function e(s,i){for(var o=Object.keys(s),a=new Array(o.length),u=0;u<o.length;u++){var l=o[u],c=s[l];typeof c!="object"||c===null?a[l]=c:c instanceof Date?a[l]=new Date(c):ArrayBuffer.isView(c)?a[l]=Lo(c):a[l]=i(c)}return a}function r(s){if(typeof s!="object"||s===null)return s;if(s instanceof Date)return new Date(s);if(Array.isArray(s))return e(s,r);if(s instanceof Map)return new Map(e(Array.from(s),r));if(s instanceof Set)return new Set(e(Array.from(s),r));var i={};for(var o in s)if(Object.hasOwnProperty.call(s,o)!==!1){var a=s[o];typeof a!="object"||a===null?i[o]=a:a instanceof Date?i[o]=new Date(a):a instanceof Map?i[o]=new Map(e(Array.from(a),r)):a instanceof Set?i[o]=new Set(e(Array.from(a),r)):ArrayBuffer.isView(a)?i[o]=Lo(a):i[o]=r(a)}return i}function n(s){if(typeof s!="object"||s===null)return s;if(s instanceof Date)return new Date(s);if(Array.isArray(s))return e(s,n);if(s instanceof Map)return new Map(e(Array.from(s),n));if(s instanceof Set)return new Set(e(Array.from(s),n));var i={};for(var o in s){var a=s[o];typeof a!="object"||a===null?i[o]=a:a instanceof Date?i[o]=new Date(a):a instanceof Map?i[o]=new Map(e(Array.from(a),n)):a instanceof Set?i[o]=new Set(e(Array.from(a),n)):ArrayBuffer.isView(a)?i[o]=Lo(a):i[o]=n(a)}return i}}function o4(t){var e=[],r=[];return t.proto?i:s;function n(o,a){for(var u=Object.keys(o),l=new Array(u.length),c=0;c<u.length;c++){var f=u[c],h=o[f];if(typeof h!="object"||h===null)l[f]=h;else if(h instanceof Date)l[f]=new Date(h);else if(ArrayBuffer.isView(h))l[f]=Lo(h);else{var d=e.indexOf(h);d!==-1?l[f]=r[d]:l[f]=a(h)}}return l}function s(o){if(typeof o!="object"||o===null)return o;if(o instanceof Date)return new Date(o);if(Array.isArray(o))return n(o,s);if(o instanceof Map)return new Map(n(Array.from(o),s));if(o instanceof Set)return new Set(n(Array.from(o),s));var a={};e.push(o),r.push(a);for(var u in o)if(Object.hasOwnProperty.call(o,u)!==!1){var l=o[u];if(typeof l!="object"||l===null)a[u]=l;else if(l instanceof Date)a[u]=new Date(l);else if(l instanceof Map)a[u]=new Map(n(Array.from(l),s));else if(l instanceof Set)a[u]=new Set(n(Array.from(l),s));else if(ArrayBuffer.isView(l))a[u]=Lo(l);else{var c=e.indexOf(l);c!==-1?a[u]=r[c]:a[u]=s(l)}}return e.pop(),r.pop(),a}function i(o){if(typeof o!="object"||o===null)return o;if(o instanceof Date)return new Date(o);if(Array.isArray(o))return n(o,i);if(o instanceof Map)return new Map(n(Array.from(o),i));if(o instanceof Set)return new Set(n(Array.from(o),i));var a={};e.push(o),r.push(a);for(var u in o){var l=o[u];if(typeof l!="object"||l===null)a[u]=l;else if(l instanceof Date)a[u]=new Date(l);else if(l instanceof Map)a[u]=new Map(n(Array.from(l),i));else if(l instanceof Set)a[u]=new Set(n(Array.from(l),i));else if(ArrayBuffer.isView(l))a[u]=Lo(l);else{var c=e.indexOf(l);c!==-1?a[u]=r[c]:a[u]=i(l)}}return e.pop(),r.pop(),a}}});var au=$((rde,WR)=>{"use strict";var a4=ou()({circles:!1,proto:!0}),{kSchemaVisited:Qm,kSchemaResponse:u4}=xt(),Zm=Symbol.for("fluent-schema-object"),{FST_ERR_SCH_MISSING_ID:l4,FST_ERR_SCH_ALREADY_PRESENT:c4,FST_ERR_SCH_DUPLICATE:f4,FST_ERR_SCH_CONTENT_MISSING_SCHEMA:d4}=er(),h4=["params","body","querystring","query","headers"];function vf(t){this.store=t||{}}vf.prototype.add=function(t){let e=a4(t.isFluentSchema||t.isFluentJSONSchema||t[Zm]?t.valueOf():t),r=e.$id;if(!r)throw new l4;if(this.store[r])throw new c4(r);this.store[r]=e};vf.prototype.getSchemas=function(){return Object.assign({},this.store)};vf.prototype.getSchema=function(t){return this.store[t]};function p4(t,e){if(t[Qm])return t;if(t.query){if(t.querystring)throw new f4("querystring");t.querystring=t.query}m4(t);for(let r of["headers","querystring","params","body"])if(typeof t[r]=="object"&&Object.getPrototypeOf(t[r])!==Object.prototype)return t[Qm]=!0,t;if(t.body&&(t.body=xo(t.body,e.jsonShorthand)),t.headers&&(t.headers=xo(t.headers,e.jsonShorthand)),t.querystring&&(t.querystring=xo(t.querystring,e.jsonShorthand)),t.params&&(t.params=xo(t.params,e.jsonShorthand)),t.response){let r=Object.keys(t.response);for(let n of r){let s=t.response[n].content,i=!1;if(s){let o=Object.keys(s);for(let a=0;a<o.length;a++){let u=o[a];if(!s[u].schema){if(o.length===1)break;throw new d4(u)}t.response[n].content[u].schema=xo(s[u].schema,e.jsonShorthand),a===o.length-1&&(i=!0)}}i||(t.response[n]=xo(t.response[n],e.jsonShorthand))}}return t[Qm]=!0,t}function m4(t){for(let e of h4)t[e]&&(t[e].isFluentSchema||t[e][Zm])&&(t[e]=t[e].valueOf());if(t.response){let e=Object.keys(t.response);for(let r of e)(t.response[r].isFluentSchema||t.response[r][Zm])&&(t.response[r]=t.response[r].valueOf())}}function xo(t,e){return!e||t.$ref||t.oneOf||t.allOf||t.anyOf||t.$merge||t.$patch?t:!t.type&&!t.properties?{type:"object",properties:t}:t}function y4(t,e,r){let n=t[u4];if(!n)return!1;if(n[e]){if(n[e].constructor===Object&&r){let i=r.split(";")[0];return n[e][i]?n[e][i]:!1}return n[e]}let s=(e+"")[0]+"xx";if(n[s]){if(n[s].constructor===Object&&r){let i=r.split(";")[0];return n[s][i]?n[s][i]:!1}return n[s]}if(n.default){if(n.default.constructor===Object&&r){let i=r.split(";")[0];return n.default[i]?n.default[i]:!1}return n.default}return!1}WR.exports={buildSchemas(t){return new vf(t)},getSchemaSerializer:y4,normalizeSchema:p4}});var QR=$((nde,XR)=>{"use strict";var g4=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]|[\ud800-\udbff](?![\udc00-\udfff])|(?:[^\ud800-\udbff]|^)[\udc00-\udfff]/,ey=class{constructor(e){switch(e&&e.rounding){case"floor":this.parseInteger=Math.floor;break;case"ceil":this.parseInteger=Math.ceil;break;case"round":this.parseInteger=Math.round;break;case"trunc":default:this.parseInteger=Math.trunc;break}}asInteger(e){if(typeof e=="number"){if(e===1/0||e===-1/0)throw new Error(`The value "${e}" cannot be converted to an integer.`);if(Number.isInteger(e))return""+e;if(Number.isNaN(e))throw new Error(`The value "${e}" cannot be converted to an integer.`);return this.parseInteger(e)}else{if(e===null)return"0";if(typeof e=="bigint")return e.toString();{let r=this.parseInteger(e);if(Number.isFinite(r))return""+r;throw new Error(`The value "${e}" cannot be converted to an integer.`)}}}asNumber(e){let r=Number(e);if(Number.isNaN(r))throw new Error(`The value "${e}" cannot be converted to a number.`);return Number.isFinite(r)?""+r:null}asBoolean(e){return e&&"true"||"false"}asDateTime(e){if(e===null)return'""';if(e instanceof Date)return'"'+e.toISOString()+'"';if(typeof e=="string")return'"'+e+'"';throw new Error(`The value "${e}" cannot be converted to a date-time.`)}asDate(e){if(e===null)return'""';if(e instanceof Date)return'"'+new Date(e.getTime()-e.getTimezoneOffset()*6e4).toISOString().slice(0,10)+'"';if(typeof e=="string")return'"'+e+'"';throw new Error(`The value "${e}" cannot be converted to a date.`)}asTime(e){if(e===null)return'""';if(e instanceof Date)return'"'+new Date(e.getTime()-e.getTimezoneOffset()*6e4).toISOString().slice(11,19)+'"';if(typeof e=="string")return'"'+e+'"';throw new Error(`The value "${e}" cannot be converted to a time.`)}asString(e){if(typeof e!="string"){if(e===null)return'""';if(e instanceof Date)return'"'+e.toISOString()+'"';e instanceof RegExp?e=e.source:e=e.toString()}return g4.test(e)?e.length<42?this.asStringSmall(e):JSON.stringify(e):'"'+e+'"'}asStringSmall(e){let r=e.length,n="",s=0,i=!1,o=!1,a=255;for(var u=0;u<r&&a>=32;u++)a=e.charCodeAt(u),a>=55296&&a<=57343&&(o=!0),(a===34||a===92)&&(n+=e.slice(s,u)+"\\",s=u,i=!0);return i?n+=e.slice(s):n=e,a<32||o===!0?JSON.stringify(e):'"'+n+'"'}},$f=new ey;function _4(t){let e=t&&typeof t.toJSON=="function"?t.toJSON():t,r="{",n=!1;return e.statusCode!==void 0&&(!n&&(n=!0)||(r+=","),r+='"statusCode":',r+=$f.asNumber(e.statusCode)),e.code!==void 0&&(!n&&(n=!0)||(r+=","),r+='"code":',r+=$f.asString(e.code)),e.error!==void 0&&(!n&&(n=!0)||(r+=","),r+='"error":',r+=$f.asString(e.error)),e.message!==void 0&&(!n&&(n=!0)||(r+=","),r+='"message":',r+=$f.asString(e.message)),r+"}"}var v4=_4;XR.exports=v4});var uu=$((sde,rP)=>{"use strict";var ZR=require("http").STATUS_CODES,$4=em(),{kReplyHeaders:Fo,kReplyNextErrorHandler:bf,kReplyIsRunningOnErrorHook:b4,kReplyHasStatusCode:w4,kRouteContext:tP}=xt(),{FST_ERR_REP_INVALID_PAYLOAD_TYPE:E4,FST_ERR_FAILED_ERROR_SERIALIZATION:S4}=er(),{getSchemaSerializer:R4}=au(),ty=QR(),P4={func:O4,toJSON(){return this.func.name.toString()+"()"}};function T4(t,e,r){t[b4]=!1;let n=t[tP];if(t[bf]===!1){eP(e,t,function(a,u){try{a.raw.writeHead(a.raw.statusCode,a[Fo])}catch(l){a.log.warn({req:a.request,res:a,err:l},l&&l.message),a.raw.writeHead(a.raw.statusCode)}a.raw.end(u)});return}let s=t[bf]||n.errorHandler;t[bf]=Object.getPrototypeOf(s),delete t[Fo]["content-type"],delete t[Fo]["content-length"];let i=s.func;if(!i){t[bf]=!1,eP(e,t,r);return}let o=i(e,t.request,t);o!==void 0&&(o!==null&&typeof o.then=="function"?$4(o,t):t.send(o))}function O4(t,e,r){if(I4(t,r),!r[w4]||r.statusCode===200){let n=t.statusCode||t.status;r.code(n>=400?n:500)}r.statusCode<500?r.log.info({res:r,err:t},t&&t.message):r.log.error({req:e,res:r,err:t},t&&t.message),r.send(t)}function eP(t,e,r){let n=e.raw,s=e.statusCode,i;try{let o=R4(e[tP],s,e[Fo]["content-type"]);i=o===!1?ty({error:ZR[s+""],code:t.code,message:t.message,statusCode:s}):o(Object.create(t,{error:{value:ZR[s+""]},message:{value:t.message},statusCode:{value:s}}))}catch(o){e.log.error({err:o,statusCode:n.statusCode},"The serializer for the given status code failed"),e.code(500),i=ty(new S4(o.message,t.message))}typeof i!="string"&&!Buffer.isBuffer(i)&&(i=ty(new E4(typeof i))),e[Fo]["content-type"]="application/json; charset=utf-8",e[Fo]["content-length"]=""+Buffer.byteLength(i),r(e,i)}function N4(t=P4,e){if(!e)return t;let r=Object.create(t);return r.func=e,r}function I4(t,e){let r=e.raw,n=r.statusCode;n=n>=400?n:500,t!=null&&(t.headers!==void 0&&e.headers(t.headers),t.status>=400?n=t.status:t.statusCode>=400&&(n=t.statusCode)),r.statusCode=n}rP.exports={buildErrorHandler:N4,handleError:T4}});var Pf=$((ide,Rf)=>{"use strict";var sy=require("stream").finished,{kFourOhFourContext:nP,kReplyErrorHandlerCalled:cP,kReplyHijacked:lu,kReplyStartTime:cu,kReplyEndTime:ay,kReplySerializer:os,kReplySerializerDefault:wf,kReplyIsError:Ef,kReplyHeaders:Ze,kReplyTrailers:Ft,kReplyHasStatusCode:uy,kReplyIsRunningOnErrorHook:ly,kReplyNextErrorHandler:C4,kDisableRequestLogging:fP,kSchemaResponse:Sf,kReplyCacheSerializeFns:Fs,kSchemaController:ry,kOptions:A4,kRouteContext:ve}=xt(),{hookRunner:dP,hookIterator:k4,onSendHookRunner:cy}=Ti(),sP=sm()[Symbol.for("internals")],q4=Xm(),iy=q4.now,{handleError:iP}=uu(),{getSchemaSerializer:j4}=au(),ny={JSON:"application/json; charset=utf-8",PLAIN:"text/plain; charset=utf-8",OCTET:"application/octet-stream"},{FST_ERR_REP_INVALID_PAYLOAD_TYPE:D4,FST_ERR_REP_ALREADY_SENT:hP,FST_ERR_REP_SENT_VALUE:L4,FST_ERR_SEND_INSIDE_ONERR:x4,FST_ERR_BAD_STATUS_CODE:F4,FST_ERR_BAD_TRAILER_NAME:M4,FST_ERR_BAD_TRAILER_VALUE:V4,FST_ERR_MISSING_SERIALIZATION_FN:z4,FST_ERR_MISSING_CONTENTTYPE_SERIALIZATION_FN:U4}=er(),pP=Pi();function et(t,e,r){this.raw=t,this[os]=null,this[cP]=!1,this[Ef]=!1,this[ly]=!1,this.request=e,this[Ze]={},this[Ft]=null,this[uy]=!1,this[cu]=void 0,this.log=r}et.props=[];Object.defineProperties(et.prototype,{[ve]:{get(){return this.request[ve]}},context:{get(){return this.request[ve]}},server:{get(){return this.request[ve].server}},sent:{enumerable:!0,get(){return(this[lu]||this.raw.writableEnded)===!0},set(t){if(pP.emit("FSTDEP010"),t!==!0)throw new L4;if(this.sent&&this[lu])throw new hP;this[lu]=!0}},statusCode:{get(){return this.raw.statusCode},set(t){this.code(t)}}});et.prototype.hijack=function(){return this[lu]=!0,this};et.prototype.send=function(t){if(this[ly]===!0)throw new x4;if(this.sent)return this.log.warn({err:new hP},"Reply already sent"),this;if(t instanceof Error||this[Ef]===!0)return this[Ef]=!1,fu(this,t,Ai),this;if(t===void 0)return Ai(this,t),this;let e=this.getHeader("content-type"),r=e!==void 0;if(t!==null){if(typeof t.pipe=="function")return Ai(this,t),this;if(Buffer.isBuffer(t))return r===!1&&(this[Ze]["content-type"]=ny.OCTET),Ai(this,t),this;if(r===!1&&typeof t=="string")return this[Ze]["content-type"]=ny.PLAIN,Ai(this,t),this}if(this[os]!==null){if(typeof t!="string")return oP(this,t),this;t=this[os](t)}else if(r===!1||e.indexOf("json")>-1){if(r===!1)this[Ze]["content-type"]=ny.JSON;else if(e.indexOf("charset")===-1){let n=e.trim();n.endsWith(";")?this[Ze]["content-type"]=`${n} charset=utf-8`:this[Ze]["content-type"]=`${n}; charset=utf-8`}if(typeof t!="string")return oP(this,t),this}return Ai(this,t),this};et.prototype.getHeader=function(t){t=t.toLowerCase();let e=this.raw,r=this[Ze][t];return r===void 0&&e.hasHeader(t)&&(r=e.getHeader(t)),r};et.prototype.getHeaders=function(){return{...this.raw.getHeaders(),...this[Ze]}};et.prototype.hasHeader=function(t){return t=t.toLowerCase(),this[Ze][t]!==void 0||this.raw.hasHeader(t)};et.prototype.removeHeader=function(t){return delete this[Ze][t.toLowerCase()],this};et.prototype.header=function(t,e=""){return t=t.toLowerCase(),this[Ze][t]&&t==="set-cookie"?(typeof this[Ze][t]=="string"&&(this[Ze][t]=[this[Ze][t]]),Array.isArray(e)?this[Ze][t].push(...e):this[Ze][t].push(e)):this[Ze][t]=e,this};et.prototype.headers=function(t){let e=Object.keys(t);for(var r=0;r!==e.length;++r){let n=e[r];this.header(n,t[n])}return this};var H4=new Set(["transfer-encoding","content-length","host","cache-control","max-forwards","te","authorization","set-cookie","content-encoding","content-type","content-range","trailer"]);et.prototype.trailer=function(t,e){if(t=t.toLowerCase(),H4.has(t))throw new M4(t);if(typeof e!="function")throw new V4(t,typeof e);return this[Ft]===null&&(this[Ft]={}),this[Ft][t]=e,this};et.prototype.hasTrailer=function(t){return this[Ft]?.[t.toLowerCase()]!==void 0};et.prototype.removeTrailer=function(t){return this[Ft]===null?this:(this[Ft][t.toLowerCase()]=void 0,this)};et.prototype.code=function(t){let e=Number(t);if(isNaN(e)||e<100||e>599)throw new F4(t||String(t));return this.raw.statusCode=e,this[uy]=!0,this};et.prototype.status=et.prototype.code;et.prototype.getSerializationFunction=function(t,e){let r;return typeof t=="string"||typeof t=="number"?typeof e=="string"?r=this[ve][Sf]?.[t]?.[e]:r=this[ve][Sf]?.[t]:typeof t=="object"&&(r=this[ve][Fs]?.get(t)),r};et.prototype.compileSerializationSchema=function(t,e=null,r=null){let{request:n}=this,{method:s,url:i}=n;if(this[ve][Fs]?.has(t))return this[ve][Fs].get(t);let a=(this[ve].serializerCompiler||this.server[ry].serializerCompiler||this.server[ry].setupSerializer(this.server[A4])||this.server[ry].serializerCompiler)({schema:t,method:s,url:i,httpStatus:e,contentType:r});return this[ve][Fs]==null&&(this[ve][Fs]=new WeakMap),this[ve][Fs].set(t,a),a};et.prototype.serializeInput=function(t,e,r,n){let s=r,i;if(r=typeof e=="string"||typeof e=="number"?e:r,n=r&&s!==r?s:n,r!=null){if(n!=null?i=this[ve][Sf]?.[r]?.[n]:i=this[ve][Sf]?.[r],i==null)throw n?new U4(r,n):new z4(r)}else this[ve][Fs]?.has(e)?i=this[ve][Fs].get(e):i=this.compileSerializationSchema(e,r,n);return i(t)};et.prototype.serialize=function(t){return this[os]!==null?this[os](t):this[ve]&&this[ve][wf]?this[ve][wf](t,this.raw.statusCode):yP(this[ve],t,this.raw.statusCode)};et.prototype.serializer=function(t){return this[os]=t,this};et.prototype.type=function(t){return this[Ze]["content-type"]=t,this};et.prototype.redirect=function(t,e){return typeof t=="string"&&(e=t,t=this[uy]?this.raw.statusCode:302),this.header("location",e).code(t).send()};et.prototype.callNotFound=function(){return Q4(this),this};et.prototype.getResponseTime=function(){let t=0;return this[cu]!==void 0&&(t=(this[ay]||iy())-this[cu]),t};et.prototype.then=function(t,e){if(this.sent){t();return}sy(this.raw,r=>{r&&r.code!=="ERR_STREAM_PREMATURE_CLOSE"?e?e(r):this.log&&this.log.warn("unhandled rejection on reply.then"):t()})};function oP(t,e){t[ve].preSerialization!==null?cy(t[ve].preSerialization,t.request,t,e,aP):aP(null,t.request,t,e)}function aP(t,e,r,n){if(t!=null){fu(r,t);return}try{r[os]!==null?n=r[os](n):r[ve]&&r[ve][wf]?n=r[ve][wf](n,r.raw.statusCode):n=yP(r[ve],n,r.raw.statusCode,r[Ze]["content-type"])}catch(s){K4(s,r),fu(r,s);return}Ai(r,n)}function K4(t,e){t.serialization=e[ve].config}function Ai(t,e){t[ve].onSend!==null?cy(t[ve].onSend,t.request,t,e,B4):mP(t,e)}function B4(t,e,r,n){t!=null?fu(r,t):mP(r,n)}function mP(t,e){let r=t.raw,n=t.request,s=r.statusCode;if(t[Ft]!==null){let i=Object.keys(t[Ft]),o="";for(let a of i)typeof t[Ft][a]=="function"&&(o+=" ",o+=a);t.header("Transfer-Encoding","chunked"),t.header("Trailer",o.trim())}if(e==null){s>=200&&s!==204&&s!==304&&n.method!=="HEAD"&&t[Ft]===null&&(t[Ze]["content-length"]="0"),r.writeHead(s,t[Ze]),oy(e,r,t);return}if(typeof e.pipe=="function"){G4(e,r,t);return}if(typeof e!="string"&&!Buffer.isBuffer(e))throw new D4(typeof e);if(t[Ft]===null){let i=t[Ze]["content-length"];(!i||n.raw.method!=="HEAD"&&Number(i)!==Buffer.byteLength(e))&&(t[Ze]["content-length"]=""+Buffer.byteLength(e))}r.writeHead(s,t[Ze]),r.write(e),oy(e,r,t)}function uP(t,e,r){e.code==="ERR_STREAM_PREMATURE_CLOSE"?t[fP]||t.info({res:r},"stream closed prematurely"):t.warn({err:e},"response terminated with an error with headers already sent")}function G4(t,e,r){let n=!0,s=!1;if(J4(t,e,r),sy(t,{readable:!0,writable:!1},function(i){n=!1,i!=null&&(e.headersSent||r.request.raw.aborted===!0?(s||(s=!0,uP(r.log,i,e)),e.destroy()):fu(r,i))}),sy(e,function(i){n&&(i!=null&&e.headersSent&&!s&&(s=!0,uP(r.log,i,e)),typeof t.destroy=="function"?t.destroy():typeof t.close=="function"?t.close(Z4):typeof t.abort=="function"?t.abort():r.log.warn("stream payload does not end properly"))}),e.headersSent)r.log.warn("response will send, but you shouldn't use res.writeHead in stream mode");else for(let i in r[Ze])e.setHeader(i,r[Ze][i]);t.pipe(e)}function oy(t,e,r){if(r[Ft]===null){e.end(null,null,null);return}let n=Object.keys(r[Ft]),s={},i=0,o=!0;function a(){i===0&&(e.addTrailers(s),e.end(null,null,null))}for(let u of n){let l=function(f,h){i++,f?r.log.debug(f):s[u]=h,process.nextTick(a)};if(typeof r[Ft][u]!="function")continue;o=!1,i--;let c=r[Ft][u](r,t,l);typeof c=="object"&&typeof c.then=="function"?c.then(f=>l(null,f),l):c!=null&&(pP.emit("FSTDEP013"),l(null,c))}o&&e.end(null,null,null)}function J4(t,e,r){r[Ft]!==null&&t.on("end",()=>oy(null,e,r))}function fu(t,e,r){t[ve].onError!==null&&!t[C4]?(t[ly]=!0,cy(t[ve].onError,t.request,t,e,()=>iP(t,e,r))):iP(t,e,r)}function Y4(t){t[cu]=iy();let e=r=>{t[ay]=iy(),t.raw.removeListener("finish",e),t.raw.removeListener("error",e);let n=t[ve];n&&n.onResponse!==null?dP(n.onResponse,W4,t.request,t,lP):lP(r,t.request,t)};t.raw.on("finish",e),t.raw.on("error",e)}function W4(t,e,r,n){return t(e,r,n)}function lP(t,e,r){if(r.log[fP])return;let n=r.getResponseTime();if(t!=null){r.log.error({res:r,err:t,responseTime:n},"request errored");return}r.log.info({res:r,responseTime:n},"request completed")}function X4(t){let e=[...t.props];function r(n,s,i){this.raw=n,this[Ef]=!1,this[cP]=!1,this[lu]=!1,this[os]=null,this.request=s,this[Ze]={},this[Ft]=null,this[cu]=void 0,this[ay]=void 0,this.log=i;for(var o,a=0;a<e.length;a++)o=e[a],this[o.key]=o.value}return Object.setPrototypeOf(r.prototype,t.prototype),Object.setPrototypeOf(r,t),r.parent=t,r.props=e,r}function Q4(t){if(t[ve][nP]===null){t.log.warn("Trying to send a NotFound error inside a 404 handler. Sending basic 404 response."),t.code(404).send("404 Not Found");return}t.request[ve]=t[ve][nP],t[ve].preHandler!==null?dP(t[ve].preHandler,k4,t.request,t,sP.preHandlerCallback):sP.preHandlerCallback(null,t.request,t)}function yP(t,e,r,n){let s=j4(t,r,n);return s?s(e):JSON.stringify(e)}function Z4(){}Rf.exports=et;Rf.exports.buildReply=X4;Rf.exports.setupResponseListeners=Y4});var _P=$((ode,gP)=>{"use strict";gP.exports=e3;function e3(t){if(!t)throw new TypeError("argument req is required");var e=r3(t.headers["x-forwarded-for"]||""),r=t3(t),n=[r].concat(e);return n}function t3(t){return t.socket?t.socket.remoteAddress:t.connection.remoteAddress}function r3(t){for(var e=t.length,r=[],n=t.length,s=t.length-1;s>=0;s--)switch(t.charCodeAt(s)){case 32:n===e&&(n=e=s);break;case 44:n!==e&&r.push(t.substring(n,e)),n=e=s;break;default:n=s;break}return n!==e&&r.push(t.substring(n,e)),r}});var $P=$((vP,du)=>{(function(){var t,e,r,n,s,i,o,a,u;e={},a=this,typeof du<"u"&&du!==null&&du.exports?du.exports=e:a.ipaddr=e,o=function(l,c,f,h){var d,p;if(l.length!==c.length)throw new Error("ipaddr: cannot match CIDR for objects with different lengths");for(d=0;h>0;){if(p=f-h,p<0&&(p=0),l[d]>>p!==c[d]>>p)return!1;h-=f,d+=1}return!0},e.subnetMatch=function(l,c,f){var h,d,p,m,v;f==null&&(f="unicast");for(p in c)for(m=c[p],m[0]&&!(m[0]instanceof Array)&&(m=[m]),h=0,d=m.length;h<d;h++)if(v=m[h],l.kind()===v[0].kind()&&l.match.apply(l,v))return p;return f},e.IPv4=function(){function l(c){var f,h,d;if(c.length!==4)throw new Error("ipaddr: ipv4 octet count should be 4");for(f=0,h=c.length;f<h;f++)if(d=c[f],!(0<=d&&d<=255))throw new Error("ipaddr: ipv4 octet should fit in 8 bits");this.octets=c}return l.prototype.kind=function(){return"ipv4"},l.prototype.toString=function(){return this.octets.join(".")},l.prototype.toNormalizedString=function(){return this.toString()},l.prototype.toByteArray=function(){return this.octets.slice(0)},l.prototype.match=function(c,f){var h;if(f===void 0&&(h=c,c=h[0],f=h[1]),c.kind()!=="ipv4")throw new Error("ipaddr: cannot match ipv4 address with non-ipv4 one");return o(this.octets,c.octets,8,f)},l.prototype.SpecialRanges={unspecified:[[new l([0,0,0,0]),8]],broadcast:[[new l([255,255,255,255]),32]],multicast:[[new l([224,0,0,0]),4]],linkLocal:[[new l([169,254,0,0]),16]],loopback:[[new l([127,0,0,0]),8]],carrierGradeNat:[[new l([100,64,0,0]),10]],private:[[new l([10,0,0,0]),8],[new l([172,16,0,0]),12],[new l([192,168,0,0]),16]],reserved:[[new l([192,0,0,0]),24],[new l([192,0,2,0]),24],[new l([192,88,99,0]),24],[new l([198,51,100,0]),24],[new l([203,0,113,0]),24],[new l([240,0,0,0]),4]]},l.prototype.range=function(){return e.subnetMatch(this,this.SpecialRanges)},l.prototype.toIPv4MappedAddress=function(){return e.IPv6.parse("::ffff:"+this.toString())},l.prototype.prefixLengthFromSubnetMask=function(){var c,f,h,d,p,m,v;for(v={0:8,128:7,192:6,224:5,240:4,248:3,252:2,254:1,255:0},c=0,p=!1,f=h=3;h>=0;f=h+=-1)if(d=this.octets[f],d in v){if(m=v[d],p&&m!==0)return null;m!==8&&(p=!0),c+=m}else return null;return 32-c},l}(),r="(0?\\d+|0x[a-f0-9]+)",n={fourOctet:new RegExp("^"+r+"\\."+r+"\\."+r+"\\."+r+"$","i"),longValue:new RegExp("^"+r+"$","i")},e.IPv4.parser=function(l){var c,f,h,d,p;if(f=function(m){return m[0]==="0"&&m[1]!=="x"?parseInt(m,8):parseInt(m)},c=l.match(n.fourOctet))return function(){var m,v,g,w;for(g=c.slice(1,6),w=[],m=0,v=g.length;m<v;m++)h=g[m],w.push(f(h));return w}();if(c=l.match(n.longValue)){if(p=f(c[1]),p>4294967295||p<0)throw new Error("ipaddr: address outside defined range");return function(){var m,v;for(v=[],d=m=0;m<=24;d=m+=8)v.push(p>>d&255);return v}().reverse()}else return null},e.IPv6=function(){function l(c,f){var h,d,p,m,v,g;if(c.length===16)for(this.parts=[],h=d=0;d<=14;h=d+=2)this.parts.push(c[h]<<8|c[h+1]);else if(c.length===8)this.parts=c;else throw new Error("ipaddr: ipv6 part count should be 8 or 16");for(g=this.parts,p=0,m=g.length;p<m;p++)if(v=g[p],!(0<=v&&v<=65535))throw new Error("ipaddr: ipv6 part should fit in 16 bits");f&&(this.zoneId=f)}return l.prototype.kind=function(){return"ipv6"},l.prototype.toString=function(){return this.toNormalizedString().replace(/((^|:)(0(:|$))+)/,"::")},l.prototype.toRFC5952String=function(){var c,f,h,d,p;for(d=/((^|:)(0(:|$)){2,})/g,p=this.toNormalizedString(),c=0,f=-1;h=d.exec(p);)h[0].length>f&&(c=h.index,f=h[0].length);return f<0?p:p.substring(0,c)+"::"+p.substring(c+f)},l.prototype.toByteArray=function(){var c,f,h,d,p;for(c=[],p=this.parts,f=0,h=p.length;f<h;f++)d=p[f],c.push(d>>8),c.push(d&255);return c},l.prototype.toNormalizedString=function(){var c,f,h;return c=function(){var d,p,m,v;for(m=this.parts,v=[],d=0,p=m.length;d<p;d++)f=m[d],v.push(f.toString(16));return v}.call(this).join(":"),h="",this.zoneId&&(h="%"+this.zoneId),c+h},l.prototype.toFixedLengthString=function(){var c,f,h;return c=function(){var d,p,m,v;for(m=this.parts,v=[],d=0,p=m.length;d<p;d++)f=m[d],v.push(f.toString(16).padStart(4,"0"));return v}.call(this).join(":"),h="",this.zoneId&&(h="%"+this.zoneId),c+h},l.prototype.match=function(c,f){var h;if(f===void 0&&(h=c,c=h[0],f=h[1]),c.kind()!=="ipv6")throw new Error("ipaddr: cannot match ipv6 address with non-ipv6 one");return o(this.parts,c.parts,16,f)},l.prototype.SpecialRanges={unspecified:[new l([0,0,0,0,0,0,0,0]),128],linkLocal:[new l([65152,0,0,0,0,0,0,0]),10],multicast:[new l([65280,0,0,0,0,0,0,0]),8],loopback:[new l([0,0,0,0,0,0,0,1]),128],uniqueLocal:[new l([64512,0,0,0,0,0,0,0]),7],ipv4Mapped:[new l([0,0,0,0,0,65535,0,0]),96],rfc6145:[new l([0,0,0,0,65535,0,0,0]),96],rfc6052:[new l([100,65435,0,0,0,0,0,0]),96],"6to4":[new l([8194,0,0,0,0,0,0,0]),16],teredo:[new l([8193,0,0,0,0,0,0,0]),32],reserved:[[new l([8193,3512,0,0,0,0,0,0]),32]]},l.prototype.range=function(){return e.subnetMatch(this,this.SpecialRanges)},l.prototype.isIPv4MappedAddress=function(){return this.range()==="ipv4Mapped"},l.prototype.toIPv4Address=function(){var c,f,h;if(!this.isIPv4MappedAddress())throw new Error("ipaddr: trying to convert a generic ipv6 address to ipv4");return h=this.parts.slice(-2),c=h[0],f=h[1],new e.IPv4([c>>8,c&255,f>>8,f&255])},l.prototype.prefixLengthFromSubnetMask=function(){var c,f,h,d,p,m,v;for(v={0:16,32768:15,49152:14,57344:13,61440:12,63488:11,64512:10,65024:9,65280:8,65408:7,65472:6,65504:5,65520:4,65528:3,65532:2,65534:1,65535:0},c=0,p=!1,f=h=7;h>=0;f=h+=-1)if(d=this.parts[f],d in v){if(m=v[d],p&&m!==0)return null;m!==16&&(p=!0),c+=m}else return null;return 128-c},l}(),s="(?:[0-9a-f]+::?)+",u="%[0-9a-z]{1,}",i={zoneIndex:new RegExp(u,"i"),native:new RegExp("^(::)?("+s+")?([0-9a-f]+)?(::)?("+u+")?$","i"),transitional:new RegExp("^((?:"+s+")|(?:::)(?:"+s+")?)"+(r+"\\."+r+"\\."+r+"\\."+r)+("("+u+")?$"),"i")},t=function(l,c){var f,h,d,p,m,v;if(l.indexOf("::")!==l.lastIndexOf("::"))return null;for(v=(l.match(i.zoneIndex)||[])[0],v&&(v=v.substring(1),l=l.replace(/%.+$/,"")),f=0,h=-1;(h=l.indexOf(":",h+1))>=0;)f++;if(l.substr(0,2)==="::"&&f--,l.substr(-2,2)==="::"&&f--,f>c)return null;for(m=c-f,p=":";m--;)p+="0:";return l=l.replace("::",p),l[0]===":"&&(l=l.slice(1)),l[l.length-1]===":"&&(l=l.slice(0,-1)),c=function(){var g,w,_,y;for(_=l.split(":"),y=[],g=0,w=_.length;g<w;g++)d=_[g],y.push(parseInt(d,16));return y}(),{parts:c,zoneId:v}},e.IPv6.parser=function(l){var c,f,h,d,p,m,v;if(i.native.test(l))return t(l,8);if((d=l.match(i.transitional))&&(v=d[6]||"",c=t(d[1].slice(0,-1)+v,6),c.parts)){for(m=[parseInt(d[2]),parseInt(d[3]),parseInt(d[4]),parseInt(d[5])],f=0,h=m.length;f<h;f++)if(p=m[f],!(0<=p&&p<=255))return null;return c.parts.push(m[0]<<8|m[1]),c.parts.push(m[2]<<8|m[3]),{parts:c.parts,zoneId:c.zoneId}}return null},e.IPv4.isIPv4=e.IPv6.isIPv6=function(l){return this.parser(l)!==null},e.IPv4.isValid=function(l){var c;try{return new this(this.parser(l)),!0}catch(f){return c=f,!1}},e.IPv4.isValidFourPartDecimal=function(l){return!!(e.IPv4.isValid(l)&&l.match(/^(0|[1-9]\d*)(\.(0|[1-9]\d*)){3}$/))},e.IPv6.isValid=function(l){var c,f;if(typeof l=="string"&&l.indexOf(":")===-1)return!1;try{return c=this.parser(l),new this(c.parts,c.zoneId),!0}catch(h){return f=h,!1}},e.IPv4.parse=function(l){var c;if(c=this.parser(l),c===null)throw new Error("ipaddr: string is not formatted like ip address");return new this(c)},e.IPv6.parse=function(l){var c;if(c=this.parser(l),c.parts===null)throw new Error("ipaddr: string is not formatted like ip address");return new this(c.parts,c.zoneId)},e.IPv4.parseCIDR=function(l){var c,f,h;if((f=l.match(/^(.+)\/(\d+)$/))&&(c=parseInt(f[2]),c>=0&&c<=32))return h=[this.parse(f[1]),c],Object.defineProperty(h,"toString",{value:function(){return this.join("/")}}),h;throw new Error("ipaddr: string is not formatted like an IPv4 CIDR range")},e.IPv4.subnetMaskFromPrefixLength=function(l){var c,f,h;if(l=parseInt(l),l<0||l>32)throw new Error("ipaddr: invalid IPv4 prefix length");for(h=[0,0,0,0],f=0,c=Math.floor(l/8);f<c;)h[f]=255,f++;return c<4&&(h[c]=Math.pow(2,l%8)-1<<8-l%8),new this(h)},e.IPv4.broadcastAddressFromCIDR=function(l){var c,f,h,d,p,m;try{for(c=this.parseCIDR(l),d=c[0].toByteArray(),m=this.subnetMaskFromPrefixLength(c[1]).toByteArray(),p=[],h=0;h<4;)p.push(parseInt(d[h],10)|parseInt(m[h],10)^255),h++;return new this(p)}catch(v){throw f=v,new Error("ipaddr: the address does not have IPv4 CIDR format")}},e.IPv4.networkAddressFromCIDR=function(l){var c,f,h,d,p,m;try{for(c=this.parseCIDR(l),d=c[0].toByteArray(),m=this.subnetMaskFromPrefixLength(c[1]).toByteArray(),p=[],h=0;h<4;)p.push(parseInt(d[h],10)&parseInt(m[h],10)),h++;return new this(p)}catch(v){throw f=v,new Error("ipaddr: the address does not have IPv4 CIDR format")}},e.IPv6.parseCIDR=function(l){var c,f,h;if((f=l.match(/^(.+)\/(\d+)$/))&&(c=parseInt(f[2]),c>=0&&c<=128))return h=[this.parse(f[1]),c],Object.defineProperty(h,"toString",{value:function(){return this.join("/")}}),h;throw new Error("ipaddr: string is not formatted like an IPv6 CIDR range")},e.isValid=function(l){return e.IPv6.isValid(l)||e.IPv4.isValid(l)},e.parse=function(l){if(e.IPv6.isValid(l))return e.IPv6.parse(l);if(e.IPv4.isValid(l))return e.IPv4.parse(l);throw new Error("ipaddr: the address has neither IPv6 nor IPv4 format")},e.parseCIDR=function(l){var c;try{return e.IPv6.parseCIDR(l)}catch(f){c=f;try{return e.IPv4.parseCIDR(l)}catch(h){throw c=h,new Error("ipaddr: the address has neither IPv6 nor IPv4 CIDR format")}}},e.fromByteArray=function(l){var c;if(c=l.length,c===4)return new e.IPv4(l);if(c===16)return new e.IPv6(l);throw new Error("ipaddr: the binary input is neither an IPv6 nor IPv4 address")},e.process=function(l){var c;return c=this.parse(l),c.kind()==="ipv6"&&c.isIPv4MappedAddress()?c.toIPv4Address():c}}).call(vP)});var RP=$((ade,Nf)=>{"use strict";Nf.exports=l3;Nf.exports.all=EP;Nf.exports.compile=SP;var n3=_P(),wP=$P(),s3=/^[0-9]+$/,Tf=wP.isValid,Of=wP.parse,bP={linklocal:["169.254.0.0/16","fe80::/10"],loopback:["127.0.0.1/8","::1/128"],uniquelocal:["10.0.0.0/8","172.16.0.0/12","192.168.0.0/16","fc00::/7"]};function EP(t,e){var r=n3(t);if(!e)return r;typeof e!="function"&&(e=SP(e));for(var n=0;n<r.length-1;n++)e(r[n],n)||(r.length=n+1);return r}function SP(t){if(!t)throw new TypeError("argument is required");var e;if(typeof t=="string")e=[t];else if(Array.isArray(t))e=t.slice();else throw new TypeError("unsupported trust argument");for(var r=0;r<e.length;r++)t=e[r],Object.prototype.hasOwnProperty.call(bP,t)&&(t=bP[t],e.splice.apply(e,[r,1].concat(t)),r+=t.length-1);return o3(i3(e))}function i3(t){for(var e=new Array(t.length),r=0;r<t.length;r++)e[r]=a3(t[r]);return e}function o3(t){var e=t.length;return e===0?c3:e===1?d3(t[0]):f3(t)}function a3(t){var e=t.lastIndexOf("/"),r=e!==-1?t.substring(0,e):t;if(!Tf(r))throw new TypeError("invalid IP address: "+r);var n=Of(r);e===-1&&n.kind()==="ipv6"&&n.isIPv4MappedAddress()&&(n=n.toIPv4Address());var s=n.kind()==="ipv6"?128:32,i=e!==-1?t.substring(e+1,t.length):null;if(i===null?i=s:s3.test(i)?i=parseInt(i,10):n.kind()==="ipv4"&&Tf(i)?i=u3(i):i=null,i<=0||i>s)throw new TypeError("invalid range on address: "+t);return[n,i]}function u3(t){var e=Of(t),r=e.kind();return r==="ipv4"?e.prefixLengthFromSubnetMask():null}function l3(t,e){if(!t)throw new TypeError("req argument is required");if(!e)throw new TypeError("trust argument is required");var r=EP(t,e),n=r[r.length-1];return n}function c3(){return!1}function f3(t){return function(r){if(!Tf(r))return!1;for(var n=Of(r),s,i=n.kind(),o=0;o<t.length;o++){var a=t[o],u=a[0],l=u.kind(),c=a[1],f=n;if(i!==l){if(l==="ipv4"&&!n.isIPv4MappedAddress())continue;s||(s=l==="ipv4"?n.toIPv4Address():n.toIPv4MappedAddress()),f=s}if(f.match(u,c))return!0}return!1}}function d3(t){var e=t[0],r=e.kind(),n=r==="ipv4",s=t[1];return function(o){if(!Tf(o))return!1;var a=Of(o),u=a.kind();if(u!==r){if(n&&!a.isIPv4MappedAddress())return!1;a=n?a.toIPv4Address():a.toIPv4MappedAddress()}return a.match(e,s)}}});var hu=$((ude,PP)=>{var h3="2.0.0",p3=Number.MAX_SAFE_INTEGER||9007199254740991,m3=16;PP.exports={SEMVER_SPEC_VERSION:h3,MAX_LENGTH:256,MAX_SAFE_INTEGER:p3,MAX_SAFE_COMPONENT_LENGTH:m3}});var pu=$((lde,TP)=>{var y3=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};TP.exports=y3});var ki=$((Ms,OP)=>{var{MAX_SAFE_COMPONENT_LENGTH:fy}=hu(),g3=pu();Ms=OP.exports={};var _3=Ms.re=[],B=Ms.src=[],G=Ms.t={},v3=0,ce=(t,e,r)=>{let n=v3++;g3(t,n,e),G[t]=n,B[n]=e,_3[n]=new RegExp(e,r?"g":void 0)};ce("NUMERICIDENTIFIER","0|[1-9]\\d*");ce("NUMERICIDENTIFIERLOOSE","[0-9]+");ce("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*");ce("MAINVERSION",`(${B[G.NUMERICIDENTIFIER]})\\.(${B[G.NUMERICIDENTIFIER]})\\.(${B[G.NUMERICIDENTIFIER]})`);ce("MAINVERSIONLOOSE",`(${B[G.NUMERICIDENTIFIERLOOSE]})\\.(${B[G.NUMERICIDENTIFIERLOOSE]})\\.(${B[G.NUMERICIDENTIFIERLOOSE]})`);ce("PRERELEASEIDENTIFIER",`(?:${B[G.NUMERICIDENTIFIER]}|${B[G.NONNUMERICIDENTIFIER]})`);ce("PRERELEASEIDENTIFIERLOOSE",`(?:${B[G.NUMERICIDENTIFIERLOOSE]}|${B[G.NONNUMERICIDENTIFIER]})`);ce("PRERELEASE",`(?:-(${B[G.PRERELEASEIDENTIFIER]}(?:\\.${B[G.PRERELEASEIDENTIFIER]})*))`);ce("PRERELEASELOOSE",`(?:-?(${B[G.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${B[G.PRERELEASEIDENTIFIERLOOSE]})*))`);ce("BUILDIDENTIFIER","[0-9A-Za-z-]+");ce("BUILD",`(?:\\+(${B[G.BUILDIDENTIFIER]}(?:\\.${B[G.BUILDIDENTIFIER]})*))`);ce("FULLPLAIN",`v?${B[G.MAINVERSION]}${B[G.PRERELEASE]}?${B[G.BUILD]}?`);ce("FULL",`^${B[G.FULLPLAIN]}$`);ce("LOOSEPLAIN",`[v=\\s]*${B[G.MAINVERSIONLOOSE]}${B[G.PRERELEASELOOSE]}?${B[G.BUILD]}?`);ce("LOOSE",`^${B[G.LOOSEPLAIN]}$`);ce("GTLT","((?:<|>)?=?)");ce("XRANGEIDENTIFIERLOOSE",`${B[G.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);ce("XRANGEIDENTIFIER",`${B[G.NUMERICIDENTIFIER]}|x|X|\\*`);ce("XRANGEPLAIN",`[v=\\s]*(${B[G.XRANGEIDENTIFIER]})(?:\\.(${B[G.XRANGEIDENTIFIER]})(?:\\.(${B[G.XRANGEIDENTIFIER]})(?:${B[G.PRERELEASE]})?${B[G.BUILD]}?)?)?`);ce("XRANGEPLAINLOOSE",`[v=\\s]*(${B[G.XRANGEIDENTIFIERLOOSE]})(?:\\.(${B[G.XRANGEIDENTIFIERLOOSE]})(?:\\.(${B[G.XRANGEIDENTIFIERLOOSE]})(?:${B[G.PRERELEASELOOSE]})?${B[G.BUILD]}?)?)?`);ce("XRANGE",`^${B[G.GTLT]}\\s*${B[G.XRANGEPLAIN]}$`);ce("XRANGELOOSE",`^${B[G.GTLT]}\\s*${B[G.XRANGEPLAINLOOSE]}$`);ce("COERCE",`(^|[^\\d])(\\d{1,${fy}})(?:\\.(\\d{1,${fy}}))?(?:\\.(\\d{1,${fy}}))?(?:$|[^\\d])`);ce("COERCERTL",B[G.COERCE],!0);ce("LONETILDE","(?:~>?)");ce("TILDETRIM",`(\\s*)${B[G.LONETILDE]}\\s+`,!0);Ms.tildeTrimReplace="$1~";ce("TILDE",`^${B[G.LONETILDE]}${B[G.XRANGEPLAIN]}$`);ce("TILDELOOSE",`^${B[G.LONETILDE]}${B[G.XRANGEPLAINLOOSE]}$`);ce("LONECARET","(?:\\^)");ce("CARETTRIM",`(\\s*)${B[G.LONECARET]}\\s+`,!0);Ms.caretTrimReplace="$1^";ce("CARET",`^${B[G.LONECARET]}${B[G.XRANGEPLAIN]}$`);ce("CARETLOOSE",`^${B[G.LONECARET]}${B[G.XRANGEPLAINLOOSE]}$`);ce("COMPARATORLOOSE",`^${B[G.GTLT]}\\s*(${B[G.LOOSEPLAIN]})$|^$`);ce("COMPARATOR",`^${B[G.GTLT]}\\s*(${B[G.FULLPLAIN]})$|^$`);ce("COMPARATORTRIM",`(\\s*)${B[G.GTLT]}\\s*(${B[G.LOOSEPLAIN]}|${B[G.XRANGEPLAIN]})`,!0);Ms.comparatorTrimReplace="$1$2$3";ce("HYPHENRANGE",`^\\s*(${B[G.XRANGEPLAIN]})\\s+-\\s+(${B[G.XRANGEPLAIN]})\\s*$`);ce("HYPHENRANGELOOSE",`^\\s*(${B[G.XRANGEPLAINLOOSE]})\\s+-\\s+(${B[G.XRANGEPLAINLOOSE]})\\s*$`);ce("STAR","(<|>)?=?\\s*\\*");ce("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");ce("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var mu=$((cde,NP)=>{var $3=["includePrerelease","loose","rtl"],b3=t=>t?typeof t!="object"?{loose:!0}:$3.filter(e=>t[e]).reduce((e,r)=>(e[r]=!0,e),{}):{};NP.exports=b3});var dy=$((fde,AP)=>{var IP=/^[0-9]+$/,CP=(t,e)=>{let r=IP.test(t),n=IP.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1},w3=(t,e)=>CP(e,t);AP.exports={compareIdentifiers:CP,rcompareIdentifiers:w3}});var tr=$((dde,DP)=>{var If=pu(),{MAX_LENGTH:kP,MAX_SAFE_INTEGER:Cf}=hu(),{re:qP,t:jP}=ki(),E3=mu(),{compareIdentifiers:Mo}=dy(),zr=class{constructor(e,r){if(r=E3(r),e instanceof zr){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid Version: ${e}`);if(e.length>kP)throw new TypeError(`version is longer than ${kP} characters`);If("SemVer",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=e.trim().match(r.loose?qP[jP.LOOSE]:qP[jP.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>Cf||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Cf||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Cf||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(s=>{if(/^[0-9]+$/.test(s)){let i=+s;if(i>=0&&i<Cf)return i}return s}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(If("SemVer.compare",this.version,this.options,e),!(e instanceof zr)){if(typeof e=="string"&&e===this.version)return 0;e=new zr(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof zr||(e=new zr(e,this.options)),Mo(this.major,e.major)||Mo(this.minor,e.minor)||Mo(this.patch,e.patch)}comparePre(e){if(e instanceof zr||(e=new zr(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],s=e.prerelease[r];if(If("prerelease compare",r,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n===s)continue;return Mo(n,s)}while(++r)}compareBuild(e){e instanceof zr||(e=new zr(e,this.options));let r=0;do{let n=this.build[r],s=e.build[r];if(If("prerelease compare",r,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n===s)continue;return Mo(n,s)}while(++r)}inc(e,r){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r),this.inc("pre",r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r),this.inc("pre",r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let n=this.prerelease.length;for(;--n>=0;)typeof this.prerelease[n]=="number"&&(this.prerelease[n]++,n=-2);n===-1&&this.prerelease.push(0)}r&&(Mo(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=[r,0]):this.prerelease=[r,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}};DP.exports=zr});var qi=$((hde,MP)=>{var{MAX_LENGTH:S3}=hu(),{re:LP,t:xP}=ki(),FP=tr(),R3=mu(),P3=(t,e)=>{if(e=R3(e),t instanceof FP)return t;if(typeof t!="string"||t.length>S3||!(e.loose?LP[xP.LOOSE]:LP[xP.FULL]).test(t))return null;try{return new FP(t,e)}catch{return null}};MP.exports=P3});var zP=$((pde,VP)=>{var T3=qi(),O3=(t,e)=>{let r=T3(t,e);return r?r.version:null};VP.exports=O3});var HP=$((mde,UP)=>{var N3=qi(),I3=(t,e)=>{let r=N3(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null};UP.exports=I3});var GP=$((yde,BP)=>{var KP=tr(),C3=(t,e,r,n)=>{typeof r=="string"&&(n=r,r=void 0);try{return new KP(t instanceof KP?t.version:t,r).inc(e,n).version}catch{return null}};BP.exports=C3});var Wr=$((gde,YP)=>{var JP=tr(),A3=(t,e,r)=>new JP(t,r).compare(new JP(e,r));YP.exports=A3});var Af=$((_de,WP)=>{var k3=Wr(),q3=(t,e,r)=>k3(t,e,r)===0;WP.exports=q3});var ZP=$((vde,QP)=>{var XP=qi(),j3=Af(),D3=(t,e)=>{if(j3(t,e))return null;{let r=XP(t),n=XP(e),s=r.prerelease.length||n.prerelease.length,i=s?"pre":"",o=s?"prerelease":"";for(let a in r)if((a==="major"||a==="minor"||a==="patch")&&r[a]!==n[a])return i+a;return o}};QP.exports=D3});var tT=$(($de,eT)=>{var L3=tr(),x3=(t,e)=>new L3(t,e).major;eT.exports=x3});var nT=$((bde,rT)=>{var F3=tr(),M3=(t,e)=>new F3(t,e).minor;rT.exports=M3});var iT=$((wde,sT)=>{var V3=tr(),z3=(t,e)=>new V3(t,e).patch;sT.exports=z3});var aT=$((Ede,oT)=>{var U3=qi(),H3=(t,e)=>{let r=U3(t,e);return r&&r.prerelease.length?r.prerelease:null};oT.exports=H3});var lT=$((Sde,uT)=>{var K3=Wr(),B3=(t,e,r)=>K3(e,t,r);uT.exports=B3});var fT=$((Rde,cT)=>{var G3=Wr(),J3=(t,e)=>G3(t,e,!0);cT.exports=J3});var kf=$((Pde,hT)=>{var dT=tr(),Y3=(t,e,r)=>{let n=new dT(t,r),s=new dT(e,r);return n.compare(s)||n.compareBuild(s)};hT.exports=Y3});var mT=$((Tde,pT)=>{var W3=kf(),X3=(t,e)=>t.sort((r,n)=>W3(r,n,e));pT.exports=X3});var gT=$((Ode,yT)=>{var Q3=kf(),Z3=(t,e)=>t.sort((r,n)=>Q3(n,r,e));yT.exports=Z3});var yu=$((Nde,_T)=>{var e9=Wr(),t9=(t,e,r)=>e9(t,e,r)>0;_T.exports=t9});var qf=$((Ide,vT)=>{var r9=Wr(),n9=(t,e,r)=>r9(t,e,r)<0;vT.exports=n9});var hy=$((Cde,$T)=>{var s9=Wr(),i9=(t,e,r)=>s9(t,e,r)!==0;$T.exports=i9});var jf=$((Ade,bT)=>{var o9=Wr(),a9=(t,e,r)=>o9(t,e,r)>=0;bT.exports=a9});var Df=$((kde,wT)=>{var u9=Wr(),l9=(t,e,r)=>u9(t,e,r)<=0;wT.exports=l9});var py=$((qde,ET)=>{var c9=Af(),f9=hy(),d9=yu(),h9=jf(),p9=qf(),m9=Df(),y9=(t,e,r,n)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return c9(t,r,n);case"!=":return f9(t,r,n);case">":return d9(t,r,n);case">=":return h9(t,r,n);case"<":return p9(t,r,n);case"<=":return m9(t,r,n);default:throw new TypeError(`Invalid operator: ${e}`)}};ET.exports=y9});var RT=$((jde,ST)=>{var g9=tr(),_9=qi(),{re:Lf,t:xf}=ki(),v9=(t,e)=>{if(t instanceof g9)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let r=null;if(!e.rtl)r=t.match(Lf[xf.COERCE]);else{let n;for(;(n=Lf[xf.COERCERTL].exec(t))&&(!r||r.index+r[0].length!==t.length);)(!r||n.index+n[0].length!==r.index+r[0].length)&&(r=n),Lf[xf.COERCERTL].lastIndex=n.index+n[1].length+n[2].length;Lf[xf.COERCERTL].lastIndex=-1}return r===null?null:_9(`${r[2]}.${r[3]||"0"}.${r[4]||"0"}`,e)};ST.exports=v9});var TT=$((Dde,PT)=>{"use strict";PT.exports=function(t){t.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}});var NT=$((Lde,OT)=>{"use strict";OT.exports=ze;ze.Node=ji;ze.create=ze;function ze(t){var e=this;if(e instanceof ze||(e=new ze),e.tail=null,e.head=null,e.length=0,t&&typeof t.forEach=="function")t.forEach(function(s){e.push(s)});else if(arguments.length>0)for(var r=0,n=arguments.length;r<n;r++)e.push(arguments[r]);return e}ze.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,r=t.prev;return e&&(e.prev=r),r&&(r.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=r),t.list.length--,t.next=null,t.prev=null,t.list=null,e};ze.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}};ze.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}};ze.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)b9(this,arguments[t]);return this.length};ze.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)w9(this,arguments[t]);return this.length};ze.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}};ze.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}};ze.prototype.forEach=function(t,e){e=e||this;for(var r=this.head,n=0;r!==null;n++)t.call(e,r.value,n,this),r=r.next};ze.prototype.forEachReverse=function(t,e){e=e||this;for(var r=this.tail,n=this.length-1;r!==null;n--)t.call(e,r.value,n,this),r=r.prev};ze.prototype.get=function(t){for(var e=0,r=this.head;r!==null&&e<t;e++)r=r.next;if(e===t&&r!==null)return r.value};ze.prototype.getReverse=function(t){for(var e=0,r=this.tail;r!==null&&e<t;e++)r=r.prev;if(e===t&&r!==null)return r.value};ze.prototype.map=function(t,e){e=e||this;for(var r=new ze,n=this.head;n!==null;)r.push(t.call(e,n.value,this)),n=n.next;return r};ze.prototype.mapReverse=function(t,e){e=e||this;for(var r=new ze,n=this.tail;n!==null;)r.push(t.call(e,n.value,this)),n=n.prev;return r};ze.prototype.reduce=function(t,e){var r,n=this.head;if(arguments.length>1)r=e;else if(this.head)n=this.head.next,r=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var s=0;n!==null;s++)r=t(r,n.value,s),n=n.next;return r};ze.prototype.reduceReverse=function(t,e){var r,n=this.tail;if(arguments.length>1)r=e;else if(this.tail)n=this.tail.prev,r=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var s=this.length-1;n!==null;s--)r=t(r,n.value,s),n=n.prev;return r};ze.prototype.toArray=function(){for(var t=new Array(this.length),e=0,r=this.head;r!==null;e++)t[e]=r.value,r=r.next;return t};ze.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,r=this.tail;r!==null;e++)t[e]=r.value,r=r.prev;return t};ze.prototype.slice=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new ze;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=0,s=this.head;s!==null&&n<t;n++)s=s.next;for(;s!==null&&n<e;n++,s=s.next)r.push(s.value);return r};ze.prototype.sliceReverse=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new ze;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=this.length,s=this.tail;s!==null&&n>e;n--)s=s.prev;for(;s!==null&&n>t;n--,s=s.prev)r.push(s.value);return r};ze.prototype.splice=function(t,e,...r){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var n=0,s=this.head;s!==null&&n<t;n++)s=s.next;for(var i=[],n=0;s&&n<e;n++)i.push(s.value),s=this.removeNode(s);s===null&&(s=this.tail),s!==this.head&&s!==this.tail&&(s=s.prev);for(var n=0;n<r.length;n++)s=$9(this,s,r[n]);return i};ze.prototype.reverse=function(){for(var t=this.head,e=this.tail,r=t;r!==null;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=e,this.tail=t,this};function $9(t,e,r){var n=e===t.head?new ji(r,null,e,t):new ji(r,e,e.next,t);return n.next===null&&(t.tail=n),n.prev===null&&(t.head=n),t.length++,n}function b9(t,e){t.tail=new ji(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function w9(t,e){t.head=new ji(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function ji(t,e,r,n){if(!(this instanceof ji))return new ji(t,e,r,n);this.list=n,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}try{TT()(ze)}catch{}});var qT=$((xde,kT)=>{"use strict";var E9=NT(),Di=Symbol("max"),us=Symbol("length"),Vo=Symbol("lengthCalculator"),_u=Symbol("allowStale"),Li=Symbol("maxAge"),as=Symbol("dispose"),IT=Symbol("noDisposeOnSet"),Mt=Symbol("lruList"),_n=Symbol("cache"),AT=Symbol("updateAgeOnGet"),my=()=>1,gy=class{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");let r=this[Di]=e.max||1/0,n=e.length||my;if(this[Vo]=typeof n!="function"?my:n,this[_u]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[Li]=e.maxAge||0,this[as]=e.dispose,this[IT]=e.noDisposeOnSet||!1,this[AT]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[Di]=e||1/0,gu(this)}get max(){return this[Di]}set allowStale(e){this[_u]=!!e}get allowStale(){return this[_u]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[Li]=e,gu(this)}get maxAge(){return this[Li]}set lengthCalculator(e){typeof e!="function"&&(e=my),e!==this[Vo]&&(this[Vo]=e,this[us]=0,this[Mt].forEach(r=>{r.length=this[Vo](r.value,r.key),this[us]+=r.length})),gu(this)}get lengthCalculator(){return this[Vo]}get length(){return this[us]}get itemCount(){return this[Mt].length}rforEach(e,r){r=r||this;for(let n=this[Mt].tail;n!==null;){let s=n.prev;CT(this,e,n,r),n=s}}forEach(e,r){r=r||this;for(let n=this[Mt].head;n!==null;){let s=n.next;CT(this,e,n,r),n=s}}keys(){return this[Mt].toArray().map(e=>e.key)}values(){return this[Mt].toArray().map(e=>e.value)}reset(){this[as]&&this[Mt]&&this[Mt].length&&this[Mt].forEach(e=>this[as](e.key,e.value)),this[_n]=new Map,this[Mt]=new E9,this[us]=0}dump(){return this[Mt].map(e=>Ff(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[Mt]}set(e,r,n){if(n=n||this[Li],n&&typeof n!="number")throw new TypeError("maxAge must be a number");let s=n?Date.now():0,i=this[Vo](r,e);if(this[_n].has(e)){if(i>this[Di])return zo(this,this[_n].get(e)),!1;let u=this[_n].get(e).value;return this[as]&&(this[IT]||this[as](e,u.value)),u.now=s,u.maxAge=n,u.value=r,this[us]+=i-u.length,u.length=i,this.get(e),gu(this),!0}let o=new _y(e,r,i,s,n);return o.length>this[Di]?(this[as]&&this[as](e,r),!1):(this[us]+=o.length,this[Mt].unshift(o),this[_n].set(e,this[Mt].head),gu(this),!0)}has(e){if(!this[_n].has(e))return!1;let r=this[_n].get(e).value;return!Ff(this,r)}get(e){return yy(this,e,!0)}peek(e){return yy(this,e,!1)}pop(){let e=this[Mt].tail;return e?(zo(this,e),e.value):null}del(e){zo(this,this[_n].get(e))}load(e){this.reset();let r=Date.now();for(let n=e.length-1;n>=0;n--){let s=e[n],i=s.e||0;if(i===0)this.set(s.k,s.v);else{let o=i-r;o>0&&this.set(s.k,s.v,o)}}}prune(){this[_n].forEach((e,r)=>yy(this,r,!1))}},yy=(t,e,r)=>{let n=t[_n].get(e);if(n){let s=n.value;if(Ff(t,s)){if(zo(t,n),!t[_u])return}else r&&(t[AT]&&(n.value.now=Date.now()),t[Mt].unshiftNode(n));return s.value}},Ff=(t,e)=>{if(!e||!e.maxAge&&!t[Li])return!1;let r=Date.now()-e.now;return e.maxAge?r>e.maxAge:t[Li]&&r>t[Li]},gu=t=>{if(t[us]>t[Di])for(let e=t[Mt].tail;t[us]>t[Di]&&e!==null;){let r=e.prev;zo(t,e),e=r}},zo=(t,e)=>{if(e){let r=e.value;t[as]&&t[as](r.key,r.value),t[us]-=r.length,t[_n].delete(r.key),t[Mt].removeNode(e)}},_y=class{constructor(e,r,n,s,i){this.key=e,this.value=r,this.length=n,this.now=s,this.maxAge=i||0}},CT=(t,e,r,n)=>{let s=r.value;Ff(t,s)&&(zo(t,r),t[_u]||(s=void 0)),s&&e.call(n,s.value,s.key,t)};kT.exports=gy});var Xr=$((Fde,xT)=>{var xi=class{constructor(e,r){if(r=R9(r),e instanceof xi)return e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease?e:new xi(e.raw,r);if(e instanceof vy)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=e,this.set=e.split("||").map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${e}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(s=>!DT(s[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let s of this.set)if(s.length===1&&I9(s[0])){this.set=[s];break}}}this.format()}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(e){e=e.trim();let n=`parseRange:${Object.keys(this.options).join(",")}:${e}`,s=jT.get(n);if(s)return s;let i=this.options.loose,o=i?Sr[lr.HYPHENRANGELOOSE]:Sr[lr.HYPHENRANGE];e=e.replace(o,M9(this.options.includePrerelease)),pt("hyphen replace",e),e=e.replace(Sr[lr.COMPARATORTRIM],T9),pt("comparator trim",e),e=e.replace(Sr[lr.TILDETRIM],O9),e=e.replace(Sr[lr.CARETTRIM],N9),e=e.split(/\s+/).join(" ");let a=e.split(" ").map(f=>C9(f,this.options)).join(" ").split(/\s+/).map(f=>F9(f,this.options));i&&(a=a.filter(f=>(pt("loose invalid filter",f,this.options),!!f.match(Sr[lr.COMPARATORLOOSE])))),pt("range list",a);let u=new Map,l=a.map(f=>new vy(f,this.options));for(let f of l){if(DT(f))return[f];u.set(f.value,f)}u.size>1&&u.has("")&&u.delete("");let c=[...u.values()];return jT.set(n,c),c}intersects(e,r){if(!(e instanceof xi))throw new TypeError("a Range is required");return this.set.some(n=>LT(n,r)&&e.set.some(s=>LT(s,r)&&n.every(i=>s.every(o=>i.intersects(o,r)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new P9(e,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(V9(this.set[r],e,this.options))return!0;return!1}};xT.exports=xi;var S9=qT(),jT=new S9({max:1e3}),R9=mu(),vy=vu(),pt=pu(),P9=tr(),{re:Sr,t:lr,comparatorTrimReplace:T9,tildeTrimReplace:O9,caretTrimReplace:N9}=ki(),DT=t=>t.value==="<0.0.0-0",I9=t=>t.value==="",LT=(t,e)=>{let r=!0,n=t.slice(),s=n.pop();for(;r&&n.length;)r=n.every(i=>s.intersects(i,e)),s=n.pop();return r},C9=(t,e)=>(pt("comp",t,e),t=q9(t,e),pt("caret",t),t=A9(t,e),pt("tildes",t),t=D9(t,e),pt("xrange",t),t=x9(t,e),pt("stars",t),t),cr=t=>!t||t.toLowerCase()==="x"||t==="*",A9=(t,e)=>t.trim().split(/\s+/).map(r=>k9(r,e)).join(" "),k9=(t,e)=>{let r=e.loose?Sr[lr.TILDELOOSE]:Sr[lr.TILDE];return t.replace(r,(n,s,i,o,a)=>{pt("tilde",t,n,s,i,o,a);let u;return cr(s)?u="":cr(i)?u=`>=${s}.0.0 <${+s+1}.0.0-0`:cr(o)?u=`>=${s}.${i}.0 <${s}.${+i+1}.0-0`:a?(pt("replaceTilde pr",a),u=`>=${s}.${i}.${o}-${a} <${s}.${+i+1}.0-0`):u=`>=${s}.${i}.${o} <${s}.${+i+1}.0-0`,pt("tilde return",u),u})},q9=(t,e)=>t.trim().split(/\s+/).map(r=>j9(r,e)).join(" "),j9=(t,e)=>{pt("caret",t,e);let r=e.loose?Sr[lr.CARETLOOSE]:Sr[lr.CARET],n=e.includePrerelease?"-0":"";return t.replace(r,(s,i,o,a,u)=>{pt("caret",t,s,i,o,a,u);let l;return cr(i)?l="":cr(o)?l=`>=${i}.0.0${n} <${+i+1}.0.0-0`:cr(a)?i==="0"?l=`>=${i}.${o}.0${n} <${i}.${+o+1}.0-0`:l=`>=${i}.${o}.0${n} <${+i+1}.0.0-0`:u?(pt("replaceCaret pr",u),i==="0"?o==="0"?l=`>=${i}.${o}.${a}-${u} <${i}.${o}.${+a+1}-0`:l=`>=${i}.${o}.${a}-${u} <${i}.${+o+1}.0-0`:l=`>=${i}.${o}.${a}-${u} <${+i+1}.0.0-0`):(pt("no pr"),i==="0"?o==="0"?l=`>=${i}.${o}.${a}${n} <${i}.${o}.${+a+1}-0`:l=`>=${i}.${o}.${a}${n} <${i}.${+o+1}.0-0`:l=`>=${i}.${o}.${a} <${+i+1}.0.0-0`),pt("caret return",l),l})},D9=(t,e)=>(pt("replaceXRanges",t,e),t.split(/\s+/).map(r=>L9(r,e)).join(" ")),L9=(t,e)=>{t=t.trim();let r=e.loose?Sr[lr.XRANGELOOSE]:Sr[lr.XRANGE];return t.replace(r,(n,s,i,o,a,u)=>{pt("xRange",t,n,s,i,o,a,u);let l=cr(i),c=l||cr(o),f=c||cr(a),h=f;return s==="="&&h&&(s=""),u=e.includePrerelease?"-0":"",l?s===">"||s==="<"?n="<0.0.0-0":n="*":s&&h?(c&&(o=0),a=0,s===">"?(s=">=",c?(i=+i+1,o=0,a=0):(o=+o+1,a=0)):s==="<="&&(s="<",c?i=+i+1:o=+o+1),s==="<"&&(u="-0"),n=`${s+i}.${o}.${a}${u}`):c?n=`>=${i}.0.0${u} <${+i+1}.0.0-0`:f&&(n=`>=${i}.${o}.0${u} <${i}.${+o+1}.0-0`),pt("xRange return",n),n})},x9=(t,e)=>(pt("replaceStars",t,e),t.trim().replace(Sr[lr.STAR],"")),F9=(t,e)=>(pt("replaceGTE0",t,e),t.trim().replace(Sr[e.includePrerelease?lr.GTE0PRE:lr.GTE0],"")),M9=t=>(e,r,n,s,i,o,a,u,l,c,f,h,d)=>(cr(n)?r="":cr(s)?r=`>=${n}.0.0${t?"-0":""}`:cr(i)?r=`>=${n}.${s}.0${t?"-0":""}`:o?r=`>=${r}`:r=`>=${r}${t?"-0":""}`,cr(l)?u="":cr(c)?u=`<${+l+1}.0.0-0`:cr(f)?u=`<${l}.${+c+1}.0-0`:h?u=`<=${l}.${c}.${f}-${h}`:t?u=`<${l}.${c}.${+f+1}-0`:u=`<=${u}`,`${r} ${u}`.trim()),V9=(t,e,r)=>{for(let n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(let n=0;n<t.length;n++)if(pt(t[n].semver),t[n].semver!==vy.ANY&&t[n].semver.prerelease.length>0){let s=t[n].semver;if(s.major===e.major&&s.minor===e.minor&&s.patch===e.patch)return!0}return!1}return!0}});var vu=$((Mde,UT)=>{var $u=Symbol("SemVer ANY"),Uo=class{static get ANY(){return $u}constructor(e,r){if(r=z9(r),e instanceof Uo){if(e.loose===!!r.loose)return e;e=e.value}by("comparator",e,r),this.options=r,this.loose=!!r.loose,this.parse(e),this.semver===$u?this.value="":this.value=this.operator+this.semver.version,by("comp",this)}parse(e){let r=this.options.loose?FT[MT.COMPARATORLOOSE]:FT[MT.COMPARATOR],n=e.match(r);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new VT(n[2],this.options.loose):this.semver=$u}toString(){return this.value}test(e){if(by("Comparator.test",e,this.options.loose),this.semver===$u||e===$u)return!0;if(typeof e=="string")try{e=new VT(e,this.options)}catch{return!1}return $y(e,this.operator,this.semver,this.options)}intersects(e,r){if(!(e instanceof Uo))throw new TypeError("a Comparator is required");if((!r||typeof r!="object")&&(r={loose:!!r,includePrerelease:!1}),this.operator==="")return this.value===""?!0:new zT(e.value,r).test(this.value);if(e.operator==="")return e.value===""?!0:new zT(this.value,r).test(e.semver);let n=(this.operator===">="||this.operator===">")&&(e.operator===">="||e.operator===">"),s=(this.operator==="<="||this.operator==="<")&&(e.operator==="<="||e.operator==="<"),i=this.semver.version===e.semver.version,o=(this.operator===">="||this.operator==="<=")&&(e.operator===">="||e.operator==="<="),a=$y(this.semver,"<",e.semver,r)&&(this.operator===">="||this.operator===">")&&(e.operator==="<="||e.operator==="<"),u=$y(this.semver,">",e.semver,r)&&(this.operator==="<="||this.operator==="<")&&(e.operator===">="||e.operator===">");return n||s||i&&o||a||u}};UT.exports=Uo;var z9=mu(),{re:FT,t:MT}=ki(),$y=py(),by=pu(),VT=tr(),zT=Xr()});var bu=$((Vde,HT)=>{var U9=Xr(),H9=(t,e,r)=>{try{e=new U9(e,r)}catch{return!1}return e.test(t)};HT.exports=H9});var BT=$((zde,KT)=>{var K9=Xr(),B9=(t,e)=>new K9(t,e).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));KT.exports=B9});var JT=$((Ude,GT)=>{var G9=tr(),J9=Xr(),Y9=(t,e,r)=>{let n=null,s=null,i=null;try{i=new J9(e,r)}catch{return null}return t.forEach(o=>{i.test(o)&&(!n||s.compare(o)===-1)&&(n=o,s=new G9(n,r))}),n};GT.exports=Y9});var WT=$((Hde,YT)=>{var W9=tr(),X9=Xr(),Q9=(t,e,r)=>{let n=null,s=null,i=null;try{i=new X9(e,r)}catch{return null}return t.forEach(o=>{i.test(o)&&(!n||s.compare(o)===1)&&(n=o,s=new W9(n,r))}),n};YT.exports=Q9});var ZT=$((Kde,QT)=>{var wy=tr(),Z9=Xr(),XT=yu(),e5=(t,e)=>{t=new Z9(t,e);let r=new wy("0.0.0");if(t.test(r)||(r=new wy("0.0.0-0"),t.test(r)))return r;r=null;for(let n=0;n<t.set.length;++n){let s=t.set[n],i=null;s.forEach(o=>{let a=new wy(o.semver.version);switch(o.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!i||XT(a,i))&&(i=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),i&&(!r||XT(r,i))&&(r=i)}return r&&t.test(r)?r:null};QT.exports=e5});var tO=$((Bde,eO)=>{var t5=Xr(),r5=(t,e)=>{try{return new t5(t,e).range||"*"}catch{return null}};eO.exports=r5});var Mf=$((Gde,iO)=>{var n5=tr(),sO=vu(),{ANY:s5}=sO,i5=Xr(),o5=bu(),rO=yu(),nO=qf(),a5=Df(),u5=jf(),l5=(t,e,r,n)=>{t=new n5(t,n),e=new i5(e,n);let s,i,o,a,u;switch(r){case">":s=rO,i=a5,o=nO,a=">",u=">=";break;case"<":s=nO,i=u5,o=rO,a="<",u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(o5(t,e,n))return!1;for(let l=0;l<e.set.length;++l){let c=e.set[l],f=null,h=null;if(c.forEach(d=>{d.semver===s5&&(d=new sO(">=0.0.0")),f=f||d,h=h||d,s(d.semver,f.semver,n)?f=d:o(d.semver,h.semver,n)&&(h=d)}),f.operator===a||f.operator===u||(!h.operator||h.operator===a)&&i(t,h.semver))return!1;if(h.operator===u&&o(t,h.semver))return!1}return!0};iO.exports=l5});var aO=$((Jde,oO)=>{var c5=Mf(),f5=(t,e,r)=>c5(t,e,">",r);oO.exports=f5});var lO=$((Yde,uO)=>{var d5=Mf(),h5=(t,e,r)=>d5(t,e,"<",r);uO.exports=h5});var dO=$((Wde,fO)=>{var cO=Xr(),p5=(t,e,r)=>(t=new cO(t,r),e=new cO(e,r),t.intersects(e));fO.exports=p5});var pO=$((Xde,hO)=>{var m5=bu(),y5=Wr();hO.exports=(t,e,r)=>{let n=[],s=null,i=null,o=t.sort((c,f)=>y5(c,f,r));for(let c of o)m5(c,e,r)?(i=c,s||(s=c)):(i&&n.push([s,i]),i=null,s=null);s&&n.push([s,null]);let a=[];for(let[c,f]of n)c===f?a.push(c):!f&&c===o[0]?a.push("*"):f?c===o[0]?a.push(`<=${f}`):a.push(`${c} - ${f}`):a.push(`>=${c}`);let u=a.join(" || "),l=typeof e.raw=="string"?e.raw:String(e);return u.length<l.length?u:e}});var vO=$((Qde,_O)=>{var mO=Xr(),Vf=vu(),{ANY:Ey}=Vf,wu=bu(),Sy=Wr(),g5=(t,e,r={})=>{if(t===e)return!0;t=new mO(t,r),e=new mO(e,r);let n=!1;e:for(let s of t.set){for(let i of e.set){let o=_5(s,i,r);if(n=n||o!==null,o)continue e}if(n)return!1}return!0},_5=(t,e,r)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===Ey){if(e.length===1&&e[0].semver===Ey)return!0;r.includePrerelease?t=[new Vf(">=0.0.0-0")]:t=[new Vf(">=0.0.0")]}if(e.length===1&&e[0].semver===Ey){if(r.includePrerelease)return!0;e=[new Vf(">=0.0.0")]}let n=new Set,s,i;for(let d of t)d.operator===">"||d.operator===">="?s=yO(s,d,r):d.operator==="<"||d.operator==="<="?i=gO(i,d,r):n.add(d.semver);if(n.size>1)return null;let o;if(s&&i){if(o=Sy(s.semver,i.semver,r),o>0)return null;if(o===0&&(s.operator!==">="||i.operator!=="<="))return null}for(let d of n){if(s&&!wu(d,String(s),r)||i&&!wu(d,String(i),r))return null;for(let p of e)if(!wu(d,String(p),r))return!1;return!0}let a,u,l,c,f=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1,h=s&&!r.includePrerelease&&s.semver.prerelease.length?s.semver:!1;f&&f.prerelease.length===1&&i.operator==="<"&&f.prerelease[0]===0&&(f=!1);for(let d of e){if(c=c||d.operator===">"||d.operator===">=",l=l||d.operator==="<"||d.operator==="<=",s){if(h&&d.semver.prerelease&&d.semver.prerelease.length&&d.semver.major===h.major&&d.semver.minor===h.minor&&d.semver.patch===h.patch&&(h=!1),d.operator===">"||d.operator===">="){if(a=yO(s,d,r),a===d&&a!==s)return!1}else if(s.operator===">="&&!wu(s.semver,String(d),r))return!1}if(i){if(f&&d.semver.prerelease&&d.semver.prerelease.length&&d.semver.major===f.major&&d.semver.minor===f.minor&&d.semver.patch===f.patch&&(f=!1),d.operator==="<"||d.operator==="<="){if(u=gO(i,d,r),u===d&&u!==i)return!1}else if(i.operator==="<="&&!wu(i.semver,String(d),r))return!1}if(!d.operator&&(i||s)&&o!==0)return!1}return!(s&&l&&!i&&o!==0||i&&c&&!s&&o!==0||h||f)},yO=(t,e,r)=>{if(!t)return e;let n=Sy(t.semver,e.semver,r);return n>0?t:n<0||e.operator===">"&&t.operator===">="?e:t},gO=(t,e,r)=>{if(!t)return e;let n=Sy(t.semver,e.semver,r);return n<0?t:n>0||e.operator==="<"&&t.operator==="<="?e:t};_O.exports=g5});var Py=$((Zde,bO)=>{var Ry=ki(),v5=hu(),$5=tr(),$O=dy(),b5=qi(),w5=zP(),E5=HP(),S5=GP(),R5=ZP(),P5=tT(),T5=nT(),O5=iT(),N5=aT(),I5=Wr(),C5=lT(),A5=fT(),k5=kf(),q5=mT(),j5=gT(),D5=yu(),L5=qf(),x5=Af(),F5=hy(),M5=jf(),V5=Df(),z5=py(),U5=RT(),H5=vu(),K5=Xr(),B5=bu(),G5=BT(),J5=JT(),Y5=WT(),W5=ZT(),X5=tO(),Q5=Mf(),Z5=aO(),eK=lO(),tK=dO(),rK=pO(),nK=vO();bO.exports={parse:b5,valid:w5,clean:E5,inc:S5,diff:R5,major:P5,minor:T5,patch:O5,prerelease:N5,compare:I5,rcompare:C5,compareLoose:A5,compareBuild:k5,sort:q5,rsort:j5,gt:D5,lt:L5,eq:x5,neq:F5,gte:M5,lte:V5,cmp:z5,coerce:U5,Comparator:H5,Range:K5,satisfies:B5,toComparators:G5,maxSatisfying:J5,minSatisfying:Y5,minVersion:W5,validRange:X5,outside:Q5,gtr:Z5,ltr:eK,intersects:tK,simplifyRange:rK,subset:nK,SemVer:$5,re:Ry.re,src:Ry.src,tokens:Ry.t,SEMVER_SPEC_VERSION:v5.SEMVER_SPEC_VERSION,compareIdentifiers:$O.compareIdentifiers,rcompareIdentifiers:$O.rcompareIdentifiers}});var Uf=$((ehe,Ny)=>{"use strict";var zf=RP(),sK=Py(),wO=Pi(),{kHasBeenDecorated:iK,kSchemaBody:oK,kSchemaHeaders:aK,kSchemaParams:uK,kSchemaQuerystring:EO,kSchemaController:Ty,kOptions:lK,kRequestCacheValidateFns:Vs,kRouteContext:bt,kPublicRouteContext:SO}=xt(),{FST_ERR_REQ_INVALID_VALIDATION_INVOCATION:cK}=er(),RO={body:oK,headers:aK,params:uK,querystring:EO,query:EO};function Oy(t,e,r,n,s,i){this.id=t,this[bt]=i,this.params=e,this.raw=r,this.query=n,this.log=s,this.body=void 0}Oy.props=[];function fK(t){if(typeof t=="function")return t;if(t===!0)return function(){return!0};if(typeof t=="number")return function(e,r){return r<t};if(typeof t=="string"){let e=t.split(",").map(r=>r.trim());return zf.compile(e)}return zf.compile(t)}function dK(t,e){return e?hK(t,e):TO(t)}function TO(t){let e=[...t.props];function r(n,s,i,o,a,u){this.id=n,this[bt]=u,this.params=s,this.raw=i,this.query=o,this.log=a,this.body=void 0;for(var l,c=0;c<e.length;c++)l=e[c],this[l.key]=l.value}return Object.setPrototypeOf(r.prototype,t.prototype),Object.setPrototypeOf(r,t),r.props=e,r.parent=t,r}function PO(t){let e=t.lastIndexOf(",");return e===-1?t.trim():t.slice(e+1).trim()}function hK(t,e){let r=TO(t),n=fK(e);return r[iK]=!0,Object.defineProperties(r.prototype,{ip:{get(){return zf(this.raw,n)}},ips:{get(){return zf.all(this.raw,n)}},hostname:{get(){return this.ip!==void 0&&this.headers["x-forwarded-host"]?PO(this.headers["x-forwarded-host"]):this.headers.host||this.headers[":authority"]}},protocol:{get(){if(this.headers["x-forwarded-proto"])return PO(this.headers["x-forwarded-proto"]);if(this.socket)return this.socket.encrypted?"https":"http"}}}),r}Object.defineProperties(Oy.prototype,{server:{get(){return this[bt].server}},url:{get(){return this.raw.url}},method:{get(){return this.raw.method}},context:{get(){return wO.emit("FSTDEP012"),this[bt]}},routerPath:{get(){return this[bt].config.url}},routeOptions:{get(){let t=this[bt],e=t._parserOptions.limit,r=t.server.initialConfig.bodyLimit,n=t.server.hasConstraintStrategy("version")?this.raw.headers["accept-version"]:void 0,s={method:t.config.method,url:t.config.url,bodyLimit:e||r,attachValidation:t.attachValidation,logLevel:t.logLevel,exposeHeadRoute:t.exposeHeadRoute,prefixTrailingSlash:t.prefixTrailingSlash,version:n};return Object.freeze(s)}},routerMethod:{get(){return this[bt].config.method}},routeConfig:{get(){return this[bt][SO].config}},routeSchema:{get(){return this[bt][SO].schema}},is404:{get(){return this[bt].config.url===void 0}},connection:{get(){return sK.gte(process.versions.node,"13.0.0")&&wO.emit("FSTDEP005"),this.raw.connection}},socket:{get(){return this.raw.socket}},ip:{get(){if(this.socket)return this.socket.remoteAddress}},hostname:{get(){return this.raw.headers.host||this.raw.headers[":authority"]}},protocol:{get(){if(this.socket)return this.socket.encrypted?"https":"http"}},headers:{get(){return this.additionalHeaders?Object.assign({},this.raw.headers,this.additionalHeaders):this.raw.headers},set(t){this.additionalHeaders=t}},getValidationFunction:{value:function(t){if(typeof t=="string"){let e=RO[t];return this[bt][e]}else if(typeof t=="object")return this[bt][Vs]?.get(t)}},compileValidationSchema:{value:function(t,e=null){let{method:r,url:n}=this;if(this[bt][Vs]?.has(t))return this[bt][Vs].get(t);let i=(this[bt].validatorCompiler||this.server[Ty].validatorCompiler||this.server[Ty].setupValidator(this.server[lK])||this.server[Ty].validatorCompiler)({schema:t,method:r,url:n,httpPart:e});return this[bt][Vs]==null&&(this[bt][Vs]=new WeakMap),this[bt][Vs].set(t,i),i}},validateInput:{value:function(t,e,r){r=typeof e=="string"?e:r;let n=r!=null&&typeof r=="string"&&RO[r],s;if(n&&(s=this[bt][n]),s==null&&(e==null||typeof e!="object"||Array.isArray(e)))throw new cK(r);return s==null&&(this[bt][Vs]?.has(e)?s=this[bt][Vs].get(e):s=this.compileValidationSchema(e,r)),s(t)}}});Ny.exports=Oy;Ny.exports.buildRequest=dK});var Iy=$((the,OO)=>{"use strict";OO.exports={supportedMethods:["DELETE","GET","HEAD","PATCH","POST","PUT","OPTIONS","PROPFIND","PROPPATCH","MKCOL","COPY","MOVE","LOCK","UNLOCK","TRACE","SEARCH"]}});var jy=$((rhe,AO)=>{"use strict";var{kReply:Cy,kRequest:Ay,kState:pK,kHasBeenDecorated:mK}=xt(),{FST_ERR_DEC_ALREADY_PRESENT:NO,FST_ERR_DEC_MISSING_DEPENDENCY:yK,FST_ERR_DEC_AFTER_START:gK,FST_ERR_DEC_DEPENDENCY_INVALID_TYPE:_K}=er(),vK=Pi();function $K(t,e,r,n){if(Object.prototype.hasOwnProperty.call(t,e))throw new NO(e);ky(t,e,n),r&&(typeof r.getter=="function"||typeof r.setter=="function")?Object.defineProperty(t,e,{get:r.getter,set:r.setter}):t[e]=r}function IO(t,e,r,n){let s=t.prototype;if(Object.prototype.hasOwnProperty.call(s,e)||Kf(t,e))throw new NO(e);t[mK]=!0,ky(t,e,n),r&&(typeof r.getter=="function"||typeof r.setter=="function")?Object.defineProperty(s,e,{get:r.getter,set:r.setter}):typeof r=="function"?s[e]=r:t.props.push({key:e,value:r})}function CO(t,e){typeof e=="object"&&e&&!(typeof e.getter=="function"||typeof e.setter=="function")&&vK.emit("FSTDEP006",t)}function bK(t,e,r){return qy(this,t),$K(this,t,e,r),this}function Hf(t,e){return e?e in t||t.prototype&&e in t.prototype||Kf(t,e):t in this}function Kf(t,e){return t.props?t.props.find(({key:r})=>r===e):!1}function wK(t){return t&&Kf(this[Ay],t)?!0:Hf(this[Ay].prototype,t)}function EK(t){return t&&Kf(this[Cy],t)?!0:Hf(this[Cy].prototype,t)}function ky(t,e,r){if(r!=null){if(!Array.isArray(r))throw new _K(e);for(var n=0;n!==r.length;++n)if(!Hf(t,r[n]))throw new yK(r[n])}}function SK(t,e,r){return qy(this,t),CO(t,e),IO(this[Cy],t,e,r),this}function RK(t,e,r){return qy(this,t),CO(t,e),IO(this[Ay],t,e,r),this}function qy(t,e){if(t[pK].started)throw new gK(e)}AO.exports={add:bK,exist:Hf,existRequest:wK,existReply:EK,dependencies:ky,decorateReply:SK,decorateRequest:RK}});var qO=$(kO=>{"use strict";var Dy=class{constructor(e=0,r=0,n=!1){this.first=null,this.items=Object.create(null),this.last=null,this.max=e,this.resetTtl=n,this.size=0,this.ttl=r}clear(){return this.first=null,this.items=Object.create(null),this.last=null,this.size=0,this}delete(e){if(this.#e(e)){let r=this.items[e];delete this.items[e],this.size--,r.prev!==null&&(r.prev.next=r.next),r.next!==null&&(r.next.prev=r.prev),this.first===r&&(this.first=r.next),this.last===r&&(this.last=r.prev)}return this}evict(e=!1){if(e||this.size>0){let r=this.first;delete this.items[r.key],--this.size===0?(this.first=null,this.last=null):(this.first=r.next,this.first.prev=null)}return this}expiresAt(e){let r;return this.#e(e)&&(r=this.items[e].expiry),r}get(e){let r;if(this.#e(e)){let n=this.items[e];this.ttl>0&&n.expiry<=Date.now()?this.delete(e):(r=n.value,this.set(e,r,!0))}return r}#e(e){return e in this.items}keys(){return Object.keys(this.items)}set(e,r,n=!1,s=this.resetTtl){let i;if(n||this.#e(e)){if(i=this.items[e],i.value=r,s&&(i.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl),this.last!==i){let o=this.last,a=i.next,u=i.prev;this.first===i&&(this.first=i.next),i.next=null,i.prev=this.last,o.next=i,u!==null&&(u.next=a),a!==null&&(a.prev=u)}}else this.max>0&&this.size===this.max&&this.evict(!0),i=this.items[e]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:r},++this.size===1?this.first=i:this.last.next=i;return this.last=i,this}};function PK(t=1e3,e=0,r=!1){if(isNaN(t)||t<0)throw new TypeError("Invalid max value");if(isNaN(e)||e<0)throw new TypeError("Invalid ttl value");if(typeof r!="boolean")throw new TypeError("Invalid resetTtl value");return new Dy(t,e,r)}kO.lru=PK});var xO=$((she,Eu)=>{"use strict";var Jf=function(){};Jf.prototype=Object.create(null);var Bf=/; *([!#$%&'*+.^_`|~0-9A-Za-z-]+)=("(?:[\u000b\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u000b\u0020-\u00ff])*"|[!#$%&'*+.^_`|~0-9A-Za-z-]+) */g,Gf=/\\([\u000b\u0020-\u00ff])/g,jO=/^[!#$%&'*+.^_|~0-9A-Za-z-]+\/[!#$%&'*+.^_|~0-9A-Za-z-]+$/,Fi={type:"",parameters:new Jf};Object.freeze(Fi.parameters);Object.freeze(Fi);function DO(t){if(typeof t!="string")throw new TypeError("argument header is required and must be a string");let e=t.indexOf(";"),r=e!==-1?t.slice(0,e).trim():t.trim();if(jO.test(r)===!1)throw new TypeError("invalid media type");let n={type:r.toLowerCase(),parameters:new Jf};if(e===-1)return n;let s,i,o;for(Bf.lastIndex=e;i=Bf.exec(t);){if(i.index!==e)throw new TypeError("invalid parameter format");e+=i[0].length,s=i[1].toLowerCase(),o=i[2],o[0]==='"'&&(o=o.slice(1,o.length-1),Gf.test(o)&&(o=o.replace(Gf,"$1"))),n.parameters[s]=o}if(e!==t.length)throw new TypeError("invalid parameter format");return n}function LO(t){if(typeof t!="string")return Fi;let e=t.indexOf(";"),r=e!==-1?t.slice(0,e).trim():t.trim();if(jO.test(r)===!1)return Fi;let n={type:r.toLowerCase(),parameters:new Jf};if(e===-1)return n;let s,i,o;for(Bf.lastIndex=e;i=Bf.exec(t);){if(i.index!==e)return Fi;e+=i[0].length,s=i[1].toLowerCase(),o=i[2],o[0]==='"'&&(o=o.slice(1,o.length-1),Gf.test(o)&&(o=o.replace(Gf,"$1"))),n.parameters[s]=o}return e!==t.length?Fi:n}Eu.exports.default={parse:DO,safeParse:LO};Eu.exports.parse=DO;Eu.exports.safeParse=LO;Eu.exports.defaultContentType=Fi});var UO=$((ihe,Ho)=>{"use strict";var TK=typeof Buffer<"u",FO=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,MO=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function VO(t,e,r){r==null&&e!==null&&typeof e=="object"&&(r=e,e=void 0),TK&&Buffer.isBuffer(t)&&(t=t.toString()),t&&t.charCodeAt(0)===65279&&(t=t.slice(1));let n=JSON.parse(t,e);if(n===null||typeof n!="object")return n;let s=r&&r.protoAction||"error",i=r&&r.constructorAction||"error";if(s==="ignore"&&i==="ignore")return n;if(s!=="ignore"&&i!=="ignore"){if(FO.test(t)===!1&&MO.test(t)===!1)return n}else if(s!=="ignore"&&i==="ignore"){if(FO.test(t)===!1)return n}else if(MO.test(t)===!1)return n;return zO(n,{protoAction:s,constructorAction:i,safe:r&&r.safe})}function zO(t,{protoAction:e="error",constructorAction:r="error",safe:n}={}){let s=[t];for(;s.length;){let i=s;s=[];for(let o of i){if(e!=="ignore"&&Object.prototype.hasOwnProperty.call(o,"__proto__")){if(n===!0)return null;if(e==="error")throw new SyntaxError("Object contains forbidden prototype property");delete o.__proto__}if(r!=="ignore"&&Object.prototype.hasOwnProperty.call(o,"constructor")&&Object.prototype.hasOwnProperty.call(o.constructor,"prototype")){if(n===!0)return null;if(r==="error")throw new SyntaxError("Object contains forbidden prototype property");delete o.constructor}for(let a in o){let u=o[a];u&&typeof u=="object"&&s.push(u)}}}return t}function Ly(t,e,r){let n=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return VO(t,e,r)}finally{Error.stackTraceLimit=n}}function OK(t,e){let r=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return VO(t,e,{safe:!0})}catch{return null}finally{Error.stackTraceLimit=r}}Ho.exports=Ly;Ho.exports.default=Ly;Ho.exports.parse=Ly;Ho.exports.safeParse=OK;Ho.exports.scan=zO});var zy=$((ohe,Ru)=>{"use strict";var{AsyncResource:NK}=require("async_hooks"),KO=qO().lru,{safeParse:BO,defaultContentType:IK}=xO(),CK=UO(),{kDefaultJsonParse:Su,kContentTypeParser:Ko,kBodyLimit:AK,kRequestPayloadStream:GO,kState:Fy,kTestInternals:kK,kReplyIsError:JO,kRouteContext:qK}=xt(),{FST_ERR_CTP_INVALID_TYPE:YO,FST_ERR_CTP_EMPTY_TYPE:jK,FST_ERR_CTP_ALREADY_PRESENT:DK,FST_ERR_CTP_INVALID_HANDLER:LK,FST_ERR_CTP_INVALID_PARSE_TYPE:xK,FST_ERR_CTP_BODY_TOO_LARGE:HO,FST_ERR_CTP_INVALID_MEDIA_TYPE:FK,FST_ERR_CTP_INVALID_CONTENT_LENGTH:MK,FST_ERR_CTP_EMPTY_JSON_BODY:VK,FST_ERR_CTP_INSTANCE_ALREADY_STARTED:My}=er();function ls(t,e,r){this[Su]=XO(e,r),this.customParsers=new Map,this.customParsers.set("application/json",new xy(!0,!1,t,this[Su])),this.customParsers.set("text/plain",new xy(!0,!1,t,Vy)),this.parserList=[new Yf("application/json"),new Yf("text/plain")],this.parserRegExpList=[],this.cache=KO(100)}ls.prototype.add=function(t,e,r){let n=typeof t=="string";if(!n&&!(t instanceof RegExp))throw new YO;if(n&&t.length===0)throw new jK;if(typeof r!="function")throw new LK;if(this.existingParser(t))throw new DK(t);if(e.parseAs!==void 0&&e.parseAs!=="string"&&e.parseAs!=="buffer")throw new xK(e.parseAs);let s=new xy(e.parseAs==="string",e.parseAs==="buffer",e.bodyLimit,r);n&&t==="*"?this.customParsers.set("",s):(n?this.parserList.unshift(new Yf(t)):(t.isEssence=t.source.indexOf(";")===-1,this.parserRegExpList.unshift(t)),this.customParsers.set(t.toString(),s))};ls.prototype.hasParser=function(t){return this.customParsers.has(typeof t=="string"?t:t.toString())};ls.prototype.existingParser=function(t){return t==="application/json"&&this.customParsers.has(t)?this.customParsers.get(t).fn!==this[Su]:t==="text/plain"&&this.customParsers.has(t)?this.customParsers.get(t).fn!==Vy:this.hasParser(t)};ls.prototype.getParser=function(t){if(this.hasParser(t))return this.customParsers.get(t);let e=this.cache.get(t);if(e!==void 0)return e;let r=BO(t);if(r===IK)return this.customParsers.get("");for(var n=0;n!==this.parserList.length;++n){let i=this.parserList[n];if(GK(r,i)){let o=this.customParsers.get(i.name);return this.cache.set(t,o),o}}for(var s=0;s!==this.parserRegExpList.length;++s){let i=this.parserRegExpList[s];if(JK(t,r.type,i)){let o=this.customParsers.get(i.toString());return this.cache.set(t,o),o}}return this.customParsers.get("")};ls.prototype.removeAll=function(){this.customParsers=new Map,this.parserRegExpList=[],this.parserList=[],this.cache=KO(100)};ls.prototype.remove=function(t){if(!(typeof t=="string"||t instanceof RegExp))throw new YO;let e=this.customParsers.delete(t.toString()),r=typeof t=="string"?this.parserList:this.parserRegExpList,n=r.findIndex(s=>s.toString()===t.toString());return n>-1&&r.splice(n,1),e||n>-1};ls.prototype.run=function(t,e,r,n){let s=this.getParser(t),i=new NK("content-type-parser:run",r);if(s===void 0)r.is404?e(r,n):n.send(new FK(t||void 0));else if(s.asString===!0||s.asBuffer===!0)WO(r,n,n[qK]._parserOptions,s,o);else{let a=s.fn(r,r[GO],o);a&&typeof a.then=="function"&&a.then(u=>o(null,u),o)}function o(a,u){i.runInAsyncScope(()=>{a?(n[JO]=!0,n.send(a)):(r.body=u,e(r,n))})}};function WO(t,e,r,n,s){let i=n.asString,o=r.limit===null?n.bodyLimit:r.limit,a=t.headers["content-length"]===void 0?NaN:Number(t.headers["content-length"]);if(a>o){e.header("connection","close"),e.send(new HO);return}let u=0,l=i===!0?"":[],c=t[GO]||t.raw;i===!0&&c.setEncoding("utf8"),c.on("data",f),c.on("end",h),c.on("error",h),c.resume();function f(d){if(u+=d.length,(c.receivedEncodedLength||u)>o){c.removeListener("data",f),c.removeListener("end",h),c.removeListener("error",h),e.send(new HO);return}i===!0?l+=d:l.push(d)}function h(d){if(c.removeListener("data",f),c.removeListener("end",h),c.removeListener("error",h),d!==void 0){d.statusCode=400,e[JO]=!0,e.code(d.statusCode).send(d);return}if(i===!0&&(u=Buffer.byteLength(l)),!Number.isNaN(a)&&(c.receivedEncodedLength||u)!==a){e.header("connection","close"),e.send(new MK);return}i===!1&&(l=Buffer.concat(l));let p=n.fn(t,l,s);p&&typeof p.then=="function"&&p.then(m=>s(null,m),s)}}function XO(t,e){return r;function r(n,s,i){if(s===""||s==null)return i(new VK,void 0);let o;try{o=CK.parse(s,{protoAction:t,constructorAction:e})}catch(a){return a.statusCode=400,i(a,void 0)}i(null,o)}}function Vy(t,e,r){r(null,e)}function xy(t,e,r,n){this.asString=t,this.asBuffer=e,this.bodyLimit=r,this.fn=n}function zK(t){let e=new ls;return e[Su]=t[Su],e.customParsers=new Map(t.customParsers.entries()),e.parserList=t.parserList.slice(),e.parserRegExpList=t.parserRegExpList.slice(),e}function UK(t,e,r){if(this[Fy].started)throw new My("addContentTypeParser");return typeof e=="function"&&(r=e,e={}),e||(e={}),e.bodyLimit||(e.bodyLimit=this[AK]),Array.isArray(t)?t.forEach(n=>this[Ko].add(n,e,r)):this[Ko].add(t,e,r),this}function HK(t){return this[Ko].hasParser(t)}function KK(t){if(this[Fy].started)throw new My("removeContentTypeParser");if(Array.isArray(t))for(let e of t)this[Ko].remove(e);else this[Ko].remove(t)}function BK(){if(this[Fy].started)throw new My("removeAllContentTypeParsers");this[Ko].removeAll()}function GK(t,e){if(e.isEssence)return t.type.indexOf(e)!==-1;if(t.type.indexOf(e.type)===-1)return!1;for(let r of e.parameterKeys)if(!(r in t.parameters)||t.parameters[r]!==e.parameters[r])return!1;return!0}function JK(t,e,r){return r.isEssence?r.test(e):r.test(t)}function Yf(t){this.name=t;let e=BO(t);if(this.isEssence=t.indexOf(";")===-1,this.isEssence===!1&&e.type===""){let r=t.split(";")[0];this.type=r===""?t:r}else this.type=e.type;this.parameters=e.parameters,this.parameterKeys=Object.keys(e.parameters)}Yf.prototype.toString=function(){return this.name};Ru.exports=ls;Ru.exports.helpers={buildContentTypeParser:zK,addContentTypeParser:UK,hasContentTypeParser:HK,removeContentTypeParser:KK,removeAllContentTypeParsers:BK};Ru.exports.defaultParsers={getDefaultJsonParser:XO,defaultTextParser:Vy};Ru.exports[kK]={rawBody:WO}});var QO=$((ahe,Wf)=>{"use strict";var YK=Object.getPrototypeOf({});function Uy(t){function e(g){return g!=="constructor"&&g!=="prototype"&&g!=="__proto__"}function r(g){let w=0,_=g.length,y=new Array(_);for(w=0;w<_;++w)y[w]=d(g[w]);return y}function n(g){let w={};if(u&&Object.getPrototypeOf(g)!==YK)return u(g);let _=a(g),y,b,T;for(y=0,b=_.length;y<b;++y)e(T=_[y])&&(w[T]=d(g[T]));return w}function s(g,w){let _=g.length,y=w.length,b=0,T=new Array(_+y);for(b=0;b<_;++b)T[b]=d(g[b]);for(b=0;b<y;++b)T[b+_]=d(w[b]);return T}let i=Object.prototype.propertyIsEnumerable;function o(g){let w=Object.keys(g),_=Object.getOwnPropertySymbols(g);for(let y=0,b=_.length;y<b;++y)i.call(g,_[y])&&w.push(_[y]);return w}let a=t&&t.symbols?o:Object.keys,u=typeof t?.cloneProtoObject=="function"?t.cloneProtoObject:void 0;function l(g){return typeof g=="object"&&g!==null&&!(g instanceof RegExp)&&!(g instanceof Date)}function c(g){return typeof g!="object"||g===null}let f=typeof Buffer<"u"?g=>typeof g!="object"||g===null||g instanceof RegExp||g instanceof Date||g instanceof Buffer:g=>typeof g!="object"||g===null||g instanceof RegExp||g instanceof Date,h=t&&typeof t.mergeArray=="function"?t.mergeArray({clone:d,deepmerge:m,getKeys:a,isMergeableObject:l}):s;function d(g){return l(g)?Array.isArray(g)?r(g):n(g):g}function p(g,w){let _={},y=a(g),b=a(w),T,S,N;for(T=0,S=y.length;T<S;++T)e(N=y[T])&&b.indexOf(N)===-1&&(_[N]=d(g[N]));for(T=0,S=b.length;T<S;++T)e(N=b[T])&&(N in g&&(y.indexOf(N)!==-1&&(_[N]=m(g[N],w[N])),!0)||(_[N]=d(w[N])));return _}function m(g,w){let _=Array.isArray(w),y=Array.isArray(g);return c(w)?w:f(g)?d(w):_&&y?h(g,w):_!==y?d(w):p(g,w)}function v(){switch(arguments.length){case 0:return{};case 1:return d(arguments[0]);case 2:return m(arguments[0],arguments[1])}let g;for(let w=0,_=arguments.length;w<_;++w)g=m(g,arguments[w]);return g}return t&&t.all?v:m}Wf.exports=Uy;Wf.exports.default=Uy;Wf.exports.deepmerge=Uy});var Xf=$(Mn=>{"use strict";Object.defineProperty(Mn,"__esModule",{value:!0});Mn.formatNames=Mn.fastFormats=Mn.fullFormats=void 0;function Bo(t,e){return{validate:t,compare:e}}Mn.fullFormats={date:Bo(t1,By),time:Bo(r1,Gy),"date-time":Bo(ZK,n1),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:r6,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:l6,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:n6,int32:{type:"number",validate:o6},int64:{type:"number",validate:a6},float:{type:"number",validate:e1},double:{type:"number",validate:e1},password:!0,binary:!0};Mn.fastFormats={...Mn.fullFormats,date:Bo(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,By),time:Bo(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,Gy),"date-time":Bo(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,n1),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i};Mn.formatNames=Object.keys(Mn.fullFormats);function WK(t){return t%4===0&&(t%100!==0||t%400===0)}var XK=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,QK=[0,31,28,31,30,31,30,31,31,30,31,30,31];function t1(t){let e=XK.exec(t);if(!e)return!1;let r=+e[1],n=+e[2],s=+e[3];return n>=1&&n<=12&&s>=1&&s<=(n===2&&WK(r)?29:QK[n])}function By(t,e){if(t&&e)return t>e?1:t<e?-1:0}var Hy=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i;function r1(t,e){let r=Hy.exec(t);if(!r)return!1;let n=+r[1],s=+r[2],i=+r[3],o=r[5];return(n<=23&&s<=59&&i<=59||n===23&&s===59&&i===60)&&(!e||o!=="")}function Gy(t,e){if(!(t&&e))return;let r=Hy.exec(t),n=Hy.exec(e);if(r&&n)return t=r[1]+r[2]+r[3]+(r[4]||""),e=n[1]+n[2]+n[3]+(n[4]||""),t>e?1:t<e?-1:0}var Ky=/t|\s/i;function ZK(t){let e=t.split(Ky);return e.length===2&&t1(e[0])&&r1(e[1],!0)}function n1(t,e){if(!(t&&e))return;let[r,n]=t.split(Ky),[s,i]=e.split(Ky),o=By(r,s);if(o!==void 0)return o||Gy(n,i)}var e6=/\/|:/,t6=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function r6(t){return e6.test(t)&&t6.test(t)}var ZO=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function n6(t){return ZO.lastIndex=0,ZO.test(t)}var s6=-(2**31),i6=2**31-1;function o6(t){return Number.isInteger(t)&&t<=i6&&t>=s6}function a6(t){return Number.isInteger(t)}function e1(){return!0}var u6=/[^\\]\\Z/;function l6(t){if(u6.test(t))return!1;try{return new RegExp(t),!0}catch{return!1}}});var Vn=$((lhe,s1)=>{"use strict";s1.exports=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,s,i;if(Array.isArray(e)){if(n=e.length,n!=r.length)return!1;for(s=n;s--!==0;)if(!t(e[s],r[s]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(i=Object.keys(e),n=i.length,n!==Object.keys(r).length)return!1;for(s=n;s--!==0;)if(!Object.prototype.hasOwnProperty.call(r,i[s]))return!1;for(s=n;s--!==0;){var o=i[s];if(!t(e[o],r[o]))return!1}return!0}return e!==e&&r!==r}});var Pu=$(Jy=>{"use strict";Object.defineProperty(Jy,"__esModule",{value:!0});var i1=Vn();i1.code='require("ajv/dist/runtime/equal").default';Jy.default=i1});var c1=$((fhe,Wy)=>{"use strict";Wy.exports=F;Wy.exports.default=F;var c6={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0},o1={enum:["array","boolean","integer","null","number","object","string"]},a1=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,f6=Xf().fullFormats.uri,u1=Xf().fullFormats.regex;function Qr(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0,a=o;return typeof t=="number"&&!(t%1)&&!isNaN(t)&&isFinite(t)?o===a&&typeof t=="number"&&isFinite(t)&&(t<0||isNaN(t))?(Qr.errors=[{instancePath:e,schemaPath:"#/definitions/nonNegativeInteger/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1):(Qr.errors=i,o===0):(Qr.errors=[{instancePath:e,schemaPath:"#/definitions/nonNegativeInteger/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1)}var Yy={validate:F};function fr(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(o===0)if(Array.isArray(t)){if(t.length<1)return fr.errors=[{instancePath:e,schemaPath:"#/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"}],!1;{var a=!0;let u=t.length;for(let l=0;l<u;l++){let c=o;Yy.validate(t[l],{instancePath:e+"/"+l,parentData:t,parentDataProperty:l,rootData:s})||(i=i===null?Yy.validate.errors:i.concat(Yy.validate.errors),o=i.length);var a=c===o;if(!a)break}}}else return fr.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;return fr.errors=i,o===0}var l1=Pu().default;function F(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(!(t&&typeof t=="object"&&!Array.isArray(t))&&typeof t!="boolean")return F.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:c6.type},message:"must be object,boolean"}],!1;if(o===0&&t&&typeof t=="object"&&!Array.isArray(t)){if(t.$id!==void 0){let _=t.$id,y=o;if(o===y&&o===y)if(typeof _=="string"){if(!a1.test(_))return F.errors=[{instancePath:e+"/$id",schemaPath:"#/properties/%24id/format",keyword:"format",params:{format:"uri-reference"},message:'must match format "uri-reference"'}],!1}else return F.errors=[{instancePath:e+"/$id",schemaPath:"#/properties/%24id/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=y===o}else var a=!0;if(a){if(t.$schema!==void 0){let _=t.$schema,y=o;if(o===y&&o===y)if(typeof _=="string"){if(!f6(_))return F.errors=[{instancePath:e+"/$schema",schemaPath:"#/properties/%24schema/format",keyword:"format",params:{format:"uri"},message:'must match format "uri"'}],!1}else return F.errors=[{instancePath:e+"/$schema",schemaPath:"#/properties/%24schema/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=y===o}else var a=!0;if(a){if(t.$ref!==void 0){let _=t.$ref,y=o;if(o===y&&o===y)if(typeof _=="string"){if(!a1.test(_))return F.errors=[{instancePath:e+"/$ref",schemaPath:"#/properties/%24ref/format",keyword:"format",params:{format:"uri-reference"},message:'must match format "uri-reference"'}],!1}else return F.errors=[{instancePath:e+"/$ref",schemaPath:"#/properties/%24ref/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=y===o}else var a=!0;if(a){if(t.$comment!==void 0){let _=o;if(typeof t.$comment!="string")return F.errors=[{instancePath:e+"/$comment",schemaPath:"#/properties/%24comment/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=_===o}else var a=!0;if(a){if(t.title!==void 0){let _=o;if(typeof t.title!="string")return F.errors=[{instancePath:e+"/title",schemaPath:"#/properties/title/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=_===o}else var a=!0;if(a){if(t.description!==void 0){let _=o;if(typeof t.description!="string")return F.errors=[{instancePath:e+"/description",schemaPath:"#/properties/description/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=_===o}else var a=!0;if(a){if(t.readOnly!==void 0){let _=o;if(typeof t.readOnly!="boolean")return F.errors=[{instancePath:e+"/readOnly",schemaPath:"#/properties/readOnly/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var a=_===o}else var a=!0;if(a){if(t.examples!==void 0){let _=o;if(o===_&&!Array.isArray(t.examples))return F.errors=[{instancePath:e+"/examples",schemaPath:"#/properties/examples/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var a=_===o}else var a=!0;if(a){if(t.multipleOf!==void 0){let _=t.multipleOf,y=o;if(o===y)if(typeof _=="number"&&isFinite(_)){if(_<=0||isNaN(_))return F.errors=[{instancePath:e+"/multipleOf",schemaPath:"#/properties/multipleOf/exclusiveMinimum",keyword:"exclusiveMinimum",params:{comparison:">",limit:0},message:"must be > 0"}],!1}else return F.errors=[{instancePath:e+"/multipleOf",schemaPath:"#/properties/multipleOf/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=y===o}else var a=!0;if(a){if(t.maximum!==void 0){let _=t.maximum,y=o;if(!(typeof _=="number"&&isFinite(_)))return F.errors=[{instancePath:e+"/maximum",schemaPath:"#/properties/maximum/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=y===o}else var a=!0;if(a){if(t.exclusiveMaximum!==void 0){let _=t.exclusiveMaximum,y=o;if(!(typeof _=="number"&&isFinite(_)))return F.errors=[{instancePath:e+"/exclusiveMaximum",schemaPath:"#/properties/exclusiveMaximum/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=y===o}else var a=!0;if(a){if(t.minimum!==void 0){let _=t.minimum,y=o;if(!(typeof _=="number"&&isFinite(_)))return F.errors=[{instancePath:e+"/minimum",schemaPath:"#/properties/minimum/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=y===o}else var a=!0;if(a){if(t.exclusiveMinimum!==void 0){let _=t.exclusiveMinimum,y=o;if(!(typeof _=="number"&&isFinite(_)))return F.errors=[{instancePath:e+"/exclusiveMinimum",schemaPath:"#/properties/exclusiveMinimum/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=y===o}else var a=!0;if(a){if(t.maxLength!==void 0){let _=t.maxLength,y=o,b=o;if(!(typeof _=="number"&&!(_%1)&&!isNaN(_)&&isFinite(_)))return F.errors=[{instancePath:e+"/maxLength",schemaPath:"#/definitions/nonNegativeInteger/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;if(o===b&&typeof _=="number"&&isFinite(_)&&(_<0||isNaN(_)))return F.errors=[{instancePath:e+"/maxLength",schemaPath:"#/definitions/nonNegativeInteger/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1;var a=y===o}else var a=!0;if(a){if(t.minLength!==void 0){let _=o;Qr(t.minLength,{instancePath:e+"/minLength",parentData:t,parentDataProperty:"minLength",rootData:s})||(i=i===null?Qr.errors:i.concat(Qr.errors),o=i.length);var a=_===o}else var a=!0;if(a){if(t.pattern!==void 0){let _=t.pattern,y=o;if(o===y&&o===y)if(typeof _=="string"){if(!u1(_))return F.errors=[{instancePath:e+"/pattern",schemaPath:"#/properties/pattern/format",keyword:"format",params:{format:"regex"},message:'must match format "regex"'}],!1}else return F.errors=[{instancePath:e+"/pattern",schemaPath:"#/properties/pattern/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=y===o}else var a=!0;if(a){if(t.additionalItems!==void 0){let _=o;F(t.additionalItems,{instancePath:e+"/additionalItems",parentData:t,parentDataProperty:"additionalItems",rootData:s})||(i=i===null?F.errors:i.concat(F.errors),o=i.length);var a=_===o}else var a=!0;if(a){if(t.items!==void 0){let _=t.items,y=o,b=o,T=!1,S=o;F(_,{instancePath:e+"/items",parentData:t,parentDataProperty:"items",rootData:s})||(i=i===null?F.errors:i.concat(F.errors),o=i.length);var u=S===o;if(T=T||u,!T){let A=o;fr(_,{instancePath:e+"/items",parentData:t,parentDataProperty:"items",rootData:s})||(i=i===null?fr.errors:i.concat(fr.errors),o=i.length);var u=A===o;T=T||u}if(T)o=b,i!==null&&(b?i.length=b:i=null);else{let A={instancePath:e+"/items",schemaPath:"#/properties/items/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[A]:i.push(A),o++,F.errors=i,!1}var a=y===o}else var a=!0;if(a){if(t.maxItems!==void 0){let _=t.maxItems,y=o,b=o;if(!(typeof _=="number"&&!(_%1)&&!isNaN(_)&&isFinite(_)))return F.errors=[{instancePath:e+"/maxItems",schemaPath:"#/definitions/nonNegativeInteger/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;if(o===b&&typeof _=="number"&&isFinite(_)&&(_<0||isNaN(_)))return F.errors=[{instancePath:e+"/maxItems",schemaPath:"#/definitions/nonNegativeInteger/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1;var a=y===o}else var a=!0;if(a){if(t.minItems!==void 0){let _=o;Qr(t.minItems,{instancePath:e+"/minItems",parentData:t,parentDataProperty:"minItems",rootData:s})||(i=i===null?Qr.errors:i.concat(Qr.errors),o=i.length);var a=_===o}else var a=!0;if(a){if(t.uniqueItems!==void 0){let _=o;if(typeof t.uniqueItems!="boolean")return F.errors=[{instancePath:e+"/uniqueItems",schemaPath:"#/properties/uniqueItems/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var a=_===o}else var a=!0;if(a){if(t.contains!==void 0){let _=o;F(t.contains,{instancePath:e+"/contains",parentData:t,parentDataProperty:"contains",rootData:s})||(i=i===null?F.errors:i.concat(F.errors),o=i.length);var a=_===o}else var a=!0;if(a){if(t.maxProperties!==void 0){let _=t.maxProperties,y=o,b=o;if(!(typeof _=="number"&&!(_%1)&&!isNaN(_)&&isFinite(_)))return F.errors=[{instancePath:e+"/maxProperties",schemaPath:"#/definitions/nonNegativeInteger/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;if(o===b&&typeof _=="number"&&isFinite(_)&&(_<0||isNaN(_)))return F.errors=[{instancePath:e+"/maxProperties",schemaPath:"#/definitions/nonNegativeInteger/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1;var a=y===o}else var a=!0;if(a){if(t.minProperties!==void 0){let _=o;Qr(t.minProperties,{instancePath:e+"/minProperties",parentData:t,parentDataProperty:"minProperties",rootData:s})||(i=i===null?Qr.errors:i.concat(Qr.errors),o=i.length);var a=_===o}else var a=!0;if(a){if(t.required!==void 0){let _=t.required,y=o;if(o===o)if(Array.isArray(_)){var l=!0;let S=_.length;for(let N=0;N<S;N++){let A=o;if(typeof _[N]!="string")return F.errors=[{instancePath:e+"/required/"+N,schemaPath:"#/definitions/stringArray/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var l=A===o;if(!l)break}if(l){let N=_.length,A;if(N>1){let I={};for(;N--;){let O=_[N];if(typeof O=="string"){if(typeof I[O]=="number"){return A=I[O],F.errors=[{instancePath:e+"/required",schemaPath:"#/definitions/stringArray/uniqueItems",keyword:"uniqueItems",params:{i:N,j:A},message:"must NOT have duplicate items (items ## "+A+" and "+N+" are identical)"}],!1;break}I[O]=N}}}}}else return F.errors=[{instancePath:e+"/required",schemaPath:"#/definitions/stringArray/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var a=y===o}else var a=!0;if(a){if(t.additionalProperties!==void 0){let _=o;F(t.additionalProperties,{instancePath:e+"/additionalProperties",parentData:t,parentDataProperty:"additionalProperties",rootData:s})||(i=i===null?F.errors:i.concat(F.errors),o=i.length);var a=_===o}else var a=!0;if(a){if(t.definitions!==void 0){let _=t.definitions,y=o;if(o===y)if(_&&typeof _=="object"&&!Array.isArray(_))for(let T in _){let S=o;F(_[T],{instancePath:e+"/definitions/"+T.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:_,parentDataProperty:T,rootData:s})||(i=i===null?F.errors:i.concat(F.errors),o=i.length);var c=S===o;if(!c)break}else return F.errors=[{instancePath:e+"/definitions",schemaPath:"#/properties/definitions/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=y===o}else var a=!0;if(a){if(t.properties!==void 0){let _=t.properties,y=o;if(o===y)if(_&&typeof _=="object"&&!Array.isArray(_))for(let T in _){let S=o;F(_[T],{instancePath:e+"/properties/"+T.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:_,parentDataProperty:T,rootData:s})||(i=i===null?F.errors:i.concat(F.errors),o=i.length);var f=S===o;if(!f)break}else return F.errors=[{instancePath:e+"/properties",schemaPath:"#/properties/properties/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=y===o}else var a=!0;if(a){if(t.patternProperties!==void 0){let _=t.patternProperties,y=o;if(o===y)if(_&&typeof _=="object"&&!Array.isArray(_)){for(let T in _){let S=o;if(o===S&&typeof T=="string"&&!u1(T)){let N={instancePath:e+"/patternProperties",schemaPath:"#/properties/patternProperties/propertyNames/format",keyword:"format",params:{format:"regex"},message:'must match format "regex"',propertyName:T};i===null?i=[N]:i.push(N),o++}var h=S===o;if(!h){let N={instancePath:e+"/patternProperties",schemaPath:"#/properties/patternProperties/propertyNames",keyword:"propertyNames",params:{propertyName:T},message:"property name must be valid"};return i===null?i=[N]:i.push(N),o++,F.errors=i,!1;break}}if(h)for(let T in _){let S=o;F(_[T],{instancePath:e+"/patternProperties/"+T.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:_,parentDataProperty:T,rootData:s})||(i=i===null?F.errors:i.concat(F.errors),o=i.length);var d=S===o;if(!d)break}}else return F.errors=[{instancePath:e+"/patternProperties",schemaPath:"#/properties/patternProperties/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=y===o}else var a=!0;if(a){if(t.dependencies!==void 0){let _=t.dependencies,y=o;if(o===y)if(_&&typeof _=="object"&&!Array.isArray(_))for(let T in _){let S=_[T],N=o,A=o,I=!1,O=o;F(S,{instancePath:e+"/dependencies/"+T.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:_,parentDataProperty:T,rootData:s})||(i=i===null?F.errors:i.concat(F.errors),o=i.length);var p=O===o;if(I=I||p,!I){let q=o;if(o===o)if(Array.isArray(S)){var m=!0;let Pe=S.length;for(let V=0;V<Pe;V++){let te=o;if(typeof S[V]!="string"){let U={instancePath:e+"/dependencies/"+T.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+V,schemaPath:"#/definitions/stringArray/items/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[U]:i.push(U),o++}var m=te===o;if(!m)break}if(m){let V=S.length,te;if(V>1){let ct={};for(;V--;){let U=S[V];if(typeof U=="string"){if(typeof ct[U]=="number"){te=ct[U];let ft={instancePath:e+"/dependencies/"+T.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/stringArray/uniqueItems",keyword:"uniqueItems",params:{i:V,j:te},message:"must NOT have duplicate items (items ## "+te+" and "+V+" are identical)"};i===null?i=[ft]:i.push(ft),o++;break}ct[U]=V}}}}}else{let Pe={instancePath:e+"/dependencies/"+T.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/stringArray/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[Pe]:i.push(Pe),o++}var p=q===o;I=I||p}if(I)o=A,i!==null&&(A?i.length=A:i=null);else{let q={instancePath:e+"/dependencies/"+T.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/dependencies/additionalProperties/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[q]:i.push(q),o++,F.errors=i,!1}var v=N===o;if(!v)break}else return F.errors=[{instancePath:e+"/dependencies",schemaPath:"#/properties/dependencies/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=y===o}else var a=!0;if(a){if(t.propertyNames!==void 0){let _=o;F(t.propertyNames,{instancePath:e+"/propertyNames",parentData:t,parentDataProperty:"propertyNames",rootData:s})||(i=i===null?F.errors:i.concat(F.errors),o=i.length);var a=_===o}else var a=!0;if(a){if(t.enum!==void 0){let _=t.enum,y=o;if(o===y)if(Array.isArray(_)){if(_.length<1)return F.errors=[{instancePath:e+"/enum",schemaPath:"#/properties/enum/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"}],!1;{let T=_.length,S;if(T>1){e:for(;T--;)for(S=T;S--;)if(l1(_[T],_[S])){return F.errors=[{instancePath:e+"/enum",schemaPath:"#/properties/enum/uniqueItems",keyword:"uniqueItems",params:{i:T,j:S},message:"must NOT have duplicate items (items ## "+S+" and "+T+" are identical)"}],!1;break e}}}}else return F.errors=[{instancePath:e+"/enum",schemaPath:"#/properties/enum/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var a=y===o}else var a=!0;if(a){if(t.type!==void 0){let _=t.type,y=o,b=o,T=!1,S=o;if(!(_==="array"||_==="boolean"||_==="integer"||_==="null"||_==="number"||_==="object"||_==="string")){let A={instancePath:e+"/type",schemaPath:"#/definitions/simpleTypes/enum",keyword:"enum",params:{allowedValues:o1.enum},message:"must be equal to one of the allowed values"};i===null?i=[A]:i.push(A),o++}var g=S===o;if(T=T||g,!T){let A=o;if(o===A)if(Array.isArray(_))if(_.length<1){let O={instancePath:e+"/type",schemaPath:"#/properties/type/anyOf/1/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"};i===null?i=[O]:i.push(O),o++}else{var w=!0;let O=_.length;for(let q=0;q<O;q++){let L=_[q],Z=o;if(!(L==="array"||L==="boolean"||L==="integer"||L==="null"||L==="number"||L==="object"||L==="string")){let V={instancePath:e+"/type/"+q,schemaPath:"#/definitions/simpleTypes/enum",keyword:"enum",params:{allowedValues:o1.enum},message:"must be equal to one of the allowed values"};i===null?i=[V]:i.push(V),o++}var w=Z===o;if(!w)break}if(w){let q=_.length,L;if(q>1){e:for(;q--;)for(L=q;L--;)if(l1(_[q],_[L])){let Z={instancePath:e+"/type",schemaPath:"#/properties/type/anyOf/1/uniqueItems",keyword:"uniqueItems",params:{i:q,j:L},message:"must NOT have duplicate items (items ## "+L+" and "+q+" are identical)"};i===null?i=[Z]:i.push(Z),o++;break e}}}}else{let O={instancePath:e+"/type",schemaPath:"#/properties/type/anyOf/1/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[O]:i.push(O),o++}var g=A===o;T=T||g}if(T)o=b,i!==null&&(b?i.length=b:i=null);else{let A={instancePath:e+"/type",schemaPath:"#/properties/type/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[A]:i.push(A),o++,F.errors=i,!1}var a=y===o}else var a=!0;if(a){if(t.format!==void 0){let _=o;if(typeof t.format!="string")return F.errors=[{instancePath:e+"/format",schemaPath:"#/properties/format/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=_===o}else var a=!0;if(a){if(t.contentMediaType!==void 0){let _=o;if(typeof t.contentMediaType!="string")return F.errors=[{instancePath:e+"/contentMediaType",schemaPath:"#/properties/contentMediaType/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=_===o}else var a=!0;if(a){if(t.contentEncoding!==void 0){let _=o;if(typeof t.contentEncoding!="string")return F.errors=[{instancePath:e+"/contentEncoding",schemaPath:"#/properties/contentEncoding/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=_===o}else var a=!0;if(a){if(t.if!==void 0){let _=o;F(t.if,{instancePath:e+"/if",parentData:t,parentDataProperty:"if",rootData:s})||(i=i===null?F.errors:i.concat(F.errors),o=i.length);var a=_===o}else var a=!0;if(a){if(t.then!==void 0){let _=o;F(t.then,{instancePath:e+"/then",parentData:t,parentDataProperty:"then",rootData:s})||(i=i===null?F.errors:i.concat(F.errors),o=i.length);var a=_===o}else var a=!0;if(a){if(t.else!==void 0){let _=o;F(t.else,{instancePath:e+"/else",parentData:t,parentDataProperty:"else",rootData:s})||(i=i===null?F.errors:i.concat(F.errors),o=i.length);var a=_===o}else var a=!0;if(a){if(t.allOf!==void 0){let _=o;fr(t.allOf,{instancePath:e+"/allOf",parentData:t,parentDataProperty:"allOf",rootData:s})||(i=i===null?fr.errors:i.concat(fr.errors),o=i.length);var a=_===o}else var a=!0;if(a){if(t.anyOf!==void 0){let _=o;fr(t.anyOf,{instancePath:e+"/anyOf",parentData:t,parentDataProperty:"anyOf",rootData:s})||(i=i===null?fr.errors:i.concat(fr.errors),o=i.length);var a=_===o}else var a=!0;if(a){if(t.oneOf!==void 0){let _=o;fr(t.oneOf,{instancePath:e+"/oneOf",parentData:t,parentDataProperty:"oneOf",rootData:s})||(i=i===null?fr.errors:i.concat(fr.errors),o=i.length);var a=_===o}else var a=!0;if(a)if(t.not!==void 0){let _=o;F(t.not,{instancePath:e+"/not",parentData:t,parentDataProperty:"not",rootData:s})||(i=i===null?F.errors:i.concat(F.errors),o=i.length);var a=_===o}else var a=!0}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}return F.errors=i,o===0}});var Xy=$((dhe,d1)=>{"use strict";var d6=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]|[\ud800-\udbff](?![\udc00-\udfff])|(?:[^\ud800-\udbff]|^)[\udc00-\udfff]/;d1.exports=class f1{constructor(e){switch(e&&e.rounding){case"floor":this.parseInteger=Math.floor;break;case"ceil":this.parseInteger=Math.ceil;break;case"round":this.parseInteger=Math.round;break;case"trunc":default:this.parseInteger=Math.trunc;break}this._options=e}asInteger(e){if(typeof e=="number"){if(e===1/0||e===-1/0)throw new Error(`The value "${e}" cannot be converted to an integer.`);if(Number.isInteger(e))return""+e;if(Number.isNaN(e))throw new Error(`The value "${e}" cannot be converted to an integer.`);return this.parseInteger(e)}else{if(e===null)return"0";if(typeof e=="bigint")return e.toString();{let r=this.parseInteger(e);if(Number.isFinite(r))return""+r;throw new Error(`The value "${e}" cannot be converted to an integer.`)}}}asNumber(e){let r=Number(e);if(Number.isNaN(r))throw new Error(`The value "${e}" cannot be converted to a number.`);return Number.isFinite(r)?""+r:"null"}asBoolean(e){return e&&"true"||"false"}asDateTime(e){if(e===null)return'""';if(e instanceof Date)return'"'+e.toISOString()+'"';if(typeof e=="string")return'"'+e+'"';throw new Error(`The value "${e}" cannot be converted to a date-time.`)}asDate(e){if(e===null)return'""';if(e instanceof Date)return'"'+new Date(e.getTime()-e.getTimezoneOffset()*6e4).toISOString().slice(0,10)+'"';if(typeof e=="string")return'"'+e+'"';throw new Error(`The value "${e}" cannot be converted to a date.`)}asTime(e){if(e===null)return'""';if(e instanceof Date)return'"'+new Date(e.getTime()-e.getTimezoneOffset()*6e4).toISOString().slice(11,19)+'"';if(typeof e=="string")return'"'+e+'"';throw new Error(`The value "${e}" cannot be converted to a time.`)}asString(e){if(typeof e!="string"){if(e===null)return'""';if(e instanceof Date)return'"'+e.toISOString()+'"';e instanceof RegExp?e=e.source:e=e.toString()}return d6.test(e)?e.length<42?this.asStringSmall(e):JSON.stringify(e):'"'+e+'"'}asStringSmall(e){let r=e.length,n="",s=0,i=!1,o=!1,a=255;for(var u=0;u<r&&a>=32;u++)a=e.charCodeAt(u),a>=55296&&a<=57343&&(o=!0),(a===34||a===92)&&(n+=e.slice(s,u)+"\\",s=u,i=!0);return i?n+=e.slice(s):n=e,a<32||o===!0?JSON.stringify(e):'"'+n+'"'}getState(){return this._options}static restoreFromState(e){return new f1(e)}}});var Nu=$(ke=>{"use strict";Object.defineProperty(ke,"__esModule",{value:!0});ke.regexpCode=ke.getEsmExportName=ke.getProperty=ke.safeStringify=ke.stringify=ke.strConcat=ke.addCodeArg=ke.str=ke._=ke.nil=ke._Code=ke.Name=ke.IDENTIFIER=ke._CodeOrName=void 0;var Tu=class{};ke._CodeOrName=Tu;ke.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var Mi=class extends Tu{constructor(e){if(super(),!ke.IDENTIFIER.test(e))throw new Error("CodeGen: name must be a valid identifier");this.str=e}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}};ke.Name=Mi;var Zr=class extends Tu{constructor(e){super(),this._items=typeof e=="string"?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;let e=this._items[0];return e===""||e==='""'}get str(){var e;return(e=this._str)!==null&&e!==void 0?e:this._str=this._items.reduce((r,n)=>`${r}${n}`,"")}get names(){var e;return(e=this._names)!==null&&e!==void 0?e:this._names=this._items.reduce((r,n)=>(n instanceof Mi&&(r[n.str]=(r[n.str]||0)+1),r),{})}};ke._Code=Zr;ke.nil=new Zr("");function h1(t,...e){let r=[t[0]],n=0;for(;n<e.length;)Zy(r,e[n]),r.push(t[++n]);return new Zr(r)}ke._=h1;var Qy=new Zr("+");function p1(t,...e){let r=[Ou(t[0])],n=0;for(;n<e.length;)r.push(Qy),Zy(r,e[n]),r.push(Qy,Ou(t[++n]));return h6(r),new Zr(r)}ke.str=p1;function Zy(t,e){e instanceof Zr?t.push(...e._items):e instanceof Mi?t.push(e):t.push(y6(e))}ke.addCodeArg=Zy;function h6(t){let e=1;for(;e<t.length-1;){if(t[e]===Qy){let r=p6(t[e-1],t[e+1]);if(r!==void 0){t.splice(e-1,3,r);continue}t[e++]="+"}e++}}function p6(t,e){if(e==='""')return t;if(t==='""')return e;if(typeof t=="string")return e instanceof Mi||t[t.length-1]!=='"'?void 0:typeof e!="string"?`${t.slice(0,-1)}${e}"`:e[0]==='"'?t.slice(0,-1)+e.slice(1):void 0;if(typeof e=="string"&&e[0]==='"'&&!(t instanceof Mi))return`"${t}${e.slice(1)}`}function m6(t,e){return e.emptyStr()?t:t.emptyStr()?e:p1`${t}${e}`}ke.strConcat=m6;function y6(t){return typeof t=="number"||typeof t=="boolean"||t===null?t:Ou(Array.isArray(t)?t.join(","):t)}function g6(t){return new Zr(Ou(t))}ke.stringify=g6;function Ou(t){return JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}ke.safeStringify=Ou;function _6(t){return typeof t=="string"&&ke.IDENTIFIER.test(t)?new Zr(`.${t}`):h1`[${t}]`}ke.getProperty=_6;function v6(t){if(typeof t=="string"&&ke.IDENTIFIER.test(t))return new Zr(`${t}`);throw new Error(`CodeGen: invalid export name: ${t}, use explicit $id name mapping`)}ke.getEsmExportName=v6;function $6(t){return new Zr(t.toString())}ke.regexpCode=$6});var ng=$(dr=>{"use strict";Object.defineProperty(dr,"__esModule",{value:!0});dr.ValueScope=dr.ValueScopeName=dr.Scope=dr.varKinds=dr.UsedValueState=void 0;var Rr=Nu(),eg=class extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`),this.value=e.value}},tg;(function(t){t[t.Started=0]="Started",t[t.Completed=1]="Completed"})(tg=dr.UsedValueState||(dr.UsedValueState={}));dr.varKinds={const:new Rr.Name("const"),let:new Rr.Name("let"),var:new Rr.Name("var")};var Qf=class{constructor({prefixes:e,parent:r}={}){this._names={},this._prefixes=e,this._parent=r}toName(e){return e instanceof Rr.Name?e:this.name(e)}name(e){return new Rr.Name(this._newName(e))}_newName(e){let r=this._names[e]||this._nameGroup(e);return`${e}${r.index++}`}_nameGroup(e){var r,n;if(!((n=(r=this._parent)===null||r===void 0?void 0:r._prefixes)===null||n===void 0)&&n.has(e)||this._prefixes&&!this._prefixes.has(e))throw new Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}};dr.Scope=Qf;var Zf=class extends Rr.Name{constructor(e,r){super(r),this.prefix=e}setValue(e,{property:r,itemIndex:n}){this.value=e,this.scopePath=(0,Rr._)`.${new Rr.Name(r)}[${n}]`}};dr.ValueScopeName=Zf;var b6=(0,Rr._)`\n`,rg=class extends Qf{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts={...e,_n:e.lines?b6:Rr.nil}}get(){return this._scope}name(e){return new Zf(e,this._newName(e))}value(e,r){var n;if(r.ref===void 0)throw new Error("CodeGen: ref must be passed in value");let s=this.toName(e),{prefix:i}=s,o=(n=r.key)!==null&&n!==void 0?n:r.ref,a=this._values[i];if(a){let c=a.get(o);if(c)return c}else a=this._values[i]=new Map;a.set(o,s);let u=this._scope[i]||(this._scope[i]=[]),l=u.length;return u[l]=r.ref,s.setValue(r,{property:i,itemIndex:l}),s}getValue(e,r){let n=this._values[e];if(n)return n.get(r)}scopeRefs(e,r=this._values){return this._reduceValues(r,n=>{if(n.scopePath===void 0)throw new Error(`CodeGen: name "${n}" has no value`);return(0,Rr._)`${e}${n.scopePath}`})}scopeCode(e=this._values,r,n){return this._reduceValues(e,s=>{if(s.value===void 0)throw new Error(`CodeGen: name "${s}" has no value`);return s.value.code},r,n)}_reduceValues(e,r,n={},s){let i=Rr.nil;for(let o in e){let a=e[o];if(!a)continue;let u=n[o]=n[o]||new Map;a.forEach(l=>{if(u.has(l))return;u.set(l,tg.Started);let c=r(l);if(c){let f=this.opts.es5?dr.varKinds.var:dr.varKinds.const;i=(0,Rr._)`${i}${f} ${l} = ${c};${this.opts._n}`}else if(c=s?.(l))i=(0,Rr._)`${i}${c}${this.opts._n}`;else throw new eg(l);u.set(l,tg.Completed)})}return i}};dr.ValueScope=rg});var $e=$(he=>{"use strict";Object.defineProperty(he,"__esModule",{value:!0});he.or=he.and=he.not=he.CodeGen=he.operators=he.varKinds=he.ValueScopeName=he.ValueScope=he.Scope=he.Name=he.regexpCode=he.stringify=he.getProperty=he.nil=he.strConcat=he.str=he._=void 0;var Ee=Nu(),vn=ng(),zs=Nu();Object.defineProperty(he,"_",{enumerable:!0,get:function(){return zs._}});Object.defineProperty(he,"str",{enumerable:!0,get:function(){return zs.str}});Object.defineProperty(he,"strConcat",{enumerable:!0,get:function(){return zs.strConcat}});Object.defineProperty(he,"nil",{enumerable:!0,get:function(){return zs.nil}});Object.defineProperty(he,"getProperty",{enumerable:!0,get:function(){return zs.getProperty}});Object.defineProperty(he,"stringify",{enumerable:!0,get:function(){return zs.stringify}});Object.defineProperty(he,"regexpCode",{enumerable:!0,get:function(){return zs.regexpCode}});Object.defineProperty(he,"Name",{enumerable:!0,get:function(){return zs.Name}});var nd=ng();Object.defineProperty(he,"Scope",{enumerable:!0,get:function(){return nd.Scope}});Object.defineProperty(he,"ValueScope",{enumerable:!0,get:function(){return nd.ValueScope}});Object.defineProperty(he,"ValueScopeName",{enumerable:!0,get:function(){return nd.ValueScopeName}});Object.defineProperty(he,"varKinds",{enumerable:!0,get:function(){return nd.varKinds}});he.operators={GT:new Ee._Code(">"),GTE:new Ee._Code(">="),LT:new Ee._Code("<"),LTE:new Ee._Code("<="),EQ:new Ee._Code("==="),NEQ:new Ee._Code("!=="),NOT:new Ee._Code("!"),OR:new Ee._Code("||"),AND:new Ee._Code("&&"),ADD:new Ee._Code("+")};var cs=class{optimizeNodes(){return this}optimizeNames(e,r){return this}},sg=class extends cs{constructor(e,r,n){super(),this.varKind=e,this.name=r,this.rhs=n}render({es5:e,_n:r}){let n=e?vn.varKinds.var:this.varKind,s=this.rhs===void 0?"":` = ${this.rhs}`;return`${n} ${this.name}${s};`+r}optimizeNames(e,r){if(e[this.name.str])return this.rhs&&(this.rhs=Jo(this.rhs,e,r)),this}get names(){return this.rhs instanceof Ee._CodeOrName?this.rhs.names:{}}},ed=class extends cs{constructor(e,r,n){super(),this.lhs=e,this.rhs=r,this.sideEffects=n}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,r){if(!(this.lhs instanceof Ee.Name&&!e[this.lhs.str]&&!this.sideEffects))return this.rhs=Jo(this.rhs,e,r),this}get names(){let e=this.lhs instanceof Ee.Name?{}:{...this.lhs.names};return rd(e,this.rhs)}},ig=class extends ed{constructor(e,r,n,s){super(e,n,s),this.op=r}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}},og=class extends cs{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`${this.label}:`+e}},ag=class extends cs{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`break${this.label?` ${this.label}`:""};`+e}},ug=class extends cs{constructor(e){super(),this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}},lg=class extends cs{constructor(e){super(),this.code=e}render({_n:e}){return`${this.code};`+e}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(e,r){return this.code=Jo(this.code,e,r),this}get names(){return this.code instanceof Ee._CodeOrName?this.code.names:{}}},Iu=class extends cs{constructor(e=[]){super(),this.nodes=e}render(e){return this.nodes.reduce((r,n)=>r+n.render(e),"")}optimizeNodes(){let{nodes:e}=this,r=e.length;for(;r--;){let n=e[r].optimizeNodes();Array.isArray(n)?e.splice(r,1,...n):n?e[r]=n:e.splice(r,1)}return e.length>0?this:void 0}optimizeNames(e,r){let{nodes:n}=this,s=n.length;for(;s--;){let i=n[s];i.optimizeNames(e,r)||(w6(e,i.names),n.splice(s,1))}return n.length>0?this:void 0}get names(){return this.nodes.reduce((e,r)=>zi(e,r.names),{})}},fs=class extends Iu{render(e){return"{"+e._n+super.render(e)+"}"+e._n}},cg=class extends Iu{},Go=class extends fs{};Go.kind="else";var $n=class extends fs{constructor(e,r){super(r),this.condition=e}render(e){let r=`if(${this.condition})`+super.render(e);return this.else&&(r+="else "+this.else.render(e)),r}optimizeNodes(){super.optimizeNodes();let e=this.condition;if(e===!0)return this.nodes;let r=this.else;if(r){let n=r.optimizeNodes();r=this.else=Array.isArray(n)?new Go(n):n}if(r)return e===!1?r instanceof $n?r:r.nodes:this.nodes.length?this:new $n(m1(e),r instanceof $n?[r]:r.nodes);if(!(e===!1||!this.nodes.length))return this}optimizeNames(e,r){var n;if(this.else=(n=this.else)===null||n===void 0?void 0:n.optimizeNames(e,r),!!(super.optimizeNames(e,r)||this.else))return this.condition=Jo(this.condition,e,r),this}get names(){let e=super.names;return rd(e,this.condition),this.else&&zi(e,this.else.names),e}};$n.kind="if";var Vi=class extends fs{};Vi.kind="for";var fg=class extends Vi{constructor(e){super(),this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,r){if(super.optimizeNames(e,r))return this.iteration=Jo(this.iteration,e,r),this}get names(){return zi(super.names,this.iteration.names)}},dg=class extends Vi{constructor(e,r,n,s){super(),this.varKind=e,this.name=r,this.from=n,this.to=s}render(e){let r=e.es5?vn.varKinds.var:this.varKind,{name:n,from:s,to:i}=this;return`for(${r} ${n}=${s}; ${n}<${i}; ${n}++)`+super.render(e)}get names(){let e=rd(super.names,this.from);return rd(e,this.to)}},td=class extends Vi{constructor(e,r,n,s){super(),this.loop=e,this.varKind=r,this.name=n,this.iterable=s}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,r){if(super.optimizeNames(e,r))return this.iterable=Jo(this.iterable,e,r),this}get names(){return zi(super.names,this.iterable.names)}},Cu=class extends fs{constructor(e,r,n){super(),this.name=e,this.args=r,this.async=n}render(e){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(e)}};Cu.kind="func";var Au=class extends Iu{render(e){return"return "+super.render(e)}};Au.kind="return";var hg=class extends fs{render(e){let r="try"+super.render(e);return this.catch&&(r+=this.catch.render(e)),this.finally&&(r+=this.finally.render(e)),r}optimizeNodes(){var e,r;return super.optimizeNodes(),(e=this.catch)===null||e===void 0||e.optimizeNodes(),(r=this.finally)===null||r===void 0||r.optimizeNodes(),this}optimizeNames(e,r){var n,s;return super.optimizeNames(e,r),(n=this.catch)===null||n===void 0||n.optimizeNames(e,r),(s=this.finally)===null||s===void 0||s.optimizeNames(e,r),this}get names(){let e=super.names;return this.catch&&zi(e,this.catch.names),this.finally&&zi(e,this.finally.names),e}},ku=class extends fs{constructor(e){super(),this.error=e}render(e){return`catch(${this.error})`+super.render(e)}};ku.kind="catch";var qu=class extends fs{render(e){return"finally"+super.render(e)}};qu.kind="finally";var pg=class{constructor(e,r={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...r,_n:r.lines?`
`:""},this._extScope=e,this._scope=new vn.Scope({parent:e}),this._nodes=[new cg]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,r){let n=this._extScope.value(e,r);return(this._values[n.prefix]||(this._values[n.prefix]=new Set)).add(n),n}getScopeValue(e,r){return this._extScope.getValue(e,r)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,r,n,s){let i=this._scope.toName(r);return n!==void 0&&s&&(this._constants[i.str]=n),this._leafNode(new sg(e,i,n)),i}const(e,r,n){return this._def(vn.varKinds.const,e,r,n)}let(e,r,n){return this._def(vn.varKinds.let,e,r,n)}var(e,r,n){return this._def(vn.varKinds.var,e,r,n)}assign(e,r,n){return this._leafNode(new ed(e,r,n))}add(e,r){return this._leafNode(new ig(e,he.operators.ADD,r))}code(e){return typeof e=="function"?e():e!==Ee.nil&&this._leafNode(new lg(e)),this}object(...e){let r=["{"];for(let[n,s]of e)r.length>1&&r.push(","),r.push(n),(n!==s||this.opts.es5)&&(r.push(":"),(0,Ee.addCodeArg)(r,s));return r.push("}"),new Ee._Code(r)}if(e,r,n){if(this._blockNode(new $n(e)),r&&n)this.code(r).else().code(n).endIf();else if(r)this.code(r).endIf();else if(n)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new $n(e))}else(){return this._elseNode(new Go)}endIf(){return this._endBlockNode($n,Go)}_for(e,r){return this._blockNode(e),r&&this.code(r).endFor(),this}for(e,r){return this._for(new fg(e),r)}forRange(e,r,n,s,i=this.opts.es5?vn.varKinds.var:vn.varKinds.let){let o=this._scope.toName(e);return this._for(new dg(i,o,r,n),()=>s(o))}forOf(e,r,n,s=vn.varKinds.const){let i=this._scope.toName(e);if(this.opts.es5){let o=r instanceof Ee.Name?r:this.var("_arr",r);return this.forRange("_i",0,(0,Ee._)`${o}.length`,a=>{this.var(i,(0,Ee._)`${o}[${a}]`),n(i)})}return this._for(new td("of",s,i,r),()=>n(i))}forIn(e,r,n,s=this.opts.es5?vn.varKinds.var:vn.varKinds.const){if(this.opts.ownProperties)return this.forOf(e,(0,Ee._)`Object.keys(${r})`,n);let i=this._scope.toName(e);return this._for(new td("in",s,i,r),()=>n(i))}endFor(){return this._endBlockNode(Vi)}label(e){return this._leafNode(new og(e))}break(e){return this._leafNode(new ag(e))}return(e){let r=new Au;if(this._blockNode(r),this.code(e),r.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(Au)}try(e,r,n){if(!r&&!n)throw new Error('CodeGen: "try" without "catch" and "finally"');let s=new hg;if(this._blockNode(s),this.code(e),r){let i=this.name("e");this._currNode=s.catch=new ku(i),r(i)}return n&&(this._currNode=s.finally=new qu,this.code(n)),this._endBlockNode(ku,qu)}throw(e){return this._leafNode(new ug(e))}block(e,r){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(r),this}endBlock(e){let r=this._blockStarts.pop();if(r===void 0)throw new Error("CodeGen: not in self-balancing block");let n=this._nodes.length-r;if(n<0||e!==void 0&&n!==e)throw new Error(`CodeGen: wrong number of nodes: ${n} vs ${e} expected`);return this._nodes.length=r,this}func(e,r=Ee.nil,n,s){return this._blockNode(new Cu(e,r,n)),s&&this.code(s).endFunc(),this}endFunc(){return this._endBlockNode(Cu)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,r){let n=this._currNode;if(n instanceof e||r&&n instanceof r)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${r?`${e.kind}/${r.kind}`:e.kind}"`)}_elseNode(e){let r=this._currNode;if(!(r instanceof $n))throw new Error('CodeGen: "else" without "if"');return this._currNode=r.else=e,this}get _root(){return this._nodes[0]}get _currNode(){let e=this._nodes;return e[e.length-1]}set _currNode(e){let r=this._nodes;r[r.length-1]=e}};he.CodeGen=pg;function zi(t,e){for(let r in e)t[r]=(t[r]||0)+(e[r]||0);return t}function rd(t,e){return e instanceof Ee._CodeOrName?zi(t,e.names):t}function Jo(t,e,r){if(t instanceof Ee.Name)return n(t);if(!s(t))return t;return new Ee._Code(t._items.reduce((i,o)=>(o instanceof Ee.Name&&(o=n(o)),o instanceof Ee._Code?i.push(...o._items):i.push(o),i),[]));function n(i){let o=r[i.str];return o===void 0||e[i.str]!==1?i:(delete e[i.str],o)}function s(i){return i instanceof Ee._Code&&i._items.some(o=>o instanceof Ee.Name&&e[o.str]===1&&r[o.str]!==void 0)}}function w6(t,e){for(let r in e)t[r]=(t[r]||0)-(e[r]||0)}function m1(t){return typeof t=="boolean"||typeof t=="number"||t===null?!t:(0,Ee._)`!${mg(t)}`}he.not=m1;var E6=y1(he.operators.AND);function S6(...t){return t.reduce(E6)}he.and=S6;var R6=y1(he.operators.OR);function P6(...t){return t.reduce(R6)}he.or=P6;function y1(t){return(e,r)=>e===Ee.nil?r:r===Ee.nil?e:(0,Ee._)`${mg(e)} ${t} ${mg(r)}`}function mg(t){return t instanceof Ee.Name?t:(0,Ee._)`(${t})`}});var qe=$(pe=>{"use strict";Object.defineProperty(pe,"__esModule",{value:!0});pe.checkStrictMode=pe.getErrorPath=pe.Type=pe.useFunc=pe.setEvaluated=pe.evaluatedPropsToName=pe.mergeEvaluated=pe.eachItem=pe.unescapeJsonPointer=pe.escapeJsonPointer=pe.escapeFragment=pe.unescapeFragment=pe.schemaRefOrVal=pe.schemaHasRulesButRef=pe.schemaHasRules=pe.checkUnknownRules=pe.alwaysValidSchema=pe.toHash=void 0;var tt=$e(),T6=Nu();function O6(t){let e={};for(let r of t)e[r]=!0;return e}pe.toHash=O6;function N6(t,e){return typeof e=="boolean"?e:Object.keys(e).length===0?!0:(v1(t,e),!$1(e,t.self.RULES.all))}pe.alwaysValidSchema=N6;function v1(t,e=t.schema){let{opts:r,self:n}=t;if(!r.strictSchema||typeof e=="boolean")return;let s=n.RULES.keywords;for(let i in e)s[i]||S1(t,`unknown keyword: "${i}"`)}pe.checkUnknownRules=v1;function $1(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(e[r])return!0;return!1}pe.schemaHasRules=$1;function I6(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(r!=="$ref"&&e.all[r])return!0;return!1}pe.schemaHasRulesButRef=I6;function C6({topSchemaRef:t,schemaPath:e},r,n,s){if(!s){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,tt._)`${r}`}return(0,tt._)`${t}${e}${(0,tt.getProperty)(n)}`}pe.schemaRefOrVal=C6;function A6(t){return b1(decodeURIComponent(t))}pe.unescapeFragment=A6;function k6(t){return encodeURIComponent(yg(t))}pe.escapeFragment=k6;function yg(t){return typeof t=="number"?`${t}`:t.replace(/~/g,"~0").replace(/\//g,"~1")}pe.escapeJsonPointer=yg;function b1(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}pe.unescapeJsonPointer=b1;function q6(t,e){if(Array.isArray(t))for(let r of t)e(r);else e(t)}pe.eachItem=q6;function g1({mergeNames:t,mergeToName:e,mergeValues:r,resultToName:n}){return(s,i,o,a)=>{let u=o===void 0?i:o instanceof tt.Name?(i instanceof tt.Name?t(s,i,o):e(s,i,o),o):i instanceof tt.Name?(e(s,o,i),i):r(i,o);return a===tt.Name&&!(u instanceof tt.Name)?n(s,u):u}}pe.mergeEvaluated={props:g1({mergeNames:(t,e,r)=>t.if((0,tt._)`${r} !== true && ${e} !== undefined`,()=>{t.if((0,tt._)`${e} === true`,()=>t.assign(r,!0),()=>t.assign(r,(0,tt._)`${r} || {}`).code((0,tt._)`Object.assign(${r}, ${e})`))}),mergeToName:(t,e,r)=>t.if((0,tt._)`${r} !== true`,()=>{e===!0?t.assign(r,!0):(t.assign(r,(0,tt._)`${r} || {}`),gg(t,r,e))}),mergeValues:(t,e)=>t===!0?!0:{...t,...e},resultToName:w1}),items:g1({mergeNames:(t,e,r)=>t.if((0,tt._)`${r} !== true && ${e} !== undefined`,()=>t.assign(r,(0,tt._)`${e} === true ? true : ${r} > ${e} ? ${r} : ${e}`)),mergeToName:(t,e,r)=>t.if((0,tt._)`${r} !== true`,()=>t.assign(r,e===!0?!0:(0,tt._)`${r} > ${e} ? ${r} : ${e}`)),mergeValues:(t,e)=>t===!0?!0:Math.max(t,e),resultToName:(t,e)=>t.var("items",e)})};function w1(t,e){if(e===!0)return t.var("props",!0);let r=t.var("props",(0,tt._)`{}`);return e!==void 0&&gg(t,r,e),r}pe.evaluatedPropsToName=w1;function gg(t,e,r){Object.keys(r).forEach(n=>t.assign((0,tt._)`${e}${(0,tt.getProperty)(n)}`,!0))}pe.setEvaluated=gg;var _1={};function j6(t,e){return t.scopeValue("func",{ref:e,code:_1[e.code]||(_1[e.code]=new T6._Code(e.code))})}pe.useFunc=j6;var E1;(function(t){t[t.Num=0]="Num",t[t.Str=1]="Str"})(E1=pe.Type||(pe.Type={}));function D6(t,e,r){if(t instanceof tt.Name){let n=e===E1.Num;return r?n?(0,tt._)`"[" + ${t} + "]"`:(0,tt._)`"['" + ${t} + "']"`:n?(0,tt._)`"/" + ${t}`:(0,tt._)`"/" + ${t}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,tt.getProperty)(t).toString():"/"+yg(t)}pe.getErrorPath=D6;function S1(t,e,r=t.opts.strictSchema){if(r){if(e=`strict mode: ${e}`,r===!0)throw new Error(e);t.self.logger.warn(e)}}pe.checkStrictMode=S1});var ds=$(_g=>{"use strict";Object.defineProperty(_g,"__esModule",{value:!0});var rr=$e(),L6={data:new rr.Name("data"),valCxt:new rr.Name("valCxt"),instancePath:new rr.Name("instancePath"),parentData:new rr.Name("parentData"),parentDataProperty:new rr.Name("parentDataProperty"),rootData:new rr.Name("rootData"),dynamicAnchors:new rr.Name("dynamicAnchors"),vErrors:new rr.Name("vErrors"),errors:new rr.Name("errors"),this:new rr.Name("this"),self:new rr.Name("self"),scope:new rr.Name("scope"),json:new rr.Name("json"),jsonPos:new rr.Name("jsonPos"),jsonLen:new rr.Name("jsonLen"),jsonPart:new rr.Name("jsonPart")};_g.default=L6});var ju=$(nr=>{"use strict";Object.defineProperty(nr,"__esModule",{value:!0});nr.extendErrors=nr.resetErrorsCount=nr.reportExtraError=nr.reportError=nr.keyword$DataError=nr.keywordError=void 0;var Oe=$e(),sd=qe(),hr=ds();nr.keywordError={message:({keyword:t})=>(0,Oe.str)`must pass "${t}" keyword validation`};nr.keyword$DataError={message:({keyword:t,schemaType:e})=>e?(0,Oe.str)`"${t}" keyword must be ${e} ($data)`:(0,Oe.str)`"${t}" keyword is invalid ($data)`};function x6(t,e=nr.keywordError,r,n){let{it:s}=t,{gen:i,compositeRule:o,allErrors:a}=s,u=T1(t,e,r);n??(o||a)?R1(i,u):P1(s,(0,Oe._)`[${u}]`)}nr.reportError=x6;function F6(t,e=nr.keywordError,r){let{it:n}=t,{gen:s,compositeRule:i,allErrors:o}=n,a=T1(t,e,r);R1(s,a),i||o||P1(n,hr.default.vErrors)}nr.reportExtraError=F6;function M6(t,e){t.assign(hr.default.errors,e),t.if((0,Oe._)`${hr.default.vErrors} !== null`,()=>t.if(e,()=>t.assign((0,Oe._)`${hr.default.vErrors}.length`,e),()=>t.assign(hr.default.vErrors,null)))}nr.resetErrorsCount=M6;function V6({gen:t,keyword:e,schemaValue:r,data:n,errsCount:s,it:i}){if(s===void 0)throw new Error("ajv implementation error");let o=t.name("err");t.forRange("i",s,hr.default.errors,a=>{t.const(o,(0,Oe._)`${hr.default.vErrors}[${a}]`),t.if((0,Oe._)`${o}.instancePath === undefined`,()=>t.assign((0,Oe._)`${o}.instancePath`,(0,Oe.strConcat)(hr.default.instancePath,i.errorPath))),t.assign((0,Oe._)`${o}.schemaPath`,(0,Oe.str)`${i.errSchemaPath}/${e}`),i.opts.verbose&&(t.assign((0,Oe._)`${o}.schema`,r),t.assign((0,Oe._)`${o}.data`,n))})}nr.extendErrors=V6;function R1(t,e){let r=t.const("err",e);t.if((0,Oe._)`${hr.default.vErrors} === null`,()=>t.assign(hr.default.vErrors,(0,Oe._)`[${r}]`),(0,Oe._)`${hr.default.vErrors}.push(${r})`),t.code((0,Oe._)`${hr.default.errors}++`)}function P1(t,e){let{gen:r,validateName:n,schemaEnv:s}=t;s.$async?r.throw((0,Oe._)`new ${t.ValidationError}(${e})`):(r.assign((0,Oe._)`${n}.errors`,e),r.return(!1))}var Ui={keyword:new Oe.Name("keyword"),schemaPath:new Oe.Name("schemaPath"),params:new Oe.Name("params"),propertyName:new Oe.Name("propertyName"),message:new Oe.Name("message"),schema:new Oe.Name("schema"),parentSchema:new Oe.Name("parentSchema")};function T1(t,e,r){let{createErrors:n}=t.it;return n===!1?(0,Oe._)`{}`:z6(t,e,r)}function z6(t,e,r={}){let{gen:n,it:s}=t,i=[U6(s,r),H6(t,r)];return K6(t,e,i),n.object(...i)}function U6({errorPath:t},{instancePath:e}){let r=e?(0,Oe.str)`${t}${(0,sd.getErrorPath)(e,sd.Type.Str)}`:t;return[hr.default.instancePath,(0,Oe.strConcat)(hr.default.instancePath,r)]}function H6({keyword:t,it:{errSchemaPath:e}},{schemaPath:r,parentSchema:n}){let s=n?e:(0,Oe.str)`${e}/${t}`;return r&&(s=(0,Oe.str)`${s}${(0,sd.getErrorPath)(r,sd.Type.Str)}`),[Ui.schemaPath,s]}function K6(t,{params:e,message:r},n){let{keyword:s,data:i,schemaValue:o,it:a}=t,{opts:u,propertyName:l,topSchemaRef:c,schemaPath:f}=a;n.push([Ui.keyword,s],[Ui.params,typeof e=="function"?e(t):e||(0,Oe._)`{}`]),u.messages&&n.push([Ui.message,typeof r=="function"?r(t):r]),u.verbose&&n.push([Ui.schema,o],[Ui.parentSchema,(0,Oe._)`${c}${f}`],[hr.default.data,i]),l&&n.push([Ui.propertyName,l])}});var N1=$(Yo=>{"use strict";Object.defineProperty(Yo,"__esModule",{value:!0});Yo.boolOrEmptySchema=Yo.topBoolOrEmptySchema=void 0;var B6=ju(),G6=$e(),J6=ds(),Y6={message:"boolean schema is false"};function W6(t){let{gen:e,schema:r,validateName:n}=t;r===!1?O1(t,!1):typeof r=="object"&&r.$async===!0?e.return(J6.default.data):(e.assign((0,G6._)`${n}.errors`,null),e.return(!0))}Yo.topBoolOrEmptySchema=W6;function X6(t,e){let{gen:r,schema:n}=t;n===!1?(r.var(e,!1),O1(t)):r.var(e,!0)}Yo.boolOrEmptySchema=X6;function O1(t,e){let{gen:r,data:n}=t,s={gen:r,keyword:"false schema",data:n,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:t};(0,B6.reportError)(s,Y6,void 0,e)}});var vg=$(Wo=>{"use strict";Object.defineProperty(Wo,"__esModule",{value:!0});Wo.getRules=Wo.isJSONType=void 0;var Q6=["string","number","integer","boolean","null","object","array"],Z6=new Set(Q6);function eB(t){return typeof t=="string"&&Z6.has(t)}Wo.isJSONType=eB;function tB(){let t={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...t,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},t.number,t.string,t.array,t.object],post:{rules:[]},all:{},keywords:{}}}Wo.getRules=tB});var $g=$(Us=>{"use strict";Object.defineProperty(Us,"__esModule",{value:!0});Us.shouldUseRule=Us.shouldUseGroup=Us.schemaHasRulesForType=void 0;function rB({schema:t,self:e},r){let n=e.RULES.types[r];return n&&n!==!0&&I1(t,n)}Us.schemaHasRulesForType=rB;function I1(t,e){return e.rules.some(r=>C1(t,r))}Us.shouldUseGroup=I1;function C1(t,e){var r;return t[e.keyword]!==void 0||((r=e.definition.implements)===null||r===void 0?void 0:r.some(n=>t[n]!==void 0))}Us.shouldUseRule=C1});var Lu=$(Ut=>{"use strict";Object.defineProperty(Ut,"__esModule",{value:!0});Ut.reportTypeError=Ut.checkDataTypes=Ut.checkDataType=Ut.coerceAndCheckDataType=Ut.getJSONTypes=Ut.getSchemaTypes=Ut.DataType=void 0;var nB=vg(),sB=$g(),iB=ju(),ae=$e(),A1=qe(),Du;(function(t){t[t.Correct=0]="Correct",t[t.Wrong=1]="Wrong"})(Du=Ut.DataType||(Ut.DataType={}));function oB(t){let e=k1(t.type);if(e.includes("null")){if(t.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!e.length&&t.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');t.nullable===!0&&e.push("null")}return e}Ut.getSchemaTypes=oB;function k1(t){let e=Array.isArray(t)?t:t?[t]:[];if(e.every(nB.isJSONType))return e;throw new Error("type must be JSONType or JSONType[]: "+e.join(","))}Ut.getJSONTypes=k1;function aB(t,e){let{gen:r,data:n,opts:s}=t,i=uB(e,s.coerceTypes),o=e.length>0&&!(i.length===0&&e.length===1&&(0,sB.schemaHasRulesForType)(t,e[0]));if(o){let a=wg(e,n,s.strictNumbers,Du.Wrong);r.if(a,()=>{i.length?lB(t,e,i):Eg(t)})}return o}Ut.coerceAndCheckDataType=aB;var q1=new Set(["string","number","integer","boolean","null"]);function uB(t,e){return e?t.filter(r=>q1.has(r)||e==="array"&&r==="array"):[]}function lB(t,e,r){let{gen:n,data:s,opts:i}=t,o=n.let("dataType",(0,ae._)`typeof ${s}`),a=n.let("coerced",(0,ae._)`undefined`);i.coerceTypes==="array"&&n.if((0,ae._)`${o} == 'object' && Array.isArray(${s}) && ${s}.length == 1`,()=>n.assign(s,(0,ae._)`${s}[0]`).assign(o,(0,ae._)`typeof ${s}`).if(wg(e,s,i.strictNumbers),()=>n.assign(a,s))),n.if((0,ae._)`${a} !== undefined`);for(let l of r)(q1.has(l)||l==="array"&&i.coerceTypes==="array")&&u(l);n.else(),Eg(t),n.endIf(),n.if((0,ae._)`${a} !== undefined`,()=>{n.assign(s,a),cB(t,a)});function u(l){switch(l){case"string":n.elseIf((0,ae._)`${o} == "number" || ${o} == "boolean"`).assign(a,(0,ae._)`"" + ${s}`).elseIf((0,ae._)`${s} === null`).assign(a,(0,ae._)`""`);return;case"number":n.elseIf((0,ae._)`${o} == "boolean" || ${s} === null
              || (${o} == "string" && ${s} && ${s} == +${s})`).assign(a,(0,ae._)`+${s}`);return;case"integer":n.elseIf((0,ae._)`${o} === "boolean" || ${s} === null
              || (${o} === "string" && ${s} && ${s} == +${s} && !(${s} % 1))`).assign(a,(0,ae._)`+${s}`);return;case"boolean":n.elseIf((0,ae._)`${s} === "false" || ${s} === 0 || ${s} === null`).assign(a,!1).elseIf((0,ae._)`${s} === "true" || ${s} === 1`).assign(a,!0);return;case"null":n.elseIf((0,ae._)`${s} === "" || ${s} === 0 || ${s} === false`),n.assign(a,null);return;case"array":n.elseIf((0,ae._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${s} === null`).assign(a,(0,ae._)`[${s}]`)}}}function cB({gen:t,parentData:e,parentDataProperty:r},n){t.if((0,ae._)`${e} !== undefined`,()=>t.assign((0,ae._)`${e}[${r}]`,n))}function bg(t,e,r,n=Du.Correct){let s=n===Du.Correct?ae.operators.EQ:ae.operators.NEQ,i;switch(t){case"null":return(0,ae._)`${e} ${s} null`;case"array":i=(0,ae._)`Array.isArray(${e})`;break;case"object":i=(0,ae._)`${e} && typeof ${e} == "object" && !Array.isArray(${e})`;break;case"integer":i=o((0,ae._)`!(${e} % 1) && !isNaN(${e})`);break;case"number":i=o();break;default:return(0,ae._)`typeof ${e} ${s} ${t}`}return n===Du.Correct?i:(0,ae.not)(i);function o(a=ae.nil){return(0,ae.and)((0,ae._)`typeof ${e} == "number"`,a,r?(0,ae._)`isFinite(${e})`:ae.nil)}}Ut.checkDataType=bg;function wg(t,e,r,n){if(t.length===1)return bg(t[0],e,r,n);let s,i=(0,A1.toHash)(t);if(i.array&&i.object){let o=(0,ae._)`typeof ${e} != "object"`;s=i.null?o:(0,ae._)`!${e} || ${o}`,delete i.null,delete i.array,delete i.object}else s=ae.nil;i.number&&delete i.integer;for(let o in i)s=(0,ae.and)(s,bg(o,e,r,n));return s}Ut.checkDataTypes=wg;var fB={message:({schema:t})=>`must be ${t}`,params:({schema:t,schemaValue:e})=>typeof t=="string"?(0,ae._)`{type: ${t}}`:(0,ae._)`{type: ${e}}`};function Eg(t){let e=dB(t);(0,iB.reportError)(e,fB)}Ut.reportTypeError=Eg;function dB(t){let{gen:e,data:r,schema:n}=t,s=(0,A1.schemaRefOrVal)(t,n,"type");return{gen:e,keyword:"type",data:r,schema:n.type,schemaCode:s,schemaValue:s,parentSchema:n,params:{},it:t}}});var D1=$(id=>{"use strict";Object.defineProperty(id,"__esModule",{value:!0});id.assignDefaults=void 0;var Xo=$e(),hB=qe();function pB(t,e){let{properties:r,items:n}=t.schema;if(e==="object"&&r)for(let s in r)j1(t,s,r[s].default);else e==="array"&&Array.isArray(n)&&n.forEach((s,i)=>j1(t,i,s.default))}id.assignDefaults=pB;function j1(t,e,r){let{gen:n,compositeRule:s,data:i,opts:o}=t;if(r===void 0)return;let a=(0,Xo._)`${i}${(0,Xo.getProperty)(e)}`;if(s){(0,hB.checkStrictMode)(t,`default is ignored for: ${a}`);return}let u=(0,Xo._)`${a} === undefined`;o.useDefaults==="empty"&&(u=(0,Xo._)`${u} || ${a} === null || ${a} === ""`),n.if(u,(0,Xo._)`${a} = ${(0,Xo.stringify)(r)}`)}});var en=$(Ge=>{"use strict";Object.defineProperty(Ge,"__esModule",{value:!0});Ge.validateUnion=Ge.validateArray=Ge.usePattern=Ge.callValidateCode=Ge.schemaProperties=Ge.allSchemaProperties=Ge.noPropertyInData=Ge.propertyInData=Ge.isOwnProperty=Ge.hasPropFunc=Ge.reportMissingProp=Ge.checkMissingProp=Ge.checkReportMissingProp=void 0;var ot=$e(),Sg=qe(),Hs=ds(),mB=qe();function yB(t,e){let{gen:r,data:n,it:s}=t;r.if(Pg(r,n,e,s.opts.ownProperties),()=>{t.setParams({missingProperty:(0,ot._)`${e}`},!0),t.error()})}Ge.checkReportMissingProp=yB;function gB({gen:t,data:e,it:{opts:r}},n,s){return(0,ot.or)(...n.map(i=>(0,ot.and)(Pg(t,e,i,r.ownProperties),(0,ot._)`${s} = ${i}`)))}Ge.checkMissingProp=gB;function _B(t,e){t.setParams({missingProperty:e},!0),t.error()}Ge.reportMissingProp=_B;function L1(t){return t.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,ot._)`Object.prototype.hasOwnProperty`})}Ge.hasPropFunc=L1;function Rg(t,e,r){return(0,ot._)`${L1(t)}.call(${e}, ${r})`}Ge.isOwnProperty=Rg;function vB(t,e,r,n){let s=(0,ot._)`${e}${(0,ot.getProperty)(r)} !== undefined`;return n?(0,ot._)`${s} && ${Rg(t,e,r)}`:s}Ge.propertyInData=vB;function Pg(t,e,r,n){let s=(0,ot._)`${e}${(0,ot.getProperty)(r)} === undefined`;return n?(0,ot.or)(s,(0,ot.not)(Rg(t,e,r))):s}Ge.noPropertyInData=Pg;function x1(t){return t?Object.keys(t).filter(e=>e!=="__proto__"):[]}Ge.allSchemaProperties=x1;function $B(t,e){return x1(e).filter(r=>!(0,Sg.alwaysValidSchema)(t,e[r]))}Ge.schemaProperties=$B;function bB({schemaCode:t,data:e,it:{gen:r,topSchemaRef:n,schemaPath:s,errorPath:i},it:o},a,u,l){let c=l?(0,ot._)`${t}, ${e}, ${n}${s}`:e,f=[[Hs.default.instancePath,(0,ot.strConcat)(Hs.default.instancePath,i)],[Hs.default.parentData,o.parentData],[Hs.default.parentDataProperty,o.parentDataProperty],[Hs.default.rootData,Hs.default.rootData]];o.opts.dynamicRef&&f.push([Hs.default.dynamicAnchors,Hs.default.dynamicAnchors]);let h=(0,ot._)`${c}, ${r.object(...f)}`;return u!==ot.nil?(0,ot._)`${a}.call(${u}, ${h})`:(0,ot._)`${a}(${h})`}Ge.callValidateCode=bB;var wB=(0,ot._)`new RegExp`;function EB({gen:t,it:{opts:e}},r){let n=e.unicodeRegExp?"u":"",{regExp:s}=e.code,i=s(r,n);return t.scopeValue("pattern",{key:i.toString(),ref:i,code:(0,ot._)`${s.code==="new RegExp"?wB:(0,mB.useFunc)(t,s)}(${r}, ${n})`})}Ge.usePattern=EB;function SB(t){let{gen:e,data:r,keyword:n,it:s}=t,i=e.name("valid");if(s.allErrors){let a=e.let("valid",!0);return o(()=>e.assign(a,!1)),a}return e.var(i,!0),o(()=>e.break()),i;function o(a){let u=e.const("len",(0,ot._)`${r}.length`);e.forRange("i",0,u,l=>{t.subschema({keyword:n,dataProp:l,dataPropType:Sg.Type.Num},i),e.if((0,ot.not)(i),a)})}}Ge.validateArray=SB;function RB(t){let{gen:e,schema:r,keyword:n,it:s}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(u=>(0,Sg.alwaysValidSchema)(s,u))&&!s.opts.unevaluated)return;let o=e.let("valid",!1),a=e.name("_valid");e.block(()=>r.forEach((u,l)=>{let c=t.subschema({keyword:n,schemaProp:l,compositeRule:!0},a);e.assign(o,(0,ot._)`${o} || ${a}`),t.mergeValidEvaluated(c,a)||e.if((0,ot.not)(o))})),t.result(o,()=>t.reset(),()=>t.error(!0))}Ge.validateUnion=RB});var V1=$(zn=>{"use strict";Object.defineProperty(zn,"__esModule",{value:!0});zn.validateKeywordUsage=zn.validSchemaType=zn.funcKeywordCode=zn.macroKeywordCode=void 0;var pr=$e(),Hi=ds(),PB=en(),TB=ju();function OB(t,e){let{gen:r,keyword:n,schema:s,parentSchema:i,it:o}=t,a=e.macro.call(o.self,s,i,o),u=M1(r,n,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);let l=r.name("valid");t.subschema({schema:a,schemaPath:pr.nil,errSchemaPath:`${o.errSchemaPath}/${n}`,topSchemaRef:u,compositeRule:!0},l),t.pass(l,()=>t.error(!0))}zn.macroKeywordCode=OB;function NB(t,e){var r;let{gen:n,keyword:s,schema:i,parentSchema:o,$data:a,it:u}=t;CB(u,e);let l=!a&&e.compile?e.compile.call(u.self,i,o,u):e.validate,c=M1(n,s,l),f=n.let("valid");t.block$data(f,h),t.ok((r=e.valid)!==null&&r!==void 0?r:f);function h(){if(e.errors===!1)m(),e.modifying&&F1(t),v(()=>t.error());else{let g=e.async?d():p();e.modifying&&F1(t),v(()=>IB(t,g))}}function d(){let g=n.let("ruleErrs",null);return n.try(()=>m((0,pr._)`await `),w=>n.assign(f,!1).if((0,pr._)`${w} instanceof ${u.ValidationError}`,()=>n.assign(g,(0,pr._)`${w}.errors`),()=>n.throw(w))),g}function p(){let g=(0,pr._)`${c}.errors`;return n.assign(g,null),m(pr.nil),g}function m(g=e.async?(0,pr._)`await `:pr.nil){let w=u.opts.passContext?Hi.default.this:Hi.default.self,_=!("compile"in e&&!a||e.schema===!1);n.assign(f,(0,pr._)`${g}${(0,PB.callValidateCode)(t,c,w,_)}`,e.modifying)}function v(g){var w;n.if((0,pr.not)((w=e.valid)!==null&&w!==void 0?w:f),g)}}zn.funcKeywordCode=NB;function F1(t){let{gen:e,data:r,it:n}=t;e.if(n.parentData,()=>e.assign(r,(0,pr._)`${n.parentData}[${n.parentDataProperty}]`))}function IB(t,e){let{gen:r}=t;r.if((0,pr._)`Array.isArray(${e})`,()=>{r.assign(Hi.default.vErrors,(0,pr._)`${Hi.default.vErrors} === null ? ${e} : ${Hi.default.vErrors}.concat(${e})`).assign(Hi.default.errors,(0,pr._)`${Hi.default.vErrors}.length`),(0,TB.extendErrors)(t)},()=>t.error())}function CB({schemaEnv:t},e){if(e.async&&!t.$async)throw new Error("async keyword in sync schema")}function M1(t,e,r){if(r===void 0)throw new Error(`keyword "${e}" failed to compile`);return t.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,pr.stringify)(r)})}function AB(t,e,r=!1){return!e.length||e.some(n=>n==="array"?Array.isArray(t):n==="object"?t&&typeof t=="object"&&!Array.isArray(t):typeof t==n||r&&typeof t>"u")}zn.validSchemaType=AB;function kB({schema:t,opts:e,self:r,errSchemaPath:n},s,i){if(Array.isArray(s.keyword)?!s.keyword.includes(i):s.keyword!==i)throw new Error("ajv implementation error");let o=s.dependencies;if(o?.some(a=>!Object.prototype.hasOwnProperty.call(t,a)))throw new Error(`parent schema must have dependencies of ${i}: ${o.join(",")}`);if(s.validateSchema&&!s.validateSchema(t[i])){let u=`keyword "${i}" value is invalid at path "${n}": `+r.errorsText(s.validateSchema.errors);if(e.validateSchema==="log")r.logger.error(u);else throw new Error(u)}}zn.validateKeywordUsage=kB});var U1=$(Ks=>{"use strict";Object.defineProperty(Ks,"__esModule",{value:!0});Ks.extendSubschemaMode=Ks.extendSubschemaData=Ks.getSubschema=void 0;var Un=$e(),z1=qe();function qB(t,{keyword:e,schemaProp:r,schema:n,schemaPath:s,errSchemaPath:i,topSchemaRef:o}){if(e!==void 0&&n!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(e!==void 0){let a=t.schema[e];return r===void 0?{schema:a,schemaPath:(0,Un._)`${t.schemaPath}${(0,Un.getProperty)(e)}`,errSchemaPath:`${t.errSchemaPath}/${e}`}:{schema:a[r],schemaPath:(0,Un._)`${t.schemaPath}${(0,Un.getProperty)(e)}${(0,Un.getProperty)(r)}`,errSchemaPath:`${t.errSchemaPath}/${e}/${(0,z1.escapeFragment)(r)}`}}if(n!==void 0){if(s===void 0||i===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:n,schemaPath:s,topSchemaRef:o,errSchemaPath:i}}throw new Error('either "keyword" or "schema" must be passed')}Ks.getSubschema=qB;function jB(t,e,{dataProp:r,dataPropType:n,data:s,dataTypes:i,propertyName:o}){if(s!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');let{gen:a}=e;if(r!==void 0){let{errorPath:l,dataPathArr:c,opts:f}=e,h=a.let("data",(0,Un._)`${e.data}${(0,Un.getProperty)(r)}`,!0);u(h),t.errorPath=(0,Un.str)`${l}${(0,z1.getErrorPath)(r,n,f.jsPropertySyntax)}`,t.parentDataProperty=(0,Un._)`${r}`,t.dataPathArr=[...c,t.parentDataProperty]}if(s!==void 0){let l=s instanceof Un.Name?s:a.let("data",s,!0);u(l),o!==void 0&&(t.propertyName=o)}i&&(t.dataTypes=i);function u(l){t.data=l,t.dataLevel=e.dataLevel+1,t.dataTypes=[],e.definedProperties=new Set,t.parentData=e.data,t.dataNames=[...e.dataNames,l]}}Ks.extendSubschemaData=jB;function DB(t,{jtdDiscriminator:e,jtdMetadata:r,compositeRule:n,createErrors:s,allErrors:i}){n!==void 0&&(t.compositeRule=n),s!==void 0&&(t.createErrors=s),i!==void 0&&(t.allErrors=i),t.jtdDiscriminator=e,t.jtdMetadata=r}Ks.extendSubschemaMode=DB});var K1=$((The,H1)=>{"use strict";var Bs=H1.exports=function(t,e,r){typeof e=="function"&&(r=e,e={}),r=e.cb||r;var n=typeof r=="function"?r:r.pre||function(){},s=r.post||function(){};od(e,n,s,t,"",t)};Bs.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};Bs.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Bs.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Bs.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function od(t,e,r,n,s,i,o,a,u,l){if(n&&typeof n=="object"&&!Array.isArray(n)){e(n,s,i,o,a,u,l);for(var c in n){var f=n[c];if(Array.isArray(f)){if(c in Bs.arrayKeywords)for(var h=0;h<f.length;h++)od(t,e,r,f[h],s+"/"+c+"/"+h,i,s,c,n,h)}else if(c in Bs.propsKeywords){if(f&&typeof f=="object")for(var d in f)od(t,e,r,f[d],s+"/"+c+"/"+LB(d),i,s,c,n,d)}else(c in Bs.keywords||t.allKeys&&!(c in Bs.skipKeywords))&&od(t,e,r,f,s+"/"+c,i,s,c,n)}r(n,s,i,o,a,u,l)}}function LB(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}});var xu=$(Pr=>{"use strict";Object.defineProperty(Pr,"__esModule",{value:!0});Pr.getSchemaRefs=Pr.resolveUrl=Pr.normalizeId=Pr._getFullPath=Pr.getFullPath=Pr.inlineRef=void 0;var xB=qe(),FB=Vn(),MB=K1(),VB=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function zB(t,e=!0){return typeof t=="boolean"?!0:e===!0?!Tg(t):e?B1(t)<=e:!1}Pr.inlineRef=zB;var UB=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function Tg(t){for(let e in t){if(UB.has(e))return!0;let r=t[e];if(Array.isArray(r)&&r.some(Tg)||typeof r=="object"&&Tg(r))return!0}return!1}function B1(t){let e=0;for(let r in t){if(r==="$ref")return 1/0;if(e++,!VB.has(r)&&(typeof t[r]=="object"&&(0,xB.eachItem)(t[r],n=>e+=B1(n)),e===1/0))return 1/0}return e}function G1(t,e="",r){r!==!1&&(e=Qo(e));let n=t.parse(e);return J1(t,n)}Pr.getFullPath=G1;function J1(t,e){return t.serialize(e).split("#")[0]+"#"}Pr._getFullPath=J1;var HB=/#\/?$/;function Qo(t){return t?t.replace(HB,""):""}Pr.normalizeId=Qo;function KB(t,e,r){return r=Qo(r),t.resolve(e,r)}Pr.resolveUrl=KB;var BB=/^[a-z_][-a-z0-9._]*$/i;function GB(t,e){if(typeof t=="boolean")return{};let{schemaId:r,uriResolver:n}=this.opts,s=Qo(t[r]||e),i={"":s},o=G1(n,s,!1),a={},u=new Set;return MB(t,{allKeys:!0},(f,h,d,p)=>{if(p===void 0)return;let m=o+h,v=i[p];typeof f[r]=="string"&&(v=g.call(this,f[r])),w.call(this,f.$anchor),w.call(this,f.$dynamicAnchor),i[h]=v;function g(_){let y=this.opts.uriResolver.resolve;if(_=Qo(v?y(v,_):_),u.has(_))throw c(_);u.add(_);let b=this.refs[_];return typeof b=="string"&&(b=this.refs[b]),typeof b=="object"?l(f,b.schema,_):_!==Qo(m)&&(_[0]==="#"?(l(f,a[_],_),a[_]=f):this.refs[_]=m),_}function w(_){if(typeof _=="string"){if(!BB.test(_))throw new Error(`invalid anchor "${_}"`);g.call(this,`#${_}`)}}}),a;function l(f,h,d){if(h!==void 0&&!FB(f,h))throw c(d)}function c(f){return new Error(`reference "${f}" resolves to more than one schema`)}}Pr.getSchemaRefs=GB});var Vu=$(Gs=>{"use strict";Object.defineProperty(Gs,"__esModule",{value:!0});Gs.getData=Gs.KeywordCxt=Gs.validateFunctionCode=void 0;var Z1=N1(),Y1=Lu(),Ng=$g(),ad=Lu(),JB=D1(),Mu=V1(),Og=U1(),Y=$e(),re=ds(),YB=xu(),hs=qe(),Fu=ju();function WB(t){if(rN(t)&&(nN(t),tN(t))){ZB(t);return}eN(t,()=>(0,Z1.topBoolOrEmptySchema)(t))}Gs.validateFunctionCode=WB;function eN({gen:t,validateName:e,schema:r,schemaEnv:n,opts:s},i){s.code.es5?t.func(e,(0,Y._)`${re.default.data}, ${re.default.valCxt}`,n.$async,()=>{t.code((0,Y._)`"use strict"; ${W1(r,s)}`),QB(t,s),t.code(i)}):t.func(e,(0,Y._)`${re.default.data}, ${XB(s)}`,n.$async,()=>t.code(W1(r,s)).code(i))}function XB(t){return(0,Y._)`{${re.default.instancePath}="", ${re.default.parentData}, ${re.default.parentDataProperty}, ${re.default.rootData}=${re.default.data}${t.dynamicRef?(0,Y._)`, ${re.default.dynamicAnchors}={}`:Y.nil}}={}`}function QB(t,e){t.if(re.default.valCxt,()=>{t.var(re.default.instancePath,(0,Y._)`${re.default.valCxt}.${re.default.instancePath}`),t.var(re.default.parentData,(0,Y._)`${re.default.valCxt}.${re.default.parentData}`),t.var(re.default.parentDataProperty,(0,Y._)`${re.default.valCxt}.${re.default.parentDataProperty}`),t.var(re.default.rootData,(0,Y._)`${re.default.valCxt}.${re.default.rootData}`),e.dynamicRef&&t.var(re.default.dynamicAnchors,(0,Y._)`${re.default.valCxt}.${re.default.dynamicAnchors}`)},()=>{t.var(re.default.instancePath,(0,Y._)`""`),t.var(re.default.parentData,(0,Y._)`undefined`),t.var(re.default.parentDataProperty,(0,Y._)`undefined`),t.var(re.default.rootData,re.default.data),e.dynamicRef&&t.var(re.default.dynamicAnchors,(0,Y._)`{}`)})}function ZB(t){let{schema:e,opts:r,gen:n}=t;eN(t,()=>{r.$comment&&e.$comment&&iN(t),sG(t),n.let(re.default.vErrors,null),n.let(re.default.errors,0),r.unevaluated&&eG(t),sN(t),aG(t)})}function eG(t){let{gen:e,validateName:r}=t;t.evaluated=e.const("evaluated",(0,Y._)`${r}.evaluated`),e.if((0,Y._)`${t.evaluated}.dynamicProps`,()=>e.assign((0,Y._)`${t.evaluated}.props`,(0,Y._)`undefined`)),e.if((0,Y._)`${t.evaluated}.dynamicItems`,()=>e.assign((0,Y._)`${t.evaluated}.items`,(0,Y._)`undefined`))}function W1(t,e){let r=typeof t=="object"&&t[e.schemaId];return r&&(e.code.source||e.code.process)?(0,Y._)`/*# sourceURL=${r} */`:Y.nil}function tG(t,e){if(rN(t)&&(nN(t),tN(t))){rG(t,e);return}(0,Z1.boolOrEmptySchema)(t,e)}function tN({schema:t,self:e}){if(typeof t=="boolean")return!t;for(let r in t)if(e.RULES.all[r])return!0;return!1}function rN(t){return typeof t.schema!="boolean"}function rG(t,e){let{schema:r,gen:n,opts:s}=t;s.$comment&&r.$comment&&iN(t),iG(t),oG(t);let i=n.const("_errs",re.default.errors);sN(t,i),n.var(e,(0,Y._)`${i} === ${re.default.errors}`)}function nN(t){(0,hs.checkUnknownRules)(t),nG(t)}function sN(t,e){if(t.opts.jtd)return X1(t,[],!1,e);let r=(0,Y1.getSchemaTypes)(t.schema),n=(0,Y1.coerceAndCheckDataType)(t,r);X1(t,r,!n,e)}function nG(t){let{schema:e,errSchemaPath:r,opts:n,self:s}=t;e.$ref&&n.ignoreKeywordsWithRef&&(0,hs.schemaHasRulesButRef)(e,s.RULES)&&s.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function sG(t){let{schema:e,opts:r}=t;e.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,hs.checkStrictMode)(t,"default is ignored in the schema root")}function iG(t){let e=t.schema[t.opts.schemaId];e&&(t.baseId=(0,YB.resolveUrl)(t.opts.uriResolver,t.baseId,e))}function oG(t){if(t.schema.$async&&!t.schemaEnv.$async)throw new Error("async schema in sync schema")}function iN({gen:t,schemaEnv:e,schema:r,errSchemaPath:n,opts:s}){let i=r.$comment;if(s.$comment===!0)t.code((0,Y._)`${re.default.self}.logger.log(${i})`);else if(typeof s.$comment=="function"){let o=(0,Y.str)`${n}/$comment`,a=t.scopeValue("root",{ref:e.root});t.code((0,Y._)`${re.default.self}.opts.$comment(${i}, ${o}, ${a}.schema)`)}}function aG(t){let{gen:e,schemaEnv:r,validateName:n,ValidationError:s,opts:i}=t;r.$async?e.if((0,Y._)`${re.default.errors} === 0`,()=>e.return(re.default.data),()=>e.throw((0,Y._)`new ${s}(${re.default.vErrors})`)):(e.assign((0,Y._)`${n}.errors`,re.default.vErrors),i.unevaluated&&uG(t),e.return((0,Y._)`${re.default.errors} === 0`))}function uG({gen:t,evaluated:e,props:r,items:n}){r instanceof Y.Name&&t.assign((0,Y._)`${e}.props`,r),n instanceof Y.Name&&t.assign((0,Y._)`${e}.items`,n)}function X1(t,e,r,n){let{gen:s,schema:i,data:o,allErrors:a,opts:u,self:l}=t,{RULES:c}=l;if(i.$ref&&(u.ignoreKeywordsWithRef||!(0,hs.schemaHasRulesButRef)(i,c))){s.block(()=>aN(t,"$ref",c.all.$ref.definition));return}u.jtd||lG(t,e),s.block(()=>{for(let h of c.rules)f(h);f(c.post)});function f(h){(0,Ng.shouldUseGroup)(i,h)&&(h.type?(s.if((0,ad.checkDataType)(h.type,o,u.strictNumbers)),Q1(t,h),e.length===1&&e[0]===h.type&&r&&(s.else(),(0,ad.reportTypeError)(t)),s.endIf()):Q1(t,h),a||s.if((0,Y._)`${re.default.errors} === ${n||0}`))}}function Q1(t,e){let{gen:r,schema:n,opts:{useDefaults:s}}=t;s&&(0,JB.assignDefaults)(t,e.type),r.block(()=>{for(let i of e.rules)(0,Ng.shouldUseRule)(n,i)&&aN(t,i.keyword,i.definition,e.type)})}function lG(t,e){t.schemaEnv.meta||!t.opts.strictTypes||(cG(t,e),t.opts.allowUnionTypes||fG(t,e),dG(t,t.dataTypes))}function cG(t,e){if(e.length){if(!t.dataTypes.length){t.dataTypes=e;return}e.forEach(r=>{oN(t.dataTypes,r)||Ig(t,`type "${r}" not allowed by context "${t.dataTypes.join(",")}"`)}),pG(t,e)}}function fG(t,e){e.length>1&&!(e.length===2&&e.includes("null"))&&Ig(t,"use allowUnionTypes to allow union type keyword")}function dG(t,e){let r=t.self.RULES.all;for(let n in r){let s=r[n];if(typeof s=="object"&&(0,Ng.shouldUseRule)(t.schema,s)){let{type:i}=s.definition;i.length&&!i.some(o=>hG(e,o))&&Ig(t,`missing type "${i.join(",")}" for keyword "${n}"`)}}}function hG(t,e){return t.includes(e)||e==="number"&&t.includes("integer")}function oN(t,e){return t.includes(e)||e==="integer"&&t.includes("number")}function pG(t,e){let r=[];for(let n of t.dataTypes)oN(e,n)?r.push(n):e.includes("integer")&&n==="number"&&r.push("integer");t.dataTypes=r}function Ig(t,e){let r=t.schemaEnv.baseId+t.errSchemaPath;e+=` at "${r}" (strictTypes)`,(0,hs.checkStrictMode)(t,e,t.opts.strictTypes)}var ud=class{constructor(e,r,n){if((0,Mu.validateKeywordUsage)(e,r,n),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=n,this.data=e.data,this.schema=e.schema[n],this.$data=r.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,hs.schemaRefOrVal)(e,this.schema,n,this.$data),this.schemaType=r.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=r,this.$data)this.schemaCode=e.gen.const("vSchema",uN(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,Mu.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=e.gen.const("_errs",re.default.errors))}result(e,r,n){this.failResult((0,Y.not)(e),r,n)}failResult(e,r,n){this.gen.if(e),n?n():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,r){this.failResult((0,Y.not)(e),void 0,r)}fail(e){if(e===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);let{schemaCode:r}=this;this.fail((0,Y._)`${r} !== undefined && (${(0,Y.or)(this.invalid$data(),e)})`)}error(e,r,n){if(r){this.setParams(r),this._error(e,n),this.setParams({});return}this._error(e,n)}_error(e,r){(e?Fu.reportExtraError:Fu.reportError)(this,this.def.error,r)}$dataError(){(0,Fu.reportError)(this,this.def.$dataError||Fu.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,Fu.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,r){r?Object.assign(this.params,e):this.params=e}block$data(e,r,n=Y.nil){this.gen.block(()=>{this.check$data(e,n),r()})}check$data(e=Y.nil,r=Y.nil){if(!this.$data)return;let{gen:n,schemaCode:s,schemaType:i,def:o}=this;n.if((0,Y.or)((0,Y._)`${s} === undefined`,r)),e!==Y.nil&&n.assign(e,!0),(i.length||o.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),e!==Y.nil&&n.assign(e,!1)),n.else()}invalid$data(){let{gen:e,schemaCode:r,schemaType:n,def:s,it:i}=this;return(0,Y.or)(o(),a());function o(){if(n.length){if(!(r instanceof Y.Name))throw new Error("ajv implementation error");let u=Array.isArray(n)?n:[n];return(0,Y._)`${(0,ad.checkDataTypes)(u,r,i.opts.strictNumbers,ad.DataType.Wrong)}`}return Y.nil}function a(){if(s.validateSchema){let u=e.scopeValue("validate$data",{ref:s.validateSchema});return(0,Y._)`!${u}(${r})`}return Y.nil}}subschema(e,r){let n=(0,Og.getSubschema)(this.it,e);(0,Og.extendSubschemaData)(n,this.it,e),(0,Og.extendSubschemaMode)(n,e);let s={...this.it,...n,items:void 0,props:void 0};return tG(s,r),s}mergeEvaluated(e,r){let{it:n,gen:s}=this;n.opts.unevaluated&&(n.props!==!0&&e.props!==void 0&&(n.props=hs.mergeEvaluated.props(s,e.props,n.props,r)),n.items!==!0&&e.items!==void 0&&(n.items=hs.mergeEvaluated.items(s,e.items,n.items,r)))}mergeValidEvaluated(e,r){let{it:n,gen:s}=this;if(n.opts.unevaluated&&(n.props!==!0||n.items!==!0))return s.if(r,()=>this.mergeEvaluated(e,Y.Name)),!0}};Gs.KeywordCxt=ud;function aN(t,e,r,n){let s=new ud(t,r,e);"code"in r?r.code(s,n):s.$data&&r.validate?(0,Mu.funcKeywordCode)(s,r):"macro"in r?(0,Mu.macroKeywordCode)(s,r):(r.compile||r.validate)&&(0,Mu.funcKeywordCode)(s,r)}var mG=/^\/(?:[^~]|~0|~1)*$/,yG=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function uN(t,{dataLevel:e,dataNames:r,dataPathArr:n}){let s,i;if(t==="")return re.default.rootData;if(t[0]==="/"){if(!mG.test(t))throw new Error(`Invalid JSON-pointer: ${t}`);s=t,i=re.default.rootData}else{let l=yG.exec(t);if(!l)throw new Error(`Invalid JSON-pointer: ${t}`);let c=+l[1];if(s=l[2],s==="#"){if(c>=e)throw new Error(u("property/index",c));return n[e-c]}if(c>e)throw new Error(u("data",c));if(i=r[e-c],!s)return i}let o=i,a=s.split("/");for(let l of a)l&&(i=(0,Y._)`${i}${(0,Y.getProperty)((0,hs.unescapeJsonPointer)(l))}`,o=(0,Y._)`${o} && ${i}`);return o;function u(l,c){return`Cannot access ${l} ${c} levels up, current level is ${e}`}}Gs.getData=uN});var ld=$(Ag=>{"use strict";Object.defineProperty(Ag,"__esModule",{value:!0});var Cg=class extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}};Ag.default=Cg});var cd=$(jg=>{"use strict";Object.defineProperty(jg,"__esModule",{value:!0});var kg=xu(),qg=class extends Error{constructor(e,r,n,s){super(s||`can't resolve reference ${n} from id ${r}`),this.missingRef=(0,kg.resolveUrl)(e,r,n),this.missingSchema=(0,kg.normalizeId)((0,kg.getFullPath)(e,this.missingRef))}};jg.default=qg});var dd=$(tn=>{"use strict";Object.defineProperty(tn,"__esModule",{value:!0});tn.resolveSchema=tn.getCompilingSchema=tn.resolveRef=tn.compileSchema=tn.SchemaEnv=void 0;var bn=$e(),gG=ld(),Ki=ds(),wn=xu(),lN=qe(),_G=Vu(),Zo=class{constructor(e){var r;this.refs={},this.dynamicAnchors={};let n;typeof e.schema=="object"&&(n=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=(r=e.baseId)!==null&&r!==void 0?r:(0,wn.normalizeId)(n?.[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=n?.$async,this.refs={}}};tn.SchemaEnv=Zo;function Lg(t){let e=cN.call(this,t);if(e)return e;let r=(0,wn.getFullPath)(this.opts.uriResolver,t.root.baseId),{es5:n,lines:s}=this.opts.code,{ownProperties:i}=this.opts,o=new bn.CodeGen(this.scope,{es5:n,lines:s,ownProperties:i}),a;t.$async&&(a=o.scopeValue("Error",{ref:gG.default,code:(0,bn._)`require("ajv/dist/runtime/validation_error").default`}));let u=o.scopeName("validate");t.validateName=u;let l={gen:o,allErrors:this.opts.allErrors,data:Ki.default.data,parentData:Ki.default.parentData,parentDataProperty:Ki.default.parentDataProperty,dataNames:[Ki.default.data],dataPathArr:[bn.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:t.schema,code:(0,bn.stringify)(t.schema)}:{ref:t.schema}),validateName:u,ValidationError:a,schema:t.schema,schemaEnv:t,rootId:r,baseId:t.baseId||r,schemaPath:bn.nil,errSchemaPath:t.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,bn._)`""`,opts:this.opts,self:this},c;try{this._compilations.add(t),(0,_G.validateFunctionCode)(l),o.optimize(this.opts.code.optimize);let f=o.toString();c=`${o.scopeRefs(Ki.default.scope)}return ${f}`,this.opts.code.process&&(c=this.opts.code.process(c,t));let d=new Function(`${Ki.default.self}`,`${Ki.default.scope}`,c)(this,this.scope.get());if(this.scope.value(u,{ref:d}),d.errors=null,d.schema=t.schema,d.schemaEnv=t,t.$async&&(d.$async=!0),this.opts.code.source===!0&&(d.source={validateName:u,validateCode:f,scopeValues:o._values}),this.opts.unevaluated){let{props:p,items:m}=l;d.evaluated={props:p instanceof bn.Name?void 0:p,items:m instanceof bn.Name?void 0:m,dynamicProps:p instanceof bn.Name,dynamicItems:m instanceof bn.Name},d.source&&(d.source.evaluated=(0,bn.stringify)(d.evaluated))}return t.validate=d,t}catch(f){throw delete t.validate,delete t.validateName,c&&this.logger.error("Error compiling schema, function code:",c),f}finally{this._compilations.delete(t)}}tn.compileSchema=Lg;function vG(t,e,r){var n;r=(0,wn.resolveUrl)(this.opts.uriResolver,e,r);let s=t.refs[r];if(s)return s;let i=wG.call(this,t,r);if(i===void 0){let o=(n=t.localRefs)===null||n===void 0?void 0:n[r],{schemaId:a}=this.opts;o&&(i=new Zo({schema:o,schemaId:a,root:t,baseId:e}))}if(i!==void 0)return t.refs[r]=$G.call(this,i)}tn.resolveRef=vG;function $G(t){return(0,wn.inlineRef)(t.schema,this.opts.inlineRefs)?t.schema:t.validate?t:Lg.call(this,t)}function cN(t){for(let e of this._compilations)if(bG(e,t))return e}tn.getCompilingSchema=cN;function bG(t,e){return t.schema===e.schema&&t.root===e.root&&t.baseId===e.baseId}function wG(t,e){let r;for(;typeof(r=this.refs[e])=="string";)e=r;return r||this.schemas[e]||fd.call(this,t,e)}function fd(t,e){let r=this.opts.uriResolver.parse(e),n=(0,wn._getFullPath)(this.opts.uriResolver,r),s=(0,wn.getFullPath)(this.opts.uriResolver,t.baseId,void 0);if(Object.keys(t.schema).length>0&&n===s)return Dg.call(this,r,t);let i=(0,wn.normalizeId)(n),o=this.refs[i]||this.schemas[i];if(typeof o=="string"){let a=fd.call(this,t,o);return typeof a?.schema!="object"?void 0:Dg.call(this,r,a)}if(typeof o?.schema=="object"){if(o.validate||Lg.call(this,o),i===(0,wn.normalizeId)(e)){let{schema:a}=o,{schemaId:u}=this.opts,l=a[u];return l&&(s=(0,wn.resolveUrl)(this.opts.uriResolver,s,l)),new Zo({schema:a,schemaId:u,root:t,baseId:s})}return Dg.call(this,r,o)}}tn.resolveSchema=fd;var EG=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function Dg(t,{baseId:e,schema:r,root:n}){var s;if(((s=t.fragment)===null||s===void 0?void 0:s[0])!=="/")return;for(let a of t.fragment.slice(1).split("/")){if(typeof r=="boolean")return;let u=r[(0,lN.unescapeFragment)(a)];if(u===void 0)return;r=u;let l=typeof r=="object"&&r[this.opts.schemaId];!EG.has(a)&&l&&(e=(0,wn.resolveUrl)(this.opts.uriResolver,e,l))}let i;if(typeof r!="boolean"&&r.$ref&&!(0,lN.schemaHasRulesButRef)(r,this.RULES)){let a=(0,wn.resolveUrl)(this.opts.uriResolver,e,r.$ref);i=fd.call(this,n,a)}let{schemaId:o}=this.opts;if(i=i||new Zo({schema:r,schemaId:o,root:n,baseId:e}),i.schema!==i.root.schema)return i}});var fN=$((khe,SG)=>{SG.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var pd=$((hd,dN)=>{(function(t,e){typeof hd=="object"&&typeof dN<"u"?e(hd):typeof define=="function"&&define.amd?define(["exports"],e):e(t.URI=t.URI||{})})(hd,function(t){"use strict";function e(){for(var R=arguments.length,E=Array(R),P=0;P<R;P++)E[P]=arguments[P];if(E.length>1){E[0]=E[0].slice(0,-1);for(var C=E.length-1,k=1;k<C;++k)E[k]=E[k].slice(1,-1);return E[C]=E[C].slice(1),E.join("")}else return E[0]}function r(R){return"(?:"+R+")"}function n(R){return R===void 0?"undefined":R===null?"null":Object.prototype.toString.call(R).split(" ").pop().split("]").shift().toLowerCase()}function s(R){return R.toUpperCase()}function i(R){return R!=null?R instanceof Array?R:typeof R.length!="number"||R.split||R.setInterval||R.call?[R]:Array.prototype.slice.call(R):[]}function o(R,E){var P=R;if(E)for(var C in E)P[C]=E[C];return P}function a(R){var E="[A-Za-z]",P="[\\x0D]",C="[0-9]",k="[\\x22]",K=e(C,"[A-Fa-f]"),oe="[\\x0A]",Ae="[\\x20]",He=r(r("%[EFef]"+K+"%"+K+K+"%"+K+K)+"|"+r("%[89A-Fa-f]"+K+"%"+K+K)+"|"+r("%"+K+K)),Ot="[\\:\\/\\?\\#\\[\\]\\@]",Te="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",dt=e(Ot,Te),Nt=R?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",lt=R?"[\\uE000-\\uF8FF]":"[]",Ve=e(E,C,"[\\-\\.\\_\\~]",Nt),ht=r(E+e(E,C,"[\\+\\-\\.]")+"*"),Be=r(r(He+"|"+e(Ve,Te,"[\\:]"))+"*"),bi=r(r("25[0-5]")+"|"+r("2[0-4]"+C)+"|"+r("1"+C+C)+"|"+r("[1-9]"+C)+"|"+C),xr=r(r("25[0-5]")+"|"+r("2[0-4]"+C)+"|"+r("1"+C+C)+"|"+r("0?[1-9]"+C)+"|0?0?"+C),Kr=r(xr+"\\."+xr+"\\."+xr+"\\."+xr),Qe=r(K+"{1,4}"),Fr=r(r(Qe+"\\:"+Qe)+"|"+Kr),Br=r(r(Qe+"\\:")+"{6}"+Fr),Ln=r("\\:\\:"+r(Qe+"\\:")+"{5}"+Fr),wi=r(r(Qe)+"?\\:\\:"+r(Qe+"\\:")+"{4}"+Fr),ns=r(r(r(Qe+"\\:")+"{0,1}"+Qe)+"?\\:\\:"+r(Qe+"\\:")+"{3}"+Fr),Za=r(r(r(Qe+"\\:")+"{0,2}"+Qe)+"?\\:\\:"+r(Qe+"\\:")+"{2}"+Fr),qc=r(r(r(Qe+"\\:")+"{0,3}"+Qe)+"?\\:\\:"+Qe+"\\:"+Fr),jc=r(r(r(Qe+"\\:")+"{0,4}"+Qe)+"?\\:\\:"+Fr),bo=r(r(r(Qe+"\\:")+"{0,5}"+Qe)+"?\\:\\:"+Qe),wo=r(r(r(Qe+"\\:")+"{0,6}"+Qe)+"?\\:\\:"),ss=r([Br,Ln,wi,ns,Za,qc,jc,bo,wo].join("|")),Eo=r(r(Ve+"|"+He)+"+"),$p=r(ss+"\\%25"+Eo),Ei=r(ss+r("\\%25|\\%(?!"+K+"{2})")+Eo),CF=r("[vV]"+K+"+\\."+e(Ve,Te,"[\\:]")+"+"),AF=r("\\["+r(Ei+"|"+ss+"|"+CF)+"\\]"),Nw=r(r(He+"|"+e(Ve,Te))+"*"),eu=r(AF+"|"+Kr+"(?!"+Nw+")|"+Nw),tu=r(C+"*"),Iw=r(r(Be+"@")+"?"+eu+r("\\:"+tu)+"?"),ru=r(He+"|"+e(Ve,Te,"[\\:\\@]")),kF=r(ru+"*"),Cw=r(ru+"+"),qF=r(r(He+"|"+e(Ve,Te,"[\\@]"))+"+"),is=r(r("\\/"+kF)+"*"),So=r("\\/"+r(Cw+is)+"?"),bp=r(qF+is),Dc=r(Cw+is),Ro="(?!"+ru+")",xce=r(is+"|"+So+"|"+bp+"|"+Dc+"|"+Ro),Po=r(r(ru+"|"+e("[\\/\\?]",lt))+"*"),nu=r(r(ru+"|[\\/\\?]")+"*"),Aw=r(r("\\/\\/"+Iw+is)+"|"+So+"|"+Dc+"|"+Ro),jF=r(ht+"\\:"+Aw+r("\\?"+Po)+"?"+r("\\#"+nu)+"?"),DF=r(r("\\/\\/"+Iw+is)+"|"+So+"|"+bp+"|"+Ro),LF=r(DF+r("\\?"+Po)+"?"+r("\\#"+nu)+"?"),Fce=r(jF+"|"+LF),Mce=r(ht+"\\:"+Aw+r("\\?"+Po)+"?"),Vce="^("+ht+")\\:"+r(r("\\/\\/("+r("("+Be+")@")+"?("+eu+")"+r("\\:("+tu+")")+"?)")+"?("+is+"|"+So+"|"+Dc+"|"+Ro+")")+r("\\?("+Po+")")+"?"+r("\\#("+nu+")")+"?$",zce="^(){0}"+r(r("\\/\\/("+r("("+Be+")@")+"?("+eu+")"+r("\\:("+tu+")")+"?)")+"?("+is+"|"+So+"|"+bp+"|"+Ro+")")+r("\\?("+Po+")")+"?"+r("\\#("+nu+")")+"?$",Uce="^("+ht+")\\:"+r(r("\\/\\/("+r("("+Be+")@")+"?("+eu+")"+r("\\:("+tu+")")+"?)")+"?("+is+"|"+So+"|"+Dc+"|"+Ro+")")+r("\\?("+Po+")")+"?$",Hce="^"+r("\\#("+nu+")")+"?$",Kce="^"+r("("+Be+")@")+"?("+eu+")"+r("\\:("+tu+")")+"?$";return{NOT_SCHEME:new RegExp(e("[^]",E,C,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(e("[^\\%\\:]",Ve,Te),"g"),NOT_HOST:new RegExp(e("[^\\%\\[\\]\\:]",Ve,Te),"g"),NOT_PATH:new RegExp(e("[^\\%\\/\\:\\@]",Ve,Te),"g"),NOT_PATH_NOSCHEME:new RegExp(e("[^\\%\\/\\@]",Ve,Te),"g"),NOT_QUERY:new RegExp(e("[^\\%]",Ve,Te,"[\\:\\@\\/\\?]",lt),"g"),NOT_FRAGMENT:new RegExp(e("[^\\%]",Ve,Te,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(e("[^]",Ve,Te),"g"),UNRESERVED:new RegExp(Ve,"g"),OTHER_CHARS:new RegExp(e("[^\\%]",Ve,dt),"g"),PCT_ENCODED:new RegExp(He,"g"),IPV4ADDRESS:new RegExp("^("+Kr+")$"),IPV6ADDRESS:new RegExp("^\\[?("+ss+")"+r(r("\\%25|\\%(?!"+K+"{2})")+"("+Eo+")")+"?\\]?$")}}var u=a(!1),l=a(!0),c=function(){function R(E,P){var C=[],k=!0,K=!1,oe=void 0;try{for(var Ae=E[Symbol.iterator](),He;!(k=(He=Ae.next()).done)&&(C.push(He.value),!(P&&C.length===P));k=!0);}catch(Ot){K=!0,oe=Ot}finally{try{!k&&Ae.return&&Ae.return()}finally{if(K)throw oe}}return C}return function(E,P){if(Array.isArray(E))return E;if(Symbol.iterator in Object(E))return R(E,P);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f=function(R){if(Array.isArray(R)){for(var E=0,P=Array(R.length);E<R.length;E++)P[E]=R[E];return P}else return Array.from(R)},h=2147483647,d=36,p=1,m=26,v=38,g=700,w=72,_=128,y="-",b=/^xn--/,T=/[^\0-\x7E]/,S=/[\x2E\u3002\uFF0E\uFF61]/g,N={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},A=d-p,I=Math.floor,O=String.fromCharCode;function q(R){throw new RangeError(N[R])}function L(R,E){for(var P=[],C=R.length;C--;)P[C]=E(R[C]);return P}function Z(R,E){var P=R.split("@"),C="";P.length>1&&(C=P[0]+"@",R=P[1]),R=R.replace(S,".");var k=R.split("."),K=L(k,E).join(".");return C+K}function Pe(R){for(var E=[],P=0,C=R.length;P<C;){var k=R.charCodeAt(P++);if(k>=55296&&k<=56319&&P<C){var K=R.charCodeAt(P++);(K&64512)==56320?E.push(((k&1023)<<10)+(K&1023)+65536):(E.push(k),P--)}else E.push(k)}return E}var V=function(E){return String.fromCodePoint.apply(String,f(E))},te=function(E){return E-48<10?E-22:E-65<26?E-65:E-97<26?E-97:d},ct=function(E,P){return E+22+75*(E<26)-((P!=0)<<5)},U=function(E,P,C){var k=0;for(E=C?I(E/g):E>>1,E+=I(E/P);E>A*m>>1;k+=d)E=I(E/A);return I(k+(A+1)*E/(E+v))},ft=function(E){var P=[],C=E.length,k=0,K=_,oe=w,Ae=E.lastIndexOf(y);Ae<0&&(Ae=0);for(var He=0;He<Ae;++He)E.charCodeAt(He)>=128&&q("not-basic"),P.push(E.charCodeAt(He));for(var Ot=Ae>0?Ae+1:0;Ot<C;){for(var Te=k,dt=1,Nt=d;;Nt+=d){Ot>=C&&q("invalid-input");var lt=te(E.charCodeAt(Ot++));(lt>=d||lt>I((h-k)/dt))&&q("overflow"),k+=lt*dt;var Ve=Nt<=oe?p:Nt>=oe+m?m:Nt-oe;if(lt<Ve)break;var ht=d-Ve;dt>I(h/ht)&&q("overflow"),dt*=ht}var Be=P.length+1;oe=U(k-Te,Be,Te==0),I(k/Be)>h-K&&q("overflow"),K+=I(k/Be),k%=Be,P.splice(k++,0,K)}return String.fromCodePoint.apply(String,P)},ur=function(E){var P=[];E=Pe(E);var C=E.length,k=_,K=0,oe=w,Ae=!0,He=!1,Ot=void 0;try{for(var Te=E[Symbol.iterator](),dt;!(Ae=(dt=Te.next()).done);Ae=!0){var Nt=dt.value;Nt<128&&P.push(O(Nt))}}catch(Ei){He=!0,Ot=Ei}finally{try{!Ae&&Te.return&&Te.return()}finally{if(He)throw Ot}}var lt=P.length,Ve=lt;for(lt&&P.push(y);Ve<C;){var ht=h,Be=!0,bi=!1,xr=void 0;try{for(var Kr=E[Symbol.iterator](),Qe;!(Be=(Qe=Kr.next()).done);Be=!0){var Fr=Qe.value;Fr>=k&&Fr<ht&&(ht=Fr)}}catch(Ei){bi=!0,xr=Ei}finally{try{!Be&&Kr.return&&Kr.return()}finally{if(bi)throw xr}}var Br=Ve+1;ht-k>I((h-K)/Br)&&q("overflow"),K+=(ht-k)*Br,k=ht;var Ln=!0,wi=!1,ns=void 0;try{for(var Za=E[Symbol.iterator](),qc;!(Ln=(qc=Za.next()).done);Ln=!0){var jc=qc.value;if(jc<k&&++K>h&&q("overflow"),jc==k){for(var bo=K,wo=d;;wo+=d){var ss=wo<=oe?p:wo>=oe+m?m:wo-oe;if(bo<ss)break;var Eo=bo-ss,$p=d-ss;P.push(O(ct(ss+Eo%$p,0))),bo=I(Eo/$p)}P.push(O(ct(bo,0))),oe=U(K,Br,Ve==lt),K=0,++Ve}}}catch(Ei){wi=!0,ns=Ei}finally{try{!Ln&&Za.return&&Za.return()}finally{if(wi)throw ns}}++K,++k}return P.join("")},xe=function(E){return Z(E,function(P){return b.test(P)?ft(P.slice(4).toLowerCase()):P})},qr=function(E){return Z(E,function(P){return T.test(P)?"xn--"+ur(P):P})},Vt={version:"2.1.0",ucs2:{decode:Pe,encode:V},decode:ft,encode:ur,toASCII:qr,toUnicode:xe},Ce={};function ie(R){var E=R.charCodeAt(0),P=void 0;return E<16?P="%0"+E.toString(16).toUpperCase():E<128?P="%"+E.toString(16).toUpperCase():E<2048?P="%"+(E>>6|192).toString(16).toUpperCase()+"%"+(E&63|128).toString(16).toUpperCase():P="%"+(E>>12|224).toString(16).toUpperCase()+"%"+(E>>6&63|128).toString(16).toUpperCase()+"%"+(E&63|128).toString(16).toUpperCase(),P}function Pt(R){for(var E="",P=0,C=R.length;P<C;){var k=parseInt(R.substr(P+1,2),16);if(k<128)E+=String.fromCharCode(k),P+=3;else if(k>=194&&k<224){if(C-P>=6){var K=parseInt(R.substr(P+4,2),16);E+=String.fromCharCode((k&31)<<6|K&63)}else E+=R.substr(P,6);P+=6}else if(k>=224){if(C-P>=9){var oe=parseInt(R.substr(P+4,2),16),Ae=parseInt(R.substr(P+7,2),16);E+=String.fromCharCode((k&15)<<12|(oe&63)<<6|Ae&63)}else E+=R.substr(P,9);P+=9}else E+=R.substr(P,3),P+=3}return E}function Fe(R,E){function P(C){var k=Pt(C);return k.match(E.UNRESERVED)?k:C}return R.scheme&&(R.scheme=String(R.scheme).replace(E.PCT_ENCODED,P).toLowerCase().replace(E.NOT_SCHEME,"")),R.userinfo!==void 0&&(R.userinfo=String(R.userinfo).replace(E.PCT_ENCODED,P).replace(E.NOT_USERINFO,ie).replace(E.PCT_ENCODED,s)),R.host!==void 0&&(R.host=String(R.host).replace(E.PCT_ENCODED,P).toLowerCase().replace(E.NOT_HOST,ie).replace(E.PCT_ENCODED,s)),R.path!==void 0&&(R.path=String(R.path).replace(E.PCT_ENCODED,P).replace(R.scheme?E.NOT_PATH:E.NOT_PATH_NOSCHEME,ie).replace(E.PCT_ENCODED,s)),R.query!==void 0&&(R.query=String(R.query).replace(E.PCT_ENCODED,P).replace(E.NOT_QUERY,ie).replace(E.PCT_ENCODED,s)),R.fragment!==void 0&&(R.fragment=String(R.fragment).replace(E.PCT_ENCODED,P).replace(E.NOT_FRAGMENT,ie).replace(E.PCT_ENCODED,s)),R}function j(R){return R.replace(/^0*(.*)/,"$1")||"0"}function x(R,E){var P=R.match(E.IPV4ADDRESS)||[],C=c(P,2),k=C[1];return k?k.split(".").map(j).join("."):R}function M(R,E){var P=R.match(E.IPV6ADDRESS)||[],C=c(P,3),k=C[1],K=C[2];if(k){for(var oe=k.toLowerCase().split("::").reverse(),Ae=c(oe,2),He=Ae[0],Ot=Ae[1],Te=Ot?Ot.split(":").map(j):[],dt=He.split(":").map(j),Nt=E.IPV4ADDRESS.test(dt[dt.length-1]),lt=Nt?7:8,Ve=dt.length-lt,ht=Array(lt),Be=0;Be<lt;++Be)ht[Be]=Te[Be]||dt[Ve+Be]||"";Nt&&(ht[lt-1]=x(ht[lt-1],E));var bi=ht.reduce(function(Br,Ln,wi){if(!Ln||Ln==="0"){var ns=Br[Br.length-1];ns&&ns.index+ns.length===wi?ns.length++:Br.push({index:wi,length:1})}return Br},[]),xr=bi.sort(function(Br,Ln){return Ln.length-Br.length})[0],Kr=void 0;if(xr&&xr.length>1){var Qe=ht.slice(0,xr.index),Fr=ht.slice(xr.index+xr.length);Kr=Qe.join(":")+"::"+Fr.join(":")}else Kr=ht.join(":");return K&&(Kr+="%"+K),Kr}else return R}var z=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,Me="".match(/(){0}/)[1]===void 0;function J(R){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},P={},C=E.iri!==!1?l:u;E.reference==="suffix"&&(R=(E.scheme?E.scheme+":":"")+"//"+R);var k=R.match(z);if(k){Me?(P.scheme=k[1],P.userinfo=k[3],P.host=k[4],P.port=parseInt(k[5],10),P.path=k[6]||"",P.query=k[7],P.fragment=k[8],isNaN(P.port)&&(P.port=k[5])):(P.scheme=k[1]||void 0,P.userinfo=R.indexOf("@")!==-1?k[3]:void 0,P.host=R.indexOf("//")!==-1?k[4]:void 0,P.port=parseInt(k[5],10),P.path=k[6]||"",P.query=R.indexOf("?")!==-1?k[7]:void 0,P.fragment=R.indexOf("#")!==-1?k[8]:void 0,isNaN(P.port)&&(P.port=R.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?k[4]:void 0)),P.host&&(P.host=M(x(P.host,C),C)),P.scheme===void 0&&P.userinfo===void 0&&P.host===void 0&&P.port===void 0&&!P.path&&P.query===void 0?P.reference="same-document":P.scheme===void 0?P.reference="relative":P.fragment===void 0?P.reference="absolute":P.reference="uri",E.reference&&E.reference!=="suffix"&&E.reference!==P.reference&&(P.error=P.error||"URI is not a "+E.reference+" reference.");var K=Ce[(E.scheme||P.scheme||"").toLowerCase()];if(!E.unicodeSupport&&(!K||!K.unicodeSupport)){if(P.host&&(E.domainHost||K&&K.domainHost))try{P.host=Vt.toASCII(P.host.replace(C.PCT_ENCODED,Pt).toLowerCase())}catch(oe){P.error=P.error||"Host's domain name can not be converted to ASCII via punycode: "+oe}Fe(P,u)}else Fe(P,C);K&&K.parse&&K.parse(P,E)}else P.error=P.error||"URI can not be parsed.";return P}function We(R,E){var P=E.iri!==!1?l:u,C=[];return R.userinfo!==void 0&&(C.push(R.userinfo),C.push("@")),R.host!==void 0&&C.push(M(x(String(R.host),P),P).replace(P.IPV6ADDRESS,function(k,K,oe){return"["+K+(oe?"%25"+oe:"")+"]"})),(typeof R.port=="number"||typeof R.port=="string")&&(C.push(":"),C.push(String(R.port))),C.length?C.join(""):void 0}var vt=/^\.\.?\//,Xe=/^\/\.(\/|$)/,kt=/^\/\.\.(\/|$)/,RF=/^\/?(?:.|\n)*?(?=\/|$)/;function $t(R){for(var E=[];R.length;)if(R.match(vt))R=R.replace(vt,"");else if(R.match(Xe))R=R.replace(Xe,"/");else if(R.match(kt))R=R.replace(kt,"/"),E.pop();else if(R==="."||R==="..")R="";else{var P=R.match(RF);if(P){var C=P[0];R=R.slice(C.length),E.push(C)}else throw new Error("Unexpected dot segment condition")}return E.join("")}function At(R){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},P=E.iri?l:u,C=[],k=Ce[(E.scheme||R.scheme||"").toLowerCase()];if(k&&k.serialize&&k.serialize(R,E),R.host&&!P.IPV6ADDRESS.test(R.host)){if(E.domainHost||k&&k.domainHost)try{R.host=E.iri?Vt.toUnicode(R.host):Vt.toASCII(R.host.replace(P.PCT_ENCODED,Pt).toLowerCase())}catch(Ae){R.error=R.error||"Host's domain name can not be converted to "+(E.iri?"Unicode":"ASCII")+" via punycode: "+Ae}}Fe(R,P),E.reference!=="suffix"&&R.scheme&&(C.push(R.scheme),C.push(":"));var K=We(R,E);if(K!==void 0&&(E.reference!=="suffix"&&C.push("//"),C.push(K),R.path&&R.path.charAt(0)!=="/"&&C.push("/")),R.path!==void 0){var oe=R.path;!E.absolutePath&&(!k||!k.absolutePath)&&(oe=$t(oe)),K===void 0&&(oe=oe.replace(/^\/\//,"/%2F")),C.push(oe)}return R.query!==void 0&&(C.push("?"),C.push(R.query)),R.fragment!==void 0&&(C.push("#"),C.push(R.fragment)),C.join("")}function Rw(R,E){var P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},C=arguments[3],k={};return C||(R=J(At(R,P),P),E=J(At(E,P),P)),P=P||{},!P.tolerant&&E.scheme?(k.scheme=E.scheme,k.userinfo=E.userinfo,k.host=E.host,k.port=E.port,k.path=$t(E.path||""),k.query=E.query):(E.userinfo!==void 0||E.host!==void 0||E.port!==void 0?(k.userinfo=E.userinfo,k.host=E.host,k.port=E.port,k.path=$t(E.path||""),k.query=E.query):(E.path?(E.path.charAt(0)==="/"?k.path=$t(E.path):((R.userinfo!==void 0||R.host!==void 0||R.port!==void 0)&&!R.path?k.path="/"+E.path:R.path?k.path=R.path.slice(0,R.path.lastIndexOf("/")+1)+E.path:k.path=E.path,k.path=$t(k.path)),k.query=E.query):(k.path=R.path,E.query!==void 0?k.query=E.query:k.query=R.query),k.userinfo=R.userinfo,k.host=R.host,k.port=R.port),k.scheme=R.scheme),k.fragment=E.fragment,k}function hn(R,E,P){var C=o({scheme:"null"},P);return At(Rw(J(R,C),J(E,C),C,!0),C)}function ts(R,E){return typeof R=="string"?R=At(J(R,E),E):n(R)==="object"&&(R=J(At(R,E),E)),R}function Xa(R,E,P){return typeof R=="string"?R=At(J(R,P),P):n(R)==="object"&&(R=At(R,P)),typeof E=="string"?E=At(J(E,P),P):n(E)==="object"&&(E=At(E,P)),R===E}function Is(R,E){return R&&R.toString().replace(!E||!E.iri?u.ESCAPE:l.ESCAPE,ie)}function pn(R,E){return R&&R.toString().replace(!E||!E.iri?u.PCT_ENCODED:l.PCT_ENCODED,Pt)}var Qa={scheme:"http",domainHost:!0,parse:function(E,P){return E.host||(E.error=E.error||"HTTP URIs must have a host."),E},serialize:function(E,P){var C=String(E.scheme).toLowerCase()==="https";return(E.port===(C?443:80)||E.port==="")&&(E.port=void 0),E.path||(E.path="/"),E}},Zt={scheme:"https",domainHost:Qa.domainHost,parse:Qa.parse,serialize:Qa.serialize};function Ac(R){return typeof R.secure=="boolean"?R.secure:String(R.scheme).toLowerCase()==="wss"}var Cs={scheme:"ws",domainHost:!0,parse:function(E,P){var C=E;return C.secure=Ac(C),C.resourceName=(C.path||"/")+(C.query?"?"+C.query:""),C.path=void 0,C.query=void 0,C},serialize:function(E,P){if((E.port===(Ac(E)?443:80)||E.port==="")&&(E.port=void 0),typeof E.secure=="boolean"&&(E.scheme=E.secure?"wss":"ws",E.secure=void 0),E.resourceName){var C=E.resourceName.split("?"),k=c(C,2),K=k[0],oe=k[1];E.path=K&&K!=="/"?K:void 0,E.query=oe,E.resourceName=void 0}return E.fragment=void 0,E}},it={scheme:"wss",domainHost:Cs.domainHost,parse:Cs.parse,serialize:Cs.serialize},jr={},PF=!0,Dr="[A-Za-z0-9\\-\\.\\_\\~"+(PF?"\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF":"")+"]",qt="[0-9A-Fa-f]",TF=r(r("%[EFef]"+qt+"%"+qt+qt+"%"+qt+qt)+"|"+r("%[89A-Fa-f]"+qt+"%"+qt+qt)+"|"+r("%"+qt+qt)),Tt="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",$i="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",OF=e($i,'[\\"\\\\]'),mn="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",Lr=new RegExp(Dr,"g"),rs=new RegExp(TF,"g"),As=new RegExp(e("[^]",Tt,"[\\.]",'[\\"]',OF),"g"),ks=new RegExp(e("[^]",Dr,mn),"g"),kc=ks;function Dn(R){var E=Pt(R);return E.match(Lr)?E:R}var Pw={scheme:"mailto",parse:function(E,P){var C=E,k=C.to=C.path?C.path.split(","):[];if(C.path=void 0,C.query){for(var K=!1,oe={},Ae=C.query.split("&"),He=0,Ot=Ae.length;He<Ot;++He){var Te=Ae[He].split("=");switch(Te[0]){case"to":for(var dt=Te[1].split(","),Nt=0,lt=dt.length;Nt<lt;++Nt)k.push(dt[Nt]);break;case"subject":C.subject=pn(Te[1],P);break;case"body":C.body=pn(Te[1],P);break;default:K=!0,oe[pn(Te[0],P)]=pn(Te[1],P);break}}K&&(C.headers=oe)}C.query=void 0;for(var Ve=0,ht=k.length;Ve<ht;++Ve){var Be=k[Ve].split("@");if(Be[0]=pn(Be[0]),P.unicodeSupport)Be[1]=pn(Be[1],P).toLowerCase();else try{Be[1]=Vt.toASCII(pn(Be[1],P).toLowerCase())}catch(bi){C.error=C.error||"Email address's domain name can not be converted to ASCII via punycode: "+bi}k[Ve]=Be.join("@")}return C},serialize:function(E,P){var C=E,k=i(E.to);if(k){for(var K=0,oe=k.length;K<oe;++K){var Ae=String(k[K]),He=Ae.lastIndexOf("@"),Ot=Ae.slice(0,He).replace(rs,Dn).replace(rs,s).replace(As,ie),Te=Ae.slice(He+1);try{Te=P.iri?Vt.toUnicode(Te):Vt.toASCII(pn(Te,P).toLowerCase())}catch(Ve){C.error=C.error||"Email address's domain name can not be converted to "+(P.iri?"Unicode":"ASCII")+" via punycode: "+Ve}k[K]=Ot+"@"+Te}C.path=k.join(",")}var dt=E.headers=E.headers||{};E.subject&&(dt.subject=E.subject),E.body&&(dt.body=E.body);var Nt=[];for(var lt in dt)dt[lt]!==jr[lt]&&Nt.push(lt.replace(rs,Dn).replace(rs,s).replace(ks,ie)+"="+dt[lt].replace(rs,Dn).replace(rs,s).replace(kc,ie));return Nt.length&&(C.query=Nt.join("&")),C}},NF=/^([^\:]+)\:(.*)/,Tw={scheme:"urn",parse:function(E,P){var C=E.path&&E.path.match(NF),k=E;if(C){var K=P.scheme||k.scheme||"urn",oe=C[1].toLowerCase(),Ae=C[2],He=K+":"+(P.nid||oe),Ot=Ce[He];k.nid=oe,k.nss=Ae,k.path=void 0,Ot&&(k=Ot.parse(k,P))}else k.error=k.error||"URN can not be parsed.";return k},serialize:function(E,P){var C=P.scheme||E.scheme||"urn",k=E.nid,K=C+":"+(P.nid||k),oe=Ce[K];oe&&(E=oe.serialize(E,P));var Ae=E,He=E.nss;return Ae.path=(k||P.nid)+":"+He,Ae}},IF=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Ow={scheme:"urn:uuid",parse:function(E,P){var C=E;return C.uuid=C.nss,C.nss=void 0,!P.tolerant&&(!C.uuid||!C.uuid.match(IF))&&(C.error=C.error||"UUID is not valid."),C},serialize:function(E,P){var C=E;return C.nss=(E.uuid||"").toLowerCase(),C}};Ce[Qa.scheme]=Qa,Ce[Zt.scheme]=Zt,Ce[Cs.scheme]=Cs,Ce[it.scheme]=it,Ce[Pw.scheme]=Pw,Ce[Tw.scheme]=Tw,Ce[Ow.scheme]=Ow,t.SCHEMES=Ce,t.pctEncChar=ie,t.pctDecChars=Pt,t.parse=J,t.removeDotSegments=$t,t.serialize=At,t.resolveComponents=Rw,t.resolve=hn,t.normalize=ts,t.equal=Xa,t.escapeComponent=Is,t.unescapeComponent=pn,Object.defineProperty(t,"__esModule",{value:!0})})});var pN=$(xg=>{"use strict";Object.defineProperty(xg,"__esModule",{value:!0});var hN=pd();hN.code='require("ajv/dist/runtime/uri").default';xg.default=hN});var wN=$(Ht=>{"use strict";Object.defineProperty(Ht,"__esModule",{value:!0});Ht.CodeGen=Ht.Name=Ht.nil=Ht.stringify=Ht.str=Ht._=Ht.KeywordCxt=void 0;var RG=Vu();Object.defineProperty(Ht,"KeywordCxt",{enumerable:!0,get:function(){return RG.KeywordCxt}});var ea=$e();Object.defineProperty(Ht,"_",{enumerable:!0,get:function(){return ea._}});Object.defineProperty(Ht,"str",{enumerable:!0,get:function(){return ea.str}});Object.defineProperty(Ht,"stringify",{enumerable:!0,get:function(){return ea.stringify}});Object.defineProperty(Ht,"nil",{enumerable:!0,get:function(){return ea.nil}});Object.defineProperty(Ht,"Name",{enumerable:!0,get:function(){return ea.Name}});Object.defineProperty(Ht,"CodeGen",{enumerable:!0,get:function(){return ea.CodeGen}});var PG=ld(),vN=cd(),TG=vg(),zu=dd(),OG=$e(),Uu=xu(),md=Lu(),Mg=qe(),mN=fN(),NG=pN(),$N=(t,e)=>new RegExp(t,e);$N.code="new RegExp";var IG=["removeAdditional","useDefaults","coerceTypes"],CG=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),AG={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},kG={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},yN=200;function qG(t){var e,r,n,s,i,o,a,u,l,c,f,h,d,p,m,v,g,w,_,y,b,T,S,N,A;let I=t.strict,O=(e=t.code)===null||e===void 0?void 0:e.optimize,q=O===!0||O===void 0?1:O||0,L=(n=(r=t.code)===null||r===void 0?void 0:r.regExp)!==null&&n!==void 0?n:$N,Z=(s=t.uriResolver)!==null&&s!==void 0?s:NG.default;return{strictSchema:(o=(i=t.strictSchema)!==null&&i!==void 0?i:I)!==null&&o!==void 0?o:!0,strictNumbers:(u=(a=t.strictNumbers)!==null&&a!==void 0?a:I)!==null&&u!==void 0?u:!0,strictTypes:(c=(l=t.strictTypes)!==null&&l!==void 0?l:I)!==null&&c!==void 0?c:"log",strictTuples:(h=(f=t.strictTuples)!==null&&f!==void 0?f:I)!==null&&h!==void 0?h:"log",strictRequired:(p=(d=t.strictRequired)!==null&&d!==void 0?d:I)!==null&&p!==void 0?p:!1,code:t.code?{...t.code,optimize:q,regExp:L}:{optimize:q,regExp:L},loopRequired:(m=t.loopRequired)!==null&&m!==void 0?m:yN,loopEnum:(v=t.loopEnum)!==null&&v!==void 0?v:yN,meta:(g=t.meta)!==null&&g!==void 0?g:!0,messages:(w=t.messages)!==null&&w!==void 0?w:!0,inlineRefs:(_=t.inlineRefs)!==null&&_!==void 0?_:!0,schemaId:(y=t.schemaId)!==null&&y!==void 0?y:"$id",addUsedSchema:(b=t.addUsedSchema)!==null&&b!==void 0?b:!0,validateSchema:(T=t.validateSchema)!==null&&T!==void 0?T:!0,validateFormats:(S=t.validateFormats)!==null&&S!==void 0?S:!0,unicodeRegExp:(N=t.unicodeRegExp)!==null&&N!==void 0?N:!0,int32range:(A=t.int32range)!==null&&A!==void 0?A:!0,uriResolver:Z}}var Hu=class{constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts={...e,...qG(e)};let{es5:r,lines:n}=this.opts.code;this.scope=new OG.ValueScope({scope:{},prefixes:CG,es5:r,lines:n}),this.logger=MG(e.logger);let s=e.validateFormats;e.validateFormats=!1,this.RULES=(0,TG.getRules)(),gN.call(this,AG,e,"NOT SUPPORTED"),gN.call(this,kG,e,"DEPRECATED","warn"),this._metaOpts=xG.call(this),e.formats&&DG.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&LG.call(this,e.keywords),typeof e.meta=="object"&&this.addMetaSchema(e.meta),jG.call(this),e.validateFormats=s}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:e,meta:r,schemaId:n}=this.opts,s=mN;n==="id"&&(s={...mN},s.id=s.$id,delete s.$id),r&&e&&this.addMetaSchema(s,s[n],!1)}defaultMeta(){let{meta:e,schemaId:r}=this.opts;return this.opts.defaultMeta=typeof e=="object"?e[r]||e:void 0}validate(e,r){let n;if(typeof e=="string"){if(n=this.getSchema(e),!n)throw new Error(`no schema with key or ref "${e}"`)}else n=this.compile(e);let s=n(r);return"$async"in n||(this.errors=n.errors),s}compile(e,r){let n=this._addSchema(e,r);return n.validate||this._compileSchemaEnv(n)}compileAsync(e,r){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");let{loadSchema:n}=this.opts;return s.call(this,e,r);async function s(c,f){await i.call(this,c.$schema);let h=this._addSchema(c,f);return h.validate||o.call(this,h)}async function i(c){c&&!this.getSchema(c)&&await s.call(this,{$ref:c},!0)}async function o(c){try{return this._compileSchemaEnv(c)}catch(f){if(!(f instanceof vN.default))throw f;return a.call(this,f),await u.call(this,f.missingSchema),o.call(this,c)}}function a({missingSchema:c,missingRef:f}){if(this.refs[c])throw new Error(`AnySchema ${c} is loaded but ${f} cannot be resolved`)}async function u(c){let f=await l.call(this,c);this.refs[c]||await i.call(this,f.$schema),this.refs[c]||this.addSchema(f,c,r)}async function l(c){let f=this._loading[c];if(f)return f;try{return await(this._loading[c]=n(c))}finally{delete this._loading[c]}}}addSchema(e,r,n,s=this.opts.validateSchema){if(Array.isArray(e)){for(let o of e)this.addSchema(o,void 0,n,s);return this}let i;if(typeof e=="object"){let{schemaId:o}=this.opts;if(i=e[o],i!==void 0&&typeof i!="string")throw new Error(`schema ${o} must be string`)}return r=(0,Uu.normalizeId)(r||i),this._checkUnique(r),this.schemas[r]=this._addSchema(e,n,r,s,!0),this}addMetaSchema(e,r,n=this.opts.validateSchema){return this.addSchema(e,r,!0,n),this}validateSchema(e,r){if(typeof e=="boolean")return!0;let n;if(n=e.$schema,n!==void 0&&typeof n!="string")throw new Error("$schema must be a string");if(n=n||this.opts.defaultMeta||this.defaultMeta(),!n)return this.logger.warn("meta-schema not available"),this.errors=null,!0;let s=this.validate(n,e);if(!s&&r){let i="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(i);else throw new Error(i)}return s}getSchema(e){let r;for(;typeof(r=_N.call(this,e))=="string";)e=r;if(r===void 0){let{schemaId:n}=this.opts,s=new zu.SchemaEnv({schema:{},schemaId:n});if(r=zu.resolveSchema.call(this,s,e),!r)return;this.refs[e]=r}return r.validate||this._compileSchemaEnv(r)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let r=_N.call(this,e);return typeof r=="object"&&this._cache.delete(r.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{let r=e;this._cache.delete(r);let n=e[this.opts.schemaId];return n&&(n=(0,Uu.normalizeId)(n),delete this.schemas[n],delete this.refs[n]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(let r of e)this.addKeyword(r);return this}addKeyword(e,r){let n;if(typeof e=="string")n=e,typeof r=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),r.keyword=n);else if(typeof e=="object"&&r===void 0){if(r=e,n=r.keyword,Array.isArray(n)&&!n.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(zG.call(this,n,r),!r)return(0,Mg.eachItem)(n,i=>Fg.call(this,i)),this;HG.call(this,r);let s={...r,type:(0,md.getJSONTypes)(r.type),schemaType:(0,md.getJSONTypes)(r.schemaType)};return(0,Mg.eachItem)(n,s.type.length===0?i=>Fg.call(this,i,s):i=>s.type.forEach(o=>Fg.call(this,i,s,o))),this}getKeyword(e){let r=this.RULES.all[e];return typeof r=="object"?r.definition:!!r}removeKeyword(e){let{RULES:r}=this;delete r.keywords[e],delete r.all[e];for(let n of r.rules){let s=n.rules.findIndex(i=>i.keyword===e);s>=0&&n.rules.splice(s,1)}return this}addFormat(e,r){return typeof r=="string"&&(r=new RegExp(r)),this.formats[e]=r,this}errorsText(e=this.errors,{separator:r=", ",dataVar:n="data"}={}){return!e||e.length===0?"No errors":e.map(s=>`${n}${s.instancePath} ${s.message}`).reduce((s,i)=>s+r+i)}$dataMetaSchema(e,r){let n=this.RULES.all;e=JSON.parse(JSON.stringify(e));for(let s of r){let i=s.split("/").slice(1),o=e;for(let a of i)o=o[a];for(let a in n){let u=n[a];if(typeof u!="object")continue;let{$data:l}=u.definition,c=o[a];l&&c&&(o[a]=bN(c))}}return e}_removeAllSchemas(e,r){for(let n in e){let s=e[n];(!r||r.test(n))&&(typeof s=="string"?delete e[n]:s&&!s.meta&&(this._cache.delete(s.schema),delete e[n]))}}_addSchema(e,r,n,s=this.opts.validateSchema,i=this.opts.addUsedSchema){let o,{schemaId:a}=this.opts;if(typeof e=="object")o=e[a];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof e!="boolean")throw new Error("schema must be object or boolean")}let u=this._cache.get(e);if(u!==void 0)return u;n=(0,Uu.normalizeId)(o||n);let l=Uu.getSchemaRefs.call(this,e,n);return u=new zu.SchemaEnv({schema:e,schemaId:a,meta:r,baseId:n,localRefs:l}),this._cache.set(u.schema,u),i&&!n.startsWith("#")&&(n&&this._checkUnique(n),this.refs[n]=u),s&&this.validateSchema(e,!0),u}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw new Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):zu.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}_compileMetaSchema(e){let r=this.opts;this.opts=this._metaOpts;try{zu.compileSchema.call(this,e)}finally{this.opts=r}}};Ht.default=Hu;Hu.ValidationError=PG.default;Hu.MissingRefError=vN.default;function gN(t,e,r,n="error"){for(let s in t){let i=s;i in e&&this.logger[n](`${r}: option ${s}. ${t[i]}`)}}function _N(t){return t=(0,Uu.normalizeId)(t),this.schemas[t]||this.refs[t]}function jG(){let t=this.opts.schemas;if(t)if(Array.isArray(t))this.addSchema(t);else for(let e in t)this.addSchema(t[e],e)}function DG(){for(let t in this.opts.formats){let e=this.opts.formats[t];e&&this.addFormat(t,e)}}function LG(t){if(Array.isArray(t)){this.addVocabulary(t);return}this.logger.warn("keywords option as map is deprecated, pass array");for(let e in t){let r=t[e];r.keyword||(r.keyword=e),this.addKeyword(r)}}function xG(){let t={...this.opts};for(let e of IG)delete t[e];return t}var FG={log(){},warn(){},error(){}};function MG(t){if(t===!1)return FG;if(t===void 0)return console;if(t.log&&t.warn&&t.error)return t;throw new Error("logger must implement log, warn and error methods")}var VG=/^[a-z_$][a-z0-9_$:-]*$/i;function zG(t,e){let{RULES:r}=this;if((0,Mg.eachItem)(t,n=>{if(r.keywords[n])throw new Error(`Keyword ${n} is already defined`);if(!VG.test(n))throw new Error(`Keyword ${n} has invalid name`)}),!!e&&e.$data&&!("code"in e||"validate"in e))throw new Error('$data keyword must have "code" or "validate" function')}function Fg(t,e,r){var n;let s=e?.post;if(r&&s)throw new Error('keyword with "post" flag cannot have "type"');let{RULES:i}=this,o=s?i.post:i.rules.find(({type:u})=>u===r);if(o||(o={type:r,rules:[]},i.rules.push(o)),i.keywords[t]=!0,!e)return;let a={keyword:t,definition:{...e,type:(0,md.getJSONTypes)(e.type),schemaType:(0,md.getJSONTypes)(e.schemaType)}};e.before?UG.call(this,o,a,e.before):o.rules.push(a),i.all[t]=a,(n=e.implements)===null||n===void 0||n.forEach(u=>this.addKeyword(u))}function UG(t,e,r){let n=t.rules.findIndex(s=>s.keyword===r);n>=0?t.rules.splice(n,0,e):(t.rules.push(e),this.logger.warn(`rule ${r} is not defined`))}function HG(t){let{metaSchema:e}=t;e!==void 0&&(t.$data&&this.opts.$data&&(e=bN(e)),t.validateSchema=this.compile(e,!0))}var KG={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function bN(t){return{anyOf:[t,KG]}}});var EN=$(Vg=>{"use strict";Object.defineProperty(Vg,"__esModule",{value:!0});var BG={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};Vg.default=BG});var TN=$(Bi=>{"use strict";Object.defineProperty(Bi,"__esModule",{value:!0});Bi.callRef=Bi.getValidate=void 0;var GG=cd(),SN=en(),Tr=$e(),ta=ds(),RN=dd(),yd=qe(),JG={keyword:"$ref",schemaType:"string",code(t){let{gen:e,schema:r,it:n}=t,{baseId:s,schemaEnv:i,validateName:o,opts:a,self:u}=n,{root:l}=i;if((r==="#"||r==="#/")&&s===l.baseId)return f();let c=RN.resolveRef.call(u,l,s,r);if(c===void 0)throw new GG.default(n.opts.uriResolver,s,r);if(c instanceof RN.SchemaEnv)return h(c);return d(c);function f(){if(i===l)return gd(t,o,i,i.$async);let p=e.scopeValue("root",{ref:l});return gd(t,(0,Tr._)`${p}.validate`,l,l.$async)}function h(p){let m=PN(t,p);gd(t,m,p,p.$async)}function d(p){let m=e.scopeValue("schema",a.code.source===!0?{ref:p,code:(0,Tr.stringify)(p)}:{ref:p}),v=e.name("valid"),g=t.subschema({schema:p,dataTypes:[],schemaPath:Tr.nil,topSchemaRef:m,errSchemaPath:r},v);t.mergeEvaluated(g),t.ok(v)}}};function PN(t,e){let{gen:r}=t;return e.validate?r.scopeValue("validate",{ref:e.validate}):(0,Tr._)`${r.scopeValue("wrapper",{ref:e})}.validate`}Bi.getValidate=PN;function gd(t,e,r,n){let{gen:s,it:i}=t,{allErrors:o,schemaEnv:a,opts:u}=i,l=u.passContext?ta.default.this:Tr.nil;n?c():f();function c(){if(!a.$async)throw new Error("async schema referenced by sync schema");let p=s.let("valid");s.try(()=>{s.code((0,Tr._)`await ${(0,SN.callValidateCode)(t,e,l)}`),d(e),o||s.assign(p,!0)},m=>{s.if((0,Tr._)`!(${m} instanceof ${i.ValidationError})`,()=>s.throw(m)),h(m),o||s.assign(p,!1)}),t.ok(p)}function f(){t.result((0,SN.callValidateCode)(t,e,l),()=>d(e),()=>h(e))}function h(p){let m=(0,Tr._)`${p}.errors`;s.assign(ta.default.vErrors,(0,Tr._)`${ta.default.vErrors} === null ? ${m} : ${ta.default.vErrors}.concat(${m})`),s.assign(ta.default.errors,(0,Tr._)`${ta.default.vErrors}.length`)}function d(p){var m;if(!i.opts.unevaluated)return;let v=(m=r?.validate)===null||m===void 0?void 0:m.evaluated;if(i.props!==!0)if(v&&!v.dynamicProps)v.props!==void 0&&(i.props=yd.mergeEvaluated.props(s,v.props,i.props));else{let g=s.var("props",(0,Tr._)`${p}.evaluated.props`);i.props=yd.mergeEvaluated.props(s,g,i.props,Tr.Name)}if(i.items!==!0)if(v&&!v.dynamicItems)v.items!==void 0&&(i.items=yd.mergeEvaluated.items(s,v.items,i.items));else{let g=s.var("items",(0,Tr._)`${p}.evaluated.items`);i.items=yd.mergeEvaluated.items(s,g,i.items,Tr.Name)}}}Bi.callRef=gd;Bi.default=JG});var ON=$(zg=>{"use strict";Object.defineProperty(zg,"__esModule",{value:!0});var YG=EN(),WG=TN(),XG=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",YG.default,WG.default];zg.default=XG});var NN=$(Ug=>{"use strict";Object.defineProperty(Ug,"__esModule",{value:!0});var _d=$e(),Js=_d.operators,vd={maximum:{okStr:"<=",ok:Js.LTE,fail:Js.GT},minimum:{okStr:">=",ok:Js.GTE,fail:Js.LT},exclusiveMaximum:{okStr:"<",ok:Js.LT,fail:Js.GTE},exclusiveMinimum:{okStr:">",ok:Js.GT,fail:Js.LTE}},QG={message:({keyword:t,schemaCode:e})=>(0,_d.str)`must be ${vd[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>(0,_d._)`{comparison: ${vd[t].okStr}, limit: ${e}}`},ZG={keyword:Object.keys(vd),type:"number",schemaType:"number",$data:!0,error:QG,code(t){let{keyword:e,data:r,schemaCode:n}=t;t.fail$data((0,_d._)`${r} ${vd[e].fail} ${n} || isNaN(${r})`)}};Ug.default=ZG});var IN=$(Hg=>{"use strict";Object.defineProperty(Hg,"__esModule",{value:!0});var Ku=$e(),e8={message:({schemaCode:t})=>(0,Ku.str)`must be multiple of ${t}`,params:({schemaCode:t})=>(0,Ku._)`{multipleOf: ${t}}`},t8={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:e8,code(t){let{gen:e,data:r,schemaCode:n,it:s}=t,i=s.opts.multipleOfPrecision,o=e.let("res"),a=i?(0,Ku._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${i}`:(0,Ku._)`${o} !== parseInt(${o})`;t.fail$data((0,Ku._)`(${n} === 0 || (${o} = ${r}/${n}, ${a}))`)}};Hg.default=t8});var AN=$(Kg=>{"use strict";Object.defineProperty(Kg,"__esModule",{value:!0});function CN(t){let e=t.length,r=0,n=0,s;for(;n<e;)r++,s=t.charCodeAt(n++),s>=55296&&s<=56319&&n<e&&(s=t.charCodeAt(n),(s&64512)===56320&&n++);return r}Kg.default=CN;CN.code='require("ajv/dist/runtime/ucs2length").default'});var kN=$(Bg=>{"use strict";Object.defineProperty(Bg,"__esModule",{value:!0});var Gi=$e(),r8=qe(),n8=AN(),s8={message({keyword:t,schemaCode:e}){let r=t==="maxLength"?"more":"fewer";return(0,Gi.str)`must NOT have ${r} than ${e} characters`},params:({schemaCode:t})=>(0,Gi._)`{limit: ${t}}`},i8={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:s8,code(t){let{keyword:e,data:r,schemaCode:n,it:s}=t,i=e==="maxLength"?Gi.operators.GT:Gi.operators.LT,o=s.opts.unicode===!1?(0,Gi._)`${r}.length`:(0,Gi._)`${(0,r8.useFunc)(t.gen,n8.default)}(${r})`;t.fail$data((0,Gi._)`${o} ${i} ${n}`)}};Bg.default=i8});var qN=$(Gg=>{"use strict";Object.defineProperty(Gg,"__esModule",{value:!0});var o8=en(),$d=$e(),a8={message:({schemaCode:t})=>(0,$d.str)`must match pattern "${t}"`,params:({schemaCode:t})=>(0,$d._)`{pattern: ${t}}`},u8={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:a8,code(t){let{data:e,$data:r,schema:n,schemaCode:s,it:i}=t,o=i.opts.unicodeRegExp?"u":"",a=r?(0,$d._)`(new RegExp(${s}, ${o}))`:(0,o8.usePattern)(t,n);t.fail$data((0,$d._)`!${a}.test(${e})`)}};Gg.default=u8});var jN=$(Jg=>{"use strict";Object.defineProperty(Jg,"__esModule",{value:!0});var Bu=$e(),l8={message({keyword:t,schemaCode:e}){let r=t==="maxProperties"?"more":"fewer";return(0,Bu.str)`must NOT have ${r} than ${e} properties`},params:({schemaCode:t})=>(0,Bu._)`{limit: ${t}}`},c8={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:l8,code(t){let{keyword:e,data:r,schemaCode:n}=t,s=e==="maxProperties"?Bu.operators.GT:Bu.operators.LT;t.fail$data((0,Bu._)`Object.keys(${r}).length ${s} ${n}`)}};Jg.default=c8});var DN=$(Yg=>{"use strict";Object.defineProperty(Yg,"__esModule",{value:!0});var Gu=en(),Ju=$e(),f8=qe(),d8={message:({params:{missingProperty:t}})=>(0,Ju.str)`must have required property '${t}'`,params:({params:{missingProperty:t}})=>(0,Ju._)`{missingProperty: ${t}}`},h8={keyword:"required",type:"object",schemaType:"array",$data:!0,error:d8,code(t){let{gen:e,schema:r,schemaCode:n,data:s,$data:i,it:o}=t,{opts:a}=o;if(!i&&r.length===0)return;let u=r.length>=a.loopRequired;if(o.allErrors?l():c(),a.strictRequired){let d=t.parentSchema.properties,{definedProperties:p}=t.it;for(let m of r)if(d?.[m]===void 0&&!p.has(m)){let v=o.schemaEnv.baseId+o.errSchemaPath,g=`required property "${m}" is not defined at "${v}" (strictRequired)`;(0,f8.checkStrictMode)(o,g,o.opts.strictRequired)}}function l(){if(u||i)t.block$data(Ju.nil,f);else for(let d of r)(0,Gu.checkReportMissingProp)(t,d)}function c(){let d=e.let("missing");if(u||i){let p=e.let("valid",!0);t.block$data(p,()=>h(d,p)),t.ok(p)}else e.if((0,Gu.checkMissingProp)(t,r,d)),(0,Gu.reportMissingProp)(t,d),e.else()}function f(){e.forOf("prop",n,d=>{t.setParams({missingProperty:d}),e.if((0,Gu.noPropertyInData)(e,s,d,a.ownProperties),()=>t.error())})}function h(d,p){t.setParams({missingProperty:d}),e.forOf(d,n,()=>{e.assign(p,(0,Gu.propertyInData)(e,s,d,a.ownProperties)),e.if((0,Ju.not)(p),()=>{t.error(),e.break()})},Ju.nil)}}};Yg.default=h8});var LN=$(Wg=>{"use strict";Object.defineProperty(Wg,"__esModule",{value:!0});var Yu=$e(),p8={message({keyword:t,schemaCode:e}){let r=t==="maxItems"?"more":"fewer";return(0,Yu.str)`must NOT have ${r} than ${e} items`},params:({schemaCode:t})=>(0,Yu._)`{limit: ${t}}`},m8={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:p8,code(t){let{keyword:e,data:r,schemaCode:n}=t,s=e==="maxItems"?Yu.operators.GT:Yu.operators.LT;t.fail$data((0,Yu._)`${r}.length ${s} ${n}`)}};Wg.default=m8});var xN=$(Qg=>{"use strict";Object.defineProperty(Qg,"__esModule",{value:!0});var Xg=Lu(),Kt=$e(),y8=qe(),g8=Pu(),_8={message:({params:{i:t,j:e}})=>(0,Kt.str)`must NOT have duplicate items (items ## ${e} and ${t} are identical)`,params:({params:{i:t,j:e}})=>(0,Kt._)`{i: ${t}, j: ${e}}`},v8={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:_8,code(t){let{gen:e,data:r,$data:n,schema:s,parentSchema:i,schemaCode:o,it:a}=t;if(!n&&!s)return;let u=e.let("valid"),l=i.items?(0,Xg.getSchemaTypes)(i.items):[];t.block$data(u,c,(0,Kt._)`${o} === false`),t.ok(u);function c(){let p=e.let("i",(0,Kt._)`${r}.length`),m=e.let("j");t.setParams({i:p,j:m}),e.assign(u,!0),e.if((0,Kt._)`${p} > 1`,()=>(f()?h:d)(p,m))}function f(){return l.length>0&&!l.some(p=>p==="object"||p==="array")}function h(p,m){let v=e.name("item"),g=(0,Xg.checkDataTypes)(l,v,a.opts.strictNumbers,Xg.DataType.Wrong),w=e.const("indices",(0,Kt._)`{}`);e.for((0,Kt._)`;${p}--;`,()=>{e.let(v,(0,Kt._)`${r}[${p}]`),e.if(g,(0,Kt._)`continue`),l.length>1&&e.if((0,Kt._)`typeof ${v} == "string"`,(0,Kt._)`${v} += "_"`),e.if((0,Kt._)`typeof ${w}[${v}] == "number"`,()=>{e.assign(m,(0,Kt._)`${w}[${v}]`),t.error(),e.assign(u,!1).break()}).code((0,Kt._)`${w}[${v}] = ${p}`)})}function d(p,m){let v=(0,y8.useFunc)(e,g8.default),g=e.name("outer");e.label(g).for((0,Kt._)`;${p}--;`,()=>e.for((0,Kt._)`${m} = ${p}; ${m}--;`,()=>e.if((0,Kt._)`${v}(${r}[${p}], ${r}[${m}])`,()=>{t.error(),e.assign(u,!1).break(g)})))}}};Qg.default=v8});var FN=$(e0=>{"use strict";Object.defineProperty(e0,"__esModule",{value:!0});var Zg=$e(),$8=qe(),b8=Pu(),w8={message:"must be equal to constant",params:({schemaCode:t})=>(0,Zg._)`{allowedValue: ${t}}`},E8={keyword:"const",$data:!0,error:w8,code(t){let{gen:e,data:r,$data:n,schemaCode:s,schema:i}=t;n||i&&typeof i=="object"?t.fail$data((0,Zg._)`!${(0,$8.useFunc)(e,b8.default)}(${r}, ${s})`):t.fail((0,Zg._)`${i} !== ${r}`)}};e0.default=E8});var MN=$(t0=>{"use strict";Object.defineProperty(t0,"__esModule",{value:!0});var Wu=$e(),S8=qe(),R8=Pu(),P8={message:"must be equal to one of the allowed values",params:({schemaCode:t})=>(0,Wu._)`{allowedValues: ${t}}`},T8={keyword:"enum",schemaType:"array",$data:!0,error:P8,code(t){let{gen:e,data:r,$data:n,schema:s,schemaCode:i,it:o}=t;if(!n&&s.length===0)throw new Error("enum must have non-empty array");let a=s.length>=o.opts.loopEnum,u,l=()=>u??(u=(0,S8.useFunc)(e,R8.default)),c;if(a||n)c=e.let("valid"),t.block$data(c,f);else{if(!Array.isArray(s))throw new Error("ajv implementation error");let d=e.const("vSchema",i);c=(0,Wu.or)(...s.map((p,m)=>h(d,m)))}t.pass(c);function f(){e.assign(c,!1),e.forOf("v",i,d=>e.if((0,Wu._)`${l()}(${r}, ${d})`,()=>e.assign(c,!0).break()))}function h(d,p){let m=s[p];return typeof m=="object"&&m!==null?(0,Wu._)`${l()}(${r}, ${d}[${p}])`:(0,Wu._)`${r} === ${m}`}}};t0.default=T8});var VN=$(r0=>{"use strict";Object.defineProperty(r0,"__esModule",{value:!0});var O8=NN(),N8=IN(),I8=kN(),C8=qN(),A8=jN(),k8=DN(),q8=LN(),j8=xN(),D8=FN(),L8=MN(),x8=[O8.default,N8.default,I8.default,C8.default,A8.default,k8.default,q8.default,j8.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},D8.default,L8.default];r0.default=x8});var s0=$(Xu=>{"use strict";Object.defineProperty(Xu,"__esModule",{value:!0});Xu.validateAdditionalItems=void 0;var Ji=$e(),n0=qe(),F8={message:({params:{len:t}})=>(0,Ji.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,Ji._)`{limit: ${t}}`},M8={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:F8,code(t){let{parentSchema:e,it:r}=t,{items:n}=e;if(!Array.isArray(n)){(0,n0.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}zN(t,n)}};function zN(t,e){let{gen:r,schema:n,data:s,keyword:i,it:o}=t;o.items=!0;let a=r.const("len",(0,Ji._)`${s}.length`);if(n===!1)t.setParams({len:e.length}),t.pass((0,Ji._)`${a} <= ${e.length}`);else if(typeof n=="object"&&!(0,n0.alwaysValidSchema)(o,n)){let l=r.var("valid",(0,Ji._)`${a} <= ${e.length}`);r.if((0,Ji.not)(l),()=>u(l)),t.ok(l)}function u(l){r.forRange("i",e.length,a,c=>{t.subschema({keyword:i,dataProp:c,dataPropType:n0.Type.Num},l),o.allErrors||r.if((0,Ji.not)(l),()=>r.break())})}}Xu.validateAdditionalItems=zN;Xu.default=M8});var i0=$(Qu=>{"use strict";Object.defineProperty(Qu,"__esModule",{value:!0});Qu.validateTuple=void 0;var UN=$e(),bd=qe(),V8=en(),z8={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(t){let{schema:e,it:r}=t;if(Array.isArray(e))return HN(t,"additionalItems",e);r.items=!0,!(0,bd.alwaysValidSchema)(r,e)&&t.ok((0,V8.validateArray)(t))}};function HN(t,e,r=t.schema){let{gen:n,parentSchema:s,data:i,keyword:o,it:a}=t;c(s),a.opts.unevaluated&&r.length&&a.items!==!0&&(a.items=bd.mergeEvaluated.items(n,r.length,a.items));let u=n.name("valid"),l=n.const("len",(0,UN._)`${i}.length`);r.forEach((f,h)=>{(0,bd.alwaysValidSchema)(a,f)||(n.if((0,UN._)`${l} > ${h}`,()=>t.subschema({keyword:o,schemaProp:h,dataProp:h},u)),t.ok(u))});function c(f){let{opts:h,errSchemaPath:d}=a,p=r.length,m=p===f.minItems&&(p===f.maxItems||f[e]===!1);if(h.strictTuples&&!m){let v=`"${o}" is ${p}-tuple, but minItems or maxItems/${e} are not specified or different at path "${d}"`;(0,bd.checkStrictMode)(a,v,h.strictTuples)}}}Qu.validateTuple=HN;Qu.default=z8});var KN=$(o0=>{"use strict";Object.defineProperty(o0,"__esModule",{value:!0});var U8=i0(),H8={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:t=>(0,U8.validateTuple)(t,"items")};o0.default=H8});var GN=$(a0=>{"use strict";Object.defineProperty(a0,"__esModule",{value:!0});var BN=$e(),K8=qe(),B8=en(),G8=s0(),J8={message:({params:{len:t}})=>(0,BN.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,BN._)`{limit: ${t}}`},Y8={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:J8,code(t){let{schema:e,parentSchema:r,it:n}=t,{prefixItems:s}=r;n.items=!0,!(0,K8.alwaysValidSchema)(n,e)&&(s?(0,G8.validateAdditionalItems)(t,s):t.ok((0,B8.validateArray)(t)))}};a0.default=Y8});var JN=$(u0=>{"use strict";Object.defineProperty(u0,"__esModule",{value:!0});var rn=$e(),wd=qe(),W8={message:({params:{min:t,max:e}})=>e===void 0?(0,rn.str)`must contain at least ${t} valid item(s)`:(0,rn.str)`must contain at least ${t} and no more than ${e} valid item(s)`,params:({params:{min:t,max:e}})=>e===void 0?(0,rn._)`{minContains: ${t}}`:(0,rn._)`{minContains: ${t}, maxContains: ${e}}`},X8={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:W8,code(t){let{gen:e,schema:r,parentSchema:n,data:s,it:i}=t,o,a,{minContains:u,maxContains:l}=n;i.opts.next?(o=u===void 0?1:u,a=l):o=1;let c=e.const("len",(0,rn._)`${s}.length`);if(t.setParams({min:o,max:a}),a===void 0&&o===0){(0,wd.checkStrictMode)(i,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,wd.checkStrictMode)(i,'"minContains" > "maxContains" is always invalid'),t.fail();return}if((0,wd.alwaysValidSchema)(i,r)){let m=(0,rn._)`${c} >= ${o}`;a!==void 0&&(m=(0,rn._)`${m} && ${c} <= ${a}`),t.pass(m);return}i.items=!0;let f=e.name("valid");a===void 0&&o===1?d(f,()=>e.if(f,()=>e.break())):o===0?(e.let(f,!0),a!==void 0&&e.if((0,rn._)`${s}.length > 0`,h)):(e.let(f,!1),h()),t.result(f,()=>t.reset());function h(){let m=e.name("_valid"),v=e.let("count",0);d(m,()=>e.if(m,()=>p(v)))}function d(m,v){e.forRange("i",0,c,g=>{t.subschema({keyword:"contains",dataProp:g,dataPropType:wd.Type.Num,compositeRule:!0},m),v()})}function p(m){e.code((0,rn._)`${m}++`),a===void 0?e.if((0,rn._)`${m} >= ${o}`,()=>e.assign(f,!0).break()):(e.if((0,rn._)`${m} > ${a}`,()=>e.assign(f,!1).break()),o===1?e.assign(f,!0):e.if((0,rn._)`${m} >= ${o}`,()=>e.assign(f,!0)))}}};u0.default=X8});var XN=$(Hn=>{"use strict";Object.defineProperty(Hn,"__esModule",{value:!0});Hn.validateSchemaDeps=Hn.validatePropertyDeps=Hn.error=void 0;var l0=$e(),Q8=qe(),Zu=en();Hn.error={message:({params:{property:t,depsCount:e,deps:r}})=>{let n=e===1?"property":"properties";return(0,l0.str)`must have ${n} ${r} when property ${t} is present`},params:({params:{property:t,depsCount:e,deps:r,missingProperty:n}})=>(0,l0._)`{property: ${t},
    missingProperty: ${n},
    depsCount: ${e},
    deps: ${r}}`};var Z8={keyword:"dependencies",type:"object",schemaType:"object",error:Hn.error,code(t){let[e,r]=eJ(t);YN(t,e),WN(t,r)}};function eJ({schema:t}){let e={},r={};for(let n in t){if(n==="__proto__")continue;let s=Array.isArray(t[n])?e:r;s[n]=t[n]}return[e,r]}function YN(t,e=t.schema){let{gen:r,data:n,it:s}=t;if(Object.keys(e).length===0)return;let i=r.let("missing");for(let o in e){let a=e[o];if(a.length===0)continue;let u=(0,Zu.propertyInData)(r,n,o,s.opts.ownProperties);t.setParams({property:o,depsCount:a.length,deps:a.join(", ")}),s.allErrors?r.if(u,()=>{for(let l of a)(0,Zu.checkReportMissingProp)(t,l)}):(r.if((0,l0._)`${u} && (${(0,Zu.checkMissingProp)(t,a,i)})`),(0,Zu.reportMissingProp)(t,i),r.else())}}Hn.validatePropertyDeps=YN;function WN(t,e=t.schema){let{gen:r,data:n,keyword:s,it:i}=t,o=r.name("valid");for(let a in e)(0,Q8.alwaysValidSchema)(i,e[a])||(r.if((0,Zu.propertyInData)(r,n,a,i.opts.ownProperties),()=>{let u=t.subschema({keyword:s,schemaProp:a},o);t.mergeValidEvaluated(u,o)},()=>r.var(o,!0)),t.ok(o))}Hn.validateSchemaDeps=WN;Hn.default=Z8});var ZN=$(c0=>{"use strict";Object.defineProperty(c0,"__esModule",{value:!0});var QN=$e(),tJ=qe(),rJ={message:"property name must be valid",params:({params:t})=>(0,QN._)`{propertyName: ${t.propertyName}}`},nJ={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:rJ,code(t){let{gen:e,schema:r,data:n,it:s}=t;if((0,tJ.alwaysValidSchema)(s,r))return;let i=e.name("valid");e.forIn("key",n,o=>{t.setParams({propertyName:o}),t.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},i),e.if((0,QN.not)(i),()=>{t.error(!0),s.allErrors||e.break()})}),t.ok(i)}};c0.default=nJ});var d0=$(f0=>{"use strict";Object.defineProperty(f0,"__esModule",{value:!0});var Ed=en(),En=$e(),sJ=ds(),Sd=qe(),iJ={message:"must NOT have additional properties",params:({params:t})=>(0,En._)`{additionalProperty: ${t.additionalProperty}}`},oJ={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:iJ,code(t){let{gen:e,schema:r,parentSchema:n,data:s,errsCount:i,it:o}=t;if(!i)throw new Error("ajv implementation error");let{allErrors:a,opts:u}=o;if(o.props=!0,u.removeAdditional!=="all"&&(0,Sd.alwaysValidSchema)(o,r))return;let l=(0,Ed.allSchemaProperties)(n.properties),c=(0,Ed.allSchemaProperties)(n.patternProperties);f(),t.ok((0,En._)`${i} === ${sJ.default.errors}`);function f(){e.forIn("key",s,v=>{!l.length&&!c.length?p(v):e.if(h(v),()=>p(v))})}function h(v){let g;if(l.length>8){let w=(0,Sd.schemaRefOrVal)(o,n.properties,"properties");g=(0,Ed.isOwnProperty)(e,w,v)}else l.length?g=(0,En.or)(...l.map(w=>(0,En._)`${v} === ${w}`)):g=En.nil;return c.length&&(g=(0,En.or)(g,...c.map(w=>(0,En._)`${(0,Ed.usePattern)(t,w)}.test(${v})`))),(0,En.not)(g)}function d(v){e.code((0,En._)`delete ${s}[${v}]`)}function p(v){if(u.removeAdditional==="all"||u.removeAdditional&&r===!1){d(v);return}if(r===!1){t.setParams({additionalProperty:v}),t.error(),a||e.break();return}if(typeof r=="object"&&!(0,Sd.alwaysValidSchema)(o,r)){let g=e.name("valid");u.removeAdditional==="failing"?(m(v,g,!1),e.if((0,En.not)(g),()=>{t.reset(),d(v)})):(m(v,g),a||e.if((0,En.not)(g),()=>e.break()))}}function m(v,g,w){let _={keyword:"additionalProperties",dataProp:v,dataPropType:Sd.Type.Str};w===!1&&Object.assign(_,{compositeRule:!0,createErrors:!1,allErrors:!1}),t.subschema(_,g)}}};f0.default=oJ});var rI=$(p0=>{"use strict";Object.defineProperty(p0,"__esModule",{value:!0});var aJ=Vu(),eI=en(),h0=qe(),tI=d0(),uJ={keyword:"properties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,parentSchema:n,data:s,it:i}=t;i.opts.removeAdditional==="all"&&n.additionalProperties===void 0&&tI.default.code(new aJ.KeywordCxt(i,tI.default,"additionalProperties"));let o=(0,eI.allSchemaProperties)(r);for(let f of o)i.definedProperties.add(f);i.opts.unevaluated&&o.length&&i.props!==!0&&(i.props=h0.mergeEvaluated.props(e,(0,h0.toHash)(o),i.props));let a=o.filter(f=>!(0,h0.alwaysValidSchema)(i,r[f]));if(a.length===0)return;let u=e.name("valid");for(let f of a)l(f)?c(f):(e.if((0,eI.propertyInData)(e,s,f,i.opts.ownProperties)),c(f),i.allErrors||e.else().var(u,!0),e.endIf()),t.it.definedProperties.add(f),t.ok(u);function l(f){return i.opts.useDefaults&&!i.compositeRule&&r[f].default!==void 0}function c(f){t.subschema({keyword:"properties",schemaProp:f,dataProp:f},u)}}};p0.default=uJ});var oI=$(m0=>{"use strict";Object.defineProperty(m0,"__esModule",{value:!0});var nI=en(),Rd=$e(),sI=qe(),iI=qe(),lJ={keyword:"patternProperties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,data:n,parentSchema:s,it:i}=t,{opts:o}=i,a=(0,nI.allSchemaProperties)(r),u=a.filter(m=>(0,sI.alwaysValidSchema)(i,r[m]));if(a.length===0||u.length===a.length&&(!i.opts.unevaluated||i.props===!0))return;let l=o.strictSchema&&!o.allowMatchingProperties&&s.properties,c=e.name("valid");i.props!==!0&&!(i.props instanceof Rd.Name)&&(i.props=(0,iI.evaluatedPropsToName)(e,i.props));let{props:f}=i;h();function h(){for(let m of a)l&&d(m),i.allErrors?p(m):(e.var(c,!0),p(m),e.if(c))}function d(m){for(let v in l)new RegExp(m).test(v)&&(0,sI.checkStrictMode)(i,`property ${v} matches pattern ${m} (use allowMatchingProperties)`)}function p(m){e.forIn("key",n,v=>{e.if((0,Rd._)`${(0,nI.usePattern)(t,m)}.test(${v})`,()=>{let g=u.includes(m);g||t.subschema({keyword:"patternProperties",schemaProp:m,dataProp:v,dataPropType:iI.Type.Str},c),i.opts.unevaluated&&f!==!0?e.assign((0,Rd._)`${f}[${v}]`,!0):!g&&!i.allErrors&&e.if((0,Rd.not)(c),()=>e.break())})})}}};m0.default=lJ});var aI=$(y0=>{"use strict";Object.defineProperty(y0,"__esModule",{value:!0});var cJ=qe(),fJ={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(t){let{gen:e,schema:r,it:n}=t;if((0,cJ.alwaysValidSchema)(n,r)){t.fail();return}let s=e.name("valid");t.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},s),t.failResult(s,()=>t.reset(),()=>t.error())},error:{message:"must NOT be valid"}};y0.default=fJ});var uI=$(g0=>{"use strict";Object.defineProperty(g0,"__esModule",{value:!0});var dJ=en(),hJ={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:dJ.validateUnion,error:{message:"must match a schema in anyOf"}};g0.default=hJ});var lI=$(_0=>{"use strict";Object.defineProperty(_0,"__esModule",{value:!0});var Pd=$e(),pJ=qe(),mJ={message:"must match exactly one schema in oneOf",params:({params:t})=>(0,Pd._)`{passingSchemas: ${t.passing}}`},yJ={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:mJ,code(t){let{gen:e,schema:r,parentSchema:n,it:s}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(s.opts.discriminator&&n.discriminator)return;let i=r,o=e.let("valid",!1),a=e.let("passing",null),u=e.name("_valid");t.setParams({passing:a}),e.block(l),t.result(o,()=>t.reset(),()=>t.error(!0));function l(){i.forEach((c,f)=>{let h;(0,pJ.alwaysValidSchema)(s,c)?e.var(u,!0):h=t.subschema({keyword:"oneOf",schemaProp:f,compositeRule:!0},u),f>0&&e.if((0,Pd._)`${u} && ${o}`).assign(o,!1).assign(a,(0,Pd._)`[${a}, ${f}]`).else(),e.if(u,()=>{e.assign(o,!0),e.assign(a,f),h&&t.mergeEvaluated(h,Pd.Name)})})}}};_0.default=yJ});var cI=$(v0=>{"use strict";Object.defineProperty(v0,"__esModule",{value:!0});var gJ=qe(),_J={keyword:"allOf",schemaType:"array",code(t){let{gen:e,schema:r,it:n}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");let s=e.name("valid");r.forEach((i,o)=>{if((0,gJ.alwaysValidSchema)(n,i))return;let a=t.subschema({keyword:"allOf",schemaProp:o},s);t.ok(s),t.mergeEvaluated(a)})}};v0.default=_J});var hI=$($0=>{"use strict";Object.defineProperty($0,"__esModule",{value:!0});var Td=$e(),dI=qe(),vJ={message:({params:t})=>(0,Td.str)`must match "${t.ifClause}" schema`,params:({params:t})=>(0,Td._)`{failingKeyword: ${t.ifClause}}`},$J={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:vJ,code(t){let{gen:e,parentSchema:r,it:n}=t;r.then===void 0&&r.else===void 0&&(0,dI.checkStrictMode)(n,'"if" without "then" and "else" is ignored');let s=fI(n,"then"),i=fI(n,"else");if(!s&&!i)return;let o=e.let("valid",!0),a=e.name("_valid");if(u(),t.reset(),s&&i){let c=e.let("ifClause");t.setParams({ifClause:c}),e.if(a,l("then",c),l("else",c))}else s?e.if(a,l("then")):e.if((0,Td.not)(a),l("else"));t.pass(o,()=>t.error(!0));function u(){let c=t.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);t.mergeEvaluated(c)}function l(c,f){return()=>{let h=t.subschema({keyword:c},a);e.assign(o,a),t.mergeValidEvaluated(h,o),f?e.assign(f,(0,Td._)`${c}`):t.setParams({ifClause:c})}}}};function fI(t,e){let r=t.schema[e];return r!==void 0&&!(0,dI.alwaysValidSchema)(t,r)}$0.default=$J});var pI=$(b0=>{"use strict";Object.defineProperty(b0,"__esModule",{value:!0});var bJ=qe(),wJ={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:t,parentSchema:e,it:r}){e.if===void 0&&(0,bJ.checkStrictMode)(r,`"${t}" without "if" is ignored`)}};b0.default=wJ});var mI=$(w0=>{"use strict";Object.defineProperty(w0,"__esModule",{value:!0});var EJ=s0(),SJ=KN(),RJ=i0(),PJ=GN(),TJ=JN(),OJ=XN(),NJ=ZN(),IJ=d0(),CJ=rI(),AJ=oI(),kJ=aI(),qJ=uI(),jJ=lI(),DJ=cI(),LJ=hI(),xJ=pI();function FJ(t=!1){let e=[kJ.default,qJ.default,jJ.default,DJ.default,LJ.default,xJ.default,NJ.default,IJ.default,OJ.default,CJ.default,AJ.default];return t?e.push(SJ.default,PJ.default):e.push(EJ.default,RJ.default),e.push(TJ.default),e}w0.default=FJ});var yI=$(E0=>{"use strict";Object.defineProperty(E0,"__esModule",{value:!0});var wt=$e(),MJ={message:({schemaCode:t})=>(0,wt.str)`must match format "${t}"`,params:({schemaCode:t})=>(0,wt._)`{format: ${t}}`},VJ={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:MJ,code(t,e){let{gen:r,data:n,$data:s,schema:i,schemaCode:o,it:a}=t,{opts:u,errSchemaPath:l,schemaEnv:c,self:f}=a;if(!u.validateFormats)return;s?h():d();function h(){let p=r.scopeValue("formats",{ref:f.formats,code:u.code.formats}),m=r.const("fDef",(0,wt._)`${p}[${o}]`),v=r.let("fType"),g=r.let("format");r.if((0,wt._)`typeof ${m} == "object" && !(${m} instanceof RegExp)`,()=>r.assign(v,(0,wt._)`${m}.type || "string"`).assign(g,(0,wt._)`${m}.validate`),()=>r.assign(v,(0,wt._)`"string"`).assign(g,m)),t.fail$data((0,wt.or)(w(),_()));function w(){return u.strictSchema===!1?wt.nil:(0,wt._)`${o} && !${g}`}function _(){let y=c.$async?(0,wt._)`(${m}.async ? await ${g}(${n}) : ${g}(${n}))`:(0,wt._)`${g}(${n})`,b=(0,wt._)`(typeof ${g} == "function" ? ${y} : ${g}.test(${n}))`;return(0,wt._)`${g} && ${g} !== true && ${v} === ${e} && !${b}`}}function d(){let p=f.formats[i];if(!p){w();return}if(p===!0)return;let[m,v,g]=_(p);m===e&&t.pass(y());function w(){if(u.strictSchema===!1){f.logger.warn(b());return}throw new Error(b());function b(){return`unknown format "${i}" ignored in schema at path "${l}"`}}function _(b){let T=b instanceof RegExp?(0,wt.regexpCode)(b):u.code.formats?(0,wt._)`${u.code.formats}${(0,wt.getProperty)(i)}`:void 0,S=r.scopeValue("formats",{key:i,ref:b,code:T});return typeof b=="object"&&!(b instanceof RegExp)?[b.type||"string",b.validate,(0,wt._)`${S}.validate`]:["string",b,S]}function y(){if(typeof p=="object"&&!(p instanceof RegExp)&&p.async){if(!c.$async)throw new Error("async format in sync schema");return(0,wt._)`await ${g}(${n})`}return typeof v=="function"?(0,wt._)`${g}(${n})`:(0,wt._)`${g}.test(${n})`}}}};E0.default=VJ});var gI=$(S0=>{"use strict";Object.defineProperty(S0,"__esModule",{value:!0});var zJ=yI(),UJ=[zJ.default];S0.default=UJ});var _I=$(ra=>{"use strict";Object.defineProperty(ra,"__esModule",{value:!0});ra.contentVocabulary=ra.metadataVocabulary=void 0;ra.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];ra.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]});var $I=$(R0=>{"use strict";Object.defineProperty(R0,"__esModule",{value:!0});var HJ=ON(),KJ=VN(),BJ=mI(),GJ=gI(),vI=_I(),JJ=[HJ.default,KJ.default,(0,BJ.default)(),GJ.default,vI.metadataVocabulary,vI.contentVocabulary];R0.default=JJ});var bI=$(el=>{"use strict";Object.defineProperty(el,"__esModule",{value:!0});el.DiscrError=void 0;var YJ;(function(t){t.Tag="tag",t.Mapping="mapping"})(YJ=el.DiscrError||(el.DiscrError={}))});var EI=$(T0=>{"use strict";Object.defineProperty(T0,"__esModule",{value:!0});var na=$e(),P0=bI(),wI=dd(),WJ=qe(),XJ={message:({params:{discrError:t,tagName:e}})=>t===P0.DiscrError.Tag?`tag "${e}" must be string`:`value of tag "${e}" must be in oneOf`,params:({params:{discrError:t,tag:e,tagName:r}})=>(0,na._)`{error: ${t}, tag: ${r}, tagValue: ${e}}`},QJ={keyword:"discriminator",type:"object",schemaType:"object",error:XJ,code(t){let{gen:e,data:r,schema:n,parentSchema:s,it:i}=t,{oneOf:o}=s;if(!i.opts.discriminator)throw new Error("discriminator: requires discriminator option");let a=n.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(n.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");let u=e.let("valid",!1),l=e.const("tag",(0,na._)`${r}${(0,na.getProperty)(a)}`);e.if((0,na._)`typeof ${l} == "string"`,()=>c(),()=>t.error(!1,{discrError:P0.DiscrError.Tag,tag:l,tagName:a})),t.ok(u);function c(){let d=h();e.if(!1);for(let p in d)e.elseIf((0,na._)`${l} === ${p}`),e.assign(u,f(d[p]));e.else(),t.error(!1,{discrError:P0.DiscrError.Mapping,tag:l,tagName:a}),e.endIf()}function f(d){let p=e.name("valid"),m=t.subschema({keyword:"oneOf",schemaProp:d},p);return t.mergeEvaluated(m,na.Name),p}function h(){var d;let p={},m=g(s),v=!0;for(let y=0;y<o.length;y++){let b=o[y];b?.$ref&&!(0,WJ.schemaHasRulesButRef)(b,i.self.RULES)&&(b=wI.resolveRef.call(i.self,i.schemaEnv.root,i.baseId,b?.$ref),b instanceof wI.SchemaEnv&&(b=b.schema));let T=(d=b?.properties)===null||d===void 0?void 0:d[a];if(typeof T!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);v=v&&(m||g(b)),w(T,y)}if(!v)throw new Error(`discriminator: "${a}" must be required`);return p;function g({required:y}){return Array.isArray(y)&&y.includes(a)}function w(y,b){if(y.const)_(y.const,b);else if(y.enum)for(let T of y.enum)_(T,b);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function _(y,b){if(typeof y!="string"||y in p)throw new Error(`discriminator: "${a}" values must be unique strings`);p[y]=b}}}};T0.default=QJ});var SI=$(($pe,ZJ)=>{ZJ.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var TI=$((mt,PI)=>{"use strict";Object.defineProperty(mt,"__esModule",{value:!0});mt.MissingRefError=mt.ValidationError=mt.CodeGen=mt.Name=mt.nil=mt.stringify=mt.str=mt._=mt.KeywordCxt=void 0;var e7=wN(),t7=$I(),r7=EI(),RI=SI(),n7=["/properties"],Od="http://json-schema.org/draft-07/schema",Nd=class extends e7.default{_addVocabularies(){super._addVocabularies(),t7.default.forEach(e=>this.addVocabulary(e)),this.opts.discriminator&&this.addKeyword(r7.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;let e=this.opts.$data?this.$dataMetaSchema(RI,n7):RI;this.addMetaSchema(e,Od,!1),this.refs["http://json-schema.org/schema"]=Od}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(Od)?Od:void 0)}};PI.exports=mt=Nd;Object.defineProperty(mt,"__esModule",{value:!0});mt.default=Nd;var s7=Vu();Object.defineProperty(mt,"KeywordCxt",{enumerable:!0,get:function(){return s7.KeywordCxt}});var sa=$e();Object.defineProperty(mt,"_",{enumerable:!0,get:function(){return sa._}});Object.defineProperty(mt,"str",{enumerable:!0,get:function(){return sa.str}});Object.defineProperty(mt,"stringify",{enumerable:!0,get:function(){return sa.stringify}});Object.defineProperty(mt,"nil",{enumerable:!0,get:function(){return sa.nil}});Object.defineProperty(mt,"Name",{enumerable:!0,get:function(){return sa.Name}});Object.defineProperty(mt,"CodeGen",{enumerable:!0,get:function(){return sa.CodeGen}});var i7=ld();Object.defineProperty(mt,"ValidationError",{enumerable:!0,get:function(){return i7.default}});var o7=cd();Object.defineProperty(mt,"MissingRefError",{enumerable:!0,get:function(){return o7.default}})});var NI=$((bpe,OI)=>{"use strict";var a7={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};OI.exports={HEX:a7}});var LI=$((wpe,DI)=>{"use strict";var{HEX:u7}=NI();function kI(t){if(jI(t,".")<3)return{host:t,isIPV4:!1};let e=t.match(/^(\b25[0-5]|\b2[0-4][0-9]|\b[01]?[0-9][0-9]?)(\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)||[],[r]=e;return r?{host:c7(r,"."),isIPV4:!0}:{host:t,isIPV4:!1}}function O0(t){let e="",r=!0;for(let n of t){if(n!=="0"&&r===!0&&(r=!1),u7[n]===void 0)return;r||(e+=n)}return e}function l7(t){let e=0,r={error:!1,address:"",zone:""},n=[],s=[],i=!1,o=!1,a=!1;function u(){if(s.length){if(i===!1){let l=O0(s.join(""));if(l!==void 0)n.push(l);else return r.error=!0,!1}s.length=0}return!0}for(let l=0;l<t.length;l++){let c=t[l];if(!(c==="["||c==="]"))if(c===":"){if(o===!0&&(a=!0),!u())break;if(e++,n.push(":"),e>7){r.error=!0;break}l-1>=0&&t[l-1]===":"&&(o=!0);continue}else if(c==="%"){if(!u())break;i=!0}else{s.push(c);continue}}return s.length&&(i?r.zone=s.join(""):a?n.push(s.join("")):n.push(O0(s.join("")))),r.address=n.join(""),r}function qI(t,e={}){if(jI(t,":")<2)return{host:t,isIPV6:!1};let r=l7(t);if(r.error)return{host:t,isIPV6:!1};{let n=r.address,s=r.address;return r.zone&&(n+="%"+r.zone,s+="%25"+r.zone),{host:n,escapedHost:s,isIPV6:!0}}}function c7(t,e){let r="",n=!0,s=t.length;for(let i=0;i<s;i++){let o=t[i];o==="0"&&n?(i+1<=s&&t[i+1]===e||i+1===s)&&(r+=o,n=!1):(o===e?n=!0:n=!1,r+=o)}return r}function jI(t,e){let r=0;for(let n=0;n<t.length;n++)t[n]===e&&r++;return r}var II=/^\.\.?\//,CI=/^\/\.(\/|$)/,AI=/^\/\.\.(\/|$)/,f7=/^\/?(?:.|\n)*?(?=\/|$)/;function d7(t){let e=[];for(;t.length;)if(t.match(II))t=t.replace(II,"");else if(t.match(CI))t=t.replace(CI,"/");else if(t.match(AI))t=t.replace(AI,"/"),e.pop();else if(t==="."||t==="..")t="";else{let r=t.match(f7);if(r){let n=r[0];t=t.slice(n.length),e.push(n)}else throw new Error("Unexpected dot segment condition")}return e.join("")}function h7(t,e){let r=e!==!0?escape:unescape;return t.scheme!==void 0&&(t.scheme=r(t.scheme)),t.userinfo!==void 0&&(t.userinfo=r(t.userinfo)),t.host!==void 0&&(t.host=r(t.host)),t.path!==void 0&&(t.path=r(t.path)),t.query!==void 0&&(t.query=r(t.query)),t.fragment!==void 0&&(t.fragment=r(t.fragment)),t}function p7(t,e){let r=[];if(t.userinfo!==void 0&&(r.push(t.userinfo),r.push("@")),t.host!==void 0){let n=unescape(t.host),s=kI(n);if(s.isIPV4)n=s.host;else{let i=qI(s.host,{isIPV4:!1});i.isIPV6===!0?n=`[${i.escapedHost}]`:n=t.host}r.push(n)}return(typeof t.port=="number"||typeof t.port=="string")&&(r.push(":"),r.push(String(t.port))),r.length?r.join(""):void 0}DI.exports={recomposeAuthority:p7,normalizeComponentEncoding:h7,removeDotSegments:d7,normalizeIPv4:kI,normalizeIPv6:qI,stringToHexStripped:O0}});var UI=$((Epe,zI)=>{"use strict";var m7=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,y7=/([A-Za-z0-9][A-Za-z0-9-]{0,31}):(([A-Za-z0-9()+,\-.:=@;$_!*']|%[0-9A-Fa-f]{2})+)/;function xI(t){return typeof t.secure=="boolean"?t.secure:String(t.scheme).toLowerCase()==="wss"}function FI(t){return t.host||(t.error=t.error||"HTTP URIs must have a host."),t}function MI(t){let e=String(t.scheme).toLowerCase()==="https";return(t.port===(e?443:80)||t.port==="")&&(t.port=void 0),t.path||(t.path="/"),t}function g7(t){return t.secure=xI(t),t.resourceName=(t.path||"/")+(t.query?"?"+t.query:""),t.path=void 0,t.query=void 0,t}function _7(t){if((t.port===(xI(t)?443:80)||t.port==="")&&(t.port=void 0),typeof t.secure=="boolean"&&(t.scheme=t.secure?"wss":"ws",t.secure=void 0),t.resourceName){let[e,r]=t.resourceName.split("?");t.path=e&&e!=="/"?e:void 0,t.query=r,t.resourceName=void 0}return t.fragment=void 0,t}function v7(t,e){if(!t.path)return t.error="URN can not be parsed",t;let r=t.path.match(y7);if(r){let n=e.scheme||t.scheme||"urn";t.nid=r[1].toLowerCase(),t.nss=r[2];let s=`${n}:${e.nid||t.nid}`,i=N0[s];t.path=void 0,i&&(t=i.parse(t,e))}else t.error=t.error||"URN can not be parsed.";return t}function $7(t,e){let r=e.scheme||t.scheme||"urn",n=t.nid.toLowerCase(),s=`${r}:${e.nid||n}`,i=N0[s];i&&(t=i.serialize(t,e));let o=t,a=t.nss;return o.path=`${n||e.nid}:${a}`,e.skipEscape=!0,o}function b7(t,e){let r=t;return r.uuid=r.nss,r.nss=void 0,!e.tolerant&&(!r.uuid||!m7.test(r.uuid))&&(r.error=r.error||"UUID is not valid."),r}function w7(t){let e=t;return e.nss=(t.uuid||"").toLowerCase(),e}var VI={scheme:"http",domainHost:!0,parse:FI,serialize:MI},E7={scheme:"https",domainHost:VI.domainHost,parse:FI,serialize:MI},Id={scheme:"ws",domainHost:!0,parse:g7,serialize:_7},S7={scheme:"wss",domainHost:Id.domainHost,parse:Id.parse,serialize:Id.serialize},R7={scheme:"urn",parse:v7,serialize:$7,skipNormalize:!0},P7={scheme:"urn:uuid",parse:b7,serialize:w7,skipNormalize:!0},N0={http:VI,https:E7,ws:Id,wss:S7,urn:R7,"urn:uuid":P7};zI.exports=N0});var C0=$((Spe,Ad)=>{"use strict";var T7=require("url"),{normalizeIPv6:O7,normalizeIPv4:N7,removeDotSegments:tl,recomposeAuthority:I7,normalizeComponentEncoding:Cd}=LI(),HI=UI();function C7(t,e){return typeof t=="string"?t=Kn(ps(t,e),e):typeof t=="object"&&(t=ps(Kn(t,e),e)),t}function A7(t,e,r){let n=Object.assign({scheme:"null"},r),s=KI(ps(t,n),ps(e,n),n,!0);return Kn(s,{...n,skipEscape:!0})}function KI(t,e,r,n){let s={};return n||(t=ps(Kn(t,r),r),e=ps(Kn(e,r),r)),r=r||{},!r.tolerant&&e.scheme?(s.scheme=e.scheme,s.userinfo=e.userinfo,s.host=e.host,s.port=e.port,s.path=tl(e.path||""),s.query=e.query):(e.userinfo!==void 0||e.host!==void 0||e.port!==void 0?(s.userinfo=e.userinfo,s.host=e.host,s.port=e.port,s.path=tl(e.path||""),s.query=e.query):(e.path?(e.path.charAt(0)==="/"?s.path=tl(e.path):((t.userinfo!==void 0||t.host!==void 0||t.port!==void 0)&&!t.path?s.path="/"+e.path:t.path?s.path=t.path.slice(0,t.path.lastIndexOf("/")+1)+e.path:s.path=e.path,s.path=tl(s.path)),s.query=e.query):(s.path=t.path,e.query!==void 0?s.query=e.query:s.query=t.query),s.userinfo=t.userinfo,s.host=t.host,s.port=t.port),s.scheme=t.scheme),s.fragment=e.fragment,s}function k7(t,e,r){return typeof t=="string"?(t=unescape(t),t=Kn(Cd(ps(t,r),!0),{...r,skipEscape:!0})):typeof t=="object"&&(t=Kn(Cd(t,!0),{...r,skipEscape:!0})),typeof e=="string"?(e=unescape(e),e=Kn(Cd(ps(e,r),!0),{...r,skipEscape:!0})):typeof e=="object"&&(e=Kn(Cd(e,!0),{...r,skipEscape:!0})),t.toLowerCase()===e.toLowerCase()}function Kn(t,e){let r={host:t.host,scheme:t.scheme,userinfo:t.userinfo,port:t.port,path:t.path,query:t.query,nid:t.nid,nss:t.nss,uuid:t.uuid,fragment:t.fragment,reference:t.reference,resourceName:t.resourceName,secure:t.secure,error:""},n=Object.assign({},e),s=[],i=HI[(n.scheme||r.scheme||"").toLowerCase()];i&&i.serialize&&i.serialize(r,n),r.path!==void 0&&(n.skipEscape?r.path=unescape(r.path):(r.path=escape(r.path),r.scheme!==void 0&&(r.path=r.path.split("%3A").join(":")))),n.reference!=="suffix"&&r.scheme&&(s.push(r.scheme),s.push(":"));let o=I7(r,n);if(o!==void 0&&(n.reference!=="suffix"&&s.push("//"),s.push(o),r.path&&r.path.charAt(0)!=="/"&&s.push("/")),r.path!==void 0){let a=r.path;!n.absolutePath&&(!i||!i.absolutePath)&&(a=tl(a)),o===void 0&&(a=a.replace(/^\/\//,"/%2F")),s.push(a)}return r.query!==void 0&&(s.push("?"),s.push(r.query)),r.fragment!==void 0&&(s.push("#"),s.push(r.fragment)),s.join("")}var q7=/^(?:([^:/?#]+):)?(?:\/\/((?:([^/?#@]*)@)?(\[[^/?#\]]+\]|[^/?#:]*)(?::(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i;function ps(t,e){let r=Object.assign({},e),n={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},s=t.indexOf("%")!==-1;r.reference==="suffix"&&(t=(r.scheme?r.scheme+":":"")+"//"+t);let i=t.match(q7);if(i){if(n.scheme=i[1],n.userinfo=i[3],n.host=i[4],n.port=parseInt(i[5],10),n.path=i[6]||"",n.query=i[7],n.fragment=i[8],isNaN(n.port)&&(n.port=i[5]),n.host){let a=N7(n.host);a.isIPV4===!1?n.host=O7(a.host,{isIPV4:!1}).host.toLowerCase():n.host=a.host}n.scheme===void 0&&n.userinfo===void 0&&n.host===void 0&&n.port===void 0&&!n.path&&n.query===void 0?n.reference="same-document":n.scheme===void 0?n.reference="relative":n.fragment===void 0?n.reference="absolute":n.reference="uri",r.reference&&r.reference!=="suffix"&&r.reference!==n.reference&&(n.error=n.error||"URI is not a "+r.reference+" reference.");let o=HI[(r.scheme||n.scheme||"").toLowerCase()];if(!r.unicodeSupport&&(!o||!o.unicodeSupport)&&n.host&&(r.domainHost||o&&o.domainHost))try{n.host=T7.domainToASCII(n.host.toLowerCase())}catch(a){n.error=n.error||"Host's domain name can not be converted to ASCII: "+a}(!o||o&&!o.skipNormalize)&&(s&&n.scheme!==void 0&&(n.scheme=unescape(n.scheme)),s&&n.userinfo!==void 0&&(n.userinfo=unescape(n.userinfo)),s&&n.host!==void 0&&(n.host=unescape(n.host)),n.path!==void 0&&n.path.length&&(n.path=encodeURI(n.path)),n.fragment!==void 0&&n.fragment.length&&(n.fragment=encodeURI(decodeURI(n.fragment)))),o&&o.parse&&o.parse(n,r)}else n.error=n.error||"URI can not be parsed.";return n}var I0={normalize:C7,resolve:A7,resolveComponents:KI,equal:k7,serialize:Kn,parse:ps};Ad.exports=I0;Ad.exports.default=I0;Ad.exports.fastUri=I0});var sl=$(je=>{"use strict";Object.defineProperty(je,"__esModule",{value:!0});je.regexpCode=je.getEsmExportName=je.getProperty=je.safeStringify=je.stringify=je.strConcat=je.addCodeArg=je.str=je._=je.nil=je._Code=je.Name=je.IDENTIFIER=je._CodeOrName=void 0;var rl=class{};je._CodeOrName=rl;je.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var Yi=class extends rl{constructor(e){if(super(),!je.IDENTIFIER.test(e))throw new Error("CodeGen: name must be a valid identifier");this.str=e}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}};je.Name=Yi;var nn=class extends rl{constructor(e){super(),this._items=typeof e=="string"?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;let e=this._items[0];return e===""||e==='""'}get str(){var e;return(e=this._str)!==null&&e!==void 0?e:this._str=this._items.reduce((r,n)=>`${r}${n}`,"")}get names(){var e;return(e=this._names)!==null&&e!==void 0?e:this._names=this._items.reduce((r,n)=>(n instanceof Yi&&(r[n.str]=(r[n.str]||0)+1),r),{})}};je._Code=nn;je.nil=new nn("");function BI(t,...e){let r=[t[0]],n=0;for(;n<e.length;)k0(r,e[n]),r.push(t[++n]);return new nn(r)}je._=BI;var A0=new nn("+");function GI(t,...e){let r=[nl(t[0])],n=0;for(;n<e.length;)r.push(A0),k0(r,e[n]),r.push(A0,nl(t[++n]));return j7(r),new nn(r)}je.str=GI;function k0(t,e){e instanceof nn?t.push(...e._items):e instanceof Yi?t.push(e):t.push(x7(e))}je.addCodeArg=k0;function j7(t){let e=1;for(;e<t.length-1;){if(t[e]===A0){let r=D7(t[e-1],t[e+1]);if(r!==void 0){t.splice(e-1,3,r);continue}t[e++]="+"}e++}}function D7(t,e){if(e==='""')return t;if(t==='""')return e;if(typeof t=="string")return e instanceof Yi||t[t.length-1]!=='"'?void 0:typeof e!="string"?`${t.slice(0,-1)}${e}"`:e[0]==='"'?t.slice(0,-1)+e.slice(1):void 0;if(typeof e=="string"&&e[0]==='"'&&!(t instanceof Yi))return`"${t}${e.slice(1)}`}function L7(t,e){return e.emptyStr()?t:t.emptyStr()?e:GI`${t}${e}`}je.strConcat=L7;function x7(t){return typeof t=="number"||typeof t=="boolean"||t===null?t:nl(Array.isArray(t)?t.join(","):t)}function F7(t){return new nn(nl(t))}je.stringify=F7;function nl(t){return JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}je.safeStringify=nl;function M7(t){return typeof t=="string"&&je.IDENTIFIER.test(t)?new nn(`.${t}`):BI`[${t}]`}je.getProperty=M7;function V7(t){if(typeof t=="string"&&je.IDENTIFIER.test(t))return new nn(`${t}`);throw new Error(`CodeGen: invalid export name: ${t}, use explicit $id name mapping`)}je.getEsmExportName=V7;function z7(t){return new nn(t.toString())}je.regexpCode=z7});var L0=$(mr=>{"use strict";Object.defineProperty(mr,"__esModule",{value:!0});mr.ValueScope=mr.ValueScopeName=mr.Scope=mr.varKinds=mr.UsedValueState=void 0;var Or=sl(),q0=class extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`),this.value=e.value}},j0;(function(t){t[t.Started=0]="Started",t[t.Completed=1]="Completed"})(j0=mr.UsedValueState||(mr.UsedValueState={}));mr.varKinds={const:new Or.Name("const"),let:new Or.Name("let"),var:new Or.Name("var")};var kd=class{constructor({prefixes:e,parent:r}={}){this._names={},this._prefixes=e,this._parent=r}toName(e){return e instanceof Or.Name?e:this.name(e)}name(e){return new Or.Name(this._newName(e))}_newName(e){let r=this._names[e]||this._nameGroup(e);return`${e}${r.index++}`}_nameGroup(e){var r,n;if(!((n=(r=this._parent)===null||r===void 0?void 0:r._prefixes)===null||n===void 0)&&n.has(e)||this._prefixes&&!this._prefixes.has(e))throw new Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}};mr.Scope=kd;var qd=class extends Or.Name{constructor(e,r){super(r),this.prefix=e}setValue(e,{property:r,itemIndex:n}){this.value=e,this.scopePath=(0,Or._)`.${new Or.Name(r)}[${n}]`}};mr.ValueScopeName=qd;var U7=(0,Or._)`\n`,D0=class extends kd{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts={...e,_n:e.lines?U7:Or.nil}}get(){return this._scope}name(e){return new qd(e,this._newName(e))}value(e,r){var n;if(r.ref===void 0)throw new Error("CodeGen: ref must be passed in value");let s=this.toName(e),{prefix:i}=s,o=(n=r.key)!==null&&n!==void 0?n:r.ref,a=this._values[i];if(a){let c=a.get(o);if(c)return c}else a=this._values[i]=new Map;a.set(o,s);let u=this._scope[i]||(this._scope[i]=[]),l=u.length;return u[l]=r.ref,s.setValue(r,{property:i,itemIndex:l}),s}getValue(e,r){let n=this._values[e];if(n)return n.get(r)}scopeRefs(e,r=this._values){return this._reduceValues(r,n=>{if(n.scopePath===void 0)throw new Error(`CodeGen: name "${n}" has no value`);return(0,Or._)`${e}${n.scopePath}`})}scopeCode(e=this._values,r,n){return this._reduceValues(e,s=>{if(s.value===void 0)throw new Error(`CodeGen: name "${s}" has no value`);return s.value.code},r,n)}_reduceValues(e,r,n={},s){let i=Or.nil;for(let o in e){let a=e[o];if(!a)continue;let u=n[o]=n[o]||new Map;a.forEach(l=>{if(u.has(l))return;u.set(l,j0.Started);let c=r(l);if(c){let f=this.opts.es5?mr.varKinds.var:mr.varKinds.const;i=(0,Or._)`${i}${f} ${l} = ${c};${this.opts._n}`}else if(c=s?.(l))i=(0,Or._)`${i}${c}${this.opts._n}`;else throw new q0(l);u.set(l,j0.Completed)})}return i}};mr.ValueScope=D0});var fe=$(me=>{"use strict";Object.defineProperty(me,"__esModule",{value:!0});me.or=me.and=me.not=me.CodeGen=me.operators=me.varKinds=me.ValueScopeName=me.ValueScope=me.Scope=me.Name=me.regexpCode=me.stringify=me.getProperty=me.nil=me.strConcat=me.str=me._=void 0;var Se=sl(),Sn=L0(),Ys=sl();Object.defineProperty(me,"_",{enumerable:!0,get:function(){return Ys._}});Object.defineProperty(me,"str",{enumerable:!0,get:function(){return Ys.str}});Object.defineProperty(me,"strConcat",{enumerable:!0,get:function(){return Ys.strConcat}});Object.defineProperty(me,"nil",{enumerable:!0,get:function(){return Ys.nil}});Object.defineProperty(me,"getProperty",{enumerable:!0,get:function(){return Ys.getProperty}});Object.defineProperty(me,"stringify",{enumerable:!0,get:function(){return Ys.stringify}});Object.defineProperty(me,"regexpCode",{enumerable:!0,get:function(){return Ys.regexpCode}});Object.defineProperty(me,"Name",{enumerable:!0,get:function(){return Ys.Name}});var xd=L0();Object.defineProperty(me,"Scope",{enumerable:!0,get:function(){return xd.Scope}});Object.defineProperty(me,"ValueScope",{enumerable:!0,get:function(){return xd.ValueScope}});Object.defineProperty(me,"ValueScopeName",{enumerable:!0,get:function(){return xd.ValueScopeName}});Object.defineProperty(me,"varKinds",{enumerable:!0,get:function(){return xd.varKinds}});me.operators={GT:new Se._Code(">"),GTE:new Se._Code(">="),LT:new Se._Code("<"),LTE:new Se._Code("<="),EQ:new Se._Code("==="),NEQ:new Se._Code("!=="),NOT:new Se._Code("!"),OR:new Se._Code("||"),AND:new Se._Code("&&"),ADD:new Se._Code("+")};var ms=class{optimizeNodes(){return this}optimizeNames(e,r){return this}},x0=class extends ms{constructor(e,r,n){super(),this.varKind=e,this.name=r,this.rhs=n}render({es5:e,_n:r}){let n=e?Sn.varKinds.var:this.varKind,s=this.rhs===void 0?"":` = ${this.rhs}`;return`${n} ${this.name}${s};`+r}optimizeNames(e,r){if(e[this.name.str])return this.rhs&&(this.rhs=oa(this.rhs,e,r)),this}get names(){return this.rhs instanceof Se._CodeOrName?this.rhs.names:{}}},jd=class extends ms{constructor(e,r,n){super(),this.lhs=e,this.rhs=r,this.sideEffects=n}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,r){if(!(this.lhs instanceof Se.Name&&!e[this.lhs.str]&&!this.sideEffects))return this.rhs=oa(this.rhs,e,r),this}get names(){let e=this.lhs instanceof Se.Name?{}:{...this.lhs.names};return Ld(e,this.rhs)}},F0=class extends jd{constructor(e,r,n,s){super(e,n,s),this.op=r}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}},M0=class extends ms{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`${this.label}:`+e}},V0=class extends ms{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`break${this.label?` ${this.label}`:""};`+e}},z0=class extends ms{constructor(e){super(),this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}},U0=class extends ms{constructor(e){super(),this.code=e}render({_n:e}){return`${this.code};`+e}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(e,r){return this.code=oa(this.code,e,r),this}get names(){return this.code instanceof Se._CodeOrName?this.code.names:{}}},il=class extends ms{constructor(e=[]){super(),this.nodes=e}render(e){return this.nodes.reduce((r,n)=>r+n.render(e),"")}optimizeNodes(){let{nodes:e}=this,r=e.length;for(;r--;){let n=e[r].optimizeNodes();Array.isArray(n)?e.splice(r,1,...n):n?e[r]=n:e.splice(r,1)}return e.length>0?this:void 0}optimizeNames(e,r){let{nodes:n}=this,s=n.length;for(;s--;){let i=n[s];i.optimizeNames(e,r)||(H7(e,i.names),n.splice(s,1))}return n.length>0?this:void 0}get names(){return this.nodes.reduce((e,r)=>Xi(e,r.names),{})}},ys=class extends il{render(e){return"{"+e._n+super.render(e)+"}"+e._n}},H0=class extends il{},ia=class extends ys{};ia.kind="else";var Rn=class extends ys{constructor(e,r){super(r),this.condition=e}render(e){let r=`if(${this.condition})`+super.render(e);return this.else&&(r+="else "+this.else.render(e)),r}optimizeNodes(){super.optimizeNodes();let e=this.condition;if(e===!0)return this.nodes;let r=this.else;if(r){let n=r.optimizeNodes();r=this.else=Array.isArray(n)?new ia(n):n}if(r)return e===!1?r instanceof Rn?r:r.nodes:this.nodes.length?this:new Rn(JI(e),r instanceof Rn?[r]:r.nodes);if(!(e===!1||!this.nodes.length))return this}optimizeNames(e,r){var n;if(this.else=(n=this.else)===null||n===void 0?void 0:n.optimizeNames(e,r),!!(super.optimizeNames(e,r)||this.else))return this.condition=oa(this.condition,e,r),this}get names(){let e=super.names;return Ld(e,this.condition),this.else&&Xi(e,this.else.names),e}};Rn.kind="if";var Wi=class extends ys{};Wi.kind="for";var K0=class extends Wi{constructor(e){super(),this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,r){if(super.optimizeNames(e,r))return this.iteration=oa(this.iteration,e,r),this}get names(){return Xi(super.names,this.iteration.names)}},B0=class extends Wi{constructor(e,r,n,s){super(),this.varKind=e,this.name=r,this.from=n,this.to=s}render(e){let r=e.es5?Sn.varKinds.var:this.varKind,{name:n,from:s,to:i}=this;return`for(${r} ${n}=${s}; ${n}<${i}; ${n}++)`+super.render(e)}get names(){let e=Ld(super.names,this.from);return Ld(e,this.to)}},Dd=class extends Wi{constructor(e,r,n,s){super(),this.loop=e,this.varKind=r,this.name=n,this.iterable=s}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,r){if(super.optimizeNames(e,r))return this.iterable=oa(this.iterable,e,r),this}get names(){return Xi(super.names,this.iterable.names)}},ol=class extends ys{constructor(e,r,n){super(),this.name=e,this.args=r,this.async=n}render(e){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(e)}};ol.kind="func";var al=class extends il{render(e){return"return "+super.render(e)}};al.kind="return";var G0=class extends ys{render(e){let r="try"+super.render(e);return this.catch&&(r+=this.catch.render(e)),this.finally&&(r+=this.finally.render(e)),r}optimizeNodes(){var e,r;return super.optimizeNodes(),(e=this.catch)===null||e===void 0||e.optimizeNodes(),(r=this.finally)===null||r===void 0||r.optimizeNodes(),this}optimizeNames(e,r){var n,s;return super.optimizeNames(e,r),(n=this.catch)===null||n===void 0||n.optimizeNames(e,r),(s=this.finally)===null||s===void 0||s.optimizeNames(e,r),this}get names(){let e=super.names;return this.catch&&Xi(e,this.catch.names),this.finally&&Xi(e,this.finally.names),e}},ul=class extends ys{constructor(e){super(),this.error=e}render(e){return`catch(${this.error})`+super.render(e)}};ul.kind="catch";var ll=class extends ys{render(e){return"finally"+super.render(e)}};ll.kind="finally";var J0=class{constructor(e,r={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...r,_n:r.lines?`
`:""},this._extScope=e,this._scope=new Sn.Scope({parent:e}),this._nodes=[new H0]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,r){let n=this._extScope.value(e,r);return(this._values[n.prefix]||(this._values[n.prefix]=new Set)).add(n),n}getScopeValue(e,r){return this._extScope.getValue(e,r)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,r,n,s){let i=this._scope.toName(r);return n!==void 0&&s&&(this._constants[i.str]=n),this._leafNode(new x0(e,i,n)),i}const(e,r,n){return this._def(Sn.varKinds.const,e,r,n)}let(e,r,n){return this._def(Sn.varKinds.let,e,r,n)}var(e,r,n){return this._def(Sn.varKinds.var,e,r,n)}assign(e,r,n){return this._leafNode(new jd(e,r,n))}add(e,r){return this._leafNode(new F0(e,me.operators.ADD,r))}code(e){return typeof e=="function"?e():e!==Se.nil&&this._leafNode(new U0(e)),this}object(...e){let r=["{"];for(let[n,s]of e)r.length>1&&r.push(","),r.push(n),(n!==s||this.opts.es5)&&(r.push(":"),(0,Se.addCodeArg)(r,s));return r.push("}"),new Se._Code(r)}if(e,r,n){if(this._blockNode(new Rn(e)),r&&n)this.code(r).else().code(n).endIf();else if(r)this.code(r).endIf();else if(n)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new Rn(e))}else(){return this._elseNode(new ia)}endIf(){return this._endBlockNode(Rn,ia)}_for(e,r){return this._blockNode(e),r&&this.code(r).endFor(),this}for(e,r){return this._for(new K0(e),r)}forRange(e,r,n,s,i=this.opts.es5?Sn.varKinds.var:Sn.varKinds.let){let o=this._scope.toName(e);return this._for(new B0(i,o,r,n),()=>s(o))}forOf(e,r,n,s=Sn.varKinds.const){let i=this._scope.toName(e);if(this.opts.es5){let o=r instanceof Se.Name?r:this.var("_arr",r);return this.forRange("_i",0,(0,Se._)`${o}.length`,a=>{this.var(i,(0,Se._)`${o}[${a}]`),n(i)})}return this._for(new Dd("of",s,i,r),()=>n(i))}forIn(e,r,n,s=this.opts.es5?Sn.varKinds.var:Sn.varKinds.const){if(this.opts.ownProperties)return this.forOf(e,(0,Se._)`Object.keys(${r})`,n);let i=this._scope.toName(e);return this._for(new Dd("in",s,i,r),()=>n(i))}endFor(){return this._endBlockNode(Wi)}label(e){return this._leafNode(new M0(e))}break(e){return this._leafNode(new V0(e))}return(e){let r=new al;if(this._blockNode(r),this.code(e),r.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(al)}try(e,r,n){if(!r&&!n)throw new Error('CodeGen: "try" without "catch" and "finally"');let s=new G0;if(this._blockNode(s),this.code(e),r){let i=this.name("e");this._currNode=s.catch=new ul(i),r(i)}return n&&(this._currNode=s.finally=new ll,this.code(n)),this._endBlockNode(ul,ll)}throw(e){return this._leafNode(new z0(e))}block(e,r){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(r),this}endBlock(e){let r=this._blockStarts.pop();if(r===void 0)throw new Error("CodeGen: not in self-balancing block");let n=this._nodes.length-r;if(n<0||e!==void 0&&n!==e)throw new Error(`CodeGen: wrong number of nodes: ${n} vs ${e} expected`);return this._nodes.length=r,this}func(e,r=Se.nil,n,s){return this._blockNode(new ol(e,r,n)),s&&this.code(s).endFunc(),this}endFunc(){return this._endBlockNode(ol)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,r){let n=this._currNode;if(n instanceof e||r&&n instanceof r)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${r?`${e.kind}/${r.kind}`:e.kind}"`)}_elseNode(e){let r=this._currNode;if(!(r instanceof Rn))throw new Error('CodeGen: "else" without "if"');return this._currNode=r.else=e,this}get _root(){return this._nodes[0]}get _currNode(){let e=this._nodes;return e[e.length-1]}set _currNode(e){let r=this._nodes;r[r.length-1]=e}};me.CodeGen=J0;function Xi(t,e){for(let r in e)t[r]=(t[r]||0)+(e[r]||0);return t}function Ld(t,e){return e instanceof Se._CodeOrName?Xi(t,e.names):t}function oa(t,e,r){if(t instanceof Se.Name)return n(t);if(!s(t))return t;return new Se._Code(t._items.reduce((i,o)=>(o instanceof Se.Name&&(o=n(o)),o instanceof Se._Code?i.push(...o._items):i.push(o),i),[]));function n(i){let o=r[i.str];return o===void 0||e[i.str]!==1?i:(delete e[i.str],o)}function s(i){return i instanceof Se._Code&&i._items.some(o=>o instanceof Se.Name&&e[o.str]===1&&r[o.str]!==void 0)}}function H7(t,e){for(let r in e)t[r]=(t[r]||0)-(e[r]||0)}function JI(t){return typeof t=="boolean"||typeof t=="number"||t===null?!t:(0,Se._)`!${Y0(t)}`}me.not=JI;var K7=YI(me.operators.AND);function B7(...t){return t.reduce(K7)}me.and=B7;var G7=YI(me.operators.OR);function J7(...t){return t.reduce(G7)}me.or=J7;function YI(t){return(e,r)=>e===Se.nil?r:r===Se.nil?e:(0,Se._)`${Y0(e)} ${t} ${Y0(r)}`}function Y0(t){return t instanceof Se.Name?t:(0,Se._)`(${t})`}});var De=$(ye=>{"use strict";Object.defineProperty(ye,"__esModule",{value:!0});ye.checkStrictMode=ye.getErrorPath=ye.Type=ye.useFunc=ye.setEvaluated=ye.evaluatedPropsToName=ye.mergeEvaluated=ye.eachItem=ye.unescapeJsonPointer=ye.escapeJsonPointer=ye.escapeFragment=ye.unescapeFragment=ye.schemaRefOrVal=ye.schemaHasRulesButRef=ye.schemaHasRules=ye.checkUnknownRules=ye.alwaysValidSchema=ye.toHash=void 0;var rt=fe(),Y7=sl();function W7(t){let e={};for(let r of t)e[r]=!0;return e}ye.toHash=W7;function X7(t,e){return typeof e=="boolean"?e:Object.keys(e).length===0?!0:(QI(t,e),!ZI(e,t.self.RULES.all))}ye.alwaysValidSchema=X7;function QI(t,e=t.schema){let{opts:r,self:n}=t;if(!r.strictSchema||typeof e=="boolean")return;let s=n.RULES.keywords;for(let i in e)s[i]||nC(t,`unknown keyword: "${i}"`)}ye.checkUnknownRules=QI;function ZI(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(e[r])return!0;return!1}ye.schemaHasRules=ZI;function Q7(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(r!=="$ref"&&e.all[r])return!0;return!1}ye.schemaHasRulesButRef=Q7;function Z7({topSchemaRef:t,schemaPath:e},r,n,s){if(!s){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,rt._)`${r}`}return(0,rt._)`${t}${e}${(0,rt.getProperty)(n)}`}ye.schemaRefOrVal=Z7;function eY(t){return eC(decodeURIComponent(t))}ye.unescapeFragment=eY;function tY(t){return encodeURIComponent(W0(t))}ye.escapeFragment=tY;function W0(t){return typeof t=="number"?`${t}`:t.replace(/~/g,"~0").replace(/\//g,"~1")}ye.escapeJsonPointer=W0;function eC(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}ye.unescapeJsonPointer=eC;function rY(t,e){if(Array.isArray(t))for(let r of t)e(r);else e(t)}ye.eachItem=rY;function WI({mergeNames:t,mergeToName:e,mergeValues:r,resultToName:n}){return(s,i,o,a)=>{let u=o===void 0?i:o instanceof rt.Name?(i instanceof rt.Name?t(s,i,o):e(s,i,o),o):i instanceof rt.Name?(e(s,o,i),i):r(i,o);return a===rt.Name&&!(u instanceof rt.Name)?n(s,u):u}}ye.mergeEvaluated={props:WI({mergeNames:(t,e,r)=>t.if((0,rt._)`${r} !== true && ${e} !== undefined`,()=>{t.if((0,rt._)`${e} === true`,()=>t.assign(r,!0),()=>t.assign(r,(0,rt._)`${r} || {}`).code((0,rt._)`Object.assign(${r}, ${e})`))}),mergeToName:(t,e,r)=>t.if((0,rt._)`${r} !== true`,()=>{e===!0?t.assign(r,!0):(t.assign(r,(0,rt._)`${r} || {}`),X0(t,r,e))}),mergeValues:(t,e)=>t===!0?!0:{...t,...e},resultToName:tC}),items:WI({mergeNames:(t,e,r)=>t.if((0,rt._)`${r} !== true && ${e} !== undefined`,()=>t.assign(r,(0,rt._)`${e} === true ? true : ${r} > ${e} ? ${r} : ${e}`)),mergeToName:(t,e,r)=>t.if((0,rt._)`${r} !== true`,()=>t.assign(r,e===!0?!0:(0,rt._)`${r} > ${e} ? ${r} : ${e}`)),mergeValues:(t,e)=>t===!0?!0:Math.max(t,e),resultToName:(t,e)=>t.var("items",e)})};function tC(t,e){if(e===!0)return t.var("props",!0);let r=t.var("props",(0,rt._)`{}`);return e!==void 0&&X0(t,r,e),r}ye.evaluatedPropsToName=tC;function X0(t,e,r){Object.keys(r).forEach(n=>t.assign((0,rt._)`${e}${(0,rt.getProperty)(n)}`,!0))}ye.setEvaluated=X0;var XI={};function nY(t,e){return t.scopeValue("func",{ref:e,code:XI[e.code]||(XI[e.code]=new Y7._Code(e.code))})}ye.useFunc=nY;var rC;(function(t){t[t.Num=0]="Num",t[t.Str=1]="Str"})(rC=ye.Type||(ye.Type={}));function sY(t,e,r){if(t instanceof rt.Name){let n=e===rC.Num;return r?n?(0,rt._)`"[" + ${t} + "]"`:(0,rt._)`"['" + ${t} + "']"`:n?(0,rt._)`"/" + ${t}`:(0,rt._)`"/" + ${t}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,rt.getProperty)(t).toString():"/"+W0(t)}ye.getErrorPath=sY;function nC(t,e,r=t.opts.strictSchema){if(r){if(e=`strict mode: ${e}`,r===!0)throw new Error(e);t.self.logger.warn(e)}}ye.checkStrictMode=nC});var gs=$(Q0=>{"use strict";Object.defineProperty(Q0,"__esModule",{value:!0});var sr=fe(),iY={data:new sr.Name("data"),valCxt:new sr.Name("valCxt"),instancePath:new sr.Name("instancePath"),parentData:new sr.Name("parentData"),parentDataProperty:new sr.Name("parentDataProperty"),rootData:new sr.Name("rootData"),dynamicAnchors:new sr.Name("dynamicAnchors"),vErrors:new sr.Name("vErrors"),errors:new sr.Name("errors"),this:new sr.Name("this"),self:new sr.Name("self"),scope:new sr.Name("scope"),json:new sr.Name("json"),jsonPos:new sr.Name("jsonPos"),jsonLen:new sr.Name("jsonLen"),jsonPart:new sr.Name("jsonPart")};Q0.default=iY});var cl=$(ir=>{"use strict";Object.defineProperty(ir,"__esModule",{value:!0});ir.extendErrors=ir.resetErrorsCount=ir.reportExtraError=ir.reportError=ir.keyword$DataError=ir.keywordError=void 0;var Ne=fe(),Fd=De(),yr=gs();ir.keywordError={message:({keyword:t})=>(0,Ne.str)`must pass "${t}" keyword validation`};ir.keyword$DataError={message:({keyword:t,schemaType:e})=>e?(0,Ne.str)`"${t}" keyword must be ${e} ($data)`:(0,Ne.str)`"${t}" keyword is invalid ($data)`};function oY(t,e=ir.keywordError,r,n){let{it:s}=t,{gen:i,compositeRule:o,allErrors:a}=s,u=oC(t,e,r);n??(o||a)?sC(i,u):iC(s,(0,Ne._)`[${u}]`)}ir.reportError=oY;function aY(t,e=ir.keywordError,r){let{it:n}=t,{gen:s,compositeRule:i,allErrors:o}=n,a=oC(t,e,r);sC(s,a),i||o||iC(n,yr.default.vErrors)}ir.reportExtraError=aY;function uY(t,e){t.assign(yr.default.errors,e),t.if((0,Ne._)`${yr.default.vErrors} !== null`,()=>t.if(e,()=>t.assign((0,Ne._)`${yr.default.vErrors}.length`,e),()=>t.assign(yr.default.vErrors,null)))}ir.resetErrorsCount=uY;function lY({gen:t,keyword:e,schemaValue:r,data:n,errsCount:s,it:i}){if(s===void 0)throw new Error("ajv implementation error");let o=t.name("err");t.forRange("i",s,yr.default.errors,a=>{t.const(o,(0,Ne._)`${yr.default.vErrors}[${a}]`),t.if((0,Ne._)`${o}.instancePath === undefined`,()=>t.assign((0,Ne._)`${o}.instancePath`,(0,Ne.strConcat)(yr.default.instancePath,i.errorPath))),t.assign((0,Ne._)`${o}.schemaPath`,(0,Ne.str)`${i.errSchemaPath}/${e}`),i.opts.verbose&&(t.assign((0,Ne._)`${o}.schema`,r),t.assign((0,Ne._)`${o}.data`,n))})}ir.extendErrors=lY;function sC(t,e){let r=t.const("err",e);t.if((0,Ne._)`${yr.default.vErrors} === null`,()=>t.assign(yr.default.vErrors,(0,Ne._)`[${r}]`),(0,Ne._)`${yr.default.vErrors}.push(${r})`),t.code((0,Ne._)`${yr.default.errors}++`)}function iC(t,e){let{gen:r,validateName:n,schemaEnv:s}=t;s.$async?r.throw((0,Ne._)`new ${t.ValidationError}(${e})`):(r.assign((0,Ne._)`${n}.errors`,e),r.return(!1))}var Qi={keyword:new Ne.Name("keyword"),schemaPath:new Ne.Name("schemaPath"),params:new Ne.Name("params"),propertyName:new Ne.Name("propertyName"),message:new Ne.Name("message"),schema:new Ne.Name("schema"),parentSchema:new Ne.Name("parentSchema")};function oC(t,e,r){let{createErrors:n}=t.it;return n===!1?(0,Ne._)`{}`:cY(t,e,r)}function cY(t,e,r={}){let{gen:n,it:s}=t,i=[fY(s,r),dY(t,r)];return hY(t,e,i),n.object(...i)}function fY({errorPath:t},{instancePath:e}){let r=e?(0,Ne.str)`${t}${(0,Fd.getErrorPath)(e,Fd.Type.Str)}`:t;return[yr.default.instancePath,(0,Ne.strConcat)(yr.default.instancePath,r)]}function dY({keyword:t,it:{errSchemaPath:e}},{schemaPath:r,parentSchema:n}){let s=n?e:(0,Ne.str)`${e}/${t}`;return r&&(s=(0,Ne.str)`${s}${(0,Fd.getErrorPath)(r,Fd.Type.Str)}`),[Qi.schemaPath,s]}function hY(t,{params:e,message:r},n){let{keyword:s,data:i,schemaValue:o,it:a}=t,{opts:u,propertyName:l,topSchemaRef:c,schemaPath:f}=a;n.push([Qi.keyword,s],[Qi.params,typeof e=="function"?e(t):e||(0,Ne._)`{}`]),u.messages&&n.push([Qi.message,typeof r=="function"?r(t):r]),u.verbose&&n.push([Qi.schema,o],[Qi.parentSchema,(0,Ne._)`${c}${f}`],[yr.default.data,i]),l&&n.push([Qi.propertyName,l])}});var uC=$(aa=>{"use strict";Object.defineProperty(aa,"__esModule",{value:!0});aa.boolOrEmptySchema=aa.topBoolOrEmptySchema=void 0;var pY=cl(),mY=fe(),yY=gs(),gY={message:"boolean schema is false"};function _Y(t){let{gen:e,schema:r,validateName:n}=t;r===!1?aC(t,!1):typeof r=="object"&&r.$async===!0?e.return(yY.default.data):(e.assign((0,mY._)`${n}.errors`,null),e.return(!0))}aa.topBoolOrEmptySchema=_Y;function vY(t,e){let{gen:r,schema:n}=t;n===!1?(r.var(e,!1),aC(t)):r.var(e,!0)}aa.boolOrEmptySchema=vY;function aC(t,e){let{gen:r,data:n}=t,s={gen:r,keyword:"false schema",data:n,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:t};(0,pY.reportError)(s,gY,void 0,e)}});var Z0=$(ua=>{"use strict";Object.defineProperty(ua,"__esModule",{value:!0});ua.getRules=ua.isJSONType=void 0;var $Y=["string","number","integer","boolean","null","object","array"],bY=new Set($Y);function wY(t){return typeof t=="string"&&bY.has(t)}ua.isJSONType=wY;function EY(){let t={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...t,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},t.number,t.string,t.array,t.object],post:{rules:[]},all:{},keywords:{}}}ua.getRules=EY});var e_=$(Ws=>{"use strict";Object.defineProperty(Ws,"__esModule",{value:!0});Ws.shouldUseRule=Ws.shouldUseGroup=Ws.schemaHasRulesForType=void 0;function SY({schema:t,self:e},r){let n=e.RULES.types[r];return n&&n!==!0&&lC(t,n)}Ws.schemaHasRulesForType=SY;function lC(t,e){return e.rules.some(r=>cC(t,r))}Ws.shouldUseGroup=lC;function cC(t,e){var r;return t[e.keyword]!==void 0||((r=e.definition.implements)===null||r===void 0?void 0:r.some(n=>t[n]!==void 0))}Ws.shouldUseRule=cC});var dl=$(Bt=>{"use strict";Object.defineProperty(Bt,"__esModule",{value:!0});Bt.reportTypeError=Bt.checkDataTypes=Bt.checkDataType=Bt.coerceAndCheckDataType=Bt.getJSONTypes=Bt.getSchemaTypes=Bt.DataType=void 0;var RY=Z0(),PY=e_(),TY=cl(),ue=fe(),fC=De(),fl;(function(t){t[t.Correct=0]="Correct",t[t.Wrong=1]="Wrong"})(fl=Bt.DataType||(Bt.DataType={}));function OY(t){let e=dC(t.type);if(e.includes("null")){if(t.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!e.length&&t.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');t.nullable===!0&&e.push("null")}return e}Bt.getSchemaTypes=OY;function dC(t){let e=Array.isArray(t)?t:t?[t]:[];if(e.every(RY.isJSONType))return e;throw new Error("type must be JSONType or JSONType[]: "+e.join(","))}Bt.getJSONTypes=dC;function NY(t,e){let{gen:r,data:n,opts:s}=t,i=IY(e,s.coerceTypes),o=e.length>0&&!(i.length===0&&e.length===1&&(0,PY.schemaHasRulesForType)(t,e[0]));if(o){let a=r_(e,n,s.strictNumbers,fl.Wrong);r.if(a,()=>{i.length?CY(t,e,i):n_(t)})}return o}Bt.coerceAndCheckDataType=NY;var hC=new Set(["string","number","integer","boolean","null"]);function IY(t,e){return e?t.filter(r=>hC.has(r)||e==="array"&&r==="array"):[]}function CY(t,e,r){let{gen:n,data:s,opts:i}=t,o=n.let("dataType",(0,ue._)`typeof ${s}`),a=n.let("coerced",(0,ue._)`undefined`);i.coerceTypes==="array"&&n.if((0,ue._)`${o} == 'object' && Array.isArray(${s}) && ${s}.length == 1`,()=>n.assign(s,(0,ue._)`${s}[0]`).assign(o,(0,ue._)`typeof ${s}`).if(r_(e,s,i.strictNumbers),()=>n.assign(a,s))),n.if((0,ue._)`${a} !== undefined`);for(let l of r)(hC.has(l)||l==="array"&&i.coerceTypes==="array")&&u(l);n.else(),n_(t),n.endIf(),n.if((0,ue._)`${a} !== undefined`,()=>{n.assign(s,a),AY(t,a)});function u(l){switch(l){case"string":n.elseIf((0,ue._)`${o} == "number" || ${o} == "boolean"`).assign(a,(0,ue._)`"" + ${s}`).elseIf((0,ue._)`${s} === null`).assign(a,(0,ue._)`""`);return;case"number":n.elseIf((0,ue._)`${o} == "boolean" || ${s} === null
              || (${o} == "string" && ${s} && ${s} == +${s})`).assign(a,(0,ue._)`+${s}`);return;case"integer":n.elseIf((0,ue._)`${o} === "boolean" || ${s} === null
              || (${o} === "string" && ${s} && ${s} == +${s} && !(${s} % 1))`).assign(a,(0,ue._)`+${s}`);return;case"boolean":n.elseIf((0,ue._)`${s} === "false" || ${s} === 0 || ${s} === null`).assign(a,!1).elseIf((0,ue._)`${s} === "true" || ${s} === 1`).assign(a,!0);return;case"null":n.elseIf((0,ue._)`${s} === "" || ${s} === 0 || ${s} === false`),n.assign(a,null);return;case"array":n.elseIf((0,ue._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${s} === null`).assign(a,(0,ue._)`[${s}]`)}}}function AY({gen:t,parentData:e,parentDataProperty:r},n){t.if((0,ue._)`${e} !== undefined`,()=>t.assign((0,ue._)`${e}[${r}]`,n))}function t_(t,e,r,n=fl.Correct){let s=n===fl.Correct?ue.operators.EQ:ue.operators.NEQ,i;switch(t){case"null":return(0,ue._)`${e} ${s} null`;case"array":i=(0,ue._)`Array.isArray(${e})`;break;case"object":i=(0,ue._)`${e} && typeof ${e} == "object" && !Array.isArray(${e})`;break;case"integer":i=o((0,ue._)`!(${e} % 1) && !isNaN(${e})`);break;case"number":i=o();break;default:return(0,ue._)`typeof ${e} ${s} ${t}`}return n===fl.Correct?i:(0,ue.not)(i);function o(a=ue.nil){return(0,ue.and)((0,ue._)`typeof ${e} == "number"`,a,r?(0,ue._)`isFinite(${e})`:ue.nil)}}Bt.checkDataType=t_;function r_(t,e,r,n){if(t.length===1)return t_(t[0],e,r,n);let s,i=(0,fC.toHash)(t);if(i.array&&i.object){let o=(0,ue._)`typeof ${e} != "object"`;s=i.null?o:(0,ue._)`!${e} || ${o}`,delete i.null,delete i.array,delete i.object}else s=ue.nil;i.number&&delete i.integer;for(let o in i)s=(0,ue.and)(s,t_(o,e,r,n));return s}Bt.checkDataTypes=r_;var kY={message:({schema:t})=>`must be ${t}`,params:({schema:t,schemaValue:e})=>typeof t=="string"?(0,ue._)`{type: ${t}}`:(0,ue._)`{type: ${e}}`};function n_(t){let e=qY(t);(0,TY.reportError)(e,kY)}Bt.reportTypeError=n_;function qY(t){let{gen:e,data:r,schema:n}=t,s=(0,fC.schemaRefOrVal)(t,n,"type");return{gen:e,keyword:"type",data:r,schema:n.type,schemaCode:s,schemaValue:s,parentSchema:n,params:{},it:t}}});var mC=$(Md=>{"use strict";Object.defineProperty(Md,"__esModule",{value:!0});Md.assignDefaults=void 0;var la=fe(),jY=De();function DY(t,e){let{properties:r,items:n}=t.schema;if(e==="object"&&r)for(let s in r)pC(t,s,r[s].default);else e==="array"&&Array.isArray(n)&&n.forEach((s,i)=>pC(t,i,s.default))}Md.assignDefaults=DY;function pC(t,e,r){let{gen:n,compositeRule:s,data:i,opts:o}=t;if(r===void 0)return;let a=(0,la._)`${i}${(0,la.getProperty)(e)}`;if(s){(0,jY.checkStrictMode)(t,`default is ignored for: ${a}`);return}let u=(0,la._)`${a} === undefined`;o.useDefaults==="empty"&&(u=(0,la._)`${u} || ${a} === null || ${a} === ""`),n.if(u,(0,la._)`${a} = ${(0,la.stringify)(r)}`)}});var sn=$(Je=>{"use strict";Object.defineProperty(Je,"__esModule",{value:!0});Je.validateUnion=Je.validateArray=Je.usePattern=Je.callValidateCode=Je.schemaProperties=Je.allSchemaProperties=Je.noPropertyInData=Je.propertyInData=Je.isOwnProperty=Je.hasPropFunc=Je.reportMissingProp=Je.checkMissingProp=Je.checkReportMissingProp=void 0;var at=fe(),s_=De(),Xs=gs(),LY=De();function xY(t,e){let{gen:r,data:n,it:s}=t;r.if(o_(r,n,e,s.opts.ownProperties),()=>{t.setParams({missingProperty:(0,at._)`${e}`},!0),t.error()})}Je.checkReportMissingProp=xY;function FY({gen:t,data:e,it:{opts:r}},n,s){return(0,at.or)(...n.map(i=>(0,at.and)(o_(t,e,i,r.ownProperties),(0,at._)`${s} = ${i}`)))}Je.checkMissingProp=FY;function MY(t,e){t.setParams({missingProperty:e},!0),t.error()}Je.reportMissingProp=MY;function yC(t){return t.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,at._)`Object.prototype.hasOwnProperty`})}Je.hasPropFunc=yC;function i_(t,e,r){return(0,at._)`${yC(t)}.call(${e}, ${r})`}Je.isOwnProperty=i_;function VY(t,e,r,n){let s=(0,at._)`${e}${(0,at.getProperty)(r)} !== undefined`;return n?(0,at._)`${s} && ${i_(t,e,r)}`:s}Je.propertyInData=VY;function o_(t,e,r,n){let s=(0,at._)`${e}${(0,at.getProperty)(r)} === undefined`;return n?(0,at.or)(s,(0,at.not)(i_(t,e,r))):s}Je.noPropertyInData=o_;function gC(t){return t?Object.keys(t).filter(e=>e!=="__proto__"):[]}Je.allSchemaProperties=gC;function zY(t,e){return gC(e).filter(r=>!(0,s_.alwaysValidSchema)(t,e[r]))}Je.schemaProperties=zY;function UY({schemaCode:t,data:e,it:{gen:r,topSchemaRef:n,schemaPath:s,errorPath:i},it:o},a,u,l){let c=l?(0,at._)`${t}, ${e}, ${n}${s}`:e,f=[[Xs.default.instancePath,(0,at.strConcat)(Xs.default.instancePath,i)],[Xs.default.parentData,o.parentData],[Xs.default.parentDataProperty,o.parentDataProperty],[Xs.default.rootData,Xs.default.rootData]];o.opts.dynamicRef&&f.push([Xs.default.dynamicAnchors,Xs.default.dynamicAnchors]);let h=(0,at._)`${c}, ${r.object(...f)}`;return u!==at.nil?(0,at._)`${a}.call(${u}, ${h})`:(0,at._)`${a}(${h})`}Je.callValidateCode=UY;var HY=(0,at._)`new RegExp`;function KY({gen:t,it:{opts:e}},r){let n=e.unicodeRegExp?"u":"",{regExp:s}=e.code,i=s(r,n);return t.scopeValue("pattern",{key:i.toString(),ref:i,code:(0,at._)`${s.code==="new RegExp"?HY:(0,LY.useFunc)(t,s)}(${r}, ${n})`})}Je.usePattern=KY;function BY(t){let{gen:e,data:r,keyword:n,it:s}=t,i=e.name("valid");if(s.allErrors){let a=e.let("valid",!0);return o(()=>e.assign(a,!1)),a}return e.var(i,!0),o(()=>e.break()),i;function o(a){let u=e.const("len",(0,at._)`${r}.length`);e.forRange("i",0,u,l=>{t.subschema({keyword:n,dataProp:l,dataPropType:s_.Type.Num},i),e.if((0,at.not)(i),a)})}}Je.validateArray=BY;function GY(t){let{gen:e,schema:r,keyword:n,it:s}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(u=>(0,s_.alwaysValidSchema)(s,u))&&!s.opts.unevaluated)return;let o=e.let("valid",!1),a=e.name("_valid");e.block(()=>r.forEach((u,l)=>{let c=t.subschema({keyword:n,schemaProp:l,compositeRule:!0},a);e.assign(o,(0,at._)`${o} || ${a}`),t.mergeValidEvaluated(c,a)||e.if((0,at.not)(o))})),t.result(o,()=>t.reset(),()=>t.error(!0))}Je.validateUnion=GY});var $C=$(Bn=>{"use strict";Object.defineProperty(Bn,"__esModule",{value:!0});Bn.validateKeywordUsage=Bn.validSchemaType=Bn.funcKeywordCode=Bn.macroKeywordCode=void 0;var gr=fe(),Zi=gs(),JY=sn(),YY=cl();function WY(t,e){let{gen:r,keyword:n,schema:s,parentSchema:i,it:o}=t,a=e.macro.call(o.self,s,i,o),u=vC(r,n,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);let l=r.name("valid");t.subschema({schema:a,schemaPath:gr.nil,errSchemaPath:`${o.errSchemaPath}/${n}`,topSchemaRef:u,compositeRule:!0},l),t.pass(l,()=>t.error(!0))}Bn.macroKeywordCode=WY;function XY(t,e){var r;let{gen:n,keyword:s,schema:i,parentSchema:o,$data:a,it:u}=t;ZY(u,e);let l=!a&&e.compile?e.compile.call(u.self,i,o,u):e.validate,c=vC(n,s,l),f=n.let("valid");t.block$data(f,h),t.ok((r=e.valid)!==null&&r!==void 0?r:f);function h(){if(e.errors===!1)m(),e.modifying&&_C(t),v(()=>t.error());else{let g=e.async?d():p();e.modifying&&_C(t),v(()=>QY(t,g))}}function d(){let g=n.let("ruleErrs",null);return n.try(()=>m((0,gr._)`await `),w=>n.assign(f,!1).if((0,gr._)`${w} instanceof ${u.ValidationError}`,()=>n.assign(g,(0,gr._)`${w}.errors`),()=>n.throw(w))),g}function p(){let g=(0,gr._)`${c}.errors`;return n.assign(g,null),m(gr.nil),g}function m(g=e.async?(0,gr._)`await `:gr.nil){let w=u.opts.passContext?Zi.default.this:Zi.default.self,_=!("compile"in e&&!a||e.schema===!1);n.assign(f,(0,gr._)`${g}${(0,JY.callValidateCode)(t,c,w,_)}`,e.modifying)}function v(g){var w;n.if((0,gr.not)((w=e.valid)!==null&&w!==void 0?w:f),g)}}Bn.funcKeywordCode=XY;function _C(t){let{gen:e,data:r,it:n}=t;e.if(n.parentData,()=>e.assign(r,(0,gr._)`${n.parentData}[${n.parentDataProperty}]`))}function QY(t,e){let{gen:r}=t;r.if((0,gr._)`Array.isArray(${e})`,()=>{r.assign(Zi.default.vErrors,(0,gr._)`${Zi.default.vErrors} === null ? ${e} : ${Zi.default.vErrors}.concat(${e})`).assign(Zi.default.errors,(0,gr._)`${Zi.default.vErrors}.length`),(0,YY.extendErrors)(t)},()=>t.error())}function ZY({schemaEnv:t},e){if(e.async&&!t.$async)throw new Error("async keyword in sync schema")}function vC(t,e,r){if(r===void 0)throw new Error(`keyword "${e}" failed to compile`);return t.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,gr.stringify)(r)})}function eW(t,e,r=!1){return!e.length||e.some(n=>n==="array"?Array.isArray(t):n==="object"?t&&typeof t=="object"&&!Array.isArray(t):typeof t==n||r&&typeof t>"u")}Bn.validSchemaType=eW;function tW({schema:t,opts:e,self:r,errSchemaPath:n},s,i){if(Array.isArray(s.keyword)?!s.keyword.includes(i):s.keyword!==i)throw new Error("ajv implementation error");let o=s.dependencies;if(o?.some(a=>!Object.prototype.hasOwnProperty.call(t,a)))throw new Error(`parent schema must have dependencies of ${i}: ${o.join(",")}`);if(s.validateSchema&&!s.validateSchema(t[i])){let u=`keyword "${i}" value is invalid at path "${n}": `+r.errorsText(s.validateSchema.errors);if(e.validateSchema==="log")r.logger.error(u);else throw new Error(u)}}Bn.validateKeywordUsage=tW});var wC=$(Qs=>{"use strict";Object.defineProperty(Qs,"__esModule",{value:!0});Qs.extendSubschemaMode=Qs.extendSubschemaData=Qs.getSubschema=void 0;var Gn=fe(),bC=De();function rW(t,{keyword:e,schemaProp:r,schema:n,schemaPath:s,errSchemaPath:i,topSchemaRef:o}){if(e!==void 0&&n!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(e!==void 0){let a=t.schema[e];return r===void 0?{schema:a,schemaPath:(0,Gn._)`${t.schemaPath}${(0,Gn.getProperty)(e)}`,errSchemaPath:`${t.errSchemaPath}/${e}`}:{schema:a[r],schemaPath:(0,Gn._)`${t.schemaPath}${(0,Gn.getProperty)(e)}${(0,Gn.getProperty)(r)}`,errSchemaPath:`${t.errSchemaPath}/${e}/${(0,bC.escapeFragment)(r)}`}}if(n!==void 0){if(s===void 0||i===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:n,schemaPath:s,topSchemaRef:o,errSchemaPath:i}}throw new Error('either "keyword" or "schema" must be passed')}Qs.getSubschema=rW;function nW(t,e,{dataProp:r,dataPropType:n,data:s,dataTypes:i,propertyName:o}){if(s!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');let{gen:a}=e;if(r!==void 0){let{errorPath:l,dataPathArr:c,opts:f}=e,h=a.let("data",(0,Gn._)`${e.data}${(0,Gn.getProperty)(r)}`,!0);u(h),t.errorPath=(0,Gn.str)`${l}${(0,bC.getErrorPath)(r,n,f.jsPropertySyntax)}`,t.parentDataProperty=(0,Gn._)`${r}`,t.dataPathArr=[...c,t.parentDataProperty]}if(s!==void 0){let l=s instanceof Gn.Name?s:a.let("data",s,!0);u(l),o!==void 0&&(t.propertyName=o)}i&&(t.dataTypes=i);function u(l){t.data=l,t.dataLevel=e.dataLevel+1,t.dataTypes=[],e.definedProperties=new Set,t.parentData=e.data,t.dataNames=[...e.dataNames,l]}}Qs.extendSubschemaData=nW;function sW(t,{jtdDiscriminator:e,jtdMetadata:r,compositeRule:n,createErrors:s,allErrors:i}){n!==void 0&&(t.compositeRule=n),s!==void 0&&(t.createErrors=s),i!==void 0&&(t.allErrors=i),t.jtdDiscriminator=e,t.jtdMetadata=r}Qs.extendSubschemaMode=sW});var SC=$((Fpe,EC)=>{"use strict";var Zs=EC.exports=function(t,e,r){typeof e=="function"&&(r=e,e={}),r=e.cb||r;var n=typeof r=="function"?r:r.pre||function(){},s=r.post||function(){};Vd(e,n,s,t,"",t)};Zs.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};Zs.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Zs.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Zs.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function Vd(t,e,r,n,s,i,o,a,u,l){if(n&&typeof n=="object"&&!Array.isArray(n)){e(n,s,i,o,a,u,l);for(var c in n){var f=n[c];if(Array.isArray(f)){if(c in Zs.arrayKeywords)for(var h=0;h<f.length;h++)Vd(t,e,r,f[h],s+"/"+c+"/"+h,i,s,c,n,h)}else if(c in Zs.propsKeywords){if(f&&typeof f=="object")for(var d in f)Vd(t,e,r,f[d],s+"/"+c+"/"+iW(d),i,s,c,n,d)}else(c in Zs.keywords||t.allKeys&&!(c in Zs.skipKeywords))&&Vd(t,e,r,f,s+"/"+c,i,s,c,n)}r(n,s,i,o,a,u,l)}}function iW(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}});var hl=$(Nr=>{"use strict";Object.defineProperty(Nr,"__esModule",{value:!0});Nr.getSchemaRefs=Nr.resolveUrl=Nr.normalizeId=Nr._getFullPath=Nr.getFullPath=Nr.inlineRef=void 0;var oW=De(),aW=Vn(),uW=SC(),lW=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function cW(t,e=!0){return typeof t=="boolean"?!0:e===!0?!a_(t):e?RC(t)<=e:!1}Nr.inlineRef=cW;var fW=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function a_(t){for(let e in t){if(fW.has(e))return!0;let r=t[e];if(Array.isArray(r)&&r.some(a_)||typeof r=="object"&&a_(r))return!0}return!1}function RC(t){let e=0;for(let r in t){if(r==="$ref")return 1/0;if(e++,!lW.has(r)&&(typeof t[r]=="object"&&(0,oW.eachItem)(t[r],n=>e+=RC(n)),e===1/0))return 1/0}return e}function PC(t,e="",r){r!==!1&&(e=ca(e));let n=t.parse(e);return TC(t,n)}Nr.getFullPath=PC;function TC(t,e){return t.serialize(e).split("#")[0]+"#"}Nr._getFullPath=TC;var dW=/#\/?$/;function ca(t){return t?t.replace(dW,""):""}Nr.normalizeId=ca;function hW(t,e,r){return r=ca(r),t.resolve(e,r)}Nr.resolveUrl=hW;var pW=/^[a-z_][-a-z0-9._]*$/i;function mW(t,e){if(typeof t=="boolean")return{};let{schemaId:r,uriResolver:n}=this.opts,s=ca(t[r]||e),i={"":s},o=PC(n,s,!1),a={},u=new Set;return uW(t,{allKeys:!0},(f,h,d,p)=>{if(p===void 0)return;let m=o+h,v=i[p];typeof f[r]=="string"&&(v=g.call(this,f[r])),w.call(this,f.$anchor),w.call(this,f.$dynamicAnchor),i[h]=v;function g(_){let y=this.opts.uriResolver.resolve;if(_=ca(v?y(v,_):_),u.has(_))throw c(_);u.add(_);let b=this.refs[_];return typeof b=="string"&&(b=this.refs[b]),typeof b=="object"?l(f,b.schema,_):_!==ca(m)&&(_[0]==="#"?(l(f,a[_],_),a[_]=f):this.refs[_]=m),_}function w(_){if(typeof _=="string"){if(!pW.test(_))throw new Error(`invalid anchor "${_}"`);g.call(this,`#${_}`)}}}),a;function l(f,h,d){if(h!==void 0&&!aW(f,h))throw c(d)}function c(f){return new Error(`reference "${f}" resolves to more than one schema`)}}Nr.getSchemaRefs=mW});var yl=$(ei=>{"use strict";Object.defineProperty(ei,"__esModule",{value:!0});ei.getData=ei.KeywordCxt=ei.validateFunctionCode=void 0;var AC=uC(),OC=dl(),l_=e_(),zd=dl(),yW=mC(),ml=$C(),u_=wC(),W=fe(),ne=gs(),gW=hl(),_s=De(),pl=cl();function _W(t){if(jC(t)&&(DC(t),qC(t))){bW(t);return}kC(t,()=>(0,AC.topBoolOrEmptySchema)(t))}ei.validateFunctionCode=_W;function kC({gen:t,validateName:e,schema:r,schemaEnv:n,opts:s},i){s.code.es5?t.func(e,(0,W._)`${ne.default.data}, ${ne.default.valCxt}`,n.$async,()=>{t.code((0,W._)`"use strict"; ${NC(r,s)}`),$W(t,s),t.code(i)}):t.func(e,(0,W._)`${ne.default.data}, ${vW(s)}`,n.$async,()=>t.code(NC(r,s)).code(i))}function vW(t){return(0,W._)`{${ne.default.instancePath}="", ${ne.default.parentData}, ${ne.default.parentDataProperty}, ${ne.default.rootData}=${ne.default.data}${t.dynamicRef?(0,W._)`, ${ne.default.dynamicAnchors}={}`:W.nil}}={}`}function $W(t,e){t.if(ne.default.valCxt,()=>{t.var(ne.default.instancePath,(0,W._)`${ne.default.valCxt}.${ne.default.instancePath}`),t.var(ne.default.parentData,(0,W._)`${ne.default.valCxt}.${ne.default.parentData}`),t.var(ne.default.parentDataProperty,(0,W._)`${ne.default.valCxt}.${ne.default.parentDataProperty}`),t.var(ne.default.rootData,(0,W._)`${ne.default.valCxt}.${ne.default.rootData}`),e.dynamicRef&&t.var(ne.default.dynamicAnchors,(0,W._)`${ne.default.valCxt}.${ne.default.dynamicAnchors}`)},()=>{t.var(ne.default.instancePath,(0,W._)`""`),t.var(ne.default.parentData,(0,W._)`undefined`),t.var(ne.default.parentDataProperty,(0,W._)`undefined`),t.var(ne.default.rootData,ne.default.data),e.dynamicRef&&t.var(ne.default.dynamicAnchors,(0,W._)`{}`)})}function bW(t){let{schema:e,opts:r,gen:n}=t;kC(t,()=>{r.$comment&&e.$comment&&xC(t),PW(t),n.let(ne.default.vErrors,null),n.let(ne.default.errors,0),r.unevaluated&&wW(t),LC(t),NW(t)})}function wW(t){let{gen:e,validateName:r}=t;t.evaluated=e.const("evaluated",(0,W._)`${r}.evaluated`),e.if((0,W._)`${t.evaluated}.dynamicProps`,()=>e.assign((0,W._)`${t.evaluated}.props`,(0,W._)`undefined`)),e.if((0,W._)`${t.evaluated}.dynamicItems`,()=>e.assign((0,W._)`${t.evaluated}.items`,(0,W._)`undefined`))}function NC(t,e){let r=typeof t=="object"&&t[e.schemaId];return r&&(e.code.source||e.code.process)?(0,W._)`/*# sourceURL=${r} */`:W.nil}function EW(t,e){if(jC(t)&&(DC(t),qC(t))){SW(t,e);return}(0,AC.boolOrEmptySchema)(t,e)}function qC({schema:t,self:e}){if(typeof t=="boolean")return!t;for(let r in t)if(e.RULES.all[r])return!0;return!1}function jC(t){return typeof t.schema!="boolean"}function SW(t,e){let{schema:r,gen:n,opts:s}=t;s.$comment&&r.$comment&&xC(t),TW(t),OW(t);let i=n.const("_errs",ne.default.errors);LC(t,i),n.var(e,(0,W._)`${i} === ${ne.default.errors}`)}function DC(t){(0,_s.checkUnknownRules)(t),RW(t)}function LC(t,e){if(t.opts.jtd)return IC(t,[],!1,e);let r=(0,OC.getSchemaTypes)(t.schema),n=(0,OC.coerceAndCheckDataType)(t,r);IC(t,r,!n,e)}function RW(t){let{schema:e,errSchemaPath:r,opts:n,self:s}=t;e.$ref&&n.ignoreKeywordsWithRef&&(0,_s.schemaHasRulesButRef)(e,s.RULES)&&s.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function PW(t){let{schema:e,opts:r}=t;e.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,_s.checkStrictMode)(t,"default is ignored in the schema root")}function TW(t){let e=t.schema[t.opts.schemaId];e&&(t.baseId=(0,gW.resolveUrl)(t.opts.uriResolver,t.baseId,e))}function OW(t){if(t.schema.$async&&!t.schemaEnv.$async)throw new Error("async schema in sync schema")}function xC({gen:t,schemaEnv:e,schema:r,errSchemaPath:n,opts:s}){let i=r.$comment;if(s.$comment===!0)t.code((0,W._)`${ne.default.self}.logger.log(${i})`);else if(typeof s.$comment=="function"){let o=(0,W.str)`${n}/$comment`,a=t.scopeValue("root",{ref:e.root});t.code((0,W._)`${ne.default.self}.opts.$comment(${i}, ${o}, ${a}.schema)`)}}function NW(t){let{gen:e,schemaEnv:r,validateName:n,ValidationError:s,opts:i}=t;r.$async?e.if((0,W._)`${ne.default.errors} === 0`,()=>e.return(ne.default.data),()=>e.throw((0,W._)`new ${s}(${ne.default.vErrors})`)):(e.assign((0,W._)`${n}.errors`,ne.default.vErrors),i.unevaluated&&IW(t),e.return((0,W._)`${ne.default.errors} === 0`))}function IW({gen:t,evaluated:e,props:r,items:n}){r instanceof W.Name&&t.assign((0,W._)`${e}.props`,r),n instanceof W.Name&&t.assign((0,W._)`${e}.items`,n)}function IC(t,e,r,n){let{gen:s,schema:i,data:o,allErrors:a,opts:u,self:l}=t,{RULES:c}=l;if(i.$ref&&(u.ignoreKeywordsWithRef||!(0,_s.schemaHasRulesButRef)(i,c))){s.block(()=>MC(t,"$ref",c.all.$ref.definition));return}u.jtd||CW(t,e),s.block(()=>{for(let h of c.rules)f(h);f(c.post)});function f(h){(0,l_.shouldUseGroup)(i,h)&&(h.type?(s.if((0,zd.checkDataType)(h.type,o,u.strictNumbers)),CC(t,h),e.length===1&&e[0]===h.type&&r&&(s.else(),(0,zd.reportTypeError)(t)),s.endIf()):CC(t,h),a||s.if((0,W._)`${ne.default.errors} === ${n||0}`))}}function CC(t,e){let{gen:r,schema:n,opts:{useDefaults:s}}=t;s&&(0,yW.assignDefaults)(t,e.type),r.block(()=>{for(let i of e.rules)(0,l_.shouldUseRule)(n,i)&&MC(t,i.keyword,i.definition,e.type)})}function CW(t,e){t.schemaEnv.meta||!t.opts.strictTypes||(AW(t,e),t.opts.allowUnionTypes||kW(t,e),qW(t,t.dataTypes))}function AW(t,e){if(e.length){if(!t.dataTypes.length){t.dataTypes=e;return}e.forEach(r=>{FC(t.dataTypes,r)||c_(t,`type "${r}" not allowed by context "${t.dataTypes.join(",")}"`)}),DW(t,e)}}function kW(t,e){e.length>1&&!(e.length===2&&e.includes("null"))&&c_(t,"use allowUnionTypes to allow union type keyword")}function qW(t,e){let r=t.self.RULES.all;for(let n in r){let s=r[n];if(typeof s=="object"&&(0,l_.shouldUseRule)(t.schema,s)){let{type:i}=s.definition;i.length&&!i.some(o=>jW(e,o))&&c_(t,`missing type "${i.join(",")}" for keyword "${n}"`)}}}function jW(t,e){return t.includes(e)||e==="number"&&t.includes("integer")}function FC(t,e){return t.includes(e)||e==="integer"&&t.includes("number")}function DW(t,e){let r=[];for(let n of t.dataTypes)FC(e,n)?r.push(n):e.includes("integer")&&n==="number"&&r.push("integer");t.dataTypes=r}function c_(t,e){let r=t.schemaEnv.baseId+t.errSchemaPath;e+=` at "${r}" (strictTypes)`,(0,_s.checkStrictMode)(t,e,t.opts.strictTypes)}var Ud=class{constructor(e,r,n){if((0,ml.validateKeywordUsage)(e,r,n),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=n,this.data=e.data,this.schema=e.schema[n],this.$data=r.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,_s.schemaRefOrVal)(e,this.schema,n,this.$data),this.schemaType=r.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=r,this.$data)this.schemaCode=e.gen.const("vSchema",VC(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,ml.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=e.gen.const("_errs",ne.default.errors))}result(e,r,n){this.failResult((0,W.not)(e),r,n)}failResult(e,r,n){this.gen.if(e),n?n():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,r){this.failResult((0,W.not)(e),void 0,r)}fail(e){if(e===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);let{schemaCode:r}=this;this.fail((0,W._)`${r} !== undefined && (${(0,W.or)(this.invalid$data(),e)})`)}error(e,r,n){if(r){this.setParams(r),this._error(e,n),this.setParams({});return}this._error(e,n)}_error(e,r){(e?pl.reportExtraError:pl.reportError)(this,this.def.error,r)}$dataError(){(0,pl.reportError)(this,this.def.$dataError||pl.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,pl.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,r){r?Object.assign(this.params,e):this.params=e}block$data(e,r,n=W.nil){this.gen.block(()=>{this.check$data(e,n),r()})}check$data(e=W.nil,r=W.nil){if(!this.$data)return;let{gen:n,schemaCode:s,schemaType:i,def:o}=this;n.if((0,W.or)((0,W._)`${s} === undefined`,r)),e!==W.nil&&n.assign(e,!0),(i.length||o.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),e!==W.nil&&n.assign(e,!1)),n.else()}invalid$data(){let{gen:e,schemaCode:r,schemaType:n,def:s,it:i}=this;return(0,W.or)(o(),a());function o(){if(n.length){if(!(r instanceof W.Name))throw new Error("ajv implementation error");let u=Array.isArray(n)?n:[n];return(0,W._)`${(0,zd.checkDataTypes)(u,r,i.opts.strictNumbers,zd.DataType.Wrong)}`}return W.nil}function a(){if(s.validateSchema){let u=e.scopeValue("validate$data",{ref:s.validateSchema});return(0,W._)`!${u}(${r})`}return W.nil}}subschema(e,r){let n=(0,u_.getSubschema)(this.it,e);(0,u_.extendSubschemaData)(n,this.it,e),(0,u_.extendSubschemaMode)(n,e);let s={...this.it,...n,items:void 0,props:void 0};return EW(s,r),s}mergeEvaluated(e,r){let{it:n,gen:s}=this;n.opts.unevaluated&&(n.props!==!0&&e.props!==void 0&&(n.props=_s.mergeEvaluated.props(s,e.props,n.props,r)),n.items!==!0&&e.items!==void 0&&(n.items=_s.mergeEvaluated.items(s,e.items,n.items,r)))}mergeValidEvaluated(e,r){let{it:n,gen:s}=this;if(n.opts.unevaluated&&(n.props!==!0||n.items!==!0))return s.if(r,()=>this.mergeEvaluated(e,W.Name)),!0}};ei.KeywordCxt=Ud;function MC(t,e,r,n){let s=new Ud(t,r,e);"code"in r?r.code(s,n):s.$data&&r.validate?(0,ml.funcKeywordCode)(s,r):"macro"in r?(0,ml.macroKeywordCode)(s,r):(r.compile||r.validate)&&(0,ml.funcKeywordCode)(s,r)}var LW=/^\/(?:[^~]|~0|~1)*$/,xW=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function VC(t,{dataLevel:e,dataNames:r,dataPathArr:n}){let s,i;if(t==="")return ne.default.rootData;if(t[0]==="/"){if(!LW.test(t))throw new Error(`Invalid JSON-pointer: ${t}`);s=t,i=ne.default.rootData}else{let l=xW.exec(t);if(!l)throw new Error(`Invalid JSON-pointer: ${t}`);let c=+l[1];if(s=l[2],s==="#"){if(c>=e)throw new Error(u("property/index",c));return n[e-c]}if(c>e)throw new Error(u("data",c));if(i=r[e-c],!s)return i}let o=i,a=s.split("/");for(let l of a)l&&(i=(0,W._)`${i}${(0,W.getProperty)((0,_s.unescapeJsonPointer)(l))}`,o=(0,W._)`${o} && ${i}`);return o;function u(l,c){return`Cannot access ${l} ${c} levels up, current level is ${e}`}}ei.getData=VC});var Hd=$(d_=>{"use strict";Object.defineProperty(d_,"__esModule",{value:!0});var f_=class extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}};d_.default=f_});var Kd=$(m_=>{"use strict";Object.defineProperty(m_,"__esModule",{value:!0});var h_=hl(),p_=class extends Error{constructor(e,r,n,s){super(s||`can't resolve reference ${n} from id ${r}`),this.missingRef=(0,h_.resolveUrl)(e,r,n),this.missingSchema=(0,h_.normalizeId)((0,h_.getFullPath)(e,this.missingRef))}};m_.default=p_});var Gd=$(on=>{"use strict";Object.defineProperty(on,"__esModule",{value:!0});on.resolveSchema=on.getCompilingSchema=on.resolveRef=on.compileSchema=on.SchemaEnv=void 0;var Pn=fe(),FW=Hd(),eo=gs(),Tn=hl(),zC=De(),MW=yl(),fa=class{constructor(e){var r;this.refs={},this.dynamicAnchors={};let n;typeof e.schema=="object"&&(n=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=(r=e.baseId)!==null&&r!==void 0?r:(0,Tn.normalizeId)(n?.[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=n?.$async,this.refs={}}};on.SchemaEnv=fa;function g_(t){let e=UC.call(this,t);if(e)return e;let r=(0,Tn.getFullPath)(this.opts.uriResolver,t.root.baseId),{es5:n,lines:s}=this.opts.code,{ownProperties:i}=this.opts,o=new Pn.CodeGen(this.scope,{es5:n,lines:s,ownProperties:i}),a;t.$async&&(a=o.scopeValue("Error",{ref:FW.default,code:(0,Pn._)`require("ajv/dist/runtime/validation_error").default`}));let u=o.scopeName("validate");t.validateName=u;let l={gen:o,allErrors:this.opts.allErrors,data:eo.default.data,parentData:eo.default.parentData,parentDataProperty:eo.default.parentDataProperty,dataNames:[eo.default.data],dataPathArr:[Pn.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:t.schema,code:(0,Pn.stringify)(t.schema)}:{ref:t.schema}),validateName:u,ValidationError:a,schema:t.schema,schemaEnv:t,rootId:r,baseId:t.baseId||r,schemaPath:Pn.nil,errSchemaPath:t.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,Pn._)`""`,opts:this.opts,self:this},c;try{this._compilations.add(t),(0,MW.validateFunctionCode)(l),o.optimize(this.opts.code.optimize);let f=o.toString();c=`${o.scopeRefs(eo.default.scope)}return ${f}`,this.opts.code.process&&(c=this.opts.code.process(c,t));let d=new Function(`${eo.default.self}`,`${eo.default.scope}`,c)(this,this.scope.get());if(this.scope.value(u,{ref:d}),d.errors=null,d.schema=t.schema,d.schemaEnv=t,t.$async&&(d.$async=!0),this.opts.code.source===!0&&(d.source={validateName:u,validateCode:f,scopeValues:o._values}),this.opts.unevaluated){let{props:p,items:m}=l;d.evaluated={props:p instanceof Pn.Name?void 0:p,items:m instanceof Pn.Name?void 0:m,dynamicProps:p instanceof Pn.Name,dynamicItems:m instanceof Pn.Name},d.source&&(d.source.evaluated=(0,Pn.stringify)(d.evaluated))}return t.validate=d,t}catch(f){throw delete t.validate,delete t.validateName,c&&this.logger.error("Error compiling schema, function code:",c),f}finally{this._compilations.delete(t)}}on.compileSchema=g_;function VW(t,e,r){var n;r=(0,Tn.resolveUrl)(this.opts.uriResolver,e,r);let s=t.refs[r];if(s)return s;let i=HW.call(this,t,r);if(i===void 0){let o=(n=t.localRefs)===null||n===void 0?void 0:n[r],{schemaId:a}=this.opts;o&&(i=new fa({schema:o,schemaId:a,root:t,baseId:e}))}if(i!==void 0)return t.refs[r]=zW.call(this,i)}on.resolveRef=VW;function zW(t){return(0,Tn.inlineRef)(t.schema,this.opts.inlineRefs)?t.schema:t.validate?t:g_.call(this,t)}function UC(t){for(let e of this._compilations)if(UW(e,t))return e}on.getCompilingSchema=UC;function UW(t,e){return t.schema===e.schema&&t.root===e.root&&t.baseId===e.baseId}function HW(t,e){let r;for(;typeof(r=this.refs[e])=="string";)e=r;return r||this.schemas[e]||Bd.call(this,t,e)}function Bd(t,e){let r=this.opts.uriResolver.parse(e),n=(0,Tn._getFullPath)(this.opts.uriResolver,r),s=(0,Tn.getFullPath)(this.opts.uriResolver,t.baseId,void 0);if(Object.keys(t.schema).length>0&&n===s)return y_.call(this,r,t);let i=(0,Tn.normalizeId)(n),o=this.refs[i]||this.schemas[i];if(typeof o=="string"){let a=Bd.call(this,t,o);return typeof a?.schema!="object"?void 0:y_.call(this,r,a)}if(typeof o?.schema=="object"){if(o.validate||g_.call(this,o),i===(0,Tn.normalizeId)(e)){let{schema:a}=o,{schemaId:u}=this.opts,l=a[u];return l&&(s=(0,Tn.resolveUrl)(this.opts.uriResolver,s,l)),new fa({schema:a,schemaId:u,root:t,baseId:s})}return y_.call(this,r,o)}}on.resolveSchema=Bd;var KW=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function y_(t,{baseId:e,schema:r,root:n}){var s;if(((s=t.fragment)===null||s===void 0?void 0:s[0])!=="/")return;for(let a of t.fragment.slice(1).split("/")){if(typeof r=="boolean")return;let u=r[(0,zC.unescapeFragment)(a)];if(u===void 0)return;r=u;let l=typeof r=="object"&&r[this.opts.schemaId];!KW.has(a)&&l&&(e=(0,Tn.resolveUrl)(this.opts.uriResolver,e,l))}let i;if(typeof r!="boolean"&&r.$ref&&!(0,zC.schemaHasRulesButRef)(r,this.RULES)){let a=(0,Tn.resolveUrl)(this.opts.uriResolver,e,r.$ref);i=Bd.call(this,n,a)}let{schemaId:o}=this.opts;if(i=i||new fa({schema:r,schemaId:o,root:n,baseId:e}),i.schema!==i.root.schema)return i}});var HC=$((Kpe,BW)=>{BW.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var BC=$(__=>{"use strict";Object.defineProperty(__,"__esModule",{value:!0});var KC=pd();KC.code='require("ajv/dist/runtime/uri").default';__.default=KC});var eA=$(Gt=>{"use strict";Object.defineProperty(Gt,"__esModule",{value:!0});Gt.CodeGen=Gt.Name=Gt.nil=Gt.stringify=Gt.str=Gt._=Gt.KeywordCxt=void 0;var GW=yl();Object.defineProperty(Gt,"KeywordCxt",{enumerable:!0,get:function(){return GW.KeywordCxt}});var da=fe();Object.defineProperty(Gt,"_",{enumerable:!0,get:function(){return da._}});Object.defineProperty(Gt,"str",{enumerable:!0,get:function(){return da.str}});Object.defineProperty(Gt,"stringify",{enumerable:!0,get:function(){return da.stringify}});Object.defineProperty(Gt,"nil",{enumerable:!0,get:function(){return da.nil}});Object.defineProperty(Gt,"Name",{enumerable:!0,get:function(){return da.Name}});Object.defineProperty(Gt,"CodeGen",{enumerable:!0,get:function(){return da.CodeGen}});var JW=Hd(),XC=Kd(),YW=Z0(),gl=Gd(),WW=fe(),_l=hl(),Jd=dl(),$_=De(),GC=HC(),XW=BC(),QC=(t,e)=>new RegExp(t,e);QC.code="new RegExp";var QW=["removeAdditional","useDefaults","coerceTypes"],ZW=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),eX={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},tX={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},JC=200;function rX(t){var e,r,n,s,i,o,a,u,l,c,f,h,d,p,m,v,g,w,_,y,b,T,S,N,A;let I=t.strict,O=(e=t.code)===null||e===void 0?void 0:e.optimize,q=O===!0||O===void 0?1:O||0,L=(n=(r=t.code)===null||r===void 0?void 0:r.regExp)!==null&&n!==void 0?n:QC,Z=(s=t.uriResolver)!==null&&s!==void 0?s:XW.default;return{strictSchema:(o=(i=t.strictSchema)!==null&&i!==void 0?i:I)!==null&&o!==void 0?o:!0,strictNumbers:(u=(a=t.strictNumbers)!==null&&a!==void 0?a:I)!==null&&u!==void 0?u:!0,strictTypes:(c=(l=t.strictTypes)!==null&&l!==void 0?l:I)!==null&&c!==void 0?c:"log",strictTuples:(h=(f=t.strictTuples)!==null&&f!==void 0?f:I)!==null&&h!==void 0?h:"log",strictRequired:(p=(d=t.strictRequired)!==null&&d!==void 0?d:I)!==null&&p!==void 0?p:!1,code:t.code?{...t.code,optimize:q,regExp:L}:{optimize:q,regExp:L},loopRequired:(m=t.loopRequired)!==null&&m!==void 0?m:JC,loopEnum:(v=t.loopEnum)!==null&&v!==void 0?v:JC,meta:(g=t.meta)!==null&&g!==void 0?g:!0,messages:(w=t.messages)!==null&&w!==void 0?w:!0,inlineRefs:(_=t.inlineRefs)!==null&&_!==void 0?_:!0,schemaId:(y=t.schemaId)!==null&&y!==void 0?y:"$id",addUsedSchema:(b=t.addUsedSchema)!==null&&b!==void 0?b:!0,validateSchema:(T=t.validateSchema)!==null&&T!==void 0?T:!0,validateFormats:(S=t.validateFormats)!==null&&S!==void 0?S:!0,unicodeRegExp:(N=t.unicodeRegExp)!==null&&N!==void 0?N:!0,int32range:(A=t.int32range)!==null&&A!==void 0?A:!0,uriResolver:Z}}var vl=class{constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts={...e,...rX(e)};let{es5:r,lines:n}=this.opts.code;this.scope=new WW.ValueScope({scope:{},prefixes:ZW,es5:r,lines:n}),this.logger=uX(e.logger);let s=e.validateFormats;e.validateFormats=!1,this.RULES=(0,YW.getRules)(),YC.call(this,eX,e,"NOT SUPPORTED"),YC.call(this,tX,e,"DEPRECATED","warn"),this._metaOpts=oX.call(this),e.formats&&sX.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&iX.call(this,e.keywords),typeof e.meta=="object"&&this.addMetaSchema(e.meta),nX.call(this),e.validateFormats=s}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:e,meta:r,schemaId:n}=this.opts,s=GC;n==="id"&&(s={...GC},s.id=s.$id,delete s.$id),r&&e&&this.addMetaSchema(s,s[n],!1)}defaultMeta(){let{meta:e,schemaId:r}=this.opts;return this.opts.defaultMeta=typeof e=="object"?e[r]||e:void 0}validate(e,r){let n;if(typeof e=="string"){if(n=this.getSchema(e),!n)throw new Error(`no schema with key or ref "${e}"`)}else n=this.compile(e);let s=n(r);return"$async"in n||(this.errors=n.errors),s}compile(e,r){let n=this._addSchema(e,r);return n.validate||this._compileSchemaEnv(n)}compileAsync(e,r){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");let{loadSchema:n}=this.opts;return s.call(this,e,r);async function s(c,f){await i.call(this,c.$schema);let h=this._addSchema(c,f);return h.validate||o.call(this,h)}async function i(c){c&&!this.getSchema(c)&&await s.call(this,{$ref:c},!0)}async function o(c){try{return this._compileSchemaEnv(c)}catch(f){if(!(f instanceof XC.default))throw f;return a.call(this,f),await u.call(this,f.missingSchema),o.call(this,c)}}function a({missingSchema:c,missingRef:f}){if(this.refs[c])throw new Error(`AnySchema ${c} is loaded but ${f} cannot be resolved`)}async function u(c){let f=await l.call(this,c);this.refs[c]||await i.call(this,f.$schema),this.refs[c]||this.addSchema(f,c,r)}async function l(c){let f=this._loading[c];if(f)return f;try{return await(this._loading[c]=n(c))}finally{delete this._loading[c]}}}addSchema(e,r,n,s=this.opts.validateSchema){if(Array.isArray(e)){for(let o of e)this.addSchema(o,void 0,n,s);return this}let i;if(typeof e=="object"){let{schemaId:o}=this.opts;if(i=e[o],i!==void 0&&typeof i!="string")throw new Error(`schema ${o} must be string`)}return r=(0,_l.normalizeId)(r||i),this._checkUnique(r),this.schemas[r]=this._addSchema(e,n,r,s,!0),this}addMetaSchema(e,r,n=this.opts.validateSchema){return this.addSchema(e,r,!0,n),this}validateSchema(e,r){if(typeof e=="boolean")return!0;let n;if(n=e.$schema,n!==void 0&&typeof n!="string")throw new Error("$schema must be a string");if(n=n||this.opts.defaultMeta||this.defaultMeta(),!n)return this.logger.warn("meta-schema not available"),this.errors=null,!0;let s=this.validate(n,e);if(!s&&r){let i="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(i);else throw new Error(i)}return s}getSchema(e){let r;for(;typeof(r=WC.call(this,e))=="string";)e=r;if(r===void 0){let{schemaId:n}=this.opts,s=new gl.SchemaEnv({schema:{},schemaId:n});if(r=gl.resolveSchema.call(this,s,e),!r)return;this.refs[e]=r}return r.validate||this._compileSchemaEnv(r)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let r=WC.call(this,e);return typeof r=="object"&&this._cache.delete(r.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{let r=e;this._cache.delete(r);let n=e[this.opts.schemaId];return n&&(n=(0,_l.normalizeId)(n),delete this.schemas[n],delete this.refs[n]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(let r of e)this.addKeyword(r);return this}addKeyword(e,r){let n;if(typeof e=="string")n=e,typeof r=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),r.keyword=n);else if(typeof e=="object"&&r===void 0){if(r=e,n=r.keyword,Array.isArray(n)&&!n.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(cX.call(this,n,r),!r)return(0,$_.eachItem)(n,i=>v_.call(this,i)),this;dX.call(this,r);let s={...r,type:(0,Jd.getJSONTypes)(r.type),schemaType:(0,Jd.getJSONTypes)(r.schemaType)};return(0,$_.eachItem)(n,s.type.length===0?i=>v_.call(this,i,s):i=>s.type.forEach(o=>v_.call(this,i,s,o))),this}getKeyword(e){let r=this.RULES.all[e];return typeof r=="object"?r.definition:!!r}removeKeyword(e){let{RULES:r}=this;delete r.keywords[e],delete r.all[e];for(let n of r.rules){let s=n.rules.findIndex(i=>i.keyword===e);s>=0&&n.rules.splice(s,1)}return this}addFormat(e,r){return typeof r=="string"&&(r=new RegExp(r)),this.formats[e]=r,this}errorsText(e=this.errors,{separator:r=", ",dataVar:n="data"}={}){return!e||e.length===0?"No errors":e.map(s=>`${n}${s.instancePath} ${s.message}`).reduce((s,i)=>s+r+i)}$dataMetaSchema(e,r){let n=this.RULES.all;e=JSON.parse(JSON.stringify(e));for(let s of r){let i=s.split("/").slice(1),o=e;for(let a of i)o=o[a];for(let a in n){let u=n[a];if(typeof u!="object")continue;let{$data:l}=u.definition,c=o[a];l&&c&&(o[a]=ZC(c))}}return e}_removeAllSchemas(e,r){for(let n in e){let s=e[n];(!r||r.test(n))&&(typeof s=="string"?delete e[n]:s&&!s.meta&&(this._cache.delete(s.schema),delete e[n]))}}_addSchema(e,r,n,s=this.opts.validateSchema,i=this.opts.addUsedSchema){let o,{schemaId:a}=this.opts;if(typeof e=="object")o=e[a];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof e!="boolean")throw new Error("schema must be object or boolean")}let u=this._cache.get(e);if(u!==void 0)return u;n=(0,_l.normalizeId)(o||n);let l=_l.getSchemaRefs.call(this,e,n);return u=new gl.SchemaEnv({schema:e,schemaId:a,meta:r,baseId:n,localRefs:l}),this._cache.set(u.schema,u),i&&!n.startsWith("#")&&(n&&this._checkUnique(n),this.refs[n]=u),s&&this.validateSchema(e,!0),u}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw new Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):gl.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}_compileMetaSchema(e){let r=this.opts;this.opts=this._metaOpts;try{gl.compileSchema.call(this,e)}finally{this.opts=r}}};Gt.default=vl;vl.ValidationError=JW.default;vl.MissingRefError=XC.default;function YC(t,e,r,n="error"){for(let s in t){let i=s;i in e&&this.logger[n](`${r}: option ${s}. ${t[i]}`)}}function WC(t){return t=(0,_l.normalizeId)(t),this.schemas[t]||this.refs[t]}function nX(){let t=this.opts.schemas;if(t)if(Array.isArray(t))this.addSchema(t);else for(let e in t)this.addSchema(t[e],e)}function sX(){for(let t in this.opts.formats){let e=this.opts.formats[t];e&&this.addFormat(t,e)}}function iX(t){if(Array.isArray(t)){this.addVocabulary(t);return}this.logger.warn("keywords option as map is deprecated, pass array");for(let e in t){let r=t[e];r.keyword||(r.keyword=e),this.addKeyword(r)}}function oX(){let t={...this.opts};for(let e of QW)delete t[e];return t}var aX={log(){},warn(){},error(){}};function uX(t){if(t===!1)return aX;if(t===void 0)return console;if(t.log&&t.warn&&t.error)return t;throw new Error("logger must implement log, warn and error methods")}var lX=/^[a-z_$][a-z0-9_$:-]*$/i;function cX(t,e){let{RULES:r}=this;if((0,$_.eachItem)(t,n=>{if(r.keywords[n])throw new Error(`Keyword ${n} is already defined`);if(!lX.test(n))throw new Error(`Keyword ${n} has invalid name`)}),!!e&&e.$data&&!("code"in e||"validate"in e))throw new Error('$data keyword must have "code" or "validate" function')}function v_(t,e,r){var n;let s=e?.post;if(r&&s)throw new Error('keyword with "post" flag cannot have "type"');let{RULES:i}=this,o=s?i.post:i.rules.find(({type:u})=>u===r);if(o||(o={type:r,rules:[]},i.rules.push(o)),i.keywords[t]=!0,!e)return;let a={keyword:t,definition:{...e,type:(0,Jd.getJSONTypes)(e.type),schemaType:(0,Jd.getJSONTypes)(e.schemaType)}};e.before?fX.call(this,o,a,e.before):o.rules.push(a),i.all[t]=a,(n=e.implements)===null||n===void 0||n.forEach(u=>this.addKeyword(u))}function fX(t,e,r){let n=t.rules.findIndex(s=>s.keyword===r);n>=0?t.rules.splice(n,0,e):(t.rules.push(e),this.logger.warn(`rule ${r} is not defined`))}function dX(t){let{metaSchema:e}=t;e!==void 0&&(t.$data&&this.opts.$data&&(e=ZC(e)),t.validateSchema=this.compile(e,!0))}var hX={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function ZC(t){return{anyOf:[t,hX]}}});var tA=$(b_=>{"use strict";Object.defineProperty(b_,"__esModule",{value:!0});var pX={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};b_.default=pX});var iA=$(to=>{"use strict";Object.defineProperty(to,"__esModule",{value:!0});to.callRef=to.getValidate=void 0;var mX=Kd(),rA=sn(),Ir=fe(),ha=gs(),nA=Gd(),Yd=De(),yX={keyword:"$ref",schemaType:"string",code(t){let{gen:e,schema:r,it:n}=t,{baseId:s,schemaEnv:i,validateName:o,opts:a,self:u}=n,{root:l}=i;if((r==="#"||r==="#/")&&s===l.baseId)return f();let c=nA.resolveRef.call(u,l,s,r);if(c===void 0)throw new mX.default(n.opts.uriResolver,s,r);if(c instanceof nA.SchemaEnv)return h(c);return d(c);function f(){if(i===l)return Wd(t,o,i,i.$async);let p=e.scopeValue("root",{ref:l});return Wd(t,(0,Ir._)`${p}.validate`,l,l.$async)}function h(p){let m=sA(t,p);Wd(t,m,p,p.$async)}function d(p){let m=e.scopeValue("schema",a.code.source===!0?{ref:p,code:(0,Ir.stringify)(p)}:{ref:p}),v=e.name("valid"),g=t.subschema({schema:p,dataTypes:[],schemaPath:Ir.nil,topSchemaRef:m,errSchemaPath:r},v);t.mergeEvaluated(g),t.ok(v)}}};function sA(t,e){let{gen:r}=t;return e.validate?r.scopeValue("validate",{ref:e.validate}):(0,Ir._)`${r.scopeValue("wrapper",{ref:e})}.validate`}to.getValidate=sA;function Wd(t,e,r,n){let{gen:s,it:i}=t,{allErrors:o,schemaEnv:a,opts:u}=i,l=u.passContext?ha.default.this:Ir.nil;n?c():f();function c(){if(!a.$async)throw new Error("async schema referenced by sync schema");let p=s.let("valid");s.try(()=>{s.code((0,Ir._)`await ${(0,rA.callValidateCode)(t,e,l)}`),d(e),o||s.assign(p,!0)},m=>{s.if((0,Ir._)`!(${m} instanceof ${i.ValidationError})`,()=>s.throw(m)),h(m),o||s.assign(p,!1)}),t.ok(p)}function f(){t.result((0,rA.callValidateCode)(t,e,l),()=>d(e),()=>h(e))}function h(p){let m=(0,Ir._)`${p}.errors`;s.assign(ha.default.vErrors,(0,Ir._)`${ha.default.vErrors} === null ? ${m} : ${ha.default.vErrors}.concat(${m})`),s.assign(ha.default.errors,(0,Ir._)`${ha.default.vErrors}.length`)}function d(p){var m;if(!i.opts.unevaluated)return;let v=(m=r?.validate)===null||m===void 0?void 0:m.evaluated;if(i.props!==!0)if(v&&!v.dynamicProps)v.props!==void 0&&(i.props=Yd.mergeEvaluated.props(s,v.props,i.props));else{let g=s.var("props",(0,Ir._)`${p}.evaluated.props`);i.props=Yd.mergeEvaluated.props(s,g,i.props,Ir.Name)}if(i.items!==!0)if(v&&!v.dynamicItems)v.items!==void 0&&(i.items=Yd.mergeEvaluated.items(s,v.items,i.items));else{let g=s.var("items",(0,Ir._)`${p}.evaluated.items`);i.items=Yd.mergeEvaluated.items(s,g,i.items,Ir.Name)}}}to.callRef=Wd;to.default=yX});var oA=$(w_=>{"use strict";Object.defineProperty(w_,"__esModule",{value:!0});var gX=tA(),_X=iA(),vX=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",gX.default,_X.default];w_.default=vX});var aA=$(E_=>{"use strict";Object.defineProperty(E_,"__esModule",{value:!0});var Xd=fe(),ti=Xd.operators,Qd={maximum:{okStr:"<=",ok:ti.LTE,fail:ti.GT},minimum:{okStr:">=",ok:ti.GTE,fail:ti.LT},exclusiveMaximum:{okStr:"<",ok:ti.LT,fail:ti.GTE},exclusiveMinimum:{okStr:">",ok:ti.GT,fail:ti.LTE}},$X={message:({keyword:t,schemaCode:e})=>(0,Xd.str)`must be ${Qd[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>(0,Xd._)`{comparison: ${Qd[t].okStr}, limit: ${e}}`},bX={keyword:Object.keys(Qd),type:"number",schemaType:"number",$data:!0,error:$X,code(t){let{keyword:e,data:r,schemaCode:n}=t;t.fail$data((0,Xd._)`${r} ${Qd[e].fail} ${n} || isNaN(${r})`)}};E_.default=bX});var uA=$(S_=>{"use strict";Object.defineProperty(S_,"__esModule",{value:!0});var $l=fe(),wX={message:({schemaCode:t})=>(0,$l.str)`must be multiple of ${t}`,params:({schemaCode:t})=>(0,$l._)`{multipleOf: ${t}}`},EX={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:wX,code(t){let{gen:e,data:r,schemaCode:n,it:s}=t,i=s.opts.multipleOfPrecision,o=e.let("res"),a=i?(0,$l._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${i}`:(0,$l._)`${o} !== parseInt(${o})`;t.fail$data((0,$l._)`(${n} === 0 || (${o} = ${r}/${n}, ${a}))`)}};S_.default=EX});var cA=$(R_=>{"use strict";Object.defineProperty(R_,"__esModule",{value:!0});function lA(t){let e=t.length,r=0,n=0,s;for(;n<e;)r++,s=t.charCodeAt(n++),s>=55296&&s<=56319&&n<e&&(s=t.charCodeAt(n),(s&64512)===56320&&n++);return r}R_.default=lA;lA.code='require("ajv/dist/runtime/ucs2length").default'});var fA=$(P_=>{"use strict";Object.defineProperty(P_,"__esModule",{value:!0});var ro=fe(),SX=De(),RX=cA(),PX={message({keyword:t,schemaCode:e}){let r=t==="maxLength"?"more":"fewer";return(0,ro.str)`must NOT have ${r} than ${e} characters`},params:({schemaCode:t})=>(0,ro._)`{limit: ${t}}`},TX={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:PX,code(t){let{keyword:e,data:r,schemaCode:n,it:s}=t,i=e==="maxLength"?ro.operators.GT:ro.operators.LT,o=s.opts.unicode===!1?(0,ro._)`${r}.length`:(0,ro._)`${(0,SX.useFunc)(t.gen,RX.default)}(${r})`;t.fail$data((0,ro._)`${o} ${i} ${n}`)}};P_.default=TX});var dA=$(T_=>{"use strict";Object.defineProperty(T_,"__esModule",{value:!0});var OX=sn(),Zd=fe(),NX={message:({schemaCode:t})=>(0,Zd.str)`must match pattern "${t}"`,params:({schemaCode:t})=>(0,Zd._)`{pattern: ${t}}`},IX={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:NX,code(t){let{data:e,$data:r,schema:n,schemaCode:s,it:i}=t,o=i.opts.unicodeRegExp?"u":"",a=r?(0,Zd._)`(new RegExp(${s}, ${o}))`:(0,OX.usePattern)(t,n);t.fail$data((0,Zd._)`!${a}.test(${e})`)}};T_.default=IX});var hA=$(O_=>{"use strict";Object.defineProperty(O_,"__esModule",{value:!0});var bl=fe(),CX={message({keyword:t,schemaCode:e}){let r=t==="maxProperties"?"more":"fewer";return(0,bl.str)`must NOT have ${r} than ${e} properties`},params:({schemaCode:t})=>(0,bl._)`{limit: ${t}}`},AX={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:CX,code(t){let{keyword:e,data:r,schemaCode:n}=t,s=e==="maxProperties"?bl.operators.GT:bl.operators.LT;t.fail$data((0,bl._)`Object.keys(${r}).length ${s} ${n}`)}};O_.default=AX});var pA=$(N_=>{"use strict";Object.defineProperty(N_,"__esModule",{value:!0});var wl=sn(),El=fe(),kX=De(),qX={message:({params:{missingProperty:t}})=>(0,El.str)`must have required property '${t}'`,params:({params:{missingProperty:t}})=>(0,El._)`{missingProperty: ${t}}`},jX={keyword:"required",type:"object",schemaType:"array",$data:!0,error:qX,code(t){let{gen:e,schema:r,schemaCode:n,data:s,$data:i,it:o}=t,{opts:a}=o;if(!i&&r.length===0)return;let u=r.length>=a.loopRequired;if(o.allErrors?l():c(),a.strictRequired){let d=t.parentSchema.properties,{definedProperties:p}=t.it;for(let m of r)if(d?.[m]===void 0&&!p.has(m)){let v=o.schemaEnv.baseId+o.errSchemaPath,g=`required property "${m}" is not defined at "${v}" (strictRequired)`;(0,kX.checkStrictMode)(o,g,o.opts.strictRequired)}}function l(){if(u||i)t.block$data(El.nil,f);else for(let d of r)(0,wl.checkReportMissingProp)(t,d)}function c(){let d=e.let("missing");if(u||i){let p=e.let("valid",!0);t.block$data(p,()=>h(d,p)),t.ok(p)}else e.if((0,wl.checkMissingProp)(t,r,d)),(0,wl.reportMissingProp)(t,d),e.else()}function f(){e.forOf("prop",n,d=>{t.setParams({missingProperty:d}),e.if((0,wl.noPropertyInData)(e,s,d,a.ownProperties),()=>t.error())})}function h(d,p){t.setParams({missingProperty:d}),e.forOf(d,n,()=>{e.assign(p,(0,wl.propertyInData)(e,s,d,a.ownProperties)),e.if((0,El.not)(p),()=>{t.error(),e.break()})},El.nil)}}};N_.default=jX});var mA=$(I_=>{"use strict";Object.defineProperty(I_,"__esModule",{value:!0});var Sl=fe(),DX={message({keyword:t,schemaCode:e}){let r=t==="maxItems"?"more":"fewer";return(0,Sl.str)`must NOT have ${r} than ${e} items`},params:({schemaCode:t})=>(0,Sl._)`{limit: ${t}}`},LX={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:DX,code(t){let{keyword:e,data:r,schemaCode:n}=t,s=e==="maxItems"?Sl.operators.GT:Sl.operators.LT;t.fail$data((0,Sl._)`${r}.length ${s} ${n}`)}};I_.default=LX});var eh=$(C_=>{"use strict";Object.defineProperty(C_,"__esModule",{value:!0});var yA=Vn();yA.code='require("ajv/dist/runtime/equal").default';C_.default=yA});var gA=$(k_=>{"use strict";Object.defineProperty(k_,"__esModule",{value:!0});var A_=dl(),Jt=fe(),xX=De(),FX=eh(),MX={message:({params:{i:t,j:e}})=>(0,Jt.str)`must NOT have duplicate items (items ## ${e} and ${t} are identical)`,params:({params:{i:t,j:e}})=>(0,Jt._)`{i: ${t}, j: ${e}}`},VX={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:MX,code(t){let{gen:e,data:r,$data:n,schema:s,parentSchema:i,schemaCode:o,it:a}=t;if(!n&&!s)return;let u=e.let("valid"),l=i.items?(0,A_.getSchemaTypes)(i.items):[];t.block$data(u,c,(0,Jt._)`${o} === false`),t.ok(u);function c(){let p=e.let("i",(0,Jt._)`${r}.length`),m=e.let("j");t.setParams({i:p,j:m}),e.assign(u,!0),e.if((0,Jt._)`${p} > 1`,()=>(f()?h:d)(p,m))}function f(){return l.length>0&&!l.some(p=>p==="object"||p==="array")}function h(p,m){let v=e.name("item"),g=(0,A_.checkDataTypes)(l,v,a.opts.strictNumbers,A_.DataType.Wrong),w=e.const("indices",(0,Jt._)`{}`);e.for((0,Jt._)`;${p}--;`,()=>{e.let(v,(0,Jt._)`${r}[${p}]`),e.if(g,(0,Jt._)`continue`),l.length>1&&e.if((0,Jt._)`typeof ${v} == "string"`,(0,Jt._)`${v} += "_"`),e.if((0,Jt._)`typeof ${w}[${v}] == "number"`,()=>{e.assign(m,(0,Jt._)`${w}[${v}]`),t.error(),e.assign(u,!1).break()}).code((0,Jt._)`${w}[${v}] = ${p}`)})}function d(p,m){let v=(0,xX.useFunc)(e,FX.default),g=e.name("outer");e.label(g).for((0,Jt._)`;${p}--;`,()=>e.for((0,Jt._)`${m} = ${p}; ${m}--;`,()=>e.if((0,Jt._)`${v}(${r}[${p}], ${r}[${m}])`,()=>{t.error(),e.assign(u,!1).break(g)})))}}};k_.default=VX});var _A=$(j_=>{"use strict";Object.defineProperty(j_,"__esModule",{value:!0});var q_=fe(),zX=De(),UX=eh(),HX={message:"must be equal to constant",params:({schemaCode:t})=>(0,q_._)`{allowedValue: ${t}}`},KX={keyword:"const",$data:!0,error:HX,code(t){let{gen:e,data:r,$data:n,schemaCode:s,schema:i}=t;n||i&&typeof i=="object"?t.fail$data((0,q_._)`!${(0,zX.useFunc)(e,UX.default)}(${r}, ${s})`):t.fail((0,q_._)`${i} !== ${r}`)}};j_.default=KX});var vA=$(D_=>{"use strict";Object.defineProperty(D_,"__esModule",{value:!0});var Rl=fe(),BX=De(),GX=eh(),JX={message:"must be equal to one of the allowed values",params:({schemaCode:t})=>(0,Rl._)`{allowedValues: ${t}}`},YX={keyword:"enum",schemaType:"array",$data:!0,error:JX,code(t){let{gen:e,data:r,$data:n,schema:s,schemaCode:i,it:o}=t;if(!n&&s.length===0)throw new Error("enum must have non-empty array");let a=s.length>=o.opts.loopEnum,u,l=()=>u??(u=(0,BX.useFunc)(e,GX.default)),c;if(a||n)c=e.let("valid"),t.block$data(c,f);else{if(!Array.isArray(s))throw new Error("ajv implementation error");let d=e.const("vSchema",i);c=(0,Rl.or)(...s.map((p,m)=>h(d,m)))}t.pass(c);function f(){e.assign(c,!1),e.forOf("v",i,d=>e.if((0,Rl._)`${l()}(${r}, ${d})`,()=>e.assign(c,!0).break()))}function h(d,p){let m=s[p];return typeof m=="object"&&m!==null?(0,Rl._)`${l()}(${r}, ${d}[${p}])`:(0,Rl._)`${r} === ${m}`}}};D_.default=YX});var $A=$(L_=>{"use strict";Object.defineProperty(L_,"__esModule",{value:!0});var WX=aA(),XX=uA(),QX=fA(),ZX=dA(),eQ=hA(),tQ=pA(),rQ=mA(),nQ=gA(),sQ=_A(),iQ=vA(),oQ=[WX.default,XX.default,QX.default,ZX.default,eQ.default,tQ.default,rQ.default,nQ.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},sQ.default,iQ.default];L_.default=oQ});var F_=$(Pl=>{"use strict";Object.defineProperty(Pl,"__esModule",{value:!0});Pl.validateAdditionalItems=void 0;var no=fe(),x_=De(),aQ={message:({params:{len:t}})=>(0,no.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,no._)`{limit: ${t}}`},uQ={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:aQ,code(t){let{parentSchema:e,it:r}=t,{items:n}=e;if(!Array.isArray(n)){(0,x_.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}bA(t,n)}};function bA(t,e){let{gen:r,schema:n,data:s,keyword:i,it:o}=t;o.items=!0;let a=r.const("len",(0,no._)`${s}.length`);if(n===!1)t.setParams({len:e.length}),t.pass((0,no._)`${a} <= ${e.length}`);else if(typeof n=="object"&&!(0,x_.alwaysValidSchema)(o,n)){let l=r.var("valid",(0,no._)`${a} <= ${e.length}`);r.if((0,no.not)(l),()=>u(l)),t.ok(l)}function u(l){r.forRange("i",e.length,a,c=>{t.subschema({keyword:i,dataProp:c,dataPropType:x_.Type.Num},l),o.allErrors||r.if((0,no.not)(l),()=>r.break())})}}Pl.validateAdditionalItems=bA;Pl.default=uQ});var M_=$(Tl=>{"use strict";Object.defineProperty(Tl,"__esModule",{value:!0});Tl.validateTuple=void 0;var wA=fe(),th=De(),lQ=sn(),cQ={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(t){let{schema:e,it:r}=t;if(Array.isArray(e))return EA(t,"additionalItems",e);r.items=!0,!(0,th.alwaysValidSchema)(r,e)&&t.ok((0,lQ.validateArray)(t))}};function EA(t,e,r=t.schema){let{gen:n,parentSchema:s,data:i,keyword:o,it:a}=t;c(s),a.opts.unevaluated&&r.length&&a.items!==!0&&(a.items=th.mergeEvaluated.items(n,r.length,a.items));let u=n.name("valid"),l=n.const("len",(0,wA._)`${i}.length`);r.forEach((f,h)=>{(0,th.alwaysValidSchema)(a,f)||(n.if((0,wA._)`${l} > ${h}`,()=>t.subschema({keyword:o,schemaProp:h,dataProp:h},u)),t.ok(u))});function c(f){let{opts:h,errSchemaPath:d}=a,p=r.length,m=p===f.minItems&&(p===f.maxItems||f[e]===!1);if(h.strictTuples&&!m){let v=`"${o}" is ${p}-tuple, but minItems or maxItems/${e} are not specified or different at path "${d}"`;(0,th.checkStrictMode)(a,v,h.strictTuples)}}}Tl.validateTuple=EA;Tl.default=cQ});var SA=$(V_=>{"use strict";Object.defineProperty(V_,"__esModule",{value:!0});var fQ=M_(),dQ={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:t=>(0,fQ.validateTuple)(t,"items")};V_.default=dQ});var PA=$(z_=>{"use strict";Object.defineProperty(z_,"__esModule",{value:!0});var RA=fe(),hQ=De(),pQ=sn(),mQ=F_(),yQ={message:({params:{len:t}})=>(0,RA.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,RA._)`{limit: ${t}}`},gQ={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:yQ,code(t){let{schema:e,parentSchema:r,it:n}=t,{prefixItems:s}=r;n.items=!0,!(0,hQ.alwaysValidSchema)(n,e)&&(s?(0,mQ.validateAdditionalItems)(t,s):t.ok((0,pQ.validateArray)(t)))}};z_.default=gQ});var TA=$(U_=>{"use strict";Object.defineProperty(U_,"__esModule",{value:!0});var an=fe(),rh=De(),_Q={message:({params:{min:t,max:e}})=>e===void 0?(0,an.str)`must contain at least ${t} valid item(s)`:(0,an.str)`must contain at least ${t} and no more than ${e} valid item(s)`,params:({params:{min:t,max:e}})=>e===void 0?(0,an._)`{minContains: ${t}}`:(0,an._)`{minContains: ${t}, maxContains: ${e}}`},vQ={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:_Q,code(t){let{gen:e,schema:r,parentSchema:n,data:s,it:i}=t,o,a,{minContains:u,maxContains:l}=n;i.opts.next?(o=u===void 0?1:u,a=l):o=1;let c=e.const("len",(0,an._)`${s}.length`);if(t.setParams({min:o,max:a}),a===void 0&&o===0){(0,rh.checkStrictMode)(i,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,rh.checkStrictMode)(i,'"minContains" > "maxContains" is always invalid'),t.fail();return}if((0,rh.alwaysValidSchema)(i,r)){let m=(0,an._)`${c} >= ${o}`;a!==void 0&&(m=(0,an._)`${m} && ${c} <= ${a}`),t.pass(m);return}i.items=!0;let f=e.name("valid");a===void 0&&o===1?d(f,()=>e.if(f,()=>e.break())):o===0?(e.let(f,!0),a!==void 0&&e.if((0,an._)`${s}.length > 0`,h)):(e.let(f,!1),h()),t.result(f,()=>t.reset());function h(){let m=e.name("_valid"),v=e.let("count",0);d(m,()=>e.if(m,()=>p(v)))}function d(m,v){e.forRange("i",0,c,g=>{t.subschema({keyword:"contains",dataProp:g,dataPropType:rh.Type.Num,compositeRule:!0},m),v()})}function p(m){e.code((0,an._)`${m}++`),a===void 0?e.if((0,an._)`${m} >= ${o}`,()=>e.assign(f,!0).break()):(e.if((0,an._)`${m} > ${a}`,()=>e.assign(f,!1).break()),o===1?e.assign(f,!0):e.if((0,an._)`${m} >= ${o}`,()=>e.assign(f,!0)))}}};U_.default=vQ});var IA=$(Jn=>{"use strict";Object.defineProperty(Jn,"__esModule",{value:!0});Jn.validateSchemaDeps=Jn.validatePropertyDeps=Jn.error=void 0;var H_=fe(),$Q=De(),Ol=sn();Jn.error={message:({params:{property:t,depsCount:e,deps:r}})=>{let n=e===1?"property":"properties";return(0,H_.str)`must have ${n} ${r} when property ${t} is present`},params:({params:{property:t,depsCount:e,deps:r,missingProperty:n}})=>(0,H_._)`{property: ${t},
    missingProperty: ${n},
    depsCount: ${e},
    deps: ${r}}`};var bQ={keyword:"dependencies",type:"object",schemaType:"object",error:Jn.error,code(t){let[e,r]=wQ(t);OA(t,e),NA(t,r)}};function wQ({schema:t}){let e={},r={};for(let n in t){if(n==="__proto__")continue;let s=Array.isArray(t[n])?e:r;s[n]=t[n]}return[e,r]}function OA(t,e=t.schema){let{gen:r,data:n,it:s}=t;if(Object.keys(e).length===0)return;let i=r.let("missing");for(let o in e){let a=e[o];if(a.length===0)continue;let u=(0,Ol.propertyInData)(r,n,o,s.opts.ownProperties);t.setParams({property:o,depsCount:a.length,deps:a.join(", ")}),s.allErrors?r.if(u,()=>{for(let l of a)(0,Ol.checkReportMissingProp)(t,l)}):(r.if((0,H_._)`${u} && (${(0,Ol.checkMissingProp)(t,a,i)})`),(0,Ol.reportMissingProp)(t,i),r.else())}}Jn.validatePropertyDeps=OA;function NA(t,e=t.schema){let{gen:r,data:n,keyword:s,it:i}=t,o=r.name("valid");for(let a in e)(0,$Q.alwaysValidSchema)(i,e[a])||(r.if((0,Ol.propertyInData)(r,n,a,i.opts.ownProperties),()=>{let u=t.subschema({keyword:s,schemaProp:a},o);t.mergeValidEvaluated(u,o)},()=>r.var(o,!0)),t.ok(o))}Jn.validateSchemaDeps=NA;Jn.default=bQ});var AA=$(K_=>{"use strict";Object.defineProperty(K_,"__esModule",{value:!0});var CA=fe(),EQ=De(),SQ={message:"property name must be valid",params:({params:t})=>(0,CA._)`{propertyName: ${t.propertyName}}`},RQ={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:SQ,code(t){let{gen:e,schema:r,data:n,it:s}=t;if((0,EQ.alwaysValidSchema)(s,r))return;let i=e.name("valid");e.forIn("key",n,o=>{t.setParams({propertyName:o}),t.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},i),e.if((0,CA.not)(i),()=>{t.error(!0),s.allErrors||e.break()})}),t.ok(i)}};K_.default=RQ});var G_=$(B_=>{"use strict";Object.defineProperty(B_,"__esModule",{value:!0});var nh=sn(),On=fe(),PQ=gs(),sh=De(),TQ={message:"must NOT have additional properties",params:({params:t})=>(0,On._)`{additionalProperty: ${t.additionalProperty}}`},OQ={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:TQ,code(t){let{gen:e,schema:r,parentSchema:n,data:s,errsCount:i,it:o}=t;if(!i)throw new Error("ajv implementation error");let{allErrors:a,opts:u}=o;if(o.props=!0,u.removeAdditional!=="all"&&(0,sh.alwaysValidSchema)(o,r))return;let l=(0,nh.allSchemaProperties)(n.properties),c=(0,nh.allSchemaProperties)(n.patternProperties);f(),t.ok((0,On._)`${i} === ${PQ.default.errors}`);function f(){e.forIn("key",s,v=>{!l.length&&!c.length?p(v):e.if(h(v),()=>p(v))})}function h(v){let g;if(l.length>8){let w=(0,sh.schemaRefOrVal)(o,n.properties,"properties");g=(0,nh.isOwnProperty)(e,w,v)}else l.length?g=(0,On.or)(...l.map(w=>(0,On._)`${v} === ${w}`)):g=On.nil;return c.length&&(g=(0,On.or)(g,...c.map(w=>(0,On._)`${(0,nh.usePattern)(t,w)}.test(${v})`))),(0,On.not)(g)}function d(v){e.code((0,On._)`delete ${s}[${v}]`)}function p(v){if(u.removeAdditional==="all"||u.removeAdditional&&r===!1){d(v);return}if(r===!1){t.setParams({additionalProperty:v}),t.error(),a||e.break();return}if(typeof r=="object"&&!(0,sh.alwaysValidSchema)(o,r)){let g=e.name("valid");u.removeAdditional==="failing"?(m(v,g,!1),e.if((0,On.not)(g),()=>{t.reset(),d(v)})):(m(v,g),a||e.if((0,On.not)(g),()=>e.break()))}}function m(v,g,w){let _={keyword:"additionalProperties",dataProp:v,dataPropType:sh.Type.Str};w===!1&&Object.assign(_,{compositeRule:!0,createErrors:!1,allErrors:!1}),t.subschema(_,g)}}};B_.default=OQ});var jA=$(Y_=>{"use strict";Object.defineProperty(Y_,"__esModule",{value:!0});var NQ=yl(),kA=sn(),J_=De(),qA=G_(),IQ={keyword:"properties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,parentSchema:n,data:s,it:i}=t;i.opts.removeAdditional==="all"&&n.additionalProperties===void 0&&qA.default.code(new NQ.KeywordCxt(i,qA.default,"additionalProperties"));let o=(0,kA.allSchemaProperties)(r);for(let f of o)i.definedProperties.add(f);i.opts.unevaluated&&o.length&&i.props!==!0&&(i.props=J_.mergeEvaluated.props(e,(0,J_.toHash)(o),i.props));let a=o.filter(f=>!(0,J_.alwaysValidSchema)(i,r[f]));if(a.length===0)return;let u=e.name("valid");for(let f of a)l(f)?c(f):(e.if((0,kA.propertyInData)(e,s,f,i.opts.ownProperties)),c(f),i.allErrors||e.else().var(u,!0),e.endIf()),t.it.definedProperties.add(f),t.ok(u);function l(f){return i.opts.useDefaults&&!i.compositeRule&&r[f].default!==void 0}function c(f){t.subschema({keyword:"properties",schemaProp:f,dataProp:f},u)}}};Y_.default=IQ});var FA=$(W_=>{"use strict";Object.defineProperty(W_,"__esModule",{value:!0});var DA=sn(),ih=fe(),LA=De(),xA=De(),CQ={keyword:"patternProperties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,data:n,parentSchema:s,it:i}=t,{opts:o}=i,a=(0,DA.allSchemaProperties)(r),u=a.filter(m=>(0,LA.alwaysValidSchema)(i,r[m]));if(a.length===0||u.length===a.length&&(!i.opts.unevaluated||i.props===!0))return;let l=o.strictSchema&&!o.allowMatchingProperties&&s.properties,c=e.name("valid");i.props!==!0&&!(i.props instanceof ih.Name)&&(i.props=(0,xA.evaluatedPropsToName)(e,i.props));let{props:f}=i;h();function h(){for(let m of a)l&&d(m),i.allErrors?p(m):(e.var(c,!0),p(m),e.if(c))}function d(m){for(let v in l)new RegExp(m).test(v)&&(0,LA.checkStrictMode)(i,`property ${v} matches pattern ${m} (use allowMatchingProperties)`)}function p(m){e.forIn("key",n,v=>{e.if((0,ih._)`${(0,DA.usePattern)(t,m)}.test(${v})`,()=>{let g=u.includes(m);g||t.subschema({keyword:"patternProperties",schemaProp:m,dataProp:v,dataPropType:xA.Type.Str},c),i.opts.unevaluated&&f!==!0?e.assign((0,ih._)`${f}[${v}]`,!0):!g&&!i.allErrors&&e.if((0,ih.not)(c),()=>e.break())})})}}};W_.default=CQ});var MA=$(X_=>{"use strict";Object.defineProperty(X_,"__esModule",{value:!0});var AQ=De(),kQ={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(t){let{gen:e,schema:r,it:n}=t;if((0,AQ.alwaysValidSchema)(n,r)){t.fail();return}let s=e.name("valid");t.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},s),t.failResult(s,()=>t.reset(),()=>t.error())},error:{message:"must NOT be valid"}};X_.default=kQ});var VA=$(Q_=>{"use strict";Object.defineProperty(Q_,"__esModule",{value:!0});var qQ=sn(),jQ={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:qQ.validateUnion,error:{message:"must match a schema in anyOf"}};Q_.default=jQ});var zA=$(Z_=>{"use strict";Object.defineProperty(Z_,"__esModule",{value:!0});var oh=fe(),DQ=De(),LQ={message:"must match exactly one schema in oneOf",params:({params:t})=>(0,oh._)`{passingSchemas: ${t.passing}}`},xQ={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:LQ,code(t){let{gen:e,schema:r,parentSchema:n,it:s}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(s.opts.discriminator&&n.discriminator)return;let i=r,o=e.let("valid",!1),a=e.let("passing",null),u=e.name("_valid");t.setParams({passing:a}),e.block(l),t.result(o,()=>t.reset(),()=>t.error(!0));function l(){i.forEach((c,f)=>{let h;(0,DQ.alwaysValidSchema)(s,c)?e.var(u,!0):h=t.subschema({keyword:"oneOf",schemaProp:f,compositeRule:!0},u),f>0&&e.if((0,oh._)`${u} && ${o}`).assign(o,!1).assign(a,(0,oh._)`[${a}, ${f}]`).else(),e.if(u,()=>{e.assign(o,!0),e.assign(a,f),h&&t.mergeEvaluated(h,oh.Name)})})}}};Z_.default=xQ});var UA=$(ev=>{"use strict";Object.defineProperty(ev,"__esModule",{value:!0});var FQ=De(),MQ={keyword:"allOf",schemaType:"array",code(t){let{gen:e,schema:r,it:n}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");let s=e.name("valid");r.forEach((i,o)=>{if((0,FQ.alwaysValidSchema)(n,i))return;let a=t.subschema({keyword:"allOf",schemaProp:o},s);t.ok(s),t.mergeEvaluated(a)})}};ev.default=MQ});var BA=$(tv=>{"use strict";Object.defineProperty(tv,"__esModule",{value:!0});var ah=fe(),KA=De(),VQ={message:({params:t})=>(0,ah.str)`must match "${t.ifClause}" schema`,params:({params:t})=>(0,ah._)`{failingKeyword: ${t.ifClause}}`},zQ={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:VQ,code(t){let{gen:e,parentSchema:r,it:n}=t;r.then===void 0&&r.else===void 0&&(0,KA.checkStrictMode)(n,'"if" without "then" and "else" is ignored');let s=HA(n,"then"),i=HA(n,"else");if(!s&&!i)return;let o=e.let("valid",!0),a=e.name("_valid");if(u(),t.reset(),s&&i){let c=e.let("ifClause");t.setParams({ifClause:c}),e.if(a,l("then",c),l("else",c))}else s?e.if(a,l("then")):e.if((0,ah.not)(a),l("else"));t.pass(o,()=>t.error(!0));function u(){let c=t.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);t.mergeEvaluated(c)}function l(c,f){return()=>{let h=t.subschema({keyword:c},a);e.assign(o,a),t.mergeValidEvaluated(h,o),f?e.assign(f,(0,ah._)`${c}`):t.setParams({ifClause:c})}}}};function HA(t,e){let r=t.schema[e];return r!==void 0&&!(0,KA.alwaysValidSchema)(t,r)}tv.default=zQ});var GA=$(rv=>{"use strict";Object.defineProperty(rv,"__esModule",{value:!0});var UQ=De(),HQ={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:t,parentSchema:e,it:r}){e.if===void 0&&(0,UQ.checkStrictMode)(r,`"${t}" without "if" is ignored`)}};rv.default=HQ});var JA=$(nv=>{"use strict";Object.defineProperty(nv,"__esModule",{value:!0});var KQ=F_(),BQ=SA(),GQ=M_(),JQ=PA(),YQ=TA(),WQ=IA(),XQ=AA(),QQ=G_(),ZQ=jA(),eZ=FA(),tZ=MA(),rZ=VA(),nZ=zA(),sZ=UA(),iZ=BA(),oZ=GA();function aZ(t=!1){let e=[tZ.default,rZ.default,nZ.default,sZ.default,iZ.default,oZ.default,XQ.default,QQ.default,WQ.default,ZQ.default,eZ.default];return t?e.push(BQ.default,JQ.default):e.push(KQ.default,GQ.default),e.push(YQ.default),e}nv.default=aZ});var YA=$(sv=>{"use strict";Object.defineProperty(sv,"__esModule",{value:!0});var Et=fe(),uZ={message:({schemaCode:t})=>(0,Et.str)`must match format "${t}"`,params:({schemaCode:t})=>(0,Et._)`{format: ${t}}`},lZ={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:uZ,code(t,e){let{gen:r,data:n,$data:s,schema:i,schemaCode:o,it:a}=t,{opts:u,errSchemaPath:l,schemaEnv:c,self:f}=a;if(!u.validateFormats)return;s?h():d();function h(){let p=r.scopeValue("formats",{ref:f.formats,code:u.code.formats}),m=r.const("fDef",(0,Et._)`${p}[${o}]`),v=r.let("fType"),g=r.let("format");r.if((0,Et._)`typeof ${m} == "object" && !(${m} instanceof RegExp)`,()=>r.assign(v,(0,Et._)`${m}.type || "string"`).assign(g,(0,Et._)`${m}.validate`),()=>r.assign(v,(0,Et._)`"string"`).assign(g,m)),t.fail$data((0,Et.or)(w(),_()));function w(){return u.strictSchema===!1?Et.nil:(0,Et._)`${o} && !${g}`}function _(){let y=c.$async?(0,Et._)`(${m}.async ? await ${g}(${n}) : ${g}(${n}))`:(0,Et._)`${g}(${n})`,b=(0,Et._)`(typeof ${g} == "function" ? ${y} : ${g}.test(${n}))`;return(0,Et._)`${g} && ${g} !== true && ${v} === ${e} && !${b}`}}function d(){let p=f.formats[i];if(!p){w();return}if(p===!0)return;let[m,v,g]=_(p);m===e&&t.pass(y());function w(){if(u.strictSchema===!1){f.logger.warn(b());return}throw new Error(b());function b(){return`unknown format "${i}" ignored in schema at path "${l}"`}}function _(b){let T=b instanceof RegExp?(0,Et.regexpCode)(b):u.code.formats?(0,Et._)`${u.code.formats}${(0,Et.getProperty)(i)}`:void 0,S=r.scopeValue("formats",{key:i,ref:b,code:T});return typeof b=="object"&&!(b instanceof RegExp)?[b.type||"string",b.validate,(0,Et._)`${S}.validate`]:["string",b,S]}function y(){if(typeof p=="object"&&!(p instanceof RegExp)&&p.async){if(!c.$async)throw new Error("async format in sync schema");return(0,Et._)`await ${g}(${n})`}return typeof v=="function"?(0,Et._)`${g}(${n})`:(0,Et._)`${g}.test(${n})`}}}};sv.default=lZ});var WA=$(iv=>{"use strict";Object.defineProperty(iv,"__esModule",{value:!0});var cZ=YA(),fZ=[cZ.default];iv.default=fZ});var XA=$(pa=>{"use strict";Object.defineProperty(pa,"__esModule",{value:!0});pa.contentVocabulary=pa.metadataVocabulary=void 0;pa.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];pa.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]});var ZA=$(ov=>{"use strict";Object.defineProperty(ov,"__esModule",{value:!0});var dZ=oA(),hZ=$A(),pZ=JA(),mZ=WA(),QA=XA(),yZ=[dZ.default,hZ.default,(0,pZ.default)(),mZ.default,QA.metadataVocabulary,QA.contentVocabulary];ov.default=yZ});var ek=$(Nl=>{"use strict";Object.defineProperty(Nl,"__esModule",{value:!0});Nl.DiscrError=void 0;var gZ;(function(t){t.Tag="tag",t.Mapping="mapping"})(gZ=Nl.DiscrError||(Nl.DiscrError={}))});var rk=$(uv=>{"use strict";Object.defineProperty(uv,"__esModule",{value:!0});var ma=fe(),av=ek(),tk=Gd(),_Z=De(),vZ={message:({params:{discrError:t,tagName:e}})=>t===av.DiscrError.Tag?`tag "${e}" must be string`:`value of tag "${e}" must be in oneOf`,params:({params:{discrError:t,tag:e,tagName:r}})=>(0,ma._)`{error: ${t}, tag: ${r}, tagValue: ${e}}`},$Z={keyword:"discriminator",type:"object",schemaType:"object",error:vZ,code(t){let{gen:e,data:r,schema:n,parentSchema:s,it:i}=t,{oneOf:o}=s;if(!i.opts.discriminator)throw new Error("discriminator: requires discriminator option");let a=n.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(n.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");let u=e.let("valid",!1),l=e.const("tag",(0,ma._)`${r}${(0,ma.getProperty)(a)}`);e.if((0,ma._)`typeof ${l} == "string"`,()=>c(),()=>t.error(!1,{discrError:av.DiscrError.Tag,tag:l,tagName:a})),t.ok(u);function c(){let d=h();e.if(!1);for(let p in d)e.elseIf((0,ma._)`${l} === ${p}`),e.assign(u,f(d[p]));e.else(),t.error(!1,{discrError:av.DiscrError.Mapping,tag:l,tagName:a}),e.endIf()}function f(d){let p=e.name("valid"),m=t.subschema({keyword:"oneOf",schemaProp:d},p);return t.mergeEvaluated(m,ma.Name),p}function h(){var d;let p={},m=g(s),v=!0;for(let y=0;y<o.length;y++){let b=o[y];b?.$ref&&!(0,_Z.schemaHasRulesButRef)(b,i.self.RULES)&&(b=tk.resolveRef.call(i.self,i.schemaEnv.root,i.baseId,b?.$ref),b instanceof tk.SchemaEnv&&(b=b.schema));let T=(d=b?.properties)===null||d===void 0?void 0:d[a];if(typeof T!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);v=v&&(m||g(b)),w(T,y)}if(!v)throw new Error(`discriminator: "${a}" must be required`);return p;function g({required:y}){return Array.isArray(y)&&y.includes(a)}function w(y,b){if(y.const)_(y.const,b);else if(y.enum)for(let T of y.enum)_(T,b);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function _(y,b){if(typeof y!="string"||y in p)throw new Error(`discriminator: "${a}" values must be unique strings`);p[y]=b}}}};uv.default=$Z});var nk=$((kme,bZ)=>{bZ.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var ok=$((yt,ik)=>{"use strict";Object.defineProperty(yt,"__esModule",{value:!0});yt.MissingRefError=yt.ValidationError=yt.CodeGen=yt.Name=yt.nil=yt.stringify=yt.str=yt._=yt.KeywordCxt=void 0;var wZ=eA(),EZ=ZA(),SZ=rk(),sk=nk(),RZ=["/properties"],uh="http://json-schema.org/draft-07/schema",lh=class extends wZ.default{_addVocabularies(){super._addVocabularies(),EZ.default.forEach(e=>this.addVocabulary(e)),this.opts.discriminator&&this.addKeyword(SZ.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;let e=this.opts.$data?this.$dataMetaSchema(sk,RZ):sk;this.addMetaSchema(e,uh,!1),this.refs["http://json-schema.org/schema"]=uh}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(uh)?uh:void 0)}};ik.exports=yt=lh;Object.defineProperty(yt,"__esModule",{value:!0});yt.default=lh;var PZ=yl();Object.defineProperty(yt,"KeywordCxt",{enumerable:!0,get:function(){return PZ.KeywordCxt}});var ya=fe();Object.defineProperty(yt,"_",{enumerable:!0,get:function(){return ya._}});Object.defineProperty(yt,"str",{enumerable:!0,get:function(){return ya.str}});Object.defineProperty(yt,"stringify",{enumerable:!0,get:function(){return ya.stringify}});Object.defineProperty(yt,"nil",{enumerable:!0,get:function(){return ya.nil}});Object.defineProperty(yt,"Name",{enumerable:!0,get:function(){return ya.Name}});Object.defineProperty(yt,"CodeGen",{enumerable:!0,get:function(){return ya.CodeGen}});var TZ=Hd();Object.defineProperty(yt,"ValidationError",{enumerable:!0,get:function(){return TZ.default}});var OZ=Kd();Object.defineProperty(yt,"MissingRefError",{enumerable:!0,get:function(){return OZ.default}})});var ak=$(ga=>{"use strict";Object.defineProperty(ga,"__esModule",{value:!0});ga.formatLimitDefinition=void 0;var NZ=ok(),Nn=fe(),ri=Nn.operators,ch={formatMaximum:{okStr:"<=",ok:ri.LTE,fail:ri.GT},formatMinimum:{okStr:">=",ok:ri.GTE,fail:ri.LT},formatExclusiveMaximum:{okStr:"<",ok:ri.LT,fail:ri.GTE},formatExclusiveMinimum:{okStr:">",ok:ri.GT,fail:ri.LTE}},IZ={message:({keyword:t,schemaCode:e})=>Nn.str`should be ${ch[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>Nn._`{comparison: ${ch[t].okStr}, limit: ${e}}`};ga.formatLimitDefinition={keyword:Object.keys(ch),type:"string",schemaType:"string",$data:!0,error:IZ,code(t){let{gen:e,data:r,schemaCode:n,keyword:s,it:i}=t,{opts:o,self:a}=i;if(!o.validateFormats)return;let u=new NZ.KeywordCxt(i,a.RULES.all.format.definition,"format");u.$data?l():c();function l(){let h=e.scopeValue("formats",{ref:a.formats,code:o.code.formats}),d=e.const("fmt",Nn._`${h}[${u.schemaCode}]`);t.fail$data(Nn.or(Nn._`typeof ${d} != "object"`,Nn._`${d} instanceof RegExp`,Nn._`typeof ${d}.compare != "function"`,f(d)))}function c(){let h=u.schema,d=a.formats[h];if(!d||d===!0)return;if(typeof d!="object"||d instanceof RegExp||typeof d.compare!="function")throw new Error(`"${s}": format "${h}" does not define "compare" function`);let p=e.scopeValue("formats",{key:h,ref:d,code:o.code.formats?Nn._`${o.code.formats}${Nn.getProperty(h)}`:void 0});t.fail$data(f(p))}function f(h){return Nn._`${h}.compare(${r}, ${n}) ${ch[s].fail} 0`}},dependencies:["format"]};var CZ=t=>(t.addKeyword(ga.formatLimitDefinition),t);ga.default=CZ});var fv=$((Il,ck)=>{"use strict";Object.defineProperty(Il,"__esModule",{value:!0});var _a=Xf(),AZ=ak(),lv=fe(),uk=new lv.Name("fullFormats"),kZ=new lv.Name("fastFormats"),cv=(t,e={keywords:!0})=>{if(Array.isArray(e))return lk(t,e,_a.fullFormats,uk),t;let[r,n]=e.mode==="fast"?[_a.fastFormats,kZ]:[_a.fullFormats,uk],s=e.formats||_a.formatNames;return lk(t,s,r,n),e.keywords&&AZ.default(t),t};cv.get=(t,e="full")=>{let n=(e==="fast"?_a.fastFormats:_a.fullFormats)[t];if(!n)throw new Error(`Unknown format "${t}"`);return n};function lk(t,e,r,n){var s,i;(s=(i=t.opts.code).formats)!==null&&s!==void 0||(i.formats=lv._`require("ajv-formats/dist/formats").${n}`);for(let o of e)t.addFormat(o,r[o])}ck.exports=Il=cv;Object.defineProperty(Il,"__esModule",{value:!0});Il.default=cv});var dv=$((jme,fk)=>{"use strict";var qZ=TI(),jZ=C0(),DZ=fv(),LZ=ou()({proto:!0}),Cl=class{constructor(e){this.ajv=new qZ({...e,strictSchema:!1,validateSchema:!1,allowUnionTypes:!0,uriResolver:jZ}),DZ(this.ajv),this.ajv.addKeyword({keyword:"fjs_type",type:"object",errors:!1,validate:(r,n)=>n instanceof Date}),this._ajvSchemas={},this._ajvOptions=e||{}}addSchema(e,r){let n=e.$id||r;if(e.$id!==void 0&&e.$id[0]==="#"&&(n=r+e.$id),this.ajv.refs[n]===void 0&&this.ajv.schemas[n]===void 0){let s=LZ(e);this.convertSchemaToAjvFormat(s),this.ajv.addSchema(s,n),this._ajvSchemas[n]=e}}validate(e,r){return this.ajv.validate(e,r)}convertSchemaToAjvFormat(e){if(e!==null){e.type==="string"?(e.fjs_type="string",e.type=["string","object"]):Array.isArray(e.type)&&e.type.includes("string")&&!e.type.includes("object")&&(e.fjs_type="string",e.type.push("object"));for(let r in e)typeof e[r]=="object"&&this.convertSchemaToAjvFormat(e[r])}}getState(){return{ajvOptions:this._ajvOptions,ajvSchemas:this._ajvSchemas}}static restoreFromState(e){let r=new Cl(e.ajvOptions);for(let[n,s]of Object.entries(e.ajvSchemas))r.ajv.addSchema(s,n);return r}};fk.exports=Cl});var pk=$((Dme,hk)=>{"use strict";var dk=Vn(),hv=class{constructor(){this.schemas={}}addSchema(e,r){e.$id!==void 0&&e.$id.charAt(0)!=="#"&&(r=e.$id),this.getSchema(r)===void 0&&(this.insertSchemaBySchemaId(e,r),this.insertSchemaSubschemas(e,r))}getSchema(e,r="#"){let n=this.schemas[e];if(n!==void 0)return n.anchors[r]!==void 0?n.anchors[r]:xZ(n.schema,r)}getSchemaDependencies(e,r={}){let n=this.schemas[e];for(let s of n.dependencies)r[s]===void 0&&(r[s]=this.getSchema(s),this.getSchemaDependencies(s,r));return r}insertSchemaBySchemaId(e,r){if(this.schemas[r]!==void 0&&!dk(e,this.schemas[r].schema))throw new Error(`There is already another schema with id ${r}`);this.schemas[r]={schema:e,anchors:{},dependencies:[]}}insertSchemaByAnchor(e,r,n){let{anchors:s}=this.schemas[r];if(s[n]!==void 0&&!dk(e,s[n]))throw new Error(`There is already another schema with id ${r}#${n}`);s[n]=e}insertSchemaSubschemas(e,r){let n=e.$id;n!==void 0&&typeof n=="string"&&(n.charAt(0)==="#"?this.insertSchemaByAnchor(e,r,n):(this.insertSchemaBySchemaId(e,n),r=n));let s=e.$ref;if(s!==void 0&&typeof s=="string"&&s.charAt(0)!=="#"){let i=s.split("#")[0];this.schemas[r].dependencies.push(i)}for(let i in e)typeof e[i]=="object"&&e[i]!==null&&this.insertSchemaSubschemas(e[i],r)}};function xZ(t,e){let r=e.split("/"),n=t;for(let s of r)if(!(s===""||s==="#")){if(typeof n!="object"||n===null)return;n=n[s]}return n}hk.exports=hv});var yk=$((Lme,mk)=>{"use strict";var Al=class{constructor(e,r,n="#"){this.schema=e,this.schemaId=r,this.jsonPointer=n,this.mergedSchemaId=null}getPropertyLocation(e){let r=new Al(this.schema[e],this.schemaId,this.jsonPointer+"/"+e);return this.mergedSchemaId!==null&&r.addMergedSchema(this.schema[e],this.mergedSchemaId,this.jsonPointer+"/"+e),r}getSchemaId(){return this.mergedSchemaId||this.schemaId}getOriginSchemaId(){return this.schemaId}getSchemaRef(){return this.getSchemaId()+this.jsonPointer}addMergedSchema(e,r,n="#"){this.schema=e,this.mergedSchemaId=r,this.jsonPointer=n}};mk.exports=Al});var gk=$((xme,pv)=>{"use strict";function FZ(t,e,r,n){let s="";return e.validatorSchemasIds.size>0?(s+=`const validatorState = ${JSON.stringify(n.getState())}
`,s+=`const validator = Validator.restoreFromState(validatorState)
`):s+=`const validator = null
`,`
  'use strict'
  const { dependencies } = require('fast-json-stringify/lib/standalone')

  const { Serializer, Validator } = dependencies

  const serializerState = ${JSON.stringify(r.getState())}
  const serializer = Serializer.restoreFromState(serializerState)

  ${s}

  module.exports = ${t.toString()}(validator, serializer)`}pv.exports=FZ;pv.exports.dependencies={Serializer:Xy(),Validator:dv()}});var Ok=$((Fme,va)=>{"use strict";var mv=QO()(),MZ=ou()({proto:!0}),{randomUUID:vk}=require("crypto"),_k=c1(),VZ=Xy(),zZ=dv(),UZ=pk(),$k=yk(),fh=2e4,bk="default",HZ=["floor","ceil","round","trunc"],wk=["default","json-stringify"],kl="!addComma && (addComma = true) || (json += ',')";function yv(t,e){if(!_k(t)){e?e=`"${e}" `:e="";let r=_k.errors[0],n=new Error(`${e}schema is invalid: data${r.instancePath} ${r.message}`);throw n.errors=yv.errors,n}}function ql(t,e,r){let n=r.indexOf("#");n===-1&&(n=r.length);let s=r.slice(0,n)||e.getOriginSchemaId(),i=r.slice(n)||"#",o=t.refResolver.getSchema(s,i);if(o===void 0)throw new Error(`Cannot find reference "${r}"`);let a=new $k(o,s,i);return o.$ref!==void 0?ql(t,a,o.$ref):a}function gv(t,e){yv(t),e=e||{};let r={functions:[],functionsCounter:0,functionsNamesBySchema:new Map,options:e,refResolver:new UZ,rootSchemaId:t.$id||vk(),validatorSchemasIds:new Set};if(r.refResolver.addSchema(t,r.rootSchemaId),e.schema)for(let l of Object.keys(e.schema))yv(e.schema[l],l),r.refResolver.addSchema(e.schema[l],l);if(e.rounding&&!HZ.includes(e.rounding))throw new Error(`Unsupported integer rounding method ${e.rounding}`);if(e.largeArrayMechanism)if(wk.includes(e.largeArrayMechanism))bk=e.largeArrayMechanism;else throw new Error(`Unsupported large array mechanism ${e.largeArrayMechanism}`);if(e.largeArraySize)if(typeof e.largeArraySize=="string"&&Number.isFinite(Number.parseInt(e.largeArraySize,10)))fh=Number.parseInt(e.largeArraySize,10);else if(typeof e.largeArraySize=="number"&&Number.isInteger(e.largeArraySize))fh=e.largeArraySize;else if(typeof e.largeArraySize=="bigint")fh=Number(e.largeArraySize);else throw new Error(`Unsupported large array size. Expected integer-like, got ${typeof e.largeArraySize} with value ${e.largeArraySize}`);let n=new $k(t,r.rootSchemaId),s=vs(r,n,"input"),i;s==="json += anonymous0(input)"?i=`
    ${r.functions.join(`
`)}
    const main = anonymous0
    return main
    `:i=`
    function main (input) {
      let json = ''
      ${s}
      return json
    }
    ${r.functions.join(`
`)}
    return main
    `;let o=new VZ(e),a=new zZ(e.ajv);for(let l of r.validatorSchemasIds){let c=r.refResolver.getSchema(l);a.addSchema(c,l);let f=r.refResolver.getSchemaDependencies(l);for(let[h,d]of Object.entries(f))a.addSchema(d,h)}if(e.debugMode&&(e.mode="debug"),e.mode==="debug")return{validator:a,serializer:o,code:`validator
serializer
${i}`,ajv:a.ajv};let u=new Function("validator","serializer",i);return e.mode==="standalone"?gk()(u,r,o,a):u(a,o)}var KZ=["properties","required","additionalProperties","patternProperties","maxProperties","minProperties","dependencies"],BZ=["items","additionalItems","maxItems","minItems","uniqueItems","contains"],GZ=["maxLength","minLength","pattern"],JZ=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum"];function Ek(t){for(var e of KZ)if(e in t)return"object";for(var e of BZ)if(e in t)return"array";for(var e of GZ)if(e in t)return"string";for(var e of JZ)if(e in t)return"number";return t.type}function YZ(t,e){let r=e.schema,n=Object.keys(r.properties||{}),s=`
    const propertiesKeys = ${JSON.stringify(n)}
    for (const [key, value] of Object.entries(obj)) {
      if (
        propertiesKeys.includes(key) ||
        value === undefined ||
        typeof value === 'function' ||
        typeof value === 'symbol'
      ) continue
  `,i=e.getPropertyLocation("patternProperties"),o=i.schema;if(o!==void 0)for(let l in o){let c=i.getPropertyLocation(l);s+=`
        if (/${l.replace(/\\*\//g,"\\/")}/.test(key)) {
          ${kl}
          json += serializer.asString(key) + ':'
          ${vs(t,c,"value")}
          continue
        }
      `}let u=e.getPropertyLocation("additionalProperties").schema;if(u!==void 0)if(u===!0)s+=`
        ${kl}
        json += serializer.asString(key) + ':' + JSON.stringify(value)
      `;else{let l=e.getPropertyLocation("additionalProperties");s+=`
        ${kl}
        json += serializer.asString(key) + ':'
        ${vs(t,l,"value")}
      `}return s+=`
    }
  `,s}function WZ(t,e){let r=e.schema,n=r.required||[],s="",i=e.getPropertyLocation("properties");Object.keys(r.properties||{}).forEach(o=>{let a=i.getPropertyLocation(o);a.schema.$ref&&(a=ql(t,e,a.schema.$ref));let u=JSON.stringify(o);s+=`
      if (obj[${u}] !== undefined) {
        ${kl}
        json += ${JSON.stringify(u+":")}
      `,s+=vs(t,a,`obj[${u}]`);let l=a.schema.default;l!==void 0?s+=`
      } else {
        ${kl}
        json += ${JSON.stringify(u+":"+JSON.stringify(l))}
      `:n.includes(o)&&(s+=`
      } else {
        throw new Error('${u} is required!')
      `),s+=`
      }
    `});for(let o of n)r.properties&&r.properties[o]!==void 0||(s+=`if (obj['${o}'] === undefined) throw new Error('"${o}" is required!')
`);return(r.patternProperties||r.additionalProperties)&&(s+=YZ(t,e)),s}function Sk(t,e,r,n){let s=e.getPropertyLocation("allOf");for(let i=0;i<r.allOf.length;i++){let o=r.allOf[i];if(o.$ref){let u=s.getPropertyLocation(i);o=ql(t,u,o.$ref).schema}let a=o.type;if(a===void 0&&(a=Ek(o)),a!==void 0){if(n.type!==void 0&&n.type!==a)throw new Error("allOf schemas have different type values");n.type=a}if(o.format!==void 0){if(n.format!==void 0&&n.format!==o.format)throw new Error("allOf schemas have different format values");n.format=o.format}if(o.nullable!==void 0){if(n.nullable!==void 0&&n.nullable!==o.nullable)throw new Error("allOf schemas have different nullable values");n.nullable=o.nullable}o.properties!==void 0&&(n.properties===void 0&&(n.properties={}),Object.assign(n.properties,o.properties)),o.additionalProperties!==void 0&&(n.additionalProperties===void 0&&(n.additionalProperties={}),Object.assign(n.additionalProperties,o.additionalProperties)),o.patternProperties!==void 0&&(n.patternProperties===void 0&&(n.patternProperties={}),Object.assign(n.patternProperties,o.patternProperties)),o.required!==void 0&&(n.required===void 0&&(n.required=[]),n.required.push(...o.required)),o.oneOf!==void 0&&(n.oneOf===void 0&&(n.oneOf=[]),n.oneOf.push(...o.oneOf)),o.anyOf!==void 0&&(n.anyOf===void 0&&(n.anyOf=[]),n.anyOf.push(...o.anyOf)),o.allOf!==void 0&&Sk(t,e,o,n)}delete n.allOf,n.$id=`merged_${vk()}`,t.refResolver.addSchema(n),e.addMergedSchema(n,n.$id)}function XZ(t,e,r){t.validatorSchemasIds.add(e.getSchemaId());let n=mv({},e.schema),s=n.then,i=n.else||{additionalProperties:!0};delete n.if,delete n.then,delete n.else;let a=e.getPropertyLocation("if").getSchemaRef(),u=e.getPropertyLocation("then");u.schema=mv(n,s);let l=e.getPropertyLocation("else");return l.schema=mv(n,i),`
    if (validator.validate("${a}", ${r})) {
      ${vs(t,u,r)}
    } else {
      ${vs(t,l,r)}
    }
  `}function QZ(t){return`(${t} && typeof ${t}.toJSON === 'function')
    ? ${t}.toJSON()
    : ${t}
  `}function ZZ(t,e){let r=e.schema;if(t.functionsNamesBySchema.has(r))return t.functionsNamesBySchema.get(r);let n=Pk(t);t.functionsNamesBySchema.set(r,n);let s=e.getSchemaRef();s.startsWith(t.rootSchemaId)&&(s=s.replace(t.rootSchemaId,""));let i=`
    function ${n} (input) {
      // ${s}
  `;return i+=`
      const obj = ${QZ("input")}
      let json = '{'
      let addComma = false
  `,i+=WZ(t,e),i+=`
      return json + '}'
    }
  `,t.functions.push(i),n}function eee(t,e){let r=e.schema,n=e.getPropertyLocation("items");n.schema=n.schema||{},n.schema.$ref&&(n=ql(t,n,n.schema.$ref));let s=n.schema;if(t.functionsNamesBySchema.has(r))return t.functionsNamesBySchema.get(r);let i=Pk(t);t.functionsNamesBySchema.set(r,i);let o=e.getSchemaRef();o.startsWith(t.rootSchemaId)&&(o=o.replace(t.rootSchemaId,""));let a=`
    function ${i} (obj) {
      // ${o}
  `;if(a+=`
    if (!Array.isArray(obj)) {
      throw new TypeError(\`The value of '${o}' does not match schema definition.\`)
    }
    const arrayLength = obj.length
  `,!r.additionalItems&&Array.isArray(s)&&(a+=`
      if (arrayLength > ${s.length}) {
        throw new Error(\`Item at ${s.length} does not match schema definition.\`)
      }
    `),bk==="json-stringify"&&(a+=`if (arrayLength && arrayLength >= ${fh}) return JSON.stringify(obj)
`),a+=`
    let jsonOutput = ''
  `,Array.isArray(s)){for(let u=0;u<s.length;u++){let l=s[u],c=vs(t,n.getPropertyLocation(u),`obj[${u}]`);a+=`
        if (${u} < arrayLength) {
          if (${Rk(l.type,`[${u}]`)}) {
            let json = ''
            ${c}
            jsonOutput += json
            if (${u} < arrayLength - 1) {
              jsonOutput += ','
            }
          } else {
            throw new Error(\`Item at ${u} does not match schema definition.\`)
          }
        }
        `}r.additionalItems&&(a+=`
        for (let i = ${s.length}; i < arrayLength; i++) {
          jsonOutput += JSON.stringify(obj[i])
          if (i < arrayLength - 1) {
            jsonOutput += ','
          }
        }`)}else{let u=vs(t,n,"obj[i]");a+=`
      for (let i = 0; i < arrayLength; i++) {
        let json = ''
        ${u}
        jsonOutput += json
        if (i < arrayLength - 1) {
          jsonOutput += ','
        }
      }`}return a+="\n    return `[${jsonOutput}]`\n  }",t.functions.push(a),i}function Rk(t,e){let r;switch(t){case"null":r=`obj${e} === null`;break;case"string":r=`typeof obj${e} === 'string'`;break;case"integer":r=`Number.isInteger(obj${e})`;break;case"number":r=`Number.isFinite(obj${e})`;break;case"boolean":r=`typeof obj${e} === 'boolean'`;break;case"object":r=`obj${e} && typeof obj${e} === 'object' && obj${e}.constructor === Object`;break;case"array":r=`Array.isArray(obj${e})`;break;default:Array.isArray(t)&&(r=`(${t.map(s=>Rk(s,e)).join(" || ")})`)}return r}function Pk(t){return"anonymous"+t.functionsCounter++}function tee(t,e,r){let s=e.schema.type.sort(a=>a==="null"?-1:1),i="";s.forEach((a,u)=>{e.schema={...e.schema,type:a};let l=Tk(t,e,r),c=u===0?"if":"else if";switch(a){case"null":i+=`
          ${c} (${r} === null)
            ${l}
          `;break;case"string":{i+=`
          ${c}(
            typeof ${r} === "string" ||
            ${r} === null ||
            ${r} instanceof Date ||
            ${r} instanceof RegExp ||
            (
              typeof ${r} === "object" &&
              typeof ${r}.toString === "function" &&
              ${r}.toString !== Object.prototype.toString &&
              !(${r} instanceof Date)
            )
          )
            ${l}
        `;break}case"array":{i+=`
          ${c}(Array.isArray(${r}))
            ${l}
        `;break}case"integer":{i+=`
          ${c}(Number.isInteger(${r}) || ${r} === null)
            ${l}
        `;break}default:{i+=`
          ${c}(typeof ${r} === "${a}" || ${r} === null)
            ${l}
        `;break}}});let o=e.getSchemaRef();return o.startsWith(t.rootSchemaId)&&(o=o.replace(t.rootSchemaId,"")),i+=`
    else throw new TypeError(\`The value of '${o}' does not match schema definition.\`)
  `,i}function Tk(t,e,r){let n=e.schema;switch(n.type){case"null":return"json += 'null'";case"string":return n.format==="date-time"?`json += serializer.asDateTime(${r})`:n.format==="date"?`json += serializer.asDate(${r})`:n.format==="time"?`json += serializer.asTime(${r})`:`json += serializer.asString(${r})`;case"integer":return`json += serializer.asInteger(${r})`;case"number":return`json += serializer.asNumber(${r})`;case"boolean":return`json += serializer.asBoolean(${r})`;case"object":return`json += ${ZZ(t,e)}(${r})`;case"array":return`json += ${eee(t,e)}(${r})`;case void 0:return`json += JSON.stringify(${r})`;default:throw new Error(`${n.type} unsupported`)}}function ree(t,e){let r=t.schema,n=r.type,s=Array.isArray(n)&&n.includes("null"),i="";return s&&(i+=`
      if (${e} === null) {
        json += 'null'
      } else {
    `),i+=`json += '${JSON.stringify(r.const)}'`,s&&(i+=`
      }
    `),i}function vs(t,e,r){let n=e.schema;if(typeof n=="boolean")return`json += JSON.stringify(${r})`;if(n.$ref&&(e=ql(t,e,n.$ref),n=e.schema),n.type===void 0){let a=Ek(n);a&&(n.type=a)}if(n.if&&n.then)return XZ(t,e,r);n.allOf&&(Sk(t,e,n,MZ(n)),n=e.schema);let s=n.type,i="";if(s===void 0&&(n.anyOf||n.oneOf)){t.validatorSchemasIds.add(e.getSchemaId());let a=n.anyOf?"anyOf":"oneOf",u=e.getPropertyLocation(a);for(let c=0;c<e.schema[a].length;c++){let f=u.getPropertyLocation(c),h=f.getSchemaRef(),d=vs(t,f,r);i+=`
        ${c===0?"if":"else if"}(validator.validate("${h}", ${r}))
          ${d}
      `}let l=e.getSchemaRef();return l.startsWith(t.rootSchemaId)&&(l=l.replace(t.rootSchemaId,"")),i+=`
      else throw new TypeError(\`The value of '${l}' does not match schema definition.\`)
    `,i}let o=n.nullable===!0;return o&&(i+=`
      if (${r} === null) {
        json += 'null'
      } else {
    `),n.const!==void 0?i+=ree(e,r):Array.isArray(s)?i+=tee(t,e,r):i+=Tk(t,e,r),o&&(i+=`
      }
    `),i}va.exports=gv;va.exports.default=gv;va.exports.build=gv;va.exports.validLargeArrayMechanisms=wk;va.exports.restore=function({code:t,validator:e,serializer:r}){return Function.apply(null,["validator","serializer",t]).apply(null,[e,r])}});var Ik=$((Mme,_v)=>{"use strict";var nee=vv();function Nk(t={readMode:!0}){if(t.readMode===!0&&typeof t.restoreFunction!="function")throw new Error("You must provide a function for the restoreFunction-option when readMode ON");if(t.readMode!==!0&&typeof t.storeFunction!="function")throw new Error("You must provide a function for the storeFunction-option when readMode OFF");if(t.readMode===!0)return function(){return function(n){return t.restoreFunction(n)}};let e=nee();return function(n,s={}){s.mode="standalone";let i=e(n,s);return function(o){let a=i(o);return t.storeFunction(o,a),new Function(a)}}}_v.exports=Nk;_v.exports.default=Nk});var vv=$((Vme,jl)=>{"use strict";var see=Ok();function $v(){return function(e,r){let n=Object.assign({},r,{schema:e});return iee.bind(null,n)}}function iee(t,{schema:e}){return t.schema&&e.$id&&t.schema[e.$id]&&(t.schema={...t.schema},delete t.schema[e.$id]),see(e,t)}jl.exports=$v;jl.exports.default=$v;jl.exports.SerializerSelector=$v;jl.exports.StandaloneSerializer=Ik()});var $a=$(Le=>{"use strict";Object.defineProperty(Le,"__esModule",{value:!0});Le.regexpCode=Le.getEsmExportName=Le.getProperty=Le.safeStringify=Le.stringify=Le.strConcat=Le.addCodeArg=Le.str=Le._=Le.nil=Le._Code=Le.Name=Le.IDENTIFIER=Le._CodeOrName=void 0;var Dl=class{};Le._CodeOrName=Dl;Le.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var so=class extends Dl{constructor(e){if(super(),!Le.IDENTIFIER.test(e))throw new Error("CodeGen: name must be a valid identifier");this.str=e}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}};Le.Name=so;var un=class extends Dl{constructor(e){super(),this._items=typeof e=="string"?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;let e=this._items[0];return e===""||e==='""'}get str(){var e;return(e=this._str)!==null&&e!==void 0?e:this._str=this._items.reduce((r,n)=>`${r}${n}`,"")}get names(){var e;return(e=this._names)!==null&&e!==void 0?e:this._names=this._items.reduce((r,n)=>(n instanceof so&&(r[n.str]=(r[n.str]||0)+1),r),{})}};Le._Code=un;Le.nil=new un("");function Ck(t,...e){let r=[t[0]],n=0;for(;n<e.length;)wv(r,e[n]),r.push(t[++n]);return new un(r)}Le._=Ck;var bv=new un("+");function Ak(t,...e){let r=[Ll(t[0])],n=0;for(;n<e.length;)r.push(bv),wv(r,e[n]),r.push(bv,Ll(t[++n]));return oee(r),new un(r)}Le.str=Ak;function wv(t,e){e instanceof un?t.push(...e._items):e instanceof so?t.push(e):t.push(lee(e))}Le.addCodeArg=wv;function oee(t){let e=1;for(;e<t.length-1;){if(t[e]===bv){let r=aee(t[e-1],t[e+1]);if(r!==void 0){t.splice(e-1,3,r);continue}t[e++]="+"}e++}}function aee(t,e){if(e==='""')return t;if(t==='""')return e;if(typeof t=="string")return e instanceof so||t[t.length-1]!=='"'?void 0:typeof e!="string"?`${t.slice(0,-1)}${e}"`:e[0]==='"'?t.slice(0,-1)+e.slice(1):void 0;if(typeof e=="string"&&e[0]==='"'&&!(t instanceof so))return`"${t}${e.slice(1)}`}function uee(t,e){return e.emptyStr()?t:t.emptyStr()?e:Ak`${t}${e}`}Le.strConcat=uee;function lee(t){return typeof t=="number"||typeof t=="boolean"||t===null?t:Ll(Array.isArray(t)?t.join(","):t)}function cee(t){return new un(Ll(t))}Le.stringify=cee;function Ll(t){return JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}Le.safeStringify=Ll;function fee(t){return typeof t=="string"&&Le.IDENTIFIER.test(t)?new un(`.${t}`):Ck`[${t}]`}Le.getProperty=fee;function dee(t){if(typeof t=="string"&&Le.IDENTIFIER.test(t))return new un(`${t}`);throw new Error(`CodeGen: invalid export name: ${t}, use explicit $id name mapping`)}Le.getEsmExportName=dee;function hee(t){return new un(t.toString())}Le.regexpCode=hee});var ph=$(_r=>{"use strict";Object.defineProperty(_r,"__esModule",{value:!0});_r.ValueScope=_r.ValueScopeName=_r.Scope=_r.varKinds=_r.UsedValueState=void 0;var Cr=$a(),Ev=class extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`),this.value=e.value}},Sv;(function(t){t[t.Started=0]="Started",t[t.Completed=1]="Completed"})(Sv=_r.UsedValueState||(_r.UsedValueState={}));_r.varKinds={const:new Cr.Name("const"),let:new Cr.Name("let"),var:new Cr.Name("var")};var dh=class{constructor({prefixes:e,parent:r}={}){this._names={},this._prefixes=e,this._parent=r}toName(e){return e instanceof Cr.Name?e:this.name(e)}name(e){return new Cr.Name(this._newName(e))}_newName(e){let r=this._names[e]||this._nameGroup(e);return`${e}${r.index++}`}_nameGroup(e){var r,n;if(!((n=(r=this._parent)===null||r===void 0?void 0:r._prefixes)===null||n===void 0)&&n.has(e)||this._prefixes&&!this._prefixes.has(e))throw new Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}};_r.Scope=dh;var hh=class extends Cr.Name{constructor(e,r){super(r),this.prefix=e}setValue(e,{property:r,itemIndex:n}){this.value=e,this.scopePath=(0,Cr._)`.${new Cr.Name(r)}[${n}]`}};_r.ValueScopeName=hh;var pee=(0,Cr._)`\n`,Rv=class extends dh{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts={...e,_n:e.lines?pee:Cr.nil}}get(){return this._scope}name(e){return new hh(e,this._newName(e))}value(e,r){var n;if(r.ref===void 0)throw new Error("CodeGen: ref must be passed in value");let s=this.toName(e),{prefix:i}=s,o=(n=r.key)!==null&&n!==void 0?n:r.ref,a=this._values[i];if(a){let c=a.get(o);if(c)return c}else a=this._values[i]=new Map;a.set(o,s);let u=this._scope[i]||(this._scope[i]=[]),l=u.length;return u[l]=r.ref,s.setValue(r,{property:i,itemIndex:l}),s}getValue(e,r){let n=this._values[e];if(n)return n.get(r)}scopeRefs(e,r=this._values){return this._reduceValues(r,n=>{if(n.scopePath===void 0)throw new Error(`CodeGen: name "${n}" has no value`);return(0,Cr._)`${e}${n.scopePath}`})}scopeCode(e=this._values,r,n){return this._reduceValues(e,s=>{if(s.value===void 0)throw new Error(`CodeGen: name "${s}" has no value`);return s.value.code},r,n)}_reduceValues(e,r,n={},s){let i=Cr.nil;for(let o in e){let a=e[o];if(!a)continue;let u=n[o]=n[o]||new Map;a.forEach(l=>{if(u.has(l))return;u.set(l,Sv.Started);let c=r(l);if(c){let f=this.opts.es5?_r.varKinds.var:_r.varKinds.const;i=(0,Cr._)`${i}${f} ${l} = ${c};${this.opts._n}`}else if(c=s?.(l))i=(0,Cr._)`${i}${c}${this.opts._n}`;else throw new Ev(l);u.set(l,Sv.Completed)})}return i}};_r.ValueScope=Rv});var ee=$(ge=>{"use strict";Object.defineProperty(ge,"__esModule",{value:!0});ge.or=ge.and=ge.not=ge.CodeGen=ge.operators=ge.varKinds=ge.ValueScopeName=ge.ValueScope=ge.Scope=ge.Name=ge.regexpCode=ge.stringify=ge.getProperty=ge.nil=ge.strConcat=ge.str=ge._=void 0;var Re=$a(),In=ph(),ni=$a();Object.defineProperty(ge,"_",{enumerable:!0,get:function(){return ni._}});Object.defineProperty(ge,"str",{enumerable:!0,get:function(){return ni.str}});Object.defineProperty(ge,"strConcat",{enumerable:!0,get:function(){return ni.strConcat}});Object.defineProperty(ge,"nil",{enumerable:!0,get:function(){return ni.nil}});Object.defineProperty(ge,"getProperty",{enumerable:!0,get:function(){return ni.getProperty}});Object.defineProperty(ge,"stringify",{enumerable:!0,get:function(){return ni.stringify}});Object.defineProperty(ge,"regexpCode",{enumerable:!0,get:function(){return ni.regexpCode}});Object.defineProperty(ge,"Name",{enumerable:!0,get:function(){return ni.Name}});var _h=ph();Object.defineProperty(ge,"Scope",{enumerable:!0,get:function(){return _h.Scope}});Object.defineProperty(ge,"ValueScope",{enumerable:!0,get:function(){return _h.ValueScope}});Object.defineProperty(ge,"ValueScopeName",{enumerable:!0,get:function(){return _h.ValueScopeName}});Object.defineProperty(ge,"varKinds",{enumerable:!0,get:function(){return _h.varKinds}});ge.operators={GT:new Re._Code(">"),GTE:new Re._Code(">="),LT:new Re._Code("<"),LTE:new Re._Code("<="),EQ:new Re._Code("==="),NEQ:new Re._Code("!=="),NOT:new Re._Code("!"),OR:new Re._Code("||"),AND:new Re._Code("&&"),ADD:new Re._Code("+")};var $s=class{optimizeNodes(){return this}optimizeNames(e,r){return this}},Pv=class extends $s{constructor(e,r,n){super(),this.varKind=e,this.name=r,this.rhs=n}render({es5:e,_n:r}){let n=e?In.varKinds.var:this.varKind,s=this.rhs===void 0?"":` = ${this.rhs}`;return`${n} ${this.name}${s};`+r}optimizeNames(e,r){if(e[this.name.str])return this.rhs&&(this.rhs=wa(this.rhs,e,r)),this}get names(){return this.rhs instanceof Re._CodeOrName?this.rhs.names:{}}},mh=class extends $s{constructor(e,r,n){super(),this.lhs=e,this.rhs=r,this.sideEffects=n}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,r){if(!(this.lhs instanceof Re.Name&&!e[this.lhs.str]&&!this.sideEffects))return this.rhs=wa(this.rhs,e,r),this}get names(){let e=this.lhs instanceof Re.Name?{}:{...this.lhs.names};return gh(e,this.rhs)}},Tv=class extends mh{constructor(e,r,n,s){super(e,n,s),this.op=r}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}},Ov=class extends $s{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`${this.label}:`+e}},Nv=class extends $s{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`break${this.label?` ${this.label}`:""};`+e}},Iv=class extends $s{constructor(e){super(),this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}},Cv=class extends $s{constructor(e){super(),this.code=e}render({_n:e}){return`${this.code};`+e}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(e,r){return this.code=wa(this.code,e,r),this}get names(){return this.code instanceof Re._CodeOrName?this.code.names:{}}},xl=class extends $s{constructor(e=[]){super(),this.nodes=e}render(e){return this.nodes.reduce((r,n)=>r+n.render(e),"")}optimizeNodes(){let{nodes:e}=this,r=e.length;for(;r--;){let n=e[r].optimizeNodes();Array.isArray(n)?e.splice(r,1,...n):n?e[r]=n:e.splice(r,1)}return e.length>0?this:void 0}optimizeNames(e,r){let{nodes:n}=this,s=n.length;for(;s--;){let i=n[s];i.optimizeNames(e,r)||(mee(e,i.names),n.splice(s,1))}return n.length>0?this:void 0}get names(){return this.nodes.reduce((e,r)=>oo(e,r.names),{})}},bs=class extends xl{render(e){return"{"+e._n+super.render(e)+"}"+e._n}},Av=class extends xl{},ba=class extends bs{};ba.kind="else";var Cn=class extends bs{constructor(e,r){super(r),this.condition=e}render(e){let r=`if(${this.condition})`+super.render(e);return this.else&&(r+="else "+this.else.render(e)),r}optimizeNodes(){super.optimizeNodes();let e=this.condition;if(e===!0)return this.nodes;let r=this.else;if(r){let n=r.optimizeNodes();r=this.else=Array.isArray(n)?new ba(n):n}if(r)return e===!1?r instanceof Cn?r:r.nodes:this.nodes.length?this:new Cn(kk(e),r instanceof Cn?[r]:r.nodes);if(!(e===!1||!this.nodes.length))return this}optimizeNames(e,r){var n;if(this.else=(n=this.else)===null||n===void 0?void 0:n.optimizeNames(e,r),!!(super.optimizeNames(e,r)||this.else))return this.condition=wa(this.condition,e,r),this}get names(){let e=super.names;return gh(e,this.condition),this.else&&oo(e,this.else.names),e}};Cn.kind="if";var io=class extends bs{};io.kind="for";var kv=class extends io{constructor(e){super(),this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,r){if(super.optimizeNames(e,r))return this.iteration=wa(this.iteration,e,r),this}get names(){return oo(super.names,this.iteration.names)}},qv=class extends io{constructor(e,r,n,s){super(),this.varKind=e,this.name=r,this.from=n,this.to=s}render(e){let r=e.es5?In.varKinds.var:this.varKind,{name:n,from:s,to:i}=this;return`for(${r} ${n}=${s}; ${n}<${i}; ${n}++)`+super.render(e)}get names(){let e=gh(super.names,this.from);return gh(e,this.to)}},yh=class extends io{constructor(e,r,n,s){super(),this.loop=e,this.varKind=r,this.name=n,this.iterable=s}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,r){if(super.optimizeNames(e,r))return this.iterable=wa(this.iterable,e,r),this}get names(){return oo(super.names,this.iterable.names)}},Fl=class extends bs{constructor(e,r,n){super(),this.name=e,this.args=r,this.async=n}render(e){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(e)}};Fl.kind="func";var Ml=class extends xl{render(e){return"return "+super.render(e)}};Ml.kind="return";var jv=class extends bs{render(e){let r="try"+super.render(e);return this.catch&&(r+=this.catch.render(e)),this.finally&&(r+=this.finally.render(e)),r}optimizeNodes(){var e,r;return super.optimizeNodes(),(e=this.catch)===null||e===void 0||e.optimizeNodes(),(r=this.finally)===null||r===void 0||r.optimizeNodes(),this}optimizeNames(e,r){var n,s;return super.optimizeNames(e,r),(n=this.catch)===null||n===void 0||n.optimizeNames(e,r),(s=this.finally)===null||s===void 0||s.optimizeNames(e,r),this}get names(){let e=super.names;return this.catch&&oo(e,this.catch.names),this.finally&&oo(e,this.finally.names),e}},Vl=class extends bs{constructor(e){super(),this.error=e}render(e){return`catch(${this.error})`+super.render(e)}};Vl.kind="catch";var zl=class extends bs{render(e){return"finally"+super.render(e)}};zl.kind="finally";var Dv=class{constructor(e,r={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...r,_n:r.lines?`
`:""},this._extScope=e,this._scope=new In.Scope({parent:e}),this._nodes=[new Av]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,r){let n=this._extScope.value(e,r);return(this._values[n.prefix]||(this._values[n.prefix]=new Set)).add(n),n}getScopeValue(e,r){return this._extScope.getValue(e,r)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,r,n,s){let i=this._scope.toName(r);return n!==void 0&&s&&(this._constants[i.str]=n),this._leafNode(new Pv(e,i,n)),i}const(e,r,n){return this._def(In.varKinds.const,e,r,n)}let(e,r,n){return this._def(In.varKinds.let,e,r,n)}var(e,r,n){return this._def(In.varKinds.var,e,r,n)}assign(e,r,n){return this._leafNode(new mh(e,r,n))}add(e,r){return this._leafNode(new Tv(e,ge.operators.ADD,r))}code(e){return typeof e=="function"?e():e!==Re.nil&&this._leafNode(new Cv(e)),this}object(...e){let r=["{"];for(let[n,s]of e)r.length>1&&r.push(","),r.push(n),(n!==s||this.opts.es5)&&(r.push(":"),(0,Re.addCodeArg)(r,s));return r.push("}"),new Re._Code(r)}if(e,r,n){if(this._blockNode(new Cn(e)),r&&n)this.code(r).else().code(n).endIf();else if(r)this.code(r).endIf();else if(n)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new Cn(e))}else(){return this._elseNode(new ba)}endIf(){return this._endBlockNode(Cn,ba)}_for(e,r){return this._blockNode(e),r&&this.code(r).endFor(),this}for(e,r){return this._for(new kv(e),r)}forRange(e,r,n,s,i=this.opts.es5?In.varKinds.var:In.varKinds.let){let o=this._scope.toName(e);return this._for(new qv(i,o,r,n),()=>s(o))}forOf(e,r,n,s=In.varKinds.const){let i=this._scope.toName(e);if(this.opts.es5){let o=r instanceof Re.Name?r:this.var("_arr",r);return this.forRange("_i",0,(0,Re._)`${o}.length`,a=>{this.var(i,(0,Re._)`${o}[${a}]`),n(i)})}return this._for(new yh("of",s,i,r),()=>n(i))}forIn(e,r,n,s=this.opts.es5?In.varKinds.var:In.varKinds.const){if(this.opts.ownProperties)return this.forOf(e,(0,Re._)`Object.keys(${r})`,n);let i=this._scope.toName(e);return this._for(new yh("in",s,i,r),()=>n(i))}endFor(){return this._endBlockNode(io)}label(e){return this._leafNode(new Ov(e))}break(e){return this._leafNode(new Nv(e))}return(e){let r=new Ml;if(this._blockNode(r),this.code(e),r.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(Ml)}try(e,r,n){if(!r&&!n)throw new Error('CodeGen: "try" without "catch" and "finally"');let s=new jv;if(this._blockNode(s),this.code(e),r){let i=this.name("e");this._currNode=s.catch=new Vl(i),r(i)}return n&&(this._currNode=s.finally=new zl,this.code(n)),this._endBlockNode(Vl,zl)}throw(e){return this._leafNode(new Iv(e))}block(e,r){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(r),this}endBlock(e){let r=this._blockStarts.pop();if(r===void 0)throw new Error("CodeGen: not in self-balancing block");let n=this._nodes.length-r;if(n<0||e!==void 0&&n!==e)throw new Error(`CodeGen: wrong number of nodes: ${n} vs ${e} expected`);return this._nodes.length=r,this}func(e,r=Re.nil,n,s){return this._blockNode(new Fl(e,r,n)),s&&this.code(s).endFunc(),this}endFunc(){return this._endBlockNode(Fl)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,r){let n=this._currNode;if(n instanceof e||r&&n instanceof r)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${r?`${e.kind}/${r.kind}`:e.kind}"`)}_elseNode(e){let r=this._currNode;if(!(r instanceof Cn))throw new Error('CodeGen: "else" without "if"');return this._currNode=r.else=e,this}get _root(){return this._nodes[0]}get _currNode(){let e=this._nodes;return e[e.length-1]}set _currNode(e){let r=this._nodes;r[r.length-1]=e}};ge.CodeGen=Dv;function oo(t,e){for(let r in e)t[r]=(t[r]||0)+(e[r]||0);return t}function gh(t,e){return e instanceof Re._CodeOrName?oo(t,e.names):t}function wa(t,e,r){if(t instanceof Re.Name)return n(t);if(!s(t))return t;return new Re._Code(t._items.reduce((i,o)=>(o instanceof Re.Name&&(o=n(o)),o instanceof Re._Code?i.push(...o._items):i.push(o),i),[]));function n(i){let o=r[i.str];return o===void 0||e[i.str]!==1?i:(delete e[i.str],o)}function s(i){return i instanceof Re._Code&&i._items.some(o=>o instanceof Re.Name&&e[o.str]===1&&r[o.str]!==void 0)}}function mee(t,e){for(let r in e)t[r]=(t[r]||0)-(e[r]||0)}function kk(t){return typeof t=="boolean"||typeof t=="number"||t===null?!t:(0,Re._)`!${Lv(t)}`}ge.not=kk;var yee=qk(ge.operators.AND);function gee(...t){return t.reduce(yee)}ge.and=gee;var _ee=qk(ge.operators.OR);function vee(...t){return t.reduce(_ee)}ge.or=vee;function qk(t){return(e,r)=>e===Re.nil?r:r===Re.nil?e:(0,Re._)`${Lv(e)} ${t} ${Lv(r)}`}function Lv(t){return t instanceof Re.Name?t:(0,Re._)`(${t})`}});var de=$(_e=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0});_e.checkStrictMode=_e.getErrorPath=_e.Type=_e.useFunc=_e.setEvaluated=_e.evaluatedPropsToName=_e.mergeEvaluated=_e.eachItem=_e.unescapeJsonPointer=_e.escapeJsonPointer=_e.escapeFragment=_e.unescapeFragment=_e.schemaRefOrVal=_e.schemaHasRulesButRef=_e.schemaHasRules=_e.checkUnknownRules=_e.alwaysValidSchema=_e.toHash=void 0;var nt=ee(),$ee=$a();function bee(t){let e={};for(let r of t)e[r]=!0;return e}_e.toHash=bee;function wee(t,e){return typeof e=="boolean"?e:Object.keys(e).length===0?!0:(Lk(t,e),!xk(e,t.self.RULES.all))}_e.alwaysValidSchema=wee;function Lk(t,e=t.schema){let{opts:r,self:n}=t;if(!r.strictSchema||typeof e=="boolean")return;let s=n.RULES.keywords;for(let i in e)s[i]||zk(t,`unknown keyword: "${i}"`)}_e.checkUnknownRules=Lk;function xk(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(e[r])return!0;return!1}_e.schemaHasRules=xk;function Eee(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(r!=="$ref"&&e.all[r])return!0;return!1}_e.schemaHasRulesButRef=Eee;function See({topSchemaRef:t,schemaPath:e},r,n,s){if(!s){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,nt._)`${r}`}return(0,nt._)`${t}${e}${(0,nt.getProperty)(n)}`}_e.schemaRefOrVal=See;function Ree(t){return Fk(decodeURIComponent(t))}_e.unescapeFragment=Ree;function Pee(t){return encodeURIComponent(xv(t))}_e.escapeFragment=Pee;function xv(t){return typeof t=="number"?`${t}`:t.replace(/~/g,"~0").replace(/\//g,"~1")}_e.escapeJsonPointer=xv;function Fk(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}_e.unescapeJsonPointer=Fk;function Tee(t,e){if(Array.isArray(t))for(let r of t)e(r);else e(t)}_e.eachItem=Tee;function jk({mergeNames:t,mergeToName:e,mergeValues:r,resultToName:n}){return(s,i,o,a)=>{let u=o===void 0?i:o instanceof nt.Name?(i instanceof nt.Name?t(s,i,o):e(s,i,o),o):i instanceof nt.Name?(e(s,o,i),i):r(i,o);return a===nt.Name&&!(u instanceof nt.Name)?n(s,u):u}}_e.mergeEvaluated={props:jk({mergeNames:(t,e,r)=>t.if((0,nt._)`${r} !== true && ${e} !== undefined`,()=>{t.if((0,nt._)`${e} === true`,()=>t.assign(r,!0),()=>t.assign(r,(0,nt._)`${r} || {}`).code((0,nt._)`Object.assign(${r}, ${e})`))}),mergeToName:(t,e,r)=>t.if((0,nt._)`${r} !== true`,()=>{e===!0?t.assign(r,!0):(t.assign(r,(0,nt._)`${r} || {}`),Fv(t,r,e))}),mergeValues:(t,e)=>t===!0?!0:{...t,...e},resultToName:Mk}),items:jk({mergeNames:(t,e,r)=>t.if((0,nt._)`${r} !== true && ${e} !== undefined`,()=>t.assign(r,(0,nt._)`${e} === true ? true : ${r} > ${e} ? ${r} : ${e}`)),mergeToName:(t,e,r)=>t.if((0,nt._)`${r} !== true`,()=>t.assign(r,e===!0?!0:(0,nt._)`${r} > ${e} ? ${r} : ${e}`)),mergeValues:(t,e)=>t===!0?!0:Math.max(t,e),resultToName:(t,e)=>t.var("items",e)})};function Mk(t,e){if(e===!0)return t.var("props",!0);let r=t.var("props",(0,nt._)`{}`);return e!==void 0&&Fv(t,r,e),r}_e.evaluatedPropsToName=Mk;function Fv(t,e,r){Object.keys(r).forEach(n=>t.assign((0,nt._)`${e}${(0,nt.getProperty)(n)}`,!0))}_e.setEvaluated=Fv;var Dk={};function Oee(t,e){return t.scopeValue("func",{ref:e,code:Dk[e.code]||(Dk[e.code]=new $ee._Code(e.code))})}_e.useFunc=Oee;var Vk;(function(t){t[t.Num=0]="Num",t[t.Str=1]="Str"})(Vk=_e.Type||(_e.Type={}));function Nee(t,e,r){if(t instanceof nt.Name){let n=e===Vk.Num;return r?n?(0,nt._)`"[" + ${t} + "]"`:(0,nt._)`"['" + ${t} + "']"`:n?(0,nt._)`"/" + ${t}`:(0,nt._)`"/" + ${t}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,nt.getProperty)(t).toString():"/"+xv(t)}_e.getErrorPath=Nee;function zk(t,e,r=t.opts.strictSchema){if(r){if(e=`strict mode: ${e}`,r===!0)throw new Error(e);t.self.logger.warn(e)}}_e.checkStrictMode=zk});var ln=$(Mv=>{"use strict";Object.defineProperty(Mv,"__esModule",{value:!0});var or=ee(),Iee={data:new or.Name("data"),valCxt:new or.Name("valCxt"),instancePath:new or.Name("instancePath"),parentData:new or.Name("parentData"),parentDataProperty:new or.Name("parentDataProperty"),rootData:new or.Name("rootData"),dynamicAnchors:new or.Name("dynamicAnchors"),vErrors:new or.Name("vErrors"),errors:new or.Name("errors"),this:new or.Name("this"),self:new or.Name("self"),scope:new or.Name("scope"),json:new or.Name("json"),jsonPos:new or.Name("jsonPos"),jsonLen:new or.Name("jsonLen"),jsonPart:new or.Name("jsonPart")};Mv.default=Iee});var Ul=$(ar=>{"use strict";Object.defineProperty(ar,"__esModule",{value:!0});ar.extendErrors=ar.resetErrorsCount=ar.reportExtraError=ar.reportError=ar.keyword$DataError=ar.keywordError=void 0;var Ie=ee(),vh=de(),vr=ln();ar.keywordError={message:({keyword:t})=>(0,Ie.str)`must pass "${t}" keyword validation`};ar.keyword$DataError={message:({keyword:t,schemaType:e})=>e?(0,Ie.str)`"${t}" keyword must be ${e} ($data)`:(0,Ie.str)`"${t}" keyword is invalid ($data)`};function Cee(t,e=ar.keywordError,r,n){let{it:s}=t,{gen:i,compositeRule:o,allErrors:a}=s,u=Kk(t,e,r);n??(o||a)?Uk(i,u):Hk(s,(0,Ie._)`[${u}]`)}ar.reportError=Cee;function Aee(t,e=ar.keywordError,r){let{it:n}=t,{gen:s,compositeRule:i,allErrors:o}=n,a=Kk(t,e,r);Uk(s,a),i||o||Hk(n,vr.default.vErrors)}ar.reportExtraError=Aee;function kee(t,e){t.assign(vr.default.errors,e),t.if((0,Ie._)`${vr.default.vErrors} !== null`,()=>t.if(e,()=>t.assign((0,Ie._)`${vr.default.vErrors}.length`,e),()=>t.assign(vr.default.vErrors,null)))}ar.resetErrorsCount=kee;function qee({gen:t,keyword:e,schemaValue:r,data:n,errsCount:s,it:i}){if(s===void 0)throw new Error("ajv implementation error");let o=t.name("err");t.forRange("i",s,vr.default.errors,a=>{t.const(o,(0,Ie._)`${vr.default.vErrors}[${a}]`),t.if((0,Ie._)`${o}.instancePath === undefined`,()=>t.assign((0,Ie._)`${o}.instancePath`,(0,Ie.strConcat)(vr.default.instancePath,i.errorPath))),t.assign((0,Ie._)`${o}.schemaPath`,(0,Ie.str)`${i.errSchemaPath}/${e}`),i.opts.verbose&&(t.assign((0,Ie._)`${o}.schema`,r),t.assign((0,Ie._)`${o}.data`,n))})}ar.extendErrors=qee;function Uk(t,e){let r=t.const("err",e);t.if((0,Ie._)`${vr.default.vErrors} === null`,()=>t.assign(vr.default.vErrors,(0,Ie._)`[${r}]`),(0,Ie._)`${vr.default.vErrors}.push(${r})`),t.code((0,Ie._)`${vr.default.errors}++`)}function Hk(t,e){let{gen:r,validateName:n,schemaEnv:s}=t;s.$async?r.throw((0,Ie._)`new ${t.ValidationError}(${e})`):(r.assign((0,Ie._)`${n}.errors`,e),r.return(!1))}var ao={keyword:new Ie.Name("keyword"),schemaPath:new Ie.Name("schemaPath"),params:new Ie.Name("params"),propertyName:new Ie.Name("propertyName"),message:new Ie.Name("message"),schema:new Ie.Name("schema"),parentSchema:new Ie.Name("parentSchema")};function Kk(t,e,r){let{createErrors:n}=t.it;return n===!1?(0,Ie._)`{}`:jee(t,e,r)}function jee(t,e,r={}){let{gen:n,it:s}=t,i=[Dee(s,r),Lee(t,r)];return xee(t,e,i),n.object(...i)}function Dee({errorPath:t},{instancePath:e}){let r=e?(0,Ie.str)`${t}${(0,vh.getErrorPath)(e,vh.Type.Str)}`:t;return[vr.default.instancePath,(0,Ie.strConcat)(vr.default.instancePath,r)]}function Lee({keyword:t,it:{errSchemaPath:e}},{schemaPath:r,parentSchema:n}){let s=n?e:(0,Ie.str)`${e}/${t}`;return r&&(s=(0,Ie.str)`${s}${(0,vh.getErrorPath)(r,vh.Type.Str)}`),[ao.schemaPath,s]}function xee(t,{params:e,message:r},n){let{keyword:s,data:i,schemaValue:o,it:a}=t,{opts:u,propertyName:l,topSchemaRef:c,schemaPath:f}=a;n.push([ao.keyword,s],[ao.params,typeof e=="function"?e(t):e||(0,Ie._)`{}`]),u.messages&&n.push([ao.message,typeof r=="function"?r(t):r]),u.verbose&&n.push([ao.schema,o],[ao.parentSchema,(0,Ie._)`${c}${f}`],[vr.default.data,i]),l&&n.push([ao.propertyName,l])}});var Gk=$(Ea=>{"use strict";Object.defineProperty(Ea,"__esModule",{value:!0});Ea.boolOrEmptySchema=Ea.topBoolOrEmptySchema=void 0;var Fee=Ul(),Mee=ee(),Vee=ln(),zee={message:"boolean schema is false"};function Uee(t){let{gen:e,schema:r,validateName:n}=t;r===!1?Bk(t,!1):typeof r=="object"&&r.$async===!0?e.return(Vee.default.data):(e.assign((0,Mee._)`${n}.errors`,null),e.return(!0))}Ea.topBoolOrEmptySchema=Uee;function Hee(t,e){let{gen:r,schema:n}=t;n===!1?(r.var(e,!1),Bk(t)):r.var(e,!0)}Ea.boolOrEmptySchema=Hee;function Bk(t,e){let{gen:r,data:n}=t,s={gen:r,keyword:"false schema",data:n,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:t};(0,Fee.reportError)(s,zee,void 0,e)}});var Vv=$(Sa=>{"use strict";Object.defineProperty(Sa,"__esModule",{value:!0});Sa.getRules=Sa.isJSONType=void 0;var Kee=["string","number","integer","boolean","null","object","array"],Bee=new Set(Kee);function Gee(t){return typeof t=="string"&&Bee.has(t)}Sa.isJSONType=Gee;function Jee(){let t={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...t,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},t.number,t.string,t.array,t.object],post:{rules:[]},all:{},keywords:{}}}Sa.getRules=Jee});var zv=$(si=>{"use strict";Object.defineProperty(si,"__esModule",{value:!0});si.shouldUseRule=si.shouldUseGroup=si.schemaHasRulesForType=void 0;function Yee({schema:t,self:e},r){let n=e.RULES.types[r];return n&&n!==!0&&Jk(t,n)}si.schemaHasRulesForType=Yee;function Jk(t,e){return e.rules.some(r=>Yk(t,r))}si.shouldUseGroup=Jk;function Yk(t,e){var r;return t[e.keyword]!==void 0||((r=e.definition.implements)===null||r===void 0?void 0:r.some(n=>t[n]!==void 0))}si.shouldUseRule=Yk});var Kl=$(Yt=>{"use strict";Object.defineProperty(Yt,"__esModule",{value:!0});Yt.reportTypeError=Yt.checkDataTypes=Yt.checkDataType=Yt.coerceAndCheckDataType=Yt.getJSONTypes=Yt.getSchemaTypes=Yt.DataType=void 0;var Wee=Vv(),Xee=zv(),Qee=Ul(),le=ee(),Wk=de(),Hl;(function(t){t[t.Correct=0]="Correct",t[t.Wrong=1]="Wrong"})(Hl=Yt.DataType||(Yt.DataType={}));function Zee(t){let e=Xk(t.type);if(e.includes("null")){if(t.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!e.length&&t.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');t.nullable===!0&&e.push("null")}return e}Yt.getSchemaTypes=Zee;function Xk(t){let e=Array.isArray(t)?t:t?[t]:[];if(e.every(Wee.isJSONType))return e;throw new Error("type must be JSONType or JSONType[]: "+e.join(","))}Yt.getJSONTypes=Xk;function ete(t,e){let{gen:r,data:n,opts:s}=t,i=tte(e,s.coerceTypes),o=e.length>0&&!(i.length===0&&e.length===1&&(0,Xee.schemaHasRulesForType)(t,e[0]));if(o){let a=Hv(e,n,s.strictNumbers,Hl.Wrong);r.if(a,()=>{i.length?rte(t,e,i):Kv(t)})}return o}Yt.coerceAndCheckDataType=ete;var Qk=new Set(["string","number","integer","boolean","null"]);function tte(t,e){return e?t.filter(r=>Qk.has(r)||e==="array"&&r==="array"):[]}function rte(t,e,r){let{gen:n,data:s,opts:i}=t,o=n.let("dataType",(0,le._)`typeof ${s}`),a=n.let("coerced",(0,le._)`undefined`);i.coerceTypes==="array"&&n.if((0,le._)`${o} == 'object' && Array.isArray(${s}) && ${s}.length == 1`,()=>n.assign(s,(0,le._)`${s}[0]`).assign(o,(0,le._)`typeof ${s}`).if(Hv(e,s,i.strictNumbers),()=>n.assign(a,s))),n.if((0,le._)`${a} !== undefined`);for(let l of r)(Qk.has(l)||l==="array"&&i.coerceTypes==="array")&&u(l);n.else(),Kv(t),n.endIf(),n.if((0,le._)`${a} !== undefined`,()=>{n.assign(s,a),nte(t,a)});function u(l){switch(l){case"string":n.elseIf((0,le._)`${o} == "number" || ${o} == "boolean"`).assign(a,(0,le._)`"" + ${s}`).elseIf((0,le._)`${s} === null`).assign(a,(0,le._)`""`);return;case"number":n.elseIf((0,le._)`${o} == "boolean" || ${s} === null
              || (${o} == "string" && ${s} && ${s} == +${s})`).assign(a,(0,le._)`+${s}`);return;case"integer":n.elseIf((0,le._)`${o} === "boolean" || ${s} === null
              || (${o} === "string" && ${s} && ${s} == +${s} && !(${s} % 1))`).assign(a,(0,le._)`+${s}`);return;case"boolean":n.elseIf((0,le._)`${s} === "false" || ${s} === 0 || ${s} === null`).assign(a,!1).elseIf((0,le._)`${s} === "true" || ${s} === 1`).assign(a,!0);return;case"null":n.elseIf((0,le._)`${s} === "" || ${s} === 0 || ${s} === false`),n.assign(a,null);return;case"array":n.elseIf((0,le._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${s} === null`).assign(a,(0,le._)`[${s}]`)}}}function nte({gen:t,parentData:e,parentDataProperty:r},n){t.if((0,le._)`${e} !== undefined`,()=>t.assign((0,le._)`${e}[${r}]`,n))}function Uv(t,e,r,n=Hl.Correct){let s=n===Hl.Correct?le.operators.EQ:le.operators.NEQ,i;switch(t){case"null":return(0,le._)`${e} ${s} null`;case"array":i=(0,le._)`Array.isArray(${e})`;break;case"object":i=(0,le._)`${e} && typeof ${e} == "object" && !Array.isArray(${e})`;break;case"integer":i=o((0,le._)`!(${e} % 1) && !isNaN(${e})`);break;case"number":i=o();break;default:return(0,le._)`typeof ${e} ${s} ${t}`}return n===Hl.Correct?i:(0,le.not)(i);function o(a=le.nil){return(0,le.and)((0,le._)`typeof ${e} == "number"`,a,r?(0,le._)`isFinite(${e})`:le.nil)}}Yt.checkDataType=Uv;function Hv(t,e,r,n){if(t.length===1)return Uv(t[0],e,r,n);let s,i=(0,Wk.toHash)(t);if(i.array&&i.object){let o=(0,le._)`typeof ${e} != "object"`;s=i.null?o:(0,le._)`!${e} || ${o}`,delete i.null,delete i.array,delete i.object}else s=le.nil;i.number&&delete i.integer;for(let o in i)s=(0,le.and)(s,Uv(o,e,r,n));return s}Yt.checkDataTypes=Hv;var ste={message:({schema:t})=>`must be ${t}`,params:({schema:t,schemaValue:e})=>typeof t=="string"?(0,le._)`{type: ${t}}`:(0,le._)`{type: ${e}}`};function Kv(t){let e=ite(t);(0,Qee.reportError)(e,ste)}Yt.reportTypeError=Kv;function ite(t){let{gen:e,data:r,schema:n}=t,s=(0,Wk.schemaRefOrVal)(t,n,"type");return{gen:e,keyword:"type",data:r,schema:n.type,schemaCode:s,schemaValue:s,parentSchema:n,params:{},it:t}}});var eq=$($h=>{"use strict";Object.defineProperty($h,"__esModule",{value:!0});$h.assignDefaults=void 0;var Ra=ee(),ote=de();function ate(t,e){let{properties:r,items:n}=t.schema;if(e==="object"&&r)for(let s in r)Zk(t,s,r[s].default);else e==="array"&&Array.isArray(n)&&n.forEach((s,i)=>Zk(t,i,s.default))}$h.assignDefaults=ate;function Zk(t,e,r){let{gen:n,compositeRule:s,data:i,opts:o}=t;if(r===void 0)return;let a=(0,Ra._)`${i}${(0,Ra.getProperty)(e)}`;if(s){(0,ote.checkStrictMode)(t,`default is ignored for: ${a}`);return}let u=(0,Ra._)`${a} === undefined`;o.useDefaults==="empty"&&(u=(0,Ra._)`${u} || ${a} === null || ${a} === ""`),n.if(u,(0,Ra._)`${a} = ${(0,Ra.stringify)(r)}`)}});var Wt=$(Ye=>{"use strict";Object.defineProperty(Ye,"__esModule",{value:!0});Ye.validateUnion=Ye.validateArray=Ye.usePattern=Ye.callValidateCode=Ye.schemaProperties=Ye.allSchemaProperties=Ye.noPropertyInData=Ye.propertyInData=Ye.isOwnProperty=Ye.hasPropFunc=Ye.reportMissingProp=Ye.checkMissingProp=Ye.checkReportMissingProp=void 0;var ut=ee(),Bv=de(),ii=ln(),ute=de();function lte(t,e){let{gen:r,data:n,it:s}=t;r.if(Jv(r,n,e,s.opts.ownProperties),()=>{t.setParams({missingProperty:(0,ut._)`${e}`},!0),t.error()})}Ye.checkReportMissingProp=lte;function cte({gen:t,data:e,it:{opts:r}},n,s){return(0,ut.or)(...n.map(i=>(0,ut.and)(Jv(t,e,i,r.ownProperties),(0,ut._)`${s} = ${i}`)))}Ye.checkMissingProp=cte;function fte(t,e){t.setParams({missingProperty:e},!0),t.error()}Ye.reportMissingProp=fte;function tq(t){return t.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,ut._)`Object.prototype.hasOwnProperty`})}Ye.hasPropFunc=tq;function Gv(t,e,r){return(0,ut._)`${tq(t)}.call(${e}, ${r})`}Ye.isOwnProperty=Gv;function dte(t,e,r,n){let s=(0,ut._)`${e}${(0,ut.getProperty)(r)} !== undefined`;return n?(0,ut._)`${s} && ${Gv(t,e,r)}`:s}Ye.propertyInData=dte;function Jv(t,e,r,n){let s=(0,ut._)`${e}${(0,ut.getProperty)(r)} === undefined`;return n?(0,ut.or)(s,(0,ut.not)(Gv(t,e,r))):s}Ye.noPropertyInData=Jv;function rq(t){return t?Object.keys(t).filter(e=>e!=="__proto__"):[]}Ye.allSchemaProperties=rq;function hte(t,e){return rq(e).filter(r=>!(0,Bv.alwaysValidSchema)(t,e[r]))}Ye.schemaProperties=hte;function pte({schemaCode:t,data:e,it:{gen:r,topSchemaRef:n,schemaPath:s,errorPath:i},it:o},a,u,l){let c=l?(0,ut._)`${t}, ${e}, ${n}${s}`:e,f=[[ii.default.instancePath,(0,ut.strConcat)(ii.default.instancePath,i)],[ii.default.parentData,o.parentData],[ii.default.parentDataProperty,o.parentDataProperty],[ii.default.rootData,ii.default.rootData]];o.opts.dynamicRef&&f.push([ii.default.dynamicAnchors,ii.default.dynamicAnchors]);let h=(0,ut._)`${c}, ${r.object(...f)}`;return u!==ut.nil?(0,ut._)`${a}.call(${u}, ${h})`:(0,ut._)`${a}(${h})`}Ye.callValidateCode=pte;var mte=(0,ut._)`new RegExp`;function yte({gen:t,it:{opts:e}},r){let n=e.unicodeRegExp?"u":"",{regExp:s}=e.code,i=s(r,n);return t.scopeValue("pattern",{key:i.toString(),ref:i,code:(0,ut._)`${s.code==="new RegExp"?mte:(0,ute.useFunc)(t,s)}(${r}, ${n})`})}Ye.usePattern=yte;function gte(t){let{gen:e,data:r,keyword:n,it:s}=t,i=e.name("valid");if(s.allErrors){let a=e.let("valid",!0);return o(()=>e.assign(a,!1)),a}return e.var(i,!0),o(()=>e.break()),i;function o(a){let u=e.const("len",(0,ut._)`${r}.length`);e.forRange("i",0,u,l=>{t.subschema({keyword:n,dataProp:l,dataPropType:Bv.Type.Num},i),e.if((0,ut.not)(i),a)})}}Ye.validateArray=gte;function _te(t){let{gen:e,schema:r,keyword:n,it:s}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(u=>(0,Bv.alwaysValidSchema)(s,u))&&!s.opts.unevaluated)return;let o=e.let("valid",!1),a=e.name("_valid");e.block(()=>r.forEach((u,l)=>{let c=t.subschema({keyword:n,schemaProp:l,compositeRule:!0},a);e.assign(o,(0,ut._)`${o} || ${a}`),t.mergeValidEvaluated(c,a)||e.if((0,ut.not)(o))})),t.result(o,()=>t.reset(),()=>t.error(!0))}Ye.validateUnion=_te});var iq=$(Yn=>{"use strict";Object.defineProperty(Yn,"__esModule",{value:!0});Yn.validateKeywordUsage=Yn.validSchemaType=Yn.funcKeywordCode=Yn.macroKeywordCode=void 0;var $r=ee(),uo=ln(),vte=Wt(),$te=Ul();function bte(t,e){let{gen:r,keyword:n,schema:s,parentSchema:i,it:o}=t,a=e.macro.call(o.self,s,i,o),u=sq(r,n,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);let l=r.name("valid");t.subschema({schema:a,schemaPath:$r.nil,errSchemaPath:`${o.errSchemaPath}/${n}`,topSchemaRef:u,compositeRule:!0},l),t.pass(l,()=>t.error(!0))}Yn.macroKeywordCode=bte;function wte(t,e){var r;let{gen:n,keyword:s,schema:i,parentSchema:o,$data:a,it:u}=t;Ste(u,e);let l=!a&&e.compile?e.compile.call(u.self,i,o,u):e.validate,c=sq(n,s,l),f=n.let("valid");t.block$data(f,h),t.ok((r=e.valid)!==null&&r!==void 0?r:f);function h(){if(e.errors===!1)m(),e.modifying&&nq(t),v(()=>t.error());else{let g=e.async?d():p();e.modifying&&nq(t),v(()=>Ete(t,g))}}function d(){let g=n.let("ruleErrs",null);return n.try(()=>m((0,$r._)`await `),w=>n.assign(f,!1).if((0,$r._)`${w} instanceof ${u.ValidationError}`,()=>n.assign(g,(0,$r._)`${w}.errors`),()=>n.throw(w))),g}function p(){let g=(0,$r._)`${c}.errors`;return n.assign(g,null),m($r.nil),g}function m(g=e.async?(0,$r._)`await `:$r.nil){let w=u.opts.passContext?uo.default.this:uo.default.self,_=!("compile"in e&&!a||e.schema===!1);n.assign(f,(0,$r._)`${g}${(0,vte.callValidateCode)(t,c,w,_)}`,e.modifying)}function v(g){var w;n.if((0,$r.not)((w=e.valid)!==null&&w!==void 0?w:f),g)}}Yn.funcKeywordCode=wte;function nq(t){let{gen:e,data:r,it:n}=t;e.if(n.parentData,()=>e.assign(r,(0,$r._)`${n.parentData}[${n.parentDataProperty}]`))}function Ete(t,e){let{gen:r}=t;r.if((0,$r._)`Array.isArray(${e})`,()=>{r.assign(uo.default.vErrors,(0,$r._)`${uo.default.vErrors} === null ? ${e} : ${uo.default.vErrors}.concat(${e})`).assign(uo.default.errors,(0,$r._)`${uo.default.vErrors}.length`),(0,$te.extendErrors)(t)},()=>t.error())}function Ste({schemaEnv:t},e){if(e.async&&!t.$async)throw new Error("async keyword in sync schema")}function sq(t,e,r){if(r===void 0)throw new Error(`keyword "${e}" failed to compile`);return t.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,$r.stringify)(r)})}function Rte(t,e,r=!1){return!e.length||e.some(n=>n==="array"?Array.isArray(t):n==="object"?t&&typeof t=="object"&&!Array.isArray(t):typeof t==n||r&&typeof t>"u")}Yn.validSchemaType=Rte;function Pte({schema:t,opts:e,self:r,errSchemaPath:n},s,i){if(Array.isArray(s.keyword)?!s.keyword.includes(i):s.keyword!==i)throw new Error("ajv implementation error");let o=s.dependencies;if(o?.some(a=>!Object.prototype.hasOwnProperty.call(t,a)))throw new Error(`parent schema must have dependencies of ${i}: ${o.join(",")}`);if(s.validateSchema&&!s.validateSchema(t[i])){let u=`keyword "${i}" value is invalid at path "${n}": `+r.errorsText(s.validateSchema.errors);if(e.validateSchema==="log")r.logger.error(u);else throw new Error(u)}}Yn.validateKeywordUsage=Pte});var aq=$(oi=>{"use strict";Object.defineProperty(oi,"__esModule",{value:!0});oi.extendSubschemaMode=oi.extendSubschemaData=oi.getSubschema=void 0;var Wn=ee(),oq=de();function Tte(t,{keyword:e,schemaProp:r,schema:n,schemaPath:s,errSchemaPath:i,topSchemaRef:o}){if(e!==void 0&&n!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(e!==void 0){let a=t.schema[e];return r===void 0?{schema:a,schemaPath:(0,Wn._)`${t.schemaPath}${(0,Wn.getProperty)(e)}`,errSchemaPath:`${t.errSchemaPath}/${e}`}:{schema:a[r],schemaPath:(0,Wn._)`${t.schemaPath}${(0,Wn.getProperty)(e)}${(0,Wn.getProperty)(r)}`,errSchemaPath:`${t.errSchemaPath}/${e}/${(0,oq.escapeFragment)(r)}`}}if(n!==void 0){if(s===void 0||i===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:n,schemaPath:s,topSchemaRef:o,errSchemaPath:i}}throw new Error('either "keyword" or "schema" must be passed')}oi.getSubschema=Tte;function Ote(t,e,{dataProp:r,dataPropType:n,data:s,dataTypes:i,propertyName:o}){if(s!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');let{gen:a}=e;if(r!==void 0){let{errorPath:l,dataPathArr:c,opts:f}=e,h=a.let("data",(0,Wn._)`${e.data}${(0,Wn.getProperty)(r)}`,!0);u(h),t.errorPath=(0,Wn.str)`${l}${(0,oq.getErrorPath)(r,n,f.jsPropertySyntax)}`,t.parentDataProperty=(0,Wn._)`${r}`,t.dataPathArr=[...c,t.parentDataProperty]}if(s!==void 0){let l=s instanceof Wn.Name?s:a.let("data",s,!0);u(l),o!==void 0&&(t.propertyName=o)}i&&(t.dataTypes=i);function u(l){t.data=l,t.dataLevel=e.dataLevel+1,t.dataTypes=[],e.definedProperties=new Set,t.parentData=e.data,t.dataNames=[...e.dataNames,l]}}oi.extendSubschemaData=Ote;function Nte(t,{jtdDiscriminator:e,jtdMetadata:r,compositeRule:n,createErrors:s,allErrors:i}){n!==void 0&&(t.compositeRule=n),s!==void 0&&(t.createErrors=s),i!==void 0&&(t.allErrors=i),t.jtdDiscriminator=e,t.jtdMetadata=r}oi.extendSubschemaMode=Nte});var lq=$((rye,uq)=>{"use strict";var ai=uq.exports=function(t,e,r){typeof e=="function"&&(r=e,e={}),r=e.cb||r;var n=typeof r=="function"?r:r.pre||function(){},s=r.post||function(){};bh(e,n,s,t,"",t)};ai.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};ai.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};ai.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};ai.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function bh(t,e,r,n,s,i,o,a,u,l){if(n&&typeof n=="object"&&!Array.isArray(n)){e(n,s,i,o,a,u,l);for(var c in n){var f=n[c];if(Array.isArray(f)){if(c in ai.arrayKeywords)for(var h=0;h<f.length;h++)bh(t,e,r,f[h],s+"/"+c+"/"+h,i,s,c,n,h)}else if(c in ai.propsKeywords){if(f&&typeof f=="object")for(var d in f)bh(t,e,r,f[d],s+"/"+c+"/"+Ite(d),i,s,c,n,d)}else(c in ai.keywords||t.allKeys&&!(c in ai.skipKeywords))&&bh(t,e,r,f,s+"/"+c,i,s,c,n)}r(n,s,i,o,a,u,l)}}function Ite(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}});var Bl=$(Ar=>{"use strict";Object.defineProperty(Ar,"__esModule",{value:!0});Ar.getSchemaRefs=Ar.resolveUrl=Ar.normalizeId=Ar._getFullPath=Ar.getFullPath=Ar.inlineRef=void 0;var Cte=de(),Ate=Vn(),kte=lq(),qte=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function jte(t,e=!0){return typeof t=="boolean"?!0:e===!0?!Yv(t):e?cq(t)<=e:!1}Ar.inlineRef=jte;var Dte=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function Yv(t){for(let e in t){if(Dte.has(e))return!0;let r=t[e];if(Array.isArray(r)&&r.some(Yv)||typeof r=="object"&&Yv(r))return!0}return!1}function cq(t){let e=0;for(let r in t){if(r==="$ref")return 1/0;if(e++,!qte.has(r)&&(typeof t[r]=="object"&&(0,Cte.eachItem)(t[r],n=>e+=cq(n)),e===1/0))return 1/0}return e}function fq(t,e="",r){r!==!1&&(e=Pa(e));let n=t.parse(e);return dq(t,n)}Ar.getFullPath=fq;function dq(t,e){return t.serialize(e).split("#")[0]+"#"}Ar._getFullPath=dq;var Lte=/#\/?$/;function Pa(t){return t?t.replace(Lte,""):""}Ar.normalizeId=Pa;function xte(t,e,r){return r=Pa(r),t.resolve(e,r)}Ar.resolveUrl=xte;var Fte=/^[a-z_][-a-z0-9._]*$/i;function Mte(t,e){if(typeof t=="boolean")return{};let{schemaId:r,uriResolver:n}=this.opts,s=Pa(t[r]||e),i={"":s},o=fq(n,s,!1),a={},u=new Set;return kte(t,{allKeys:!0},(f,h,d,p)=>{if(p===void 0)return;let m=o+h,v=i[p];typeof f[r]=="string"&&(v=g.call(this,f[r])),w.call(this,f.$anchor),w.call(this,f.$dynamicAnchor),i[h]=v;function g(_){let y=this.opts.uriResolver.resolve;if(_=Pa(v?y(v,_):_),u.has(_))throw c(_);u.add(_);let b=this.refs[_];return typeof b=="string"&&(b=this.refs[b]),typeof b=="object"?l(f,b.schema,_):_!==Pa(m)&&(_[0]==="#"?(l(f,a[_],_),a[_]=f):this.refs[_]=m),_}function w(_){if(typeof _=="string"){if(!Fte.test(_))throw new Error(`invalid anchor "${_}"`);g.call(this,`#${_}`)}}}),a;function l(f,h,d){if(h!==void 0&&!Ate(f,h))throw c(d)}function c(f){return new Error(`reference "${f}" resolves to more than one schema`)}}Ar.getSchemaRefs=Mte});var Ta=$(ui=>{"use strict";Object.defineProperty(ui,"__esModule",{value:!0});ui.getData=ui.KeywordCxt=ui.validateFunctionCode=void 0;var gq=Gk(),hq=Kl(),Xv=zv(),wh=Kl(),Vte=eq(),Jl=iq(),Wv=aq(),X=ee(),se=ln(),zte=Bl(),ws=de(),Gl=Ul();function Ute(t){if($q(t)&&(bq(t),vq(t))){Bte(t);return}_q(t,()=>(0,gq.topBoolOrEmptySchema)(t))}ui.validateFunctionCode=Ute;function _q({gen:t,validateName:e,schema:r,schemaEnv:n,opts:s},i){s.code.es5?t.func(e,(0,X._)`${se.default.data}, ${se.default.valCxt}`,n.$async,()=>{t.code((0,X._)`"use strict"; ${pq(r,s)}`),Kte(t,s),t.code(i)}):t.func(e,(0,X._)`${se.default.data}, ${Hte(s)}`,n.$async,()=>t.code(pq(r,s)).code(i))}function Hte(t){return(0,X._)`{${se.default.instancePath}="", ${se.default.parentData}, ${se.default.parentDataProperty}, ${se.default.rootData}=${se.default.data}${t.dynamicRef?(0,X._)`, ${se.default.dynamicAnchors}={}`:X.nil}}={}`}function Kte(t,e){t.if(se.default.valCxt,()=>{t.var(se.default.instancePath,(0,X._)`${se.default.valCxt}.${se.default.instancePath}`),t.var(se.default.parentData,(0,X._)`${se.default.valCxt}.${se.default.parentData}`),t.var(se.default.parentDataProperty,(0,X._)`${se.default.valCxt}.${se.default.parentDataProperty}`),t.var(se.default.rootData,(0,X._)`${se.default.valCxt}.${se.default.rootData}`),e.dynamicRef&&t.var(se.default.dynamicAnchors,(0,X._)`${se.default.valCxt}.${se.default.dynamicAnchors}`)},()=>{t.var(se.default.instancePath,(0,X._)`""`),t.var(se.default.parentData,(0,X._)`undefined`),t.var(se.default.parentDataProperty,(0,X._)`undefined`),t.var(se.default.rootData,se.default.data),e.dynamicRef&&t.var(se.default.dynamicAnchors,(0,X._)`{}`)})}function Bte(t){let{schema:e,opts:r,gen:n}=t;_q(t,()=>{r.$comment&&e.$comment&&Eq(t),Xte(t),n.let(se.default.vErrors,null),n.let(se.default.errors,0),r.unevaluated&&Gte(t),wq(t),ere(t)})}function Gte(t){let{gen:e,validateName:r}=t;t.evaluated=e.const("evaluated",(0,X._)`${r}.evaluated`),e.if((0,X._)`${t.evaluated}.dynamicProps`,()=>e.assign((0,X._)`${t.evaluated}.props`,(0,X._)`undefined`)),e.if((0,X._)`${t.evaluated}.dynamicItems`,()=>e.assign((0,X._)`${t.evaluated}.items`,(0,X._)`undefined`))}function pq(t,e){let r=typeof t=="object"&&t[e.schemaId];return r&&(e.code.source||e.code.process)?(0,X._)`/*# sourceURL=${r} */`:X.nil}function Jte(t,e){if($q(t)&&(bq(t),vq(t))){Yte(t,e);return}(0,gq.boolOrEmptySchema)(t,e)}function vq({schema:t,self:e}){if(typeof t=="boolean")return!t;for(let r in t)if(e.RULES.all[r])return!0;return!1}function $q(t){return typeof t.schema!="boolean"}function Yte(t,e){let{schema:r,gen:n,opts:s}=t;s.$comment&&r.$comment&&Eq(t),Qte(t),Zte(t);let i=n.const("_errs",se.default.errors);wq(t,i),n.var(e,(0,X._)`${i} === ${se.default.errors}`)}function bq(t){(0,ws.checkUnknownRules)(t),Wte(t)}function wq(t,e){if(t.opts.jtd)return mq(t,[],!1,e);let r=(0,hq.getSchemaTypes)(t.schema),n=(0,hq.coerceAndCheckDataType)(t,r);mq(t,r,!n,e)}function Wte(t){let{schema:e,errSchemaPath:r,opts:n,self:s}=t;e.$ref&&n.ignoreKeywordsWithRef&&(0,ws.schemaHasRulesButRef)(e,s.RULES)&&s.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function Xte(t){let{schema:e,opts:r}=t;e.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,ws.checkStrictMode)(t,"default is ignored in the schema root")}function Qte(t){let e=t.schema[t.opts.schemaId];e&&(t.baseId=(0,zte.resolveUrl)(t.opts.uriResolver,t.baseId,e))}function Zte(t){if(t.schema.$async&&!t.schemaEnv.$async)throw new Error("async schema in sync schema")}function Eq({gen:t,schemaEnv:e,schema:r,errSchemaPath:n,opts:s}){let i=r.$comment;if(s.$comment===!0)t.code((0,X._)`${se.default.self}.logger.log(${i})`);else if(typeof s.$comment=="function"){let o=(0,X.str)`${n}/$comment`,a=t.scopeValue("root",{ref:e.root});t.code((0,X._)`${se.default.self}.opts.$comment(${i}, ${o}, ${a}.schema)`)}}function ere(t){let{gen:e,schemaEnv:r,validateName:n,ValidationError:s,opts:i}=t;r.$async?e.if((0,X._)`${se.default.errors} === 0`,()=>e.return(se.default.data),()=>e.throw((0,X._)`new ${s}(${se.default.vErrors})`)):(e.assign((0,X._)`${n}.errors`,se.default.vErrors),i.unevaluated&&tre(t),e.return((0,X._)`${se.default.errors} === 0`))}function tre({gen:t,evaluated:e,props:r,items:n}){r instanceof X.Name&&t.assign((0,X._)`${e}.props`,r),n instanceof X.Name&&t.assign((0,X._)`${e}.items`,n)}function mq(t,e,r,n){let{gen:s,schema:i,data:o,allErrors:a,opts:u,self:l}=t,{RULES:c}=l;if(i.$ref&&(u.ignoreKeywordsWithRef||!(0,ws.schemaHasRulesButRef)(i,c))){s.block(()=>Rq(t,"$ref",c.all.$ref.definition));return}u.jtd||rre(t,e),s.block(()=>{for(let h of c.rules)f(h);f(c.post)});function f(h){(0,Xv.shouldUseGroup)(i,h)&&(h.type?(s.if((0,wh.checkDataType)(h.type,o,u.strictNumbers)),yq(t,h),e.length===1&&e[0]===h.type&&r&&(s.else(),(0,wh.reportTypeError)(t)),s.endIf()):yq(t,h),a||s.if((0,X._)`${se.default.errors} === ${n||0}`))}}function yq(t,e){let{gen:r,schema:n,opts:{useDefaults:s}}=t;s&&(0,Vte.assignDefaults)(t,e.type),r.block(()=>{for(let i of e.rules)(0,Xv.shouldUseRule)(n,i)&&Rq(t,i.keyword,i.definition,e.type)})}function rre(t,e){t.schemaEnv.meta||!t.opts.strictTypes||(nre(t,e),t.opts.allowUnionTypes||sre(t,e),ire(t,t.dataTypes))}function nre(t,e){if(e.length){if(!t.dataTypes.length){t.dataTypes=e;return}e.forEach(r=>{Sq(t.dataTypes,r)||Qv(t,`type "${r}" not allowed by context "${t.dataTypes.join(",")}"`)}),are(t,e)}}function sre(t,e){e.length>1&&!(e.length===2&&e.includes("null"))&&Qv(t,"use allowUnionTypes to allow union type keyword")}function ire(t,e){let r=t.self.RULES.all;for(let n in r){let s=r[n];if(typeof s=="object"&&(0,Xv.shouldUseRule)(t.schema,s)){let{type:i}=s.definition;i.length&&!i.some(o=>ore(e,o))&&Qv(t,`missing type "${i.join(",")}" for keyword "${n}"`)}}}function ore(t,e){return t.includes(e)||e==="number"&&t.includes("integer")}function Sq(t,e){return t.includes(e)||e==="integer"&&t.includes("number")}function are(t,e){let r=[];for(let n of t.dataTypes)Sq(e,n)?r.push(n):e.includes("integer")&&n==="number"&&r.push("integer");t.dataTypes=r}function Qv(t,e){let r=t.schemaEnv.baseId+t.errSchemaPath;e+=` at "${r}" (strictTypes)`,(0,ws.checkStrictMode)(t,e,t.opts.strictTypes)}var Eh=class{constructor(e,r,n){if((0,Jl.validateKeywordUsage)(e,r,n),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=n,this.data=e.data,this.schema=e.schema[n],this.$data=r.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,ws.schemaRefOrVal)(e,this.schema,n,this.$data),this.schemaType=r.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=r,this.$data)this.schemaCode=e.gen.const("vSchema",Pq(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,Jl.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=e.gen.const("_errs",se.default.errors))}result(e,r,n){this.failResult((0,X.not)(e),r,n)}failResult(e,r,n){this.gen.if(e),n?n():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,r){this.failResult((0,X.not)(e),void 0,r)}fail(e){if(e===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);let{schemaCode:r}=this;this.fail((0,X._)`${r} !== undefined && (${(0,X.or)(this.invalid$data(),e)})`)}error(e,r,n){if(r){this.setParams(r),this._error(e,n),this.setParams({});return}this._error(e,n)}_error(e,r){(e?Gl.reportExtraError:Gl.reportError)(this,this.def.error,r)}$dataError(){(0,Gl.reportError)(this,this.def.$dataError||Gl.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,Gl.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,r){r?Object.assign(this.params,e):this.params=e}block$data(e,r,n=X.nil){this.gen.block(()=>{this.check$data(e,n),r()})}check$data(e=X.nil,r=X.nil){if(!this.$data)return;let{gen:n,schemaCode:s,schemaType:i,def:o}=this;n.if((0,X.or)((0,X._)`${s} === undefined`,r)),e!==X.nil&&n.assign(e,!0),(i.length||o.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),e!==X.nil&&n.assign(e,!1)),n.else()}invalid$data(){let{gen:e,schemaCode:r,schemaType:n,def:s,it:i}=this;return(0,X.or)(o(),a());function o(){if(n.length){if(!(r instanceof X.Name))throw new Error("ajv implementation error");let u=Array.isArray(n)?n:[n];return(0,X._)`${(0,wh.checkDataTypes)(u,r,i.opts.strictNumbers,wh.DataType.Wrong)}`}return X.nil}function a(){if(s.validateSchema){let u=e.scopeValue("validate$data",{ref:s.validateSchema});return(0,X._)`!${u}(${r})`}return X.nil}}subschema(e,r){let n=(0,Wv.getSubschema)(this.it,e);(0,Wv.extendSubschemaData)(n,this.it,e),(0,Wv.extendSubschemaMode)(n,e);let s={...this.it,...n,items:void 0,props:void 0};return Jte(s,r),s}mergeEvaluated(e,r){let{it:n,gen:s}=this;n.opts.unevaluated&&(n.props!==!0&&e.props!==void 0&&(n.props=ws.mergeEvaluated.props(s,e.props,n.props,r)),n.items!==!0&&e.items!==void 0&&(n.items=ws.mergeEvaluated.items(s,e.items,n.items,r)))}mergeValidEvaluated(e,r){let{it:n,gen:s}=this;if(n.opts.unevaluated&&(n.props!==!0||n.items!==!0))return s.if(r,()=>this.mergeEvaluated(e,X.Name)),!0}};ui.KeywordCxt=Eh;function Rq(t,e,r,n){let s=new Eh(t,r,e);"code"in r?r.code(s,n):s.$data&&r.validate?(0,Jl.funcKeywordCode)(s,r):"macro"in r?(0,Jl.macroKeywordCode)(s,r):(r.compile||r.validate)&&(0,Jl.funcKeywordCode)(s,r)}var ure=/^\/(?:[^~]|~0|~1)*$/,lre=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Pq(t,{dataLevel:e,dataNames:r,dataPathArr:n}){let s,i;if(t==="")return se.default.rootData;if(t[0]==="/"){if(!ure.test(t))throw new Error(`Invalid JSON-pointer: ${t}`);s=t,i=se.default.rootData}else{let l=lre.exec(t);if(!l)throw new Error(`Invalid JSON-pointer: ${t}`);let c=+l[1];if(s=l[2],s==="#"){if(c>=e)throw new Error(u("property/index",c));return n[e-c]}if(c>e)throw new Error(u("data",c));if(i=r[e-c],!s)return i}let o=i,a=s.split("/");for(let l of a)l&&(i=(0,X._)`${i}${(0,X.getProperty)((0,ws.unescapeJsonPointer)(l))}`,o=(0,X._)`${o} && ${i}`);return o;function u(l,c){return`Cannot access ${l} ${c} levels up, current level is ${e}`}}ui.getData=Pq});var Yl=$(e$=>{"use strict";Object.defineProperty(e$,"__esModule",{value:!0});var Zv=class extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}};e$.default=Zv});var li=$(n$=>{"use strict";Object.defineProperty(n$,"__esModule",{value:!0});var t$=Bl(),r$=class extends Error{constructor(e,r,n,s){super(s||`can't resolve reference ${n} from id ${r}`),this.missingRef=(0,t$.resolveUrl)(e,r,n),this.missingSchema=(0,t$.normalizeId)((0,t$.getFullPath)(e,this.missingRef))}};n$.default=r$});var co=$(cn=>{"use strict";Object.defineProperty(cn,"__esModule",{value:!0});cn.resolveSchema=cn.getCompilingSchema=cn.resolveRef=cn.compileSchema=cn.SchemaEnv=void 0;var An=ee(),cre=Yl(),lo=ln(),kn=Bl(),Tq=de(),fre=Ta(),Oa=class{constructor(e){var r;this.refs={},this.dynamicAnchors={};let n;typeof e.schema=="object"&&(n=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=(r=e.baseId)!==null&&r!==void 0?r:(0,kn.normalizeId)(n?.[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=n?.$async,this.refs={}}};cn.SchemaEnv=Oa;function i$(t){let e=Oq.call(this,t);if(e)return e;let r=(0,kn.getFullPath)(this.opts.uriResolver,t.root.baseId),{es5:n,lines:s}=this.opts.code,{ownProperties:i}=this.opts,o=new An.CodeGen(this.scope,{es5:n,lines:s,ownProperties:i}),a;t.$async&&(a=o.scopeValue("Error",{ref:cre.default,code:(0,An._)`require("ajv/dist/runtime/validation_error").default`}));let u=o.scopeName("validate");t.validateName=u;let l={gen:o,allErrors:this.opts.allErrors,data:lo.default.data,parentData:lo.default.parentData,parentDataProperty:lo.default.parentDataProperty,dataNames:[lo.default.data],dataPathArr:[An.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:t.schema,code:(0,An.stringify)(t.schema)}:{ref:t.schema}),validateName:u,ValidationError:a,schema:t.schema,schemaEnv:t,rootId:r,baseId:t.baseId||r,schemaPath:An.nil,errSchemaPath:t.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,An._)`""`,opts:this.opts,self:this},c;try{this._compilations.add(t),(0,fre.validateFunctionCode)(l),o.optimize(this.opts.code.optimize);let f=o.toString();c=`${o.scopeRefs(lo.default.scope)}return ${f}`,this.opts.code.process&&(c=this.opts.code.process(c,t));let d=new Function(`${lo.default.self}`,`${lo.default.scope}`,c)(this,this.scope.get());if(this.scope.value(u,{ref:d}),d.errors=null,d.schema=t.schema,d.schemaEnv=t,t.$async&&(d.$async=!0),this.opts.code.source===!0&&(d.source={validateName:u,validateCode:f,scopeValues:o._values}),this.opts.unevaluated){let{props:p,items:m}=l;d.evaluated={props:p instanceof An.Name?void 0:p,items:m instanceof An.Name?void 0:m,dynamicProps:p instanceof An.Name,dynamicItems:m instanceof An.Name},d.source&&(d.source.evaluated=(0,An.stringify)(d.evaluated))}return t.validate=d,t}catch(f){throw delete t.validate,delete t.validateName,c&&this.logger.error("Error compiling schema, function code:",c),f}finally{this._compilations.delete(t)}}cn.compileSchema=i$;function dre(t,e,r){var n;r=(0,kn.resolveUrl)(this.opts.uriResolver,e,r);let s=t.refs[r];if(s)return s;let i=mre.call(this,t,r);if(i===void 0){let o=(n=t.localRefs)===null||n===void 0?void 0:n[r],{schemaId:a}=this.opts;o&&(i=new Oa({schema:o,schemaId:a,root:t,baseId:e}))}if(i!==void 0)return t.refs[r]=hre.call(this,i)}cn.resolveRef=dre;function hre(t){return(0,kn.inlineRef)(t.schema,this.opts.inlineRefs)?t.schema:t.validate?t:i$.call(this,t)}function Oq(t){for(let e of this._compilations)if(pre(e,t))return e}cn.getCompilingSchema=Oq;function pre(t,e){return t.schema===e.schema&&t.root===e.root&&t.baseId===e.baseId}function mre(t,e){let r;for(;typeof(r=this.refs[e])=="string";)e=r;return r||this.schemas[e]||Sh.call(this,t,e)}function Sh(t,e){let r=this.opts.uriResolver.parse(e),n=(0,kn._getFullPath)(this.opts.uriResolver,r),s=(0,kn.getFullPath)(this.opts.uriResolver,t.baseId,void 0);if(Object.keys(t.schema).length>0&&n===s)return s$.call(this,r,t);let i=(0,kn.normalizeId)(n),o=this.refs[i]||this.schemas[i];if(typeof o=="string"){let a=Sh.call(this,t,o);return typeof a?.schema!="object"?void 0:s$.call(this,r,a)}if(typeof o?.schema=="object"){if(o.validate||i$.call(this,o),i===(0,kn.normalizeId)(e)){let{schema:a}=o,{schemaId:u}=this.opts,l=a[u];return l&&(s=(0,kn.resolveUrl)(this.opts.uriResolver,s,l)),new Oa({schema:a,schemaId:u,root:t,baseId:s})}return s$.call(this,r,o)}}cn.resolveSchema=Sh;var yre=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function s$(t,{baseId:e,schema:r,root:n}){var s;if(((s=t.fragment)===null||s===void 0?void 0:s[0])!=="/")return;for(let a of t.fragment.slice(1).split("/")){if(typeof r=="boolean")return;let u=r[(0,Tq.unescapeFragment)(a)];if(u===void 0)return;r=u;let l=typeof r=="object"&&r[this.opts.schemaId];!yre.has(a)&&l&&(e=(0,kn.resolveUrl)(this.opts.uriResolver,e,l))}let i;if(typeof r!="boolean"&&r.$ref&&!(0,Tq.schemaHasRulesButRef)(r,this.RULES)){let a=(0,kn.resolveUrl)(this.opts.uriResolver,e,r.$ref);i=Sh.call(this,n,a)}let{schemaId:o}=this.opts;if(i=i||new Oa({schema:r,schemaId:o,root:n,baseId:e}),i.schema!==i.root.schema)return i}});var Nq=$((uye,gre)=>{gre.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var Cq=$(o$=>{"use strict";Object.defineProperty(o$,"__esModule",{value:!0});var Iq=pd();Iq.code='require("ajv/dist/runtime/uri").default';o$.default=Iq});var l$=$(Xt=>{"use strict";Object.defineProperty(Xt,"__esModule",{value:!0});Xt.CodeGen=Xt.Name=Xt.nil=Xt.stringify=Xt.str=Xt._=Xt.KeywordCxt=void 0;var _re=Ta();Object.defineProperty(Xt,"KeywordCxt",{enumerable:!0,get:function(){return _re.KeywordCxt}});var Na=ee();Object.defineProperty(Xt,"_",{enumerable:!0,get:function(){return Na._}});Object.defineProperty(Xt,"str",{enumerable:!0,get:function(){return Na.str}});Object.defineProperty(Xt,"stringify",{enumerable:!0,get:function(){return Na.stringify}});Object.defineProperty(Xt,"nil",{enumerable:!0,get:function(){return Na.nil}});Object.defineProperty(Xt,"Name",{enumerable:!0,get:function(){return Na.Name}});Object.defineProperty(Xt,"CodeGen",{enumerable:!0,get:function(){return Na.CodeGen}});var vre=Yl(),Dq=li(),$re=Vv(),Wl=co(),bre=ee(),Xl=Bl(),Rh=Kl(),u$=de(),Aq=Nq(),wre=Cq(),Lq=(t,e)=>new RegExp(t,e);Lq.code="new RegExp";var Ere=["removeAdditional","useDefaults","coerceTypes"],Sre=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),Rre={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},Pre={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},kq=200;function Tre(t){var e,r,n,s,i,o,a,u,l,c,f,h,d,p,m,v,g,w,_,y,b,T,S,N,A;let I=t.strict,O=(e=t.code)===null||e===void 0?void 0:e.optimize,q=O===!0||O===void 0?1:O||0,L=(n=(r=t.code)===null||r===void 0?void 0:r.regExp)!==null&&n!==void 0?n:Lq,Z=(s=t.uriResolver)!==null&&s!==void 0?s:wre.default;return{strictSchema:(o=(i=t.strictSchema)!==null&&i!==void 0?i:I)!==null&&o!==void 0?o:!0,strictNumbers:(u=(a=t.strictNumbers)!==null&&a!==void 0?a:I)!==null&&u!==void 0?u:!0,strictTypes:(c=(l=t.strictTypes)!==null&&l!==void 0?l:I)!==null&&c!==void 0?c:"log",strictTuples:(h=(f=t.strictTuples)!==null&&f!==void 0?f:I)!==null&&h!==void 0?h:"log",strictRequired:(p=(d=t.strictRequired)!==null&&d!==void 0?d:I)!==null&&p!==void 0?p:!1,code:t.code?{...t.code,optimize:q,regExp:L}:{optimize:q,regExp:L},loopRequired:(m=t.loopRequired)!==null&&m!==void 0?m:kq,loopEnum:(v=t.loopEnum)!==null&&v!==void 0?v:kq,meta:(g=t.meta)!==null&&g!==void 0?g:!0,messages:(w=t.messages)!==null&&w!==void 0?w:!0,inlineRefs:(_=t.inlineRefs)!==null&&_!==void 0?_:!0,schemaId:(y=t.schemaId)!==null&&y!==void 0?y:"$id",addUsedSchema:(b=t.addUsedSchema)!==null&&b!==void 0?b:!0,validateSchema:(T=t.validateSchema)!==null&&T!==void 0?T:!0,validateFormats:(S=t.validateFormats)!==null&&S!==void 0?S:!0,unicodeRegExp:(N=t.unicodeRegExp)!==null&&N!==void 0?N:!0,int32range:(A=t.int32range)!==null&&A!==void 0?A:!0,uriResolver:Z}}var Ql=class{constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts={...e,...Tre(e)};let{es5:r,lines:n}=this.opts.code;this.scope=new bre.ValueScope({scope:{},prefixes:Sre,es5:r,lines:n}),this.logger=kre(e.logger);let s=e.validateFormats;e.validateFormats=!1,this.RULES=(0,$re.getRules)(),qq.call(this,Rre,e,"NOT SUPPORTED"),qq.call(this,Pre,e,"DEPRECATED","warn"),this._metaOpts=Cre.call(this),e.formats&&Nre.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&Ire.call(this,e.keywords),typeof e.meta=="object"&&this.addMetaSchema(e.meta),Ore.call(this),e.validateFormats=s}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:e,meta:r,schemaId:n}=this.opts,s=Aq;n==="id"&&(s={...Aq},s.id=s.$id,delete s.$id),r&&e&&this.addMetaSchema(s,s[n],!1)}defaultMeta(){let{meta:e,schemaId:r}=this.opts;return this.opts.defaultMeta=typeof e=="object"?e[r]||e:void 0}validate(e,r){let n;if(typeof e=="string"){if(n=this.getSchema(e),!n)throw new Error(`no schema with key or ref "${e}"`)}else n=this.compile(e);let s=n(r);return"$async"in n||(this.errors=n.errors),s}compile(e,r){let n=this._addSchema(e,r);return n.validate||this._compileSchemaEnv(n)}compileAsync(e,r){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");let{loadSchema:n}=this.opts;return s.call(this,e,r);async function s(c,f){await i.call(this,c.$schema);let h=this._addSchema(c,f);return h.validate||o.call(this,h)}async function i(c){c&&!this.getSchema(c)&&await s.call(this,{$ref:c},!0)}async function o(c){try{return this._compileSchemaEnv(c)}catch(f){if(!(f instanceof Dq.default))throw f;return a.call(this,f),await u.call(this,f.missingSchema),o.call(this,c)}}function a({missingSchema:c,missingRef:f}){if(this.refs[c])throw new Error(`AnySchema ${c} is loaded but ${f} cannot be resolved`)}async function u(c){let f=await l.call(this,c);this.refs[c]||await i.call(this,f.$schema),this.refs[c]||this.addSchema(f,c,r)}async function l(c){let f=this._loading[c];if(f)return f;try{return await(this._loading[c]=n(c))}finally{delete this._loading[c]}}}addSchema(e,r,n,s=this.opts.validateSchema){if(Array.isArray(e)){for(let o of e)this.addSchema(o,void 0,n,s);return this}let i;if(typeof e=="object"){let{schemaId:o}=this.opts;if(i=e[o],i!==void 0&&typeof i!="string")throw new Error(`schema ${o} must be string`)}return r=(0,Xl.normalizeId)(r||i),this._checkUnique(r),this.schemas[r]=this._addSchema(e,n,r,s,!0),this}addMetaSchema(e,r,n=this.opts.validateSchema){return this.addSchema(e,r,!0,n),this}validateSchema(e,r){if(typeof e=="boolean")return!0;let n;if(n=e.$schema,n!==void 0&&typeof n!="string")throw new Error("$schema must be a string");if(n=n||this.opts.defaultMeta||this.defaultMeta(),!n)return this.logger.warn("meta-schema not available"),this.errors=null,!0;let s=this.validate(n,e);if(!s&&r){let i="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(i);else throw new Error(i)}return s}getSchema(e){let r;for(;typeof(r=jq.call(this,e))=="string";)e=r;if(r===void 0){let{schemaId:n}=this.opts,s=new Wl.SchemaEnv({schema:{},schemaId:n});if(r=Wl.resolveSchema.call(this,s,e),!r)return;this.refs[e]=r}return r.validate||this._compileSchemaEnv(r)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let r=jq.call(this,e);return typeof r=="object"&&this._cache.delete(r.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{let r=e;this._cache.delete(r);let n=e[this.opts.schemaId];return n&&(n=(0,Xl.normalizeId)(n),delete this.schemas[n],delete this.refs[n]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(let r of e)this.addKeyword(r);return this}addKeyword(e,r){let n;if(typeof e=="string")n=e,typeof r=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),r.keyword=n);else if(typeof e=="object"&&r===void 0){if(r=e,n=r.keyword,Array.isArray(n)&&!n.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(jre.call(this,n,r),!r)return(0,u$.eachItem)(n,i=>a$.call(this,i)),this;Lre.call(this,r);let s={...r,type:(0,Rh.getJSONTypes)(r.type),schemaType:(0,Rh.getJSONTypes)(r.schemaType)};return(0,u$.eachItem)(n,s.type.length===0?i=>a$.call(this,i,s):i=>s.type.forEach(o=>a$.call(this,i,s,o))),this}getKeyword(e){let r=this.RULES.all[e];return typeof r=="object"?r.definition:!!r}removeKeyword(e){let{RULES:r}=this;delete r.keywords[e],delete r.all[e];for(let n of r.rules){let s=n.rules.findIndex(i=>i.keyword===e);s>=0&&n.rules.splice(s,1)}return this}addFormat(e,r){return typeof r=="string"&&(r=new RegExp(r)),this.formats[e]=r,this}errorsText(e=this.errors,{separator:r=", ",dataVar:n="data"}={}){return!e||e.length===0?"No errors":e.map(s=>`${n}${s.instancePath} ${s.message}`).reduce((s,i)=>s+r+i)}$dataMetaSchema(e,r){let n=this.RULES.all;e=JSON.parse(JSON.stringify(e));for(let s of r){let i=s.split("/").slice(1),o=e;for(let a of i)o=o[a];for(let a in n){let u=n[a];if(typeof u!="object")continue;let{$data:l}=u.definition,c=o[a];l&&c&&(o[a]=xq(c))}}return e}_removeAllSchemas(e,r){for(let n in e){let s=e[n];(!r||r.test(n))&&(typeof s=="string"?delete e[n]:s&&!s.meta&&(this._cache.delete(s.schema),delete e[n]))}}_addSchema(e,r,n,s=this.opts.validateSchema,i=this.opts.addUsedSchema){let o,{schemaId:a}=this.opts;if(typeof e=="object")o=e[a];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof e!="boolean")throw new Error("schema must be object or boolean")}let u=this._cache.get(e);if(u!==void 0)return u;n=(0,Xl.normalizeId)(o||n);let l=Xl.getSchemaRefs.call(this,e,n);return u=new Wl.SchemaEnv({schema:e,schemaId:a,meta:r,baseId:n,localRefs:l}),this._cache.set(u.schema,u),i&&!n.startsWith("#")&&(n&&this._checkUnique(n),this.refs[n]=u),s&&this.validateSchema(e,!0),u}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw new Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):Wl.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}_compileMetaSchema(e){let r=this.opts;this.opts=this._metaOpts;try{Wl.compileSchema.call(this,e)}finally{this.opts=r}}};Xt.default=Ql;Ql.ValidationError=vre.default;Ql.MissingRefError=Dq.default;function qq(t,e,r,n="error"){for(let s in t){let i=s;i in e&&this.logger[n](`${r}: option ${s}. ${t[i]}`)}}function jq(t){return t=(0,Xl.normalizeId)(t),this.schemas[t]||this.refs[t]}function Ore(){let t=this.opts.schemas;if(t)if(Array.isArray(t))this.addSchema(t);else for(let e in t)this.addSchema(t[e],e)}function Nre(){for(let t in this.opts.formats){let e=this.opts.formats[t];e&&this.addFormat(t,e)}}function Ire(t){if(Array.isArray(t)){this.addVocabulary(t);return}this.logger.warn("keywords option as map is deprecated, pass array");for(let e in t){let r=t[e];r.keyword||(r.keyword=e),this.addKeyword(r)}}function Cre(){let t={...this.opts};for(let e of Ere)delete t[e];return t}var Are={log(){},warn(){},error(){}};function kre(t){if(t===!1)return Are;if(t===void 0)return console;if(t.log&&t.warn&&t.error)return t;throw new Error("logger must implement log, warn and error methods")}var qre=/^[a-z_$][a-z0-9_$:-]*$/i;function jre(t,e){let{RULES:r}=this;if((0,u$.eachItem)(t,n=>{if(r.keywords[n])throw new Error(`Keyword ${n} is already defined`);if(!qre.test(n))throw new Error(`Keyword ${n} has invalid name`)}),!!e&&e.$data&&!("code"in e||"validate"in e))throw new Error('$data keyword must have "code" or "validate" function')}function a$(t,e,r){var n;let s=e?.post;if(r&&s)throw new Error('keyword with "post" flag cannot have "type"');let{RULES:i}=this,o=s?i.post:i.rules.find(({type:u})=>u===r);if(o||(o={type:r,rules:[]},i.rules.push(o)),i.keywords[t]=!0,!e)return;let a={keyword:t,definition:{...e,type:(0,Rh.getJSONTypes)(e.type),schemaType:(0,Rh.getJSONTypes)(e.schemaType)}};e.before?Dre.call(this,o,a,e.before):o.rules.push(a),i.all[t]=a,(n=e.implements)===null||n===void 0||n.forEach(u=>this.addKeyword(u))}function Dre(t,e,r){let n=t.rules.findIndex(s=>s.keyword===r);n>=0?t.rules.splice(n,0,e):(t.rules.push(e),this.logger.warn(`rule ${r} is not defined`))}function Lre(t){let{metaSchema:e}=t;e!==void 0&&(t.$data&&this.opts.$data&&(e=xq(e)),t.validateSchema=this.compile(e,!0))}var xre={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function xq(t){return{anyOf:[t,xre]}}});var Fq=$(c$=>{"use strict";Object.defineProperty(c$,"__esModule",{value:!0});var Fre={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};c$.default=Fre});var f$=$(fo=>{"use strict";Object.defineProperty(fo,"__esModule",{value:!0});fo.callRef=fo.getValidate=void 0;var Mre=li(),Mq=Wt(),kr=ee(),Ia=ln(),Vq=co(),Ph=de(),Vre={keyword:"$ref",schemaType:"string",code(t){let{gen:e,schema:r,it:n}=t,{baseId:s,schemaEnv:i,validateName:o,opts:a,self:u}=n,{root:l}=i;if((r==="#"||r==="#/")&&s===l.baseId)return f();let c=Vq.resolveRef.call(u,l,s,r);if(c===void 0)throw new Mre.default(n.opts.uriResolver,s,r);if(c instanceof Vq.SchemaEnv)return h(c);return d(c);function f(){if(i===l)return Th(t,o,i,i.$async);let p=e.scopeValue("root",{ref:l});return Th(t,(0,kr._)`${p}.validate`,l,l.$async)}function h(p){let m=zq(t,p);Th(t,m,p,p.$async)}function d(p){let m=e.scopeValue("schema",a.code.source===!0?{ref:p,code:(0,kr.stringify)(p)}:{ref:p}),v=e.name("valid"),g=t.subschema({schema:p,dataTypes:[],schemaPath:kr.nil,topSchemaRef:m,errSchemaPath:r},v);t.mergeEvaluated(g),t.ok(v)}}};function zq(t,e){let{gen:r}=t;return e.validate?r.scopeValue("validate",{ref:e.validate}):(0,kr._)`${r.scopeValue("wrapper",{ref:e})}.validate`}fo.getValidate=zq;function Th(t,e,r,n){let{gen:s,it:i}=t,{allErrors:o,schemaEnv:a,opts:u}=i,l=u.passContext?Ia.default.this:kr.nil;n?c():f();function c(){if(!a.$async)throw new Error("async schema referenced by sync schema");let p=s.let("valid");s.try(()=>{s.code((0,kr._)`await ${(0,Mq.callValidateCode)(t,e,l)}`),d(e),o||s.assign(p,!0)},m=>{s.if((0,kr._)`!(${m} instanceof ${i.ValidationError})`,()=>s.throw(m)),h(m),o||s.assign(p,!1)}),t.ok(p)}function f(){t.result((0,Mq.callValidateCode)(t,e,l),()=>d(e),()=>h(e))}function h(p){let m=(0,kr._)`${p}.errors`;s.assign(Ia.default.vErrors,(0,kr._)`${Ia.default.vErrors} === null ? ${m} : ${Ia.default.vErrors}.concat(${m})`),s.assign(Ia.default.errors,(0,kr._)`${Ia.default.vErrors}.length`)}function d(p){var m;if(!i.opts.unevaluated)return;let v=(m=r?.validate)===null||m===void 0?void 0:m.evaluated;if(i.props!==!0)if(v&&!v.dynamicProps)v.props!==void 0&&(i.props=Ph.mergeEvaluated.props(s,v.props,i.props));else{let g=s.var("props",(0,kr._)`${p}.evaluated.props`);i.props=Ph.mergeEvaluated.props(s,g,i.props,kr.Name)}if(i.items!==!0)if(v&&!v.dynamicItems)v.items!==void 0&&(i.items=Ph.mergeEvaluated.items(s,v.items,i.items));else{let g=s.var("items",(0,kr._)`${p}.evaluated.items`);i.items=Ph.mergeEvaluated.items(s,g,i.items,kr.Name)}}}fo.callRef=Th;fo.default=Vre});var Uq=$(d$=>{"use strict";Object.defineProperty(d$,"__esModule",{value:!0});var zre=Fq(),Ure=f$(),Hre=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",zre.default,Ure.default];d$.default=Hre});var Hq=$(h$=>{"use strict";Object.defineProperty(h$,"__esModule",{value:!0});var Oh=ee(),ci=Oh.operators,Nh={maximum:{okStr:"<=",ok:ci.LTE,fail:ci.GT},minimum:{okStr:">=",ok:ci.GTE,fail:ci.LT},exclusiveMaximum:{okStr:"<",ok:ci.LT,fail:ci.GTE},exclusiveMinimum:{okStr:">",ok:ci.GT,fail:ci.LTE}},Kre={message:({keyword:t,schemaCode:e})=>(0,Oh.str)`must be ${Nh[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>(0,Oh._)`{comparison: ${Nh[t].okStr}, limit: ${e}}`},Bre={keyword:Object.keys(Nh),type:"number",schemaType:"number",$data:!0,error:Kre,code(t){let{keyword:e,data:r,schemaCode:n}=t;t.fail$data((0,Oh._)`${r} ${Nh[e].fail} ${n} || isNaN(${r})`)}};h$.default=Bre});var Kq=$(p$=>{"use strict";Object.defineProperty(p$,"__esModule",{value:!0});var Zl=ee(),Gre={message:({schemaCode:t})=>(0,Zl.str)`must be multiple of ${t}`,params:({schemaCode:t})=>(0,Zl._)`{multipleOf: ${t}}`},Jre={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:Gre,code(t){let{gen:e,data:r,schemaCode:n,it:s}=t,i=s.opts.multipleOfPrecision,o=e.let("res"),a=i?(0,Zl._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${i}`:(0,Zl._)`${o} !== parseInt(${o})`;t.fail$data((0,Zl._)`(${n} === 0 || (${o} = ${r}/${n}, ${a}))`)}};p$.default=Jre});var Gq=$(m$=>{"use strict";Object.defineProperty(m$,"__esModule",{value:!0});function Bq(t){let e=t.length,r=0,n=0,s;for(;n<e;)r++,s=t.charCodeAt(n++),s>=55296&&s<=56319&&n<e&&(s=t.charCodeAt(n),(s&64512)===56320&&n++);return r}m$.default=Bq;Bq.code='require("ajv/dist/runtime/ucs2length").default'});var Jq=$(y$=>{"use strict";Object.defineProperty(y$,"__esModule",{value:!0});var ho=ee(),Yre=de(),Wre=Gq(),Xre={message({keyword:t,schemaCode:e}){let r=t==="maxLength"?"more":"fewer";return(0,ho.str)`must NOT have ${r} than ${e} characters`},params:({schemaCode:t})=>(0,ho._)`{limit: ${t}}`},Qre={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:Xre,code(t){let{keyword:e,data:r,schemaCode:n,it:s}=t,i=e==="maxLength"?ho.operators.GT:ho.operators.LT,o=s.opts.unicode===!1?(0,ho._)`${r}.length`:(0,ho._)`${(0,Yre.useFunc)(t.gen,Wre.default)}(${r})`;t.fail$data((0,ho._)`${o} ${i} ${n}`)}};y$.default=Qre});var Yq=$(g$=>{"use strict";Object.defineProperty(g$,"__esModule",{value:!0});var Zre=Wt(),Ih=ee(),ene={message:({schemaCode:t})=>(0,Ih.str)`must match pattern "${t}"`,params:({schemaCode:t})=>(0,Ih._)`{pattern: ${t}}`},tne={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:ene,code(t){let{data:e,$data:r,schema:n,schemaCode:s,it:i}=t,o=i.opts.unicodeRegExp?"u":"",a=r?(0,Ih._)`(new RegExp(${s}, ${o}))`:(0,Zre.usePattern)(t,n);t.fail$data((0,Ih._)`!${a}.test(${e})`)}};g$.default=tne});var Wq=$(_$=>{"use strict";Object.defineProperty(_$,"__esModule",{value:!0});var ec=ee(),rne={message({keyword:t,schemaCode:e}){let r=t==="maxProperties"?"more":"fewer";return(0,ec.str)`must NOT have ${r} than ${e} properties`},params:({schemaCode:t})=>(0,ec._)`{limit: ${t}}`},nne={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:rne,code(t){let{keyword:e,data:r,schemaCode:n}=t,s=e==="maxProperties"?ec.operators.GT:ec.operators.LT;t.fail$data((0,ec._)`Object.keys(${r}).length ${s} ${n}`)}};_$.default=nne});var Xq=$(v$=>{"use strict";Object.defineProperty(v$,"__esModule",{value:!0});var tc=Wt(),rc=ee(),sne=de(),ine={message:({params:{missingProperty:t}})=>(0,rc.str)`must have required property '${t}'`,params:({params:{missingProperty:t}})=>(0,rc._)`{missingProperty: ${t}}`},one={keyword:"required",type:"object",schemaType:"array",$data:!0,error:ine,code(t){let{gen:e,schema:r,schemaCode:n,data:s,$data:i,it:o}=t,{opts:a}=o;if(!i&&r.length===0)return;let u=r.length>=a.loopRequired;if(o.allErrors?l():c(),a.strictRequired){let d=t.parentSchema.properties,{definedProperties:p}=t.it;for(let m of r)if(d?.[m]===void 0&&!p.has(m)){let v=o.schemaEnv.baseId+o.errSchemaPath,g=`required property "${m}" is not defined at "${v}" (strictRequired)`;(0,sne.checkStrictMode)(o,g,o.opts.strictRequired)}}function l(){if(u||i)t.block$data(rc.nil,f);else for(let d of r)(0,tc.checkReportMissingProp)(t,d)}function c(){let d=e.let("missing");if(u||i){let p=e.let("valid",!0);t.block$data(p,()=>h(d,p)),t.ok(p)}else e.if((0,tc.checkMissingProp)(t,r,d)),(0,tc.reportMissingProp)(t,d),e.else()}function f(){e.forOf("prop",n,d=>{t.setParams({missingProperty:d}),e.if((0,tc.noPropertyInData)(e,s,d,a.ownProperties),()=>t.error())})}function h(d,p){t.setParams({missingProperty:d}),e.forOf(d,n,()=>{e.assign(p,(0,tc.propertyInData)(e,s,d,a.ownProperties)),e.if((0,rc.not)(p),()=>{t.error(),e.break()})},rc.nil)}}};v$.default=one});var Qq=$($$=>{"use strict";Object.defineProperty($$,"__esModule",{value:!0});var nc=ee(),ane={message({keyword:t,schemaCode:e}){let r=t==="maxItems"?"more":"fewer";return(0,nc.str)`must NOT have ${r} than ${e} items`},params:({schemaCode:t})=>(0,nc._)`{limit: ${t}}`},une={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:ane,code(t){let{keyword:e,data:r,schemaCode:n}=t,s=e==="maxItems"?nc.operators.GT:nc.operators.LT;t.fail$data((0,nc._)`${r}.length ${s} ${n}`)}};$$.default=une});var Ch=$(b$=>{"use strict";Object.defineProperty(b$,"__esModule",{value:!0});var Zq=Vn();Zq.code='require("ajv/dist/runtime/equal").default';b$.default=Zq});var ej=$(E$=>{"use strict";Object.defineProperty(E$,"__esModule",{value:!0});var w$=Kl(),Qt=ee(),lne=de(),cne=Ch(),fne={message:({params:{i:t,j:e}})=>(0,Qt.str)`must NOT have duplicate items (items ## ${e} and ${t} are identical)`,params:({params:{i:t,j:e}})=>(0,Qt._)`{i: ${t}, j: ${e}}`},dne={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:fne,code(t){let{gen:e,data:r,$data:n,schema:s,parentSchema:i,schemaCode:o,it:a}=t;if(!n&&!s)return;let u=e.let("valid"),l=i.items?(0,w$.getSchemaTypes)(i.items):[];t.block$data(u,c,(0,Qt._)`${o} === false`),t.ok(u);function c(){let p=e.let("i",(0,Qt._)`${r}.length`),m=e.let("j");t.setParams({i:p,j:m}),e.assign(u,!0),e.if((0,Qt._)`${p} > 1`,()=>(f()?h:d)(p,m))}function f(){return l.length>0&&!l.some(p=>p==="object"||p==="array")}function h(p,m){let v=e.name("item"),g=(0,w$.checkDataTypes)(l,v,a.opts.strictNumbers,w$.DataType.Wrong),w=e.const("indices",(0,Qt._)`{}`);e.for((0,Qt._)`;${p}--;`,()=>{e.let(v,(0,Qt._)`${r}[${p}]`),e.if(g,(0,Qt._)`continue`),l.length>1&&e.if((0,Qt._)`typeof ${v} == "string"`,(0,Qt._)`${v} += "_"`),e.if((0,Qt._)`typeof ${w}[${v}] == "number"`,()=>{e.assign(m,(0,Qt._)`${w}[${v}]`),t.error(),e.assign(u,!1).break()}).code((0,Qt._)`${w}[${v}] = ${p}`)})}function d(p,m){let v=(0,lne.useFunc)(e,cne.default),g=e.name("outer");e.label(g).for((0,Qt._)`;${p}--;`,()=>e.for((0,Qt._)`${m} = ${p}; ${m}--;`,()=>e.if((0,Qt._)`${v}(${r}[${p}], ${r}[${m}])`,()=>{t.error(),e.assign(u,!1).break(g)})))}}};E$.default=dne});var tj=$(R$=>{"use strict";Object.defineProperty(R$,"__esModule",{value:!0});var S$=ee(),hne=de(),pne=Ch(),mne={message:"must be equal to constant",params:({schemaCode:t})=>(0,S$._)`{allowedValue: ${t}}`},yne={keyword:"const",$data:!0,error:mne,code(t){let{gen:e,data:r,$data:n,schemaCode:s,schema:i}=t;n||i&&typeof i=="object"?t.fail$data((0,S$._)`!${(0,hne.useFunc)(e,pne.default)}(${r}, ${s})`):t.fail((0,S$._)`${i} !== ${r}`)}};R$.default=yne});var rj=$(P$=>{"use strict";Object.defineProperty(P$,"__esModule",{value:!0});var sc=ee(),gne=de(),_ne=Ch(),vne={message:"must be equal to one of the allowed values",params:({schemaCode:t})=>(0,sc._)`{allowedValues: ${t}}`},$ne={keyword:"enum",schemaType:"array",$data:!0,error:vne,code(t){let{gen:e,data:r,$data:n,schema:s,schemaCode:i,it:o}=t;if(!n&&s.length===0)throw new Error("enum must have non-empty array");let a=s.length>=o.opts.loopEnum,u,l=()=>u??(u=(0,gne.useFunc)(e,_ne.default)),c;if(a||n)c=e.let("valid"),t.block$data(c,f);else{if(!Array.isArray(s))throw new Error("ajv implementation error");let d=e.const("vSchema",i);c=(0,sc.or)(...s.map((p,m)=>h(d,m)))}t.pass(c);function f(){e.assign(c,!1),e.forOf("v",i,d=>e.if((0,sc._)`${l()}(${r}, ${d})`,()=>e.assign(c,!0).break()))}function h(d,p){let m=s[p];return typeof m=="object"&&m!==null?(0,sc._)`${l()}(${r}, ${d}[${p}])`:(0,sc._)`${r} === ${m}`}}};P$.default=$ne});var nj=$(T$=>{"use strict";Object.defineProperty(T$,"__esModule",{value:!0});var bne=Hq(),wne=Kq(),Ene=Jq(),Sne=Yq(),Rne=Wq(),Pne=Xq(),Tne=Qq(),One=ej(),Nne=tj(),Ine=rj(),Cne=[bne.default,wne.default,Ene.default,Sne.default,Rne.default,Pne.default,Tne.default,One.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},Nne.default,Ine.default];T$.default=Cne});var N$=$(ic=>{"use strict";Object.defineProperty(ic,"__esModule",{value:!0});ic.validateAdditionalItems=void 0;var po=ee(),O$=de(),Ane={message:({params:{len:t}})=>(0,po.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,po._)`{limit: ${t}}`},kne={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:Ane,code(t){let{parentSchema:e,it:r}=t,{items:n}=e;if(!Array.isArray(n)){(0,O$.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}sj(t,n)}};function sj(t,e){let{gen:r,schema:n,data:s,keyword:i,it:o}=t;o.items=!0;let a=r.const("len",(0,po._)`${s}.length`);if(n===!1)t.setParams({len:e.length}),t.pass((0,po._)`${a} <= ${e.length}`);else if(typeof n=="object"&&!(0,O$.alwaysValidSchema)(o,n)){let l=r.var("valid",(0,po._)`${a} <= ${e.length}`);r.if((0,po.not)(l),()=>u(l)),t.ok(l)}function u(l){r.forRange("i",e.length,a,c=>{t.subschema({keyword:i,dataProp:c,dataPropType:O$.Type.Num},l),o.allErrors||r.if((0,po.not)(l),()=>r.break())})}}ic.validateAdditionalItems=sj;ic.default=kne});var I$=$(oc=>{"use strict";Object.defineProperty(oc,"__esModule",{value:!0});oc.validateTuple=void 0;var ij=ee(),Ah=de(),qne=Wt(),jne={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(t){let{schema:e,it:r}=t;if(Array.isArray(e))return oj(t,"additionalItems",e);r.items=!0,!(0,Ah.alwaysValidSchema)(r,e)&&t.ok((0,qne.validateArray)(t))}};function oj(t,e,r=t.schema){let{gen:n,parentSchema:s,data:i,keyword:o,it:a}=t;c(s),a.opts.unevaluated&&r.length&&a.items!==!0&&(a.items=Ah.mergeEvaluated.items(n,r.length,a.items));let u=n.name("valid"),l=n.const("len",(0,ij._)`${i}.length`);r.forEach((f,h)=>{(0,Ah.alwaysValidSchema)(a,f)||(n.if((0,ij._)`${l} > ${h}`,()=>t.subschema({keyword:o,schemaProp:h,dataProp:h},u)),t.ok(u))});function c(f){let{opts:h,errSchemaPath:d}=a,p=r.length,m=p===f.minItems&&(p===f.maxItems||f[e]===!1);if(h.strictTuples&&!m){let v=`"${o}" is ${p}-tuple, but minItems or maxItems/${e} are not specified or different at path "${d}"`;(0,Ah.checkStrictMode)(a,v,h.strictTuples)}}}oc.validateTuple=oj;oc.default=jne});var aj=$(C$=>{"use strict";Object.defineProperty(C$,"__esModule",{value:!0});var Dne=I$(),Lne={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:t=>(0,Dne.validateTuple)(t,"items")};C$.default=Lne});var lj=$(A$=>{"use strict";Object.defineProperty(A$,"__esModule",{value:!0});var uj=ee(),xne=de(),Fne=Wt(),Mne=N$(),Vne={message:({params:{len:t}})=>(0,uj.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,uj._)`{limit: ${t}}`},zne={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:Vne,code(t){let{schema:e,parentSchema:r,it:n}=t,{prefixItems:s}=r;n.items=!0,!(0,xne.alwaysValidSchema)(n,e)&&(s?(0,Mne.validateAdditionalItems)(t,s):t.ok((0,Fne.validateArray)(t)))}};A$.default=zne});var cj=$(k$=>{"use strict";Object.defineProperty(k$,"__esModule",{value:!0});var fn=ee(),kh=de(),Une={message:({params:{min:t,max:e}})=>e===void 0?(0,fn.str)`must contain at least ${t} valid item(s)`:(0,fn.str)`must contain at least ${t} and no more than ${e} valid item(s)`,params:({params:{min:t,max:e}})=>e===void 0?(0,fn._)`{minContains: ${t}}`:(0,fn._)`{minContains: ${t}, maxContains: ${e}}`},Hne={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:Une,code(t){let{gen:e,schema:r,parentSchema:n,data:s,it:i}=t,o,a,{minContains:u,maxContains:l}=n;i.opts.next?(o=u===void 0?1:u,a=l):o=1;let c=e.const("len",(0,fn._)`${s}.length`);if(t.setParams({min:o,max:a}),a===void 0&&o===0){(0,kh.checkStrictMode)(i,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,kh.checkStrictMode)(i,'"minContains" > "maxContains" is always invalid'),t.fail();return}if((0,kh.alwaysValidSchema)(i,r)){let m=(0,fn._)`${c} >= ${o}`;a!==void 0&&(m=(0,fn._)`${m} && ${c} <= ${a}`),t.pass(m);return}i.items=!0;let f=e.name("valid");a===void 0&&o===1?d(f,()=>e.if(f,()=>e.break())):o===0?(e.let(f,!0),a!==void 0&&e.if((0,fn._)`${s}.length > 0`,h)):(e.let(f,!1),h()),t.result(f,()=>t.reset());function h(){let m=e.name("_valid"),v=e.let("count",0);d(m,()=>e.if(m,()=>p(v)))}function d(m,v){e.forRange("i",0,c,g=>{t.subschema({keyword:"contains",dataProp:g,dataPropType:kh.Type.Num,compositeRule:!0},m),v()})}function p(m){e.code((0,fn._)`${m}++`),a===void 0?e.if((0,fn._)`${m} >= ${o}`,()=>e.assign(f,!0).break()):(e.if((0,fn._)`${m} > ${a}`,()=>e.assign(f,!1).break()),o===1?e.assign(f,!0):e.if((0,fn._)`${m} >= ${o}`,()=>e.assign(f,!0)))}}};k$.default=Hne});var hj=$(Xn=>{"use strict";Object.defineProperty(Xn,"__esModule",{value:!0});Xn.validateSchemaDeps=Xn.validatePropertyDeps=Xn.error=void 0;var q$=ee(),Kne=de(),ac=Wt();Xn.error={message:({params:{property:t,depsCount:e,deps:r}})=>{let n=e===1?"property":"properties";return(0,q$.str)`must have ${n} ${r} when property ${t} is present`},params:({params:{property:t,depsCount:e,deps:r,missingProperty:n}})=>(0,q$._)`{property: ${t},
    missingProperty: ${n},
    depsCount: ${e},
    deps: ${r}}`};var Bne={keyword:"dependencies",type:"object",schemaType:"object",error:Xn.error,code(t){let[e,r]=Gne(t);fj(t,e),dj(t,r)}};function Gne({schema:t}){let e={},r={};for(let n in t){if(n==="__proto__")continue;let s=Array.isArray(t[n])?e:r;s[n]=t[n]}return[e,r]}function fj(t,e=t.schema){let{gen:r,data:n,it:s}=t;if(Object.keys(e).length===0)return;let i=r.let("missing");for(let o in e){let a=e[o];if(a.length===0)continue;let u=(0,ac.propertyInData)(r,n,o,s.opts.ownProperties);t.setParams({property:o,depsCount:a.length,deps:a.join(", ")}),s.allErrors?r.if(u,()=>{for(let l of a)(0,ac.checkReportMissingProp)(t,l)}):(r.if((0,q$._)`${u} && (${(0,ac.checkMissingProp)(t,a,i)})`),(0,ac.reportMissingProp)(t,i),r.else())}}Xn.validatePropertyDeps=fj;function dj(t,e=t.schema){let{gen:r,data:n,keyword:s,it:i}=t,o=r.name("valid");for(let a in e)(0,Kne.alwaysValidSchema)(i,e[a])||(r.if((0,ac.propertyInData)(r,n,a,i.opts.ownProperties),()=>{let u=t.subschema({keyword:s,schemaProp:a},o);t.mergeValidEvaluated(u,o)},()=>r.var(o,!0)),t.ok(o))}Xn.validateSchemaDeps=dj;Xn.default=Bne});var mj=$(j$=>{"use strict";Object.defineProperty(j$,"__esModule",{value:!0});var pj=ee(),Jne=de(),Yne={message:"property name must be valid",params:({params:t})=>(0,pj._)`{propertyName: ${t.propertyName}}`},Wne={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:Yne,code(t){let{gen:e,schema:r,data:n,it:s}=t;if((0,Jne.alwaysValidSchema)(s,r))return;let i=e.name("valid");e.forIn("key",n,o=>{t.setParams({propertyName:o}),t.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},i),e.if((0,pj.not)(i),()=>{t.error(!0),s.allErrors||e.break()})}),t.ok(i)}};j$.default=Wne});var L$=$(D$=>{"use strict";Object.defineProperty(D$,"__esModule",{value:!0});var qh=Wt(),qn=ee(),Xne=ln(),jh=de(),Qne={message:"must NOT have additional properties",params:({params:t})=>(0,qn._)`{additionalProperty: ${t.additionalProperty}}`},Zne={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:Qne,code(t){let{gen:e,schema:r,parentSchema:n,data:s,errsCount:i,it:o}=t;if(!i)throw new Error("ajv implementation error");let{allErrors:a,opts:u}=o;if(o.props=!0,u.removeAdditional!=="all"&&(0,jh.alwaysValidSchema)(o,r))return;let l=(0,qh.allSchemaProperties)(n.properties),c=(0,qh.allSchemaProperties)(n.patternProperties);f(),t.ok((0,qn._)`${i} === ${Xne.default.errors}`);function f(){e.forIn("key",s,v=>{!l.length&&!c.length?p(v):e.if(h(v),()=>p(v))})}function h(v){let g;if(l.length>8){let w=(0,jh.schemaRefOrVal)(o,n.properties,"properties");g=(0,qh.isOwnProperty)(e,w,v)}else l.length?g=(0,qn.or)(...l.map(w=>(0,qn._)`${v} === ${w}`)):g=qn.nil;return c.length&&(g=(0,qn.or)(g,...c.map(w=>(0,qn._)`${(0,qh.usePattern)(t,w)}.test(${v})`))),(0,qn.not)(g)}function d(v){e.code((0,qn._)`delete ${s}[${v}]`)}function p(v){if(u.removeAdditional==="all"||u.removeAdditional&&r===!1){d(v);return}if(r===!1){t.setParams({additionalProperty:v}),t.error(),a||e.break();return}if(typeof r=="object"&&!(0,jh.alwaysValidSchema)(o,r)){let g=e.name("valid");u.removeAdditional==="failing"?(m(v,g,!1),e.if((0,qn.not)(g),()=>{t.reset(),d(v)})):(m(v,g),a||e.if((0,qn.not)(g),()=>e.break()))}}function m(v,g,w){let _={keyword:"additionalProperties",dataProp:v,dataPropType:jh.Type.Str};w===!1&&Object.assign(_,{compositeRule:!0,createErrors:!1,allErrors:!1}),t.subschema(_,g)}}};D$.default=Zne});var _j=$(F$=>{"use strict";Object.defineProperty(F$,"__esModule",{value:!0});var ese=Ta(),yj=Wt(),x$=de(),gj=L$(),tse={keyword:"properties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,parentSchema:n,data:s,it:i}=t;i.opts.removeAdditional==="all"&&n.additionalProperties===void 0&&gj.default.code(new ese.KeywordCxt(i,gj.default,"additionalProperties"));let o=(0,yj.allSchemaProperties)(r);for(let f of o)i.definedProperties.add(f);i.opts.unevaluated&&o.length&&i.props!==!0&&(i.props=x$.mergeEvaluated.props(e,(0,x$.toHash)(o),i.props));let a=o.filter(f=>!(0,x$.alwaysValidSchema)(i,r[f]));if(a.length===0)return;let u=e.name("valid");for(let f of a)l(f)?c(f):(e.if((0,yj.propertyInData)(e,s,f,i.opts.ownProperties)),c(f),i.allErrors||e.else().var(u,!0),e.endIf()),t.it.definedProperties.add(f),t.ok(u);function l(f){return i.opts.useDefaults&&!i.compositeRule&&r[f].default!==void 0}function c(f){t.subschema({keyword:"properties",schemaProp:f,dataProp:f},u)}}};F$.default=tse});var wj=$(M$=>{"use strict";Object.defineProperty(M$,"__esModule",{value:!0});var vj=Wt(),Dh=ee(),$j=de(),bj=de(),rse={keyword:"patternProperties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,data:n,parentSchema:s,it:i}=t,{opts:o}=i,a=(0,vj.allSchemaProperties)(r),u=a.filter(m=>(0,$j.alwaysValidSchema)(i,r[m]));if(a.length===0||u.length===a.length&&(!i.opts.unevaluated||i.props===!0))return;let l=o.strictSchema&&!o.allowMatchingProperties&&s.properties,c=e.name("valid");i.props!==!0&&!(i.props instanceof Dh.Name)&&(i.props=(0,bj.evaluatedPropsToName)(e,i.props));let{props:f}=i;h();function h(){for(let m of a)l&&d(m),i.allErrors?p(m):(e.var(c,!0),p(m),e.if(c))}function d(m){for(let v in l)new RegExp(m).test(v)&&(0,$j.checkStrictMode)(i,`property ${v} matches pattern ${m} (use allowMatchingProperties)`)}function p(m){e.forIn("key",n,v=>{e.if((0,Dh._)`${(0,vj.usePattern)(t,m)}.test(${v})`,()=>{let g=u.includes(m);g||t.subschema({keyword:"patternProperties",schemaProp:m,dataProp:v,dataPropType:bj.Type.Str},c),i.opts.unevaluated&&f!==!0?e.assign((0,Dh._)`${f}[${v}]`,!0):!g&&!i.allErrors&&e.if((0,Dh.not)(c),()=>e.break())})})}}};M$.default=rse});var Ej=$(V$=>{"use strict";Object.defineProperty(V$,"__esModule",{value:!0});var nse=de(),sse={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(t){let{gen:e,schema:r,it:n}=t;if((0,nse.alwaysValidSchema)(n,r)){t.fail();return}let s=e.name("valid");t.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},s),t.failResult(s,()=>t.reset(),()=>t.error())},error:{message:"must NOT be valid"}};V$.default=sse});var Sj=$(z$=>{"use strict";Object.defineProperty(z$,"__esModule",{value:!0});var ise=Wt(),ose={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:ise.validateUnion,error:{message:"must match a schema in anyOf"}};z$.default=ose});var Rj=$(U$=>{"use strict";Object.defineProperty(U$,"__esModule",{value:!0});var Lh=ee(),ase=de(),use={message:"must match exactly one schema in oneOf",params:({params:t})=>(0,Lh._)`{passingSchemas: ${t.passing}}`},lse={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:use,code(t){let{gen:e,schema:r,parentSchema:n,it:s}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(s.opts.discriminator&&n.discriminator)return;let i=r,o=e.let("valid",!1),a=e.let("passing",null),u=e.name("_valid");t.setParams({passing:a}),e.block(l),t.result(o,()=>t.reset(),()=>t.error(!0));function l(){i.forEach((c,f)=>{let h;(0,ase.alwaysValidSchema)(s,c)?e.var(u,!0):h=t.subschema({keyword:"oneOf",schemaProp:f,compositeRule:!0},u),f>0&&e.if((0,Lh._)`${u} && ${o}`).assign(o,!1).assign(a,(0,Lh._)`[${a}, ${f}]`).else(),e.if(u,()=>{e.assign(o,!0),e.assign(a,f),h&&t.mergeEvaluated(h,Lh.Name)})})}}};U$.default=lse});var Pj=$(H$=>{"use strict";Object.defineProperty(H$,"__esModule",{value:!0});var cse=de(),fse={keyword:"allOf",schemaType:"array",code(t){let{gen:e,schema:r,it:n}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");let s=e.name("valid");r.forEach((i,o)=>{if((0,cse.alwaysValidSchema)(n,i))return;let a=t.subschema({keyword:"allOf",schemaProp:o},s);t.ok(s),t.mergeEvaluated(a)})}};H$.default=fse});var Nj=$(K$=>{"use strict";Object.defineProperty(K$,"__esModule",{value:!0});var xh=ee(),Oj=de(),dse={message:({params:t})=>(0,xh.str)`must match "${t.ifClause}" schema`,params:({params:t})=>(0,xh._)`{failingKeyword: ${t.ifClause}}`},hse={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:dse,code(t){let{gen:e,parentSchema:r,it:n}=t;r.then===void 0&&r.else===void 0&&(0,Oj.checkStrictMode)(n,'"if" without "then" and "else" is ignored');let s=Tj(n,"then"),i=Tj(n,"else");if(!s&&!i)return;let o=e.let("valid",!0),a=e.name("_valid");if(u(),t.reset(),s&&i){let c=e.let("ifClause");t.setParams({ifClause:c}),e.if(a,l("then",c),l("else",c))}else s?e.if(a,l("then")):e.if((0,xh.not)(a),l("else"));t.pass(o,()=>t.error(!0));function u(){let c=t.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);t.mergeEvaluated(c)}function l(c,f){return()=>{let h=t.subschema({keyword:c},a);e.assign(o,a),t.mergeValidEvaluated(h,o),f?e.assign(f,(0,xh._)`${c}`):t.setParams({ifClause:c})}}}};function Tj(t,e){let r=t.schema[e];return r!==void 0&&!(0,Oj.alwaysValidSchema)(t,r)}K$.default=hse});var Ij=$(B$=>{"use strict";Object.defineProperty(B$,"__esModule",{value:!0});var pse=de(),mse={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:t,parentSchema:e,it:r}){e.if===void 0&&(0,pse.checkStrictMode)(r,`"${t}" without "if" is ignored`)}};B$.default=mse});var Cj=$(G$=>{"use strict";Object.defineProperty(G$,"__esModule",{value:!0});var yse=N$(),gse=aj(),_se=I$(),vse=lj(),$se=cj(),bse=hj(),wse=mj(),Ese=L$(),Sse=_j(),Rse=wj(),Pse=Ej(),Tse=Sj(),Ose=Rj(),Nse=Pj(),Ise=Nj(),Cse=Ij();function Ase(t=!1){let e=[Pse.default,Tse.default,Ose.default,Nse.default,Ise.default,Cse.default,wse.default,Ese.default,bse.default,Sse.default,Rse.default];return t?e.push(gse.default,vse.default):e.push(yse.default,_se.default),e.push($se.default),e}G$.default=Ase});var Aj=$(J$=>{"use strict";Object.defineProperty(J$,"__esModule",{value:!0});var St=ee(),kse={message:({schemaCode:t})=>(0,St.str)`must match format "${t}"`,params:({schemaCode:t})=>(0,St._)`{format: ${t}}`},qse={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:kse,code(t,e){let{gen:r,data:n,$data:s,schema:i,schemaCode:o,it:a}=t,{opts:u,errSchemaPath:l,schemaEnv:c,self:f}=a;if(!u.validateFormats)return;s?h():d();function h(){let p=r.scopeValue("formats",{ref:f.formats,code:u.code.formats}),m=r.const("fDef",(0,St._)`${p}[${o}]`),v=r.let("fType"),g=r.let("format");r.if((0,St._)`typeof ${m} == "object" && !(${m} instanceof RegExp)`,()=>r.assign(v,(0,St._)`${m}.type || "string"`).assign(g,(0,St._)`${m}.validate`),()=>r.assign(v,(0,St._)`"string"`).assign(g,m)),t.fail$data((0,St.or)(w(),_()));function w(){return u.strictSchema===!1?St.nil:(0,St._)`${o} && !${g}`}function _(){let y=c.$async?(0,St._)`(${m}.async ? await ${g}(${n}) : ${g}(${n}))`:(0,St._)`${g}(${n})`,b=(0,St._)`(typeof ${g} == "function" ? ${y} : ${g}.test(${n}))`;return(0,St._)`${g} && ${g} !== true && ${v} === ${e} && !${b}`}}function d(){let p=f.formats[i];if(!p){w();return}if(p===!0)return;let[m,v,g]=_(p);m===e&&t.pass(y());function w(){if(u.strictSchema===!1){f.logger.warn(b());return}throw new Error(b());function b(){return`unknown format "${i}" ignored in schema at path "${l}"`}}function _(b){let T=b instanceof RegExp?(0,St.regexpCode)(b):u.code.formats?(0,St._)`${u.code.formats}${(0,St.getProperty)(i)}`:void 0,S=r.scopeValue("formats",{key:i,ref:b,code:T});return typeof b=="object"&&!(b instanceof RegExp)?[b.type||"string",b.validate,(0,St._)`${S}.validate`]:["string",b,S]}function y(){if(typeof p=="object"&&!(p instanceof RegExp)&&p.async){if(!c.$async)throw new Error("async format in sync schema");return(0,St._)`await ${g}(${n})`}return typeof v=="function"?(0,St._)`${g}(${n})`:(0,St._)`${g}.test(${n})`}}}};J$.default=qse});var kj=$(Y$=>{"use strict";Object.defineProperty(Y$,"__esModule",{value:!0});var jse=Aj(),Dse=[jse.default];Y$.default=Dse});var qj=$(Ca=>{"use strict";Object.defineProperty(Ca,"__esModule",{value:!0});Ca.contentVocabulary=Ca.metadataVocabulary=void 0;Ca.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];Ca.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]});var Dj=$(W$=>{"use strict";Object.defineProperty(W$,"__esModule",{value:!0});var Lse=Uq(),xse=nj(),Fse=Cj(),Mse=kj(),jj=qj(),Vse=[Lse.default,xse.default,(0,Fse.default)(),Mse.default,jj.metadataVocabulary,jj.contentVocabulary];W$.default=Vse});var X$=$(uc=>{"use strict";Object.defineProperty(uc,"__esModule",{value:!0});uc.DiscrError=void 0;var zse;(function(t){t.Tag="tag",t.Mapping="mapping"})(zse=uc.DiscrError||(uc.DiscrError={}))});var xj=$(Z$=>{"use strict";Object.defineProperty(Z$,"__esModule",{value:!0});var Aa=ee(),Q$=X$(),Lj=co(),Use=de(),Hse={message:({params:{discrError:t,tagName:e}})=>t===Q$.DiscrError.Tag?`tag "${e}" must be string`:`value of tag "${e}" must be in oneOf`,params:({params:{discrError:t,tag:e,tagName:r}})=>(0,Aa._)`{error: ${t}, tag: ${r}, tagValue: ${e}}`},Kse={keyword:"discriminator",type:"object",schemaType:"object",error:Hse,code(t){let{gen:e,data:r,schema:n,parentSchema:s,it:i}=t,{oneOf:o}=s;if(!i.opts.discriminator)throw new Error("discriminator: requires discriminator option");let a=n.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(n.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");let u=e.let("valid",!1),l=e.const("tag",(0,Aa._)`${r}${(0,Aa.getProperty)(a)}`);e.if((0,Aa._)`typeof ${l} == "string"`,()=>c(),()=>t.error(!1,{discrError:Q$.DiscrError.Tag,tag:l,tagName:a})),t.ok(u);function c(){let d=h();e.if(!1);for(let p in d)e.elseIf((0,Aa._)`${l} === ${p}`),e.assign(u,f(d[p]));e.else(),t.error(!1,{discrError:Q$.DiscrError.Mapping,tag:l,tagName:a}),e.endIf()}function f(d){let p=e.name("valid"),m=t.subschema({keyword:"oneOf",schemaProp:d},p);return t.mergeEvaluated(m,Aa.Name),p}function h(){var d;let p={},m=g(s),v=!0;for(let y=0;y<o.length;y++){let b=o[y];b?.$ref&&!(0,Use.schemaHasRulesButRef)(b,i.self.RULES)&&(b=Lj.resolveRef.call(i.self,i.schemaEnv.root,i.baseId,b?.$ref),b instanceof Lj.SchemaEnv&&(b=b.schema));let T=(d=b?.properties)===null||d===void 0?void 0:d[a];if(typeof T!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);v=v&&(m||g(b)),w(T,y)}if(!v)throw new Error(`discriminator: "${a}" must be required`);return p;function g({required:y}){return Array.isArray(y)&&y.includes(a)}function w(y,b){if(y.const)_(y.const,b);else if(y.enum)for(let T of y.enum)_(T,b);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function _(y,b){if(typeof y!="string"||y in p)throw new Error(`discriminator: "${a}" values must be unique strings`);p[y]=b}}}};Z$.default=Kse});var Fj=$((Wye,Bse)=>{Bse.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var zj=$((gt,Vj)=>{"use strict";Object.defineProperty(gt,"__esModule",{value:!0});gt.MissingRefError=gt.ValidationError=gt.CodeGen=gt.Name=gt.nil=gt.stringify=gt.str=gt._=gt.KeywordCxt=void 0;var Gse=l$(),Jse=Dj(),Yse=xj(),Mj=Fj(),Wse=["/properties"],Fh="http://json-schema.org/draft-07/schema",Mh=class extends Gse.default{_addVocabularies(){super._addVocabularies(),Jse.default.forEach(e=>this.addVocabulary(e)),this.opts.discriminator&&this.addKeyword(Yse.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;let e=this.opts.$data?this.$dataMetaSchema(Mj,Wse):Mj;this.addMetaSchema(e,Fh,!1),this.refs["http://json-schema.org/schema"]=Fh}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(Fh)?Fh:void 0)}};Vj.exports=gt=Mh;Object.defineProperty(gt,"__esModule",{value:!0});gt.default=Mh;var Xse=Ta();Object.defineProperty(gt,"KeywordCxt",{enumerable:!0,get:function(){return Xse.KeywordCxt}});var ka=ee();Object.defineProperty(gt,"_",{enumerable:!0,get:function(){return ka._}});Object.defineProperty(gt,"str",{enumerable:!0,get:function(){return ka.str}});Object.defineProperty(gt,"stringify",{enumerable:!0,get:function(){return ka.stringify}});Object.defineProperty(gt,"nil",{enumerable:!0,get:function(){return ka.nil}});Object.defineProperty(gt,"Name",{enumerable:!0,get:function(){return ka.Name}});Object.defineProperty(gt,"CodeGen",{enumerable:!0,get:function(){return ka.CodeGen}});var Qse=Yl();Object.defineProperty(gt,"ValidationError",{enumerable:!0,get:function(){return Qse.default}});var Zse=li();Object.defineProperty(gt,"MissingRefError",{enumerable:!0,get:function(){return Zse.default}})});var Es=$(lc=>{"use strict";Object.defineProperty(lc,"__esModule",{value:!0});lc.checkMetadata=void 0;var eie=de(),tie={keyword:"metadata",schemaType:"object",code(t){Uj(t);let{gen:e,schema:r,it:n}=t;if((0,eie.alwaysValidSchema)(n,r))return;let s=e.name("valid");t.subschema({keyword:"metadata",jtdMetadata:!0},s),t.ok(s)}};function Uj({it:t,keyword:e},r){if(t.jtdMetadata!==r)throw new Error(`JTD: "${e}" cannot be used in this schema location`)}lc.checkMetadata=Uj;lc.default=tie});var Vh=$(fc=>{"use strict";Object.defineProperty(fc,"__esModule",{value:!0});fc.hasRef=void 0;var Hj=co(),cc=ee(),rie=li(),Kj=ln(),Bj=f$(),nie=Es(),sie={keyword:"ref",schemaType:"string",code(t){(0,nie.checkMetadata)(t);let{gen:e,data:r,schema:n,parentSchema:s,it:i}=t,{schemaEnv:{root:o}}=i,a=e.name("valid");s.nullable?(e.var(a,(0,cc._)`${r} === null`),e.if((0,cc.not)(a),u)):(e.var(a,!1),u()),t.ok(a);function u(){var f;let h=(f=o.schema.definitions)===null||f===void 0?void 0:f[n];if(!h)throw new rie.default(i.opts.uriResolver,"",n,`No definition ${n}`);eb(h)||!i.opts.inlineRefs?l(h):c(h)}function l(f){let h=Hj.compileSchema.call(i.self,new Hj.SchemaEnv({schema:f,root:o,schemaPath:`/definitions/${n}`})),d=(0,Bj.getValidate)(t,h),p=e.const("_errs",Kj.default.errors);(0,Bj.callRef)(t,d,h,h.$async),e.assign(a,(0,cc._)`${p} === ${Kj.default.errors}`)}function c(f){let h=e.scopeValue("schema",i.opts.code.source===!0?{ref:f,code:(0,cc.stringify)(f)}:{ref:f});t.subschema({schema:f,dataTypes:[],schemaPath:cc.nil,topSchemaRef:h,errSchemaPath:`/definitions/${n}`},a)}}};function eb(t){for(let e in t){let r;if(e==="ref"||typeof(r=t[e])=="object"&&eb(r))return!0}return!1}fc.hasRef=eb;fc.default=sie});var rb=$(tb=>{"use strict";Object.defineProperty(tb,"__esModule",{value:!0});var iie=/t|\s/i,oie=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,aie=/^(\d\d):(\d\d):(\d\d)(?:\.\d+)?(?:z|([+-]\d\d)(?::?(\d\d))?)$/i,uie=[0,31,28,31,30,31,30,31,31,30,31,30,31];function Jj(t,e){let r=t.split(iie);return r.length===2&&Gj(r[0])&&lie(r[1])||e&&r.length===1&&Gj(r[0])}tb.default=Jj;function Gj(t){let e=oie.exec(t);if(!e)return!1;let r=+e[1],n=+e[2],s=+e[3];return n>=1&&n<=12&&s>=1&&(s<=uie[n]||n===2&&s===29&&(r%100===0?r%400===0:r%4===0))}function lie(t){let e=aie.exec(t);if(!e)return!1;let r=+e[1],n=+e[2],s=+e[3],i=+(e[4]||0),o=+(e[5]||0);return r<=23&&n<=59&&s<=59||r-i===23&&n-o===59&&s===60}Jj.code='require("ajv/dist/runtime/timestamp").default'});var qa=$(fi=>{"use strict";Object.defineProperty(fi,"__esModule",{value:!0});fi.typeErrorParams=fi.typeErrorMessage=fi.typeError=void 0;var cie=ee();function fie(t){return{message:e=>Yj(e,t),params:e=>Wj(e,t)}}fi.typeError=fie;function Yj({parentSchema:t},e){return t?.nullable?`must be ${e} or null`:`must be ${e}`}fi.typeErrorMessage=Yj;function Wj({parentSchema:t},e){return(0,cie._)`{type: ${e}, nullable: ${!!t?.nullable}}`}fi.typeErrorParams=Wj});var nb=$(ja=>{"use strict";Object.defineProperty(ja,"__esModule",{value:!0});ja.intRange=void 0;var Ur=ee(),die=rb(),hie=de(),pie=Es(),Xj=qa();ja.intRange={int8:[-128,127,3],uint8:[0,255,3],int16:[-32768,32767,5],uint16:[0,65535,5],int32:[-2147483648,2147483647,10],uint32:[0,4294967295,10]};var mie={message:t=>(0,Xj.typeErrorMessage)(t,t.schema),params:t=>(0,Xj.typeErrorParams)(t,t.schema)};function yie(t){let{gen:e,data:r,it:n}=t,{timestamp:s,allowDate:i}=n.opts;if(s==="date")return(0,Ur._)`${r} instanceof Date `;let o=(0,hie.useFunc)(e,die.default),a=i?(0,Ur._)`, true`:Ur.nil,u=(0,Ur._)`typeof ${r} == "string" && ${o}(${r}${a})`;return s==="string"?u:(0,Ur.or)((0,Ur._)`${r} instanceof Date`,u)}var gie={keyword:"type",schemaType:"string",error:mie,code(t){(0,pie.checkMetadata)(t);let{data:e,schema:r,parentSchema:n,it:s}=t,i;switch(r){case"boolean":case"string":i=(0,Ur._)`typeof ${e} == ${r}`;break;case"timestamp":{i=yie(t);break}case"float32":case"float64":i=(0,Ur._)`typeof ${e} == "number"`;break;default:{let o=r;if(i=(0,Ur._)`typeof ${e} == "number" && isFinite(${e}) && !(${e} % 1)`,!s.opts.int32range&&(o==="int32"||o==="uint32"))o==="uint32"&&(i=(0,Ur._)`${i} && ${e} >= 0`);else{let[a,u]=ja.intRange[o];i=(0,Ur._)`${i} && ${e} >= ${a} && ${e} <= ${u}`}}}t.pass(n.nullable?(0,Ur.or)((0,Ur._)`${e} === null`,i):i)}};ja.default=gie});var La=$(Da=>{"use strict";Object.defineProperty(Da,"__esModule",{value:!0});Da.checkNullableObject=Da.checkNullable=void 0;var zh=ee();function Qj({gen:t,data:e,parentSchema:r},n=zh.nil){let s=t.name("valid");return r.nullable?(t.let(s,(0,zh._)`${e} === null`),n=(0,zh.not)(s)):t.let(s,!1),[s,n]}Da.checkNullable=Qj;function _ie(t,e){let[r,n]=Qj(t,e);return[r,(0,zh._)`${n} && typeof ${t.data} == "object" && !Array.isArray(${t.data})`]}Da.checkNullableObject=_ie});var Zj=$(sb=>{"use strict";Object.defineProperty(sb,"__esModule",{value:!0});var di=ee(),vie=Es(),$ie=La(),bie={message:"must be equal to one of the allowed values",params:({schemaCode:t})=>(0,di._)`{allowedValues: ${t}}`},wie={keyword:"enum",schemaType:"array",error:bie,code(t){(0,vie.checkMetadata)(t);let{gen:e,data:r,schema:n,schemaValue:s,parentSchema:i,it:o}=t;if(n.length===0)throw new Error("enum must have non-empty array");if(n.length!==new Set(n).size)throw new Error("enum items must be unique");let a,u=(0,di._)`typeof ${r} == "string"`;if(n.length>=o.opts.loopEnum){let c;[a,c]=(0,$ie.checkNullable)(t,u),e.if(c,l)}else{if(!Array.isArray(n))throw new Error("ajv implementation error");a=(0,di.and)(u,(0,di.or)(...n.map(c=>(0,di._)`${r} === ${c}`))),i.nullable&&(a=(0,di.or)((0,di._)`${r} === null`,a))}t.pass(a);function l(){e.forOf("v",s,c=>e.if((0,di._)`${a} = ${r} === ${c}`,()=>e.break()))}}};sb.default=wie});var tD=$(ib=>{"use strict";Object.defineProperty(ib,"__esModule",{value:!0});var Eie=de(),Sie=Wt(),eD=ee(),Rie=Es(),Pie=La(),Tie=qa(),Oie={keyword:"elements",schemaType:"object",error:(0,Tie.typeError)("array"),code(t){(0,Rie.checkMetadata)(t);let{gen:e,data:r,schema:n,it:s}=t;if((0,Eie.alwaysValidSchema)(s,n))return;let[i]=(0,Pie.checkNullable)(t);e.if((0,eD.not)(i),()=>e.if((0,eD._)`Array.isArray(${r})`,()=>e.assign(i,(0,Sie.validateArray)(t)),()=>t.error())),t.ok(i)}};ib.default=Oie});var ab=$(hi=>{"use strict";Object.defineProperty(hi,"__esModule",{value:!0});hi.validateProperties=hi.error=void 0;var ob=Wt(),rD=de(),Ss=ee(),Nie=Es(),Iie=La(),nD=qa(),xa;(function(t){t.Additional="additional",t.Missing="missing"})(xa||(xa={}));hi.error={message:t=>{let{params:e}=t;return e.propError?e.propError===xa.Additional?"must NOT have additional properties":`must have property '${e.missingProperty}'`:(0,nD.typeErrorMessage)(t,"object")},params:t=>{let{params:e}=t;return e.propError?e.propError===xa.Additional?(0,Ss._)`{error: ${e.propError}, additionalProperty: ${e.additionalProperty}}`:(0,Ss._)`{error: ${e.propError}, missingProperty: ${e.missingProperty}}`:(0,nD.typeErrorParams)(t,"object")}};var Cie={keyword:"properties",schemaType:"object",error:hi.error,code:sD};function sD(t){(0,Nie.checkMetadata)(t);let{gen:e,data:r,parentSchema:n,it:s}=t,{additionalProperties:i,nullable:o}=n;if(s.jtdDiscriminator&&o)throw new Error("JTD: nullable inside discriminator mapping");if(d())throw new Error("JTD: properties and optionalProperties have common members");let[a,u]=p("properties"),[l,c]=p("optionalProperties");if(u.length===0&&c.length===0&&i)return;let[f,h]=s.jtdDiscriminator===void 0?(0,Iie.checkNullableObject)(t,r):[e.let("valid",!1),!0];e.if(h,()=>e.assign(f,!0).block(()=>{m(u,"properties",!0),m(c,"optionalProperties"),i||g()})),t.pass(f);function d(){let _=n.properties,y=n.optionalProperties;if(!(_&&y))return!1;for(let b in _)if(Object.prototype.hasOwnProperty.call(y,b))return!0;return!1}function p(_){let y=n[_],b=y?(0,ob.allSchemaProperties)(y):[];if(s.jtdDiscriminator&&b.some(S=>S===s.jtdDiscriminator))throw new Error(`JTD: discriminator tag used in ${_}`);let T=b.filter(S=>!(0,rD.alwaysValidSchema)(s,y[S]));return[b,T]}function m(_,y,b){let T=e.var("valid");for(let N of _)e.if((0,ob.propertyInData)(e,r,N,s.opts.ownProperties),()=>v(N,y,T),()=>S(N)),t.ok(T);function S(N){b?(e.assign(T,!1),t.error(!1,{propError:xa.Missing,missingProperty:N},{schemaPath:N})):e.assign(T,!0)}}function v(_,y,b){t.subschema({keyword:y,schemaProp:_,dataProp:_},b)}function g(){e.forIn("key",r,_=>{let y=w(_,a,"properties",s.jtdDiscriminator),b=w(_,l,"optionalProperties"),T=y===!0?b:b===!0?y:(0,Ss.and)(y,b);e.if(T,()=>{s.opts.removeAdditional?e.code((0,Ss._)`delete ${r}[${_}]`):(t.error(!1,{propError:xa.Additional,additionalProperty:_},{instancePath:_,parentSchema:!0}),s.opts.allErrors||e.break())})})}function w(_,y,b,T){let S;if(y.length>8){let N=(0,rD.schemaRefOrVal)(s,n[b],b);S=(0,Ss.not)((0,ob.isOwnProperty)(e,N,_)),T!==void 0&&(S=(0,Ss.and)(S,(0,Ss._)`${_} !== ${T}`))}else if(y.length||T!==void 0){let N=T===void 0?y:[T].concat(y);S=(0,Ss.and)(...N.map(A=>(0,Ss._)`${_} !== ${A}`))}else S=!0;return S}}hi.validateProperties=sD;hi.default=Cie});var oD=$(ub=>{"use strict";Object.defineProperty(ub,"__esModule",{value:!0});var iD=ab(),Aie={keyword:"optionalProperties",schemaType:"object",error:iD.error,code(t){t.parentSchema.properties||(0,iD.validateProperties)(t)}};ub.default=Aie});var uD=$(lb=>{"use strict";Object.defineProperty(lb,"__esModule",{value:!0});var mo=ee(),kie=Es(),qie=La(),aD=qa(),Uh=X$(),jie={message:t=>{let{schema:e,params:r}=t;return r.discrError?r.discrError===Uh.DiscrError.Tag?`tag "${e}" must be string`:`value of tag "${e}" must be in mapping`:(0,aD.typeErrorMessage)(t,"object")},params:t=>{let{schema:e,params:r}=t;return r.discrError?(0,mo._)`{error: ${r.discrError}, tag: ${e}, tagValue: ${r.tag}}`:(0,aD.typeErrorParams)(t,"object")}},Die={keyword:"discriminator",schemaType:"string",implements:["mapping"],error:jie,code(t){(0,kie.checkMetadata)(t);let{gen:e,data:r,schema:n,parentSchema:s}=t,[i,o]=(0,qie.checkNullableObject)(t,r);e.if(o),a(),e.elseIf((0,mo.not)(i)),t.error(),e.endIf(),t.ok(i);function a(){let c=e.const("tag",(0,mo._)`${r}${(0,mo.getProperty)(n)}`);e.if((0,mo._)`${c} === undefined`),t.error(!1,{discrError:Uh.DiscrError.Tag,tag:c}),e.elseIf((0,mo._)`typeof ${c} == "string"`),u(c),e.else(),t.error(!1,{discrError:Uh.DiscrError.Tag,tag:c},{instancePath:n}),e.endIf()}function u(c){e.if(!1);for(let f in s.mapping)e.elseIf((0,mo._)`${c} === ${f}`),e.assign(i,l(f));e.else(),t.error(!1,{discrError:Uh.DiscrError.Mapping,tag:c},{instancePath:n,schemaPath:"mapping",parentSchema:!0}),e.endIf()}function l(c){let f=e.name("valid");return t.subschema({keyword:"mapping",schemaProp:c,jtdDiscriminator:n},f),f}}};lb.default=Die});var cD=$(cb=>{"use strict";Object.defineProperty(cb,"__esModule",{value:!0});var lD=de(),Hh=ee(),Lie=Es(),xie=La(),Fie=qa(),Mie={keyword:"values",schemaType:"object",error:(0,Fie.typeError)("object"),code(t){(0,Lie.checkMetadata)(t);let{gen:e,data:r,schema:n,it:s}=t,[i,o]=(0,xie.checkNullableObject)(t,r);(0,lD.alwaysValidSchema)(s,n)?e.if((0,Hh.not)((0,Hh.or)(o,i)),()=>t.error()):(e.if(o),e.assign(i,a()),e.elseIf((0,Hh.not)(i)),t.error(),e.endIf()),t.ok(i);function a(){let u=e.name("valid");if(s.allErrors){let c=e.let("valid",!0);return l(()=>e.assign(c,!1)),c}return e.var(u,!0),l(()=>e.break()),u;function l(c){e.forIn("key",r,f=>{t.subschema({keyword:"values",dataProp:f,dataPropType:lD.Type.Str},u),e.if((0,Hh.not)(u),c)})}}}};cb.default=Mie});var fD=$(fb=>{"use strict";Object.defineProperty(fb,"__esModule",{value:!0});var Vie=Wt(),zie={keyword:"union",schemaType:"array",trackErrors:!0,code:Vie.validateUnion,error:{message:"must match a schema in union"}};fb.default=zie});var dD=$(db=>{"use strict";Object.defineProperty(db,"__esModule",{value:!0});var Uie=Vh(),Hie=nb(),Kie=Zj(),Bie=tD(),Gie=ab(),Jie=oD(),Yie=uD(),Wie=cD(),Xie=fD(),Qie=Es(),Zie=["definitions",Uie.default,Hie.default,Kie.default,Bie.default,Gie.default,Jie.default,Yie.default,Wie.default,Xie.default,Qie.default,{keyword:"additionalProperties",schemaType:"boolean"},{keyword:"nullable",schemaType:"boolean"}];db.default=Zie});var yD=$(hb=>{"use strict";Object.defineProperty(hb,"__esModule",{value:!0});var Rs=t=>{let e={nullable:{type:"boolean"},metadata:{optionalProperties:{union:{elements:{ref:"schema"}}},additionalProperties:!0}};return t&&(e.definitions={values:{ref:"schema"}}),e},eoe=t=>({optionalProperties:Rs(t)}),toe=t=>({properties:{ref:{type:"string"}},optionalProperties:Rs(t)}),roe=t=>({properties:{type:{enum:["boolean","timestamp","string","float32","float64","int8","uint8","int16","uint16","int32","uint32"]}},optionalProperties:Rs(t)}),noe=t=>({properties:{enum:{elements:{type:"string"}}},optionalProperties:Rs(t)}),soe=t=>({properties:{elements:{ref:"schema"}},optionalProperties:Rs(t)}),pD=t=>({properties:{properties:{values:{ref:"schema"}}},optionalProperties:{optionalProperties:{values:{ref:"schema"}},additionalProperties:{type:"boolean"},...Rs(t)}}),mD=t=>({properties:{optionalProperties:{values:{ref:"schema"}}},optionalProperties:{additionalProperties:{type:"boolean"},...Rs(t)}}),ioe=t=>({properties:{discriminator:{type:"string"},mapping:{values:{metadata:{union:[pD(!1),mD(!1)]}}}},optionalProperties:Rs(t)}),ooe=t=>({properties:{values:{ref:"schema"}},optionalProperties:Rs(t)}),hD=t=>({metadata:{union:[eoe,toe,roe,noe,soe,pD,mD,ioe,ooe].map(e=>e(t))}}),aoe={definitions:{schema:hD(!1)},...hD(!0)};hb.default=aoe});var pb=$(Kh=>{"use strict";Object.defineProperty(Kh,"__esModule",{value:!0});Kh.jtdForms=void 0;Kh.jtdForms=["elements","values","discriminator","properties","optionalProperties","enum","type","ref"]});var _D=$(yb=>{"use strict";Object.defineProperty(yb,"__esModule",{value:!0});var mb=/[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,uoe={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function gD(t){return mb.lastIndex=0,'"'+(mb.test(t)?t.replace(mb,e=>{let r=uoe[e];return typeof r=="string"?r:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}):t)+'"'}yb.default=gD;gD.code='require("ajv/dist/runtime/quote").default'});var SD=$(_b=>{"use strict";Object.defineProperty(_b,"__esModule",{value:!0});var loe=pb(),$D=co(),we=ee(),coe=li(),st=ln(),foe=Wt(),doe=Vh(),hoe=de(),poe=_D(),moe={elements:goe,values:_oe,discriminator:voe,properties:vD,optionalProperties:vD,enum:dc,type:$oe,ref:woe};function bD(t,e){let r=$D.getCompilingSchema.call(this,t);if(r)return r;let{es5:n,lines:s}=this.opts.code,{ownProperties:i}=this.opts,o=new we.CodeGen(this.scope,{es5:n,lines:s,ownProperties:i}),a=o.scopeName("serialize"),u={self:this,gen:o,schema:t.schema,schemaEnv:t,definitions:e,data:st.default.data},l;try{this._compilations.add(t),t.serializeName=a,o.func(a,st.default.data,!1,()=>{o.let(st.default.json,(0,we.str)``),hc(u),o.return(st.default.json)}),o.optimize(this.opts.code.optimize);let c=o.toString();l=`${o.scopeRefs(st.default.scope)}return ${c}`;let h=new Function(`${st.default.scope}`,l)(this.scope.get());this.scope.value(a,{ref:h}),t.serialize=h}catch(c){throw l&&this.logger.error("Error compiling serializer, function code:",l),delete t.serialize,delete t.serializeName,c}finally{this._compilations.delete(t)}return t}_b.default=bD;function hc(t){let e;for(let r of loe.jtdForms)if(r in t.schema){e=r;break}yoe(t,e?moe[e]:Soe)}function yoe(t,e){let{gen:r,schema:n,data:s}=t;if(!n.nullable)return e(t);r.if((0,we._)`${s} === undefined || ${s} === null`,()=>r.add(st.default.json,(0,we._)`"null"`),()=>e(t))}function goe(t){let{gen:e,schema:r,data:n}=t;e.add(st.default.json,(0,we.str)`[`);let s=e.let("first",!0);e.forOf("el",n,i=>{gb(t,s),hc({...t,schema:r.elements,data:i})}),e.add(st.default.json,(0,we.str)`]`)}function _oe(t){let{gen:e,schema:r,data:n}=t;e.add(st.default.json,(0,we.str)`{`);let s=e.let("first",!0);e.forIn("key",n,i=>wD(t,i,r.values,s)),e.add(st.default.json,(0,we.str)`}`)}function wD(t,e,r,n){let{gen:s,data:i}=t;gb(t,n),dc({...t,data:e}),s.add(st.default.json,(0,we.str)`:`);let o=s.const("value",(0,we._)`${i}${(0,we.getProperty)(e)}`);hc({...t,schema:r,data:o})}function voe(t){let{gen:e,schema:r,data:n}=t,{discriminator:s}=r;e.add(st.default.json,(0,we.str)`{${JSON.stringify(s)}:`);let i=e.const("tag",(0,we._)`${n}${(0,we.getProperty)(s)}`);dc({...t,data:i}),e.if(!1);for(let o in r.mapping){e.elseIf((0,we._)`${i} === ${o}`);let a=r.mapping[o];ED({...t,schema:a},s)}e.endIf(),e.add(st.default.json,(0,we.str)`}`)}function vD(t){let{gen:e}=t;e.add(st.default.json,(0,we.str)`{`),ED(t),e.add(st.default.json,(0,we.str)`}`)}function ED(t,e){let{gen:r,schema:n,data:s}=t,{properties:i,optionalProperties:o}=n,a=h(i),u=h(o),l=d(a.concat(u)),c=!e,f;for(let g of a)c?c=!1:r.add(st.default.json,(0,we.str)`,`),m(g,i[g],p(g));c&&(f=r.let("first",!0));for(let g of u){let w=p(g);r.if((0,we.and)((0,we._)`${w} !== undefined`,(0,foe.isOwnProperty)(r,s,g)),()=>{gb(t,f),m(g,o[g],w)})}n.additionalProperties&&r.forIn("key",s,g=>r.if(v(g,l),()=>wD(t,g,{},f)));function h(g){return g?Object.keys(g):[]}function d(g){if(e&&g.push(e),new Set(g).size!==g.length)throw new Error("JTD: properties/optionalProperties/disciminator overlap");return g}function p(g){return r.const("value",(0,we._)`${s}${(0,we.getProperty)(g)}`)}function m(g,w,_){r.add(st.default.json,(0,we.str)`${JSON.stringify(g)}:`),hc({...t,schema:w,data:_})}function v(g,w){return w.length?(0,we.and)(...w.map(_=>(0,we._)`${g} !== ${_}`)):!0}}function $oe(t){let{gen:e,schema:r,data:n}=t;switch(r.type){case"boolean":e.add(st.default.json,(0,we._)`${n} ? "true" : "false"`);break;case"string":dc(t);break;case"timestamp":e.if((0,we._)`${n} instanceof Date`,()=>e.add(st.default.json,(0,we._)`'"' + ${n}.toISOString() + '"'`),()=>dc(t));break;default:boe(t)}}function dc({gen:t,data:e}){t.add(st.default.json,(0,we._)`${(0,hoe.useFunc)(t,poe.default)}(${e})`)}function boe({gen:t,data:e}){t.add(st.default.json,(0,we._)`"" + ${e}`)}function woe(t){let{gen:e,self:r,data:n,definitions:s,schema:i,schemaEnv:o}=t,{ref:a}=i,u=s[a];if(!u)throw new coe.default(r.opts.uriResolver,"",a,`No definition ${a}`);if(!(0,doe.hasRef)(u))return hc({...t,schema:u});let{root:l}=o,c=bD.call(r,new $D.SchemaEnv({schema:u,root:l}),s);e.add(st.default.json,(0,we._)`${Eoe(e,c)}(${n})`)}function Eoe(t,e){return e.serialize?t.scopeValue("serialize",{ref:e.serialize}):(0,we._)`${t.scopeValue("wrapper",{ref:e})}.serialize`}function Soe({gen:t,data:e}){t.add(st.default.json,(0,we._)`JSON.stringify(${e})`)}function gb({gen:t},e){e?t.if(e,()=>t.assign(e,!1),()=>t.add(st.default.json,(0,we.str)`,`)):t.add(st.default.json,(0,we.str)`,`)}});var PD=$(mi=>{"use strict";Object.defineProperty(mi,"__esModule",{value:!0});mi.parseJsonString=mi.parseJsonNumber=mi.parseJson=void 0;var Roe=/position\s(\d+)$/;function Ps(t,e){let r;Ps.message=void 0;let n;e&&(t=t.slice(e));try{return Ps.position=e+t.length,JSON.parse(t)}catch(s){if(n=Roe.exec(s.message),!n){Ps.message="unexpected end";return}r=+n[1];let i=t[r];t=t.slice(0,r),Ps.position=e+r;try{return JSON.parse(t)}catch{Ps.message=`unexpected token ${i}`;return}}}mi.parseJson=Ps;Ps.message=void 0;Ps.position=0;Ps.code='require("ajv/dist/runtime/parseJson").parseJson';function Ts(t,e,r){let n="",s;if(Ts.message=void 0,t[e]==="-"&&(n+="-",e++),t[e]==="0")n+="0",e++;else if(!i(r)){o();return}if(r)return Ts.position=e,+n;if(t[e]==="."&&(n+=".",e++,!i())){o();return}if(s=t[e],(s==="e"||s==="E")&&(n+="e",e++,s=t[e],(s==="+"||s==="-")&&(n+=s,e++),!i())){o();return}return Ts.position=e,+n;function i(a){let u=!1;for(;s=t[e],s>="0"&&s<="9"&&(a===void 0||a-- >0);)u=!0,n+=s,e++;return u}function o(){Ts.position=e,Ts.message=e<t.length?`unexpected token ${t[e]}`:"unexpected end"}}mi.parseJsonNumber=Ts;Ts.message=void 0;Ts.position=0;Ts.code='require("ajv/dist/runtime/parseJson").parseJsonNumber';var RD={b:"\b",f:"\f",n:`
`,r:"\r",t:"	",'"':'"',"/":"/","\\":"\\"},Poe="a".charCodeAt(0),Toe="0".charCodeAt(0);function pi(t,e){let r="",n;for(pi.message=void 0;n=t[e++],n!=='"';)if(n==="\\")if(n=t[e],n in RD)r+=RD[n],e++;else if(n==="u"){e++;let i=4,o=0;for(;i--;){if(o<<=4,n=t[e],n===void 0){s("unexpected end");return}if(n=n.toLowerCase(),n>="a"&&n<="f")o+=n.charCodeAt(0)-Poe+10;else if(n>="0"&&n<="9")o+=n.charCodeAt(0)-Toe;else{s(`unexpected token ${n}`);return}e++}r+=String.fromCharCode(o)}else{s(`unexpected token ${n}`);return}else if(n===void 0){s("unexpected end");return}else if(n.charCodeAt(0)>=32)r+=n;else{s(`unexpected token ${n}`);return}return pi.position=e,r;function s(i){pi.position=e,pi.message=i}}mi.parseJsonString=pi;pi.message=void 0;pi.position=0;pi.code='require("ajv/dist/runtime/parseJson").parseJsonString'});var LD=$(Pb=>{"use strict";Object.defineProperty(Pb,"__esModule",{value:!0});var Ooe=pb(),ID=co(),Q=ee(),Noe=li(),be=ln(),Ioe=Wt(),Coe=Vh(),Aoe=nb(),bb=PD(),CD=de(),koe=rb(),qoe={elements:xoe,values:Foe,discriminator:Voe,properties:TD,optionalProperties:TD,enum:Uoe,type:zoe,ref:Hoe};function AD(t,e){let r=ID.getCompilingSchema.call(this,t);if(r)return r;let{es5:n,lines:s}=this.opts.code,{ownProperties:i}=this.opts,o=new Q.CodeGen(this.scope,{es5:n,lines:s,ownProperties:i}),a=o.scopeName("parse"),u={self:this,gen:o,schema:t.schema,schemaEnv:t,definitions:e,data:be.default.data,parseName:a,char:o.name("c")},l;try{this._compilations.add(t),t.parseName=a,joe(u),o.optimize(this.opts.code.optimize);let c=o.toString();l=`${o.scopeRefs(be.default.scope)}return ${c}`;let h=new Function(`${be.default.scope}`,l)(this.scope.get());this.scope.value(a,{ref:h}),t.parse=h}catch(c){throw l&&this.logger.error("Error compiling parser, function code:",l),delete t.parse,delete t.parseName,c}finally{this._compilations.delete(t)}return t}Pb.default=AD;var $b=(0,Q._)`undefined`;function joe(t){let{gen:e,parseName:r,char:n}=t;e.func(r,(0,Q._)`${be.default.json}, ${be.default.jsonPos}, ${be.default.jsonPart}`,!1,()=>{e.let(be.default.data),e.let(n),e.assign((0,Q._)`${r}.message`,$b),e.assign((0,Q._)`${r}.position`,$b),e.assign(be.default.jsonPos,(0,Q._)`${be.default.jsonPos} || 0`),e.const(be.default.jsonLen,(0,Q._)`${be.default.json}.length`),Bh(t),Rb(t),e.if(be.default.jsonPart,()=>{e.assign((0,Q._)`${r}.position`,be.default.jsonPos),e.return(be.default.data)}),e.if((0,Q._)`${be.default.jsonPos} === ${be.default.jsonLen}`,()=>e.return(be.default.data)),Fa(t)})}function Bh(t){let e;for(let r of Ooe.jtdForms)if(r in t.schema){e=r;break}e?Loe(t,qoe[e]):Eb(t)}var Doe=ND(!0,ND(!1,Fa));function Loe(t,e){let{gen:r,schema:n,data:s}=t;if(!n.nullable)return e(t);pc(t,"null",e,()=>r.assign(s,null))}function xoe(t){let{gen:e,schema:r,data:n}=t;Qn(t,"[");let s=e.let("i",0);e.assign(n,(0,Q._)`[]`),wb(t,"]",()=>{let i=e.let("el");Bh({...t,schema:r.elements,data:i}),e.assign((0,Q._)`${n}[${s}++]`,i)})}function Foe(t){let{gen:e,schema:r,data:n}=t;Qn(t,"{"),e.assign(n,(0,Q._)`{}`),wb(t,"}",()=>Moe(t,r.values))}function wb(t,e,r){kD(t,e,r),Qn(t,e)}function kD(t,e,r){let{gen:n}=t;n.for((0,Q._)`;${be.default.jsonPos}<${be.default.jsonLen} && ${Gh(1)}!==${e};`,()=>{r(),pc(t,",",()=>n.break(),s)});function s(){pc(t,e,()=>{},Fa)}}function Moe(t,e){let{gen:r}=t,n=r.let("key");yo({...t,data:n}),Qn(t,":"),jD(t,n,e)}function Voe(t){let{gen:e,data:r,schema:n}=t,{discriminator:s,mapping:i}=n;Qn(t,"{"),e.assign(r,(0,Q._)`{}`);let o=e.const("pos",be.default.jsonPos),a=e.let("value"),u=e.let("tag");kD(t,"}",()=>{let l=e.let("key");yo({...t,data:l}),Qn(t,":"),e.if((0,Q._)`${l} === ${s}`,()=>{yo({...t,data:u}),e.assign((0,Q._)`${r}[${l}]`,u),e.break()},()=>Eb({...t,data:a}))}),e.assign(be.default.jsonPos,o),e.if((0,Q._)`${u} === undefined`),Os(t,(0,Q.str)`discriminator tag not found`);for(let l in i)e.elseIf((0,Q._)`${u} === ${l}`),qD({...t,schema:i[l]},s);e.else(),Os(t,(0,Q.str)`discriminator value not in schema`),e.endIf()}function TD(t){let{gen:e,data:r}=t;Qn(t,"{"),e.assign(r,(0,Q._)`{}`),qD(t)}function qD(t,e){let{gen:r,schema:n,data:s}=t,{properties:i,optionalProperties:o,additionalProperties:a}=n;if(wb(t,"}",()=>{let u=r.let("key");if(yo({...t,data:u}),Qn(t,":"),r.if(!1),OD(t,u,i),OD(t,u,o),e){r.elseIf((0,Q._)`${u} === ${e}`);let l=r.let("tag");yo({...t,data:l})}r.else(),a?Eb({...t,data:(0,Q._)`${s}[${u}]`}):Os(t,(0,Q.str)`property ${u} not allowed`),r.endIf()}),i){let u=(0,Ioe.hasPropFunc)(r),l=(0,Q.and)(...Object.keys(i).map(c=>(0,Q._)`${u}.call(${s}, ${c})`));r.if((0,Q.not)(l),()=>Os(t,(0,Q.str)`missing required properties`))}}function OD(t,e,r={}){let{gen:n}=t;for(let s in r)n.elseIf((0,Q._)`${e} === ${s}`),jD(t,e,r[s])}function jD(t,e,r){Bh({...t,schema:r,data:(0,Q._)`${t.data}[${e}]`})}function zoe(t){let{gen:e,schema:r,data:n,self:s}=t;switch(r.type){case"boolean":Doe(t);break;case"string":yo(t);break;case"timestamp":{yo(t);let i=(0,CD.useFunc)(e,koe.default),{allowDate:o,parseDate:a}=s.opts,u=o?(0,Q._)`!${i}(${n}, true)`:(0,Q._)`!${i}(${n})`,l=a?(0,Q.or)(u,(0,Q._)`(${n} = new Date(${n}), false)`,(0,Q._)`isNaN(${n}.valueOf())`):u;e.if(l,()=>Os(t,(0,Q.str)`invalid timestamp`));break}case"float32":case"float64":vb(t);break;default:{let i=r.type;if(!s.opts.int32range&&(i==="int32"||i==="uint32"))vb(t,16),i==="uint32"&&e.if((0,Q._)`${n} < 0`,()=>Os(t,(0,Q.str)`integer out of range`));else{let[o,a,u]=Aoe.intRange[i];vb(t,u),e.if((0,Q._)`${n} < ${o} || ${n} > ${a}`,()=>Os(t,(0,Q.str)`integer out of range`))}}}}function yo(t){Qn(t,'"'),Sb(t,bb.parseJsonString)}function Uoe(t){let{gen:e,data:r,schema:n}=t,s=n.enum;Qn(t,'"'),e.if(!1);for(let i of s){let o=JSON.stringify(i).slice(1);e.elseIf((0,Q._)`${Gh(o.length)} === ${o}`),e.assign(r,(0,Q.str)`${i}`),e.add(be.default.jsonPos,o.length)}e.else(),Fa(t),e.endIf()}function vb(t,e){let{gen:r}=t;Rb(t),r.if((0,Q._)`"-0123456789".indexOf(${Gh(1)}) < 0`,()=>Fa(t),()=>Sb(t,bb.parseJsonNumber,e))}function ND(t,e){return r=>{let{gen:n,data:s}=r;pc(r,`${t}`,()=>e(r),()=>n.assign(s,t))}}function Hoe(t){let{gen:e,self:r,definitions:n,schema:s,schemaEnv:i}=t,{ref:o}=s,a=n[o];if(!a)throw new Noe.default(r.opts.uriResolver,"",o,`No definition ${o}`);if(!(0,Coe.hasRef)(a))return Bh({...t,schema:a});let{root:u}=i,l=AD.call(r,new ID.SchemaEnv({schema:a,root:u}),n);DD(t,Koe(e,l),!0)}function Koe(t,e){return e.parse?t.scopeValue("parse",{ref:e.parse}):(0,Q._)`${t.scopeValue("wrapper",{ref:e})}.parse`}function Eb(t){Sb(t,bb.parseJson)}function Sb(t,e,r){DD(t,(0,CD.useFunc)(t.gen,e),r)}function DD(t,e,r){let{gen:n,data:s}=t;n.assign(s,(0,Q._)`${e}(${be.default.json}, ${be.default.jsonPos}${r?(0,Q._)`, ${r}`:Q.nil})`),n.assign(be.default.jsonPos,(0,Q._)`${e}.position`),n.if((0,Q._)`${s} === undefined`,()=>Os(t,(0,Q._)`${e}.message`))}function Qn(t,e){pc(t,e,Fa)}function pc(t,e,r,n){let{gen:s}=t,i=e.length;Rb(t),s.if((0,Q._)`${Gh(i)} === ${e}`,()=>{s.add(be.default.jsonPos,i),n?.(t)},()=>r(t))}function Rb({gen:t,char:e}){t.code((0,Q._)`while((${e}=${be.default.json}[${be.default.jsonPos}],${e}===" "||${e}==="\\n"||${e}==="\\r"||${e}==="\\t"))${be.default.jsonPos}++;`)}function Gh(t){return t===1?(0,Q._)`${be.default.json}[${be.default.jsonPos}]`:(0,Q._)`${be.default.json}.slice(${be.default.jsonPos}, ${be.default.jsonPos}+${t})`}function Fa(t){Os(t,(0,Q._)`"unexpected token " + ${be.default.json}[${be.default.jsonPos}]`)}function Os({gen:t,parseName:e},r){t.assign((0,Q._)`${e}.message`,r),t.assign((0,Q._)`${e}.position`,be.default.jsonPos),t.return($b)}});var Ob=$((_t,xD)=>{"use strict";Object.defineProperty(_t,"__esModule",{value:!0});_t.MissingRefError=_t.ValidationError=_t.CodeGen=_t.Name=_t.nil=_t.stringify=_t.str=_t._=_t.KeywordCxt=void 0;var Boe=l$(),Goe=dD(),Joe=yD(),Yoe=SD(),Woe=LD(),Tb="JTD-meta-schema",Jh=class extends Boe.default{constructor(e={}){super({...e,jtd:!0})}_addVocabularies(){super._addVocabularies(),this.addVocabulary(Goe.default)}_addDefaultMetaSchema(){super._addDefaultMetaSchema(),this.opts.meta&&this.addMetaSchema(Joe.default,Tb,!1)}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(Tb)?Tb:void 0)}compileSerializer(e){let r=this._addSchema(e);return r.serialize||this._compileSerializer(r)}compileParser(e){let r=this._addSchema(e);return r.parse||this._compileParser(r)}_compileSerializer(e){if(Yoe.default.call(this,e,e.schema.definitions||{}),!e.serialize)throw new Error("ajv implementation error");return e.serialize}_compileParser(e){if(Woe.default.call(this,e,e.schema.definitions||{}),!e.parse)throw new Error("ajv implementation error");return e.parse}};xD.exports=_t=Jh;Object.defineProperty(_t,"__esModule",{value:!0});_t.default=Jh;var Xoe=Ta();Object.defineProperty(_t,"KeywordCxt",{enumerable:!0,get:function(){return Xoe.KeywordCxt}});var Ma=ee();Object.defineProperty(_t,"_",{enumerable:!0,get:function(){return Ma._}});Object.defineProperty(_t,"str",{enumerable:!0,get:function(){return Ma.str}});Object.defineProperty(_t,"stringify",{enumerable:!0,get:function(){return Ma.stringify}});Object.defineProperty(_t,"nil",{enumerable:!0,get:function(){return Ma.nil}});Object.defineProperty(_t,"Name",{enumerable:!0,get:function(){return Ma.Name}});Object.defineProperty(_t,"CodeGen",{enumerable:!0,get:function(){return Ma.CodeGen}});var Qoe=Yl();Object.defineProperty(_t,"ValidationError",{enumerable:!0,get:function(){return Qoe.default}});var Zoe=li();Object.defineProperty(_t,"MissingRefError",{enumerable:!0,get:function(){return Zoe.default}})});var Nb=$((gge,FD)=>{"use strict";var eae=C0();FD.exports=Object.freeze({coerceTypes:"array",useDefaults:!0,removeAdditional:!0,uriResolver:eae,addUsedSchema:!1,allErrors:!1})});var zD=$((_ge,VD)=>{"use strict";var tae=zj().default,rae=Ob(),MD=Nb(),Ib=class{constructor(e,r){r.mode==="JTD"?this.ajv=new rae(Object.assign({},MD,r.customOptions)):this.ajv=new tae(Object.assign({},MD,r.customOptions));let n=!0;if(r.plugins&&r.plugins.length>0)for(let i of r.plugins)Array.isArray(i)?(n=n&&i[0].name!=="formatsPlugin",i[0](this.ajv,i[1])):(n=n&&i.name!=="formatsPlugin",i(this.ajv));n&&fv()(this.ajv);let s=Object.values(e);for(let i of s)this.ajv.addSchema(i)}buildValidatorFunction({schema:e}){if(e.$id){let r=this.ajv.getSchema(e.$id);if(r)return r}return this.ajv.compile(e)}};VD.exports=Ib});var HD=$((vge,UD)=>{"use strict";var nae=Ob(),sae=Nb(),Cb=class{constructor(e,r){this.ajv=new nae(Object.assign({},sae,r))}buildSerializerFunction({schema:e}){return this.ajv.compileSerializer(e)}};UD.exports=Cb});var GD=$((yc,BD)=>{"use strict";Object.defineProperty(yc,"__esModule",{value:!0});var mc=ph(),jn=$a();function KD(t,e){if(!t.opts.code.source)throw new Error("moduleCode: ajv instance must have code.source option");let{_n:r}=t.scope.opts;return typeof e=="function"?s(e.source):e!==void 0?i(e,n):i(t.schemas,a=>a.meta?void 0:t.compile(a.schema));function n(a){let u=t.getSchema(a);if(!u)throw new Error(`moduleCode: no schema with id ${a}`);return u}function s(a){let u={},l=a?.validateName,c=o(u,a);return t.opts.code.esm?`"use strict";${r}export const validate = ${l};${r}export default ${l};${r}${c}`:`"use strict";${r}module.exports = ${l};${r}module.exports.default = ${l};${r}${c}`}function i(a,u){var l;let c={},f=(0,jn._)`"use strict";`;for(let h in a){let d=u(a[h]);if(d){let p=o(c,d.source),m=t.opts.code.esm?(0,jn._)`export const ${(0,jn.getEsmExportName)(h)}`:(0,jn._)`exports${(0,jn.getProperty)(h)}`;f=(0,jn._)`${f}${r}${m} = ${(l=d.source)===null||l===void 0?void 0:l.validateName};${r}${p}`}}return`${f}`}function o(a,u){if(!u)throw new Error('moduleCode: function does not have "source" property');if(h(u.validateName)===mc.UsedValueState.Completed)return jn.nil;d(u.validateName,mc.UsedValueState.Started);let l=t.scope.scopeCode(u.scopeValues,a,f),c=new jn._Code(`${l}${r}${u.validateCode}`);return u.evaluated?(0,jn._)`${c}${u.validateName}.evaluated = ${u.evaluated};${r}`:c;function f(p){var m;let v=(m=p.value)===null||m===void 0?void 0:m.ref;if(p.prefix==="validate"&&typeof v=="function")return o(a,v.source);if((p.prefix==="root"||p.prefix==="wrapper")&&typeof v=="object"){let{validate:g,validateName:w}=v;if(!w)throw new Error("ajv internal error");let _=t.opts.code.es5?mc.varKinds.var:mc.varKinds.const,y=(0,jn._)`${_} ${p} = {validate: ${w}};`;if(h(w)===mc.UsedValueState.Started)return y;let b=o(a,g?.source);return(0,jn._)`${y}${r}${b}`}}function h(p){var m;return(m=a[p.prefix])===null||m===void 0?void 0:m.get(p)}function d(p,m){let{prefix:v}=p;(a[v]=a[v]||new Map).set(p,m)}}}BD.exports=yc=KD;Object.defineProperty(yc,"__esModule",{value:!0});yc.default=KD});var WD=$(($ge,YD)=>{"use strict";var JD=Ab(),iae=GD().default;function oae(t={readMode:!0}){if(t.readMode===!0&&!t.restoreFunction)throw new Error("You must provide a restoreFunction options when readMode ON");if(t.readMode!==!0&&!t.storeFunction)throw new Error("You must provide a storeFunction options when readMode OFF");if(t.readMode===!0)return function(){return function(n){return t.restoreFunction(n)}};let e=JD();return function(n,s={}){(!s.customOptions||!s.customOptions.code)&&(s.customOptions=Object.assign({},s.customOptions,{code:{source:!0}}));let i=e(n,s);return function(o){let a=i(o),u=iae(i[JD.AjvReference].ajv,a);return t.storeFunction(o,u),a}}}YD.exports=oae});var Ab=$((bge,Va)=>{"use strict";var QD=Symbol.for("fastify.ajv-compiler.reference"),aae=zD(),uae=HD();function kb(t){let e=new Map,r=new Map;return t&&t.jtdSerializer===!0?function(s,i){let o=XD({},i);if(r.has(o))return r.get(o);let a=new uae(s,i),u=a.buildSerializerFunction.bind(a);return r.set(o,u),u}:function(s,i){let o=XD(s,i.customOptions);if(e.has(o))return e.get(o);let a=new aae(s,i),u=a.buildValidatorFunction.bind(a);return e.set(o,u),i.customOptions.code!==void 0&&(u[QD]=a),u}}function XD(t,e){let r=JSON.stringify(t),n=JSON.stringify(e);return`${r}${n}`}Va.exports=kb;Va.exports.default=kb;Va.exports.AjvCompiler=kb;Va.exports.AjvReference=QD;Va.exports.StandaloneValidator=WD()});var qb=$((wge,ZD)=>{"use strict";var{buildSchemas:lae}=au(),cae=vv(),fae=Ab();function dae(t,e){if(t)return new za(t,e);let r=Object.assign({buildValidator:null,buildSerializer:null},e?.compilersFactory);r.buildValidator||(r.buildValidator=fae()),r.buildSerializer||(r.buildSerializer=cae());let n={bucket:e&&e.bucket||lae,compilersFactory:r,isCustomValidatorCompiler:typeof e?.compilersFactory?.buildValidator=="function",isCustomSerializerCompiler:typeof e?.compilersFactory?.buildValidator=="function"};return new za(void 0,n)}var za=class{constructor(e,r){this.opts=r||e&&e.opts,this.addedSchemas=!1,this.compilersFactory=this.opts.compilersFactory,this.isCustomValidatorCompiler=this.opts.isCustomValidatorCompiler||!1,this.isCustomSerializerCompiler=this.opts.isCustomSerializerCompiler||!1,e?(this.schemaBucket=this.opts.bucket(e.getSchemas()),this.validatorCompiler=e.getValidatorCompiler(),this.serializerCompiler=e.getSerializerCompiler(),this.parent=e):this.schemaBucket=this.opts.bucket()}add(e){return this.addedSchemas=!0,this.schemaBucket.add(e)}getSchema(e){return this.schemaBucket.getSchema(e)}getSchemas(){return this.schemaBucket.getSchemas()}setValidatorCompiler(e){this.validatorCompiler=e,this.isCustomValidatorCompiler=!0}setSerializerCompiler(e){this.serializerCompiler=e,this.isCustomSerializerCompiler=!0}getValidatorCompiler(){return this.validatorCompiler||this.parent&&this.parent.getValidatorCompiler()}getSerializerCompiler(){return this.serializerCompiler||this.parent&&this.parent.getSerializerCompiler()}getSerializerBuilder(){return this.compilersFactory.buildSerializer||this.parent&&this.parent.getSerializerBuilder()}getValidatorBuilder(){return this.compilersFactory.buildValidator||this.parent&&this.parent.getValidatorBuilder()}setupValidator(e){this.validatorCompiler!==void 0&&!this.addedSchemas||(this.validatorCompiler=this.getValidatorBuilder()(this.schemaBucket.getSchemas(),e.ajv))}setupSerializer(e){this.serializerCompiler!==void 0&&!this.addedSchemas||(this.serializerCompiler=this.getSerializerBuilder()(this.schemaBucket.getSchemas(),e.serializerOpts))}};za.buildSchemaController=dae;ZD.exports=za});var Mb=$((Ege,Fb)=>{"use strict";var jb=Py(),Lb=require("assert"),xb=Symbol.for("registered-plugin"),{kTestInternals:hae}=xt(),{exist:pae,existReply:mae,existRequest:yae}=jy(),{FST_ERR_PLUGIN_VERSION_MISMATCH:gae,FST_ERR_PLUGIN_NOT_PRESENT_IN_INSTANCE:_ae}=er();function gc(t){return t[Symbol.for("plugin-meta")]}function vae(t){let e=eL(t);if(e)return e;let r=require.cache,n=Object.keys(r);for(let s=0;s<n.length;s++){let i=n[s];if(r[i].exports===t)return i}return t.name?t.name:null}function $ae(t){return t.toString().split(`
`).slice(0,2).map(e=>e.trim()).join(" -- ")}function eL(t){return t[Symbol.for("fastify.display-name")]}function tL(t){return!!t[Symbol.for("skip-override")]}function rL(t){let e=gc(t);if(!e)return;let r=e.dependencies;r&&(Lb(Array.isArray(r),"The dependencies should be an array of strings"),r.forEach(n=>{Lb(this[xb].indexOf(n)>-1,`The dependency '${n}' of plugin '${e.name}' is not registered`)}))}function nL(t){let e=gc(t);if(!e)return;let{decorators:r,name:n}=e;r&&(r.fastify&&Db(this,"Fastify",r.fastify,n),r.reply&&Db(this,"Reply",r.reply,n),r.request&&Db(this,"Request",r.request,n))}var bae={Fastify:pae,Request:yae,Reply:mae};function Db(t,e,r,n){Lb(Array.isArray(r),"The decorators should be an array of strings"),r.forEach(s=>{let i=typeof n=="string"?` required by '${n}'`:"";if(!bae[e].call(t,s))throw new _ae(s,i,e)})}function wae(t){let e=gc(t);if(!e)return;let r=e.fastify,n=/-rc.+$/.test(this.version);if(!(n===!0&&jb.gt(this.version,jb.coerce(r))===!0)&&r&&jb.satisfies(this.version,r,{includePrerelease:n})===!1)throw new gae(e.name,r,this.version)}function Eae(t){let e=gc(t);if(!e)return;let r=e.name;r&&this[xb].push(r)}function Sae(t){return Eae.call(this,t),wae.call(this,t),nL.call(this,t),rL.call(this,t),tL(t)}Fb.exports={getPluginName:vae,getFuncPreview:$ae,registeredPlugins:xb,getDisplayName:eL,registerPlugin:Sae};Fb.exports[hae]={shouldSkipOverride:tL,getMeta:gc,checkDecorators:nL,checkDependencies:rL}});var iL=$((Sge,sL)=>{"use strict";sL.exports=function(t,e){let n=0;function s(o){return n=n+1&2147483647,`req-${n.toString(36)}`}let i=e||s;return t?function(o){return o.headers[t]||i(o)}:i}});var lL=$((Rge,uL)=>{"use strict";var oL=12,Rae=0,Vb=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,7,7,7,7,7,7,7,7,7,7,7,7,8,7,7,10,9,9,9,11,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,24,36,48,60,72,84,96,0,12,12,12,0,0,0,0,0,0,0,0,0,0,0,24,0,0,0,0,0,0,0,0,0,24,24,24,0,0,0,0,0,0,0,0,0,24,24,0,0,0,0,0,0,0,0,0,0,48,48,48,0,0,0,0,0,0,0,0,0,0,48,48,0,0,0,0,0,0,0,0,0,48,0,0,0,0,0,0,0,0,0,0,127,63,63,63,0,31,15,15,15,7,7,7];function Pae(t){var e=t.indexOf("%");if(e===-1)return t;for(var r=t.length,n="",s=0,i=0,o=e,a=oL;e>-1&&e<r;){var u=aL(t[e+1],4),l=aL(t[e+2],0),c=u|l,f=Vb[c];if(a=Vb[256+a+f],i=i<<6|c&Vb[364+f],a===oL)n+=t.slice(s,o),n+=i<=65535?String.fromCharCode(i):String.fromCharCode(55232+(i>>10),56320+(i&1023)),i=0,s=e+3,e=o=t.indexOf("%",s);else{if(a===Rae)return null;if(e+=3,e<r&&t.charCodeAt(e)===37)continue;return null}}return n+t.slice(s)}var Tae={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};function aL(t,e){var r=Tae[t];return r===void 0?255:r<<e}uL.exports=Pae});var pL=$((Pge,hL)=>{"use strict";var cL=lL(),fL=/\+/g,dL=function(){};dL.prototype=Object.create(null);function Oae(t){let e=new dL;if(typeof t!="string")return e;let r=t.length,n="",s="",i=-1,o=-1,a=!1,u=!1,l=!1,c=!1,f=!1,h=0;for(let d=0;d<r+1;d++)if(h=d!==r?t.charCodeAt(d):38,h===38){if(f=o>i,f||(o=d),n=t.slice(i+1,o),f||n.length>0){l&&(n=n.replace(fL," ")),a&&(n=cL(n)||n),f&&(s=t.slice(o+1,d),c&&(s=s.replace(fL," ")),u&&(s=cL(s)||s));let p=e[n];p===void 0?e[n]=s:p.pop?p.push(s):e[n]=[p,s]}s="",i=d,o=d,a=!1,u=!1,l=!1,c=!1}else h===61?o<=i?o=d:u=!0:h===43?o>i?c=!0:l=!0:h===37&&(o>i?u=!0:a=!0);return e}hL.exports=Oae});var yL=$((Tge,mL)=>{var Zn=Array.from({length:256},(t,e)=>"%"+((e<16?"0":"")+e.toString(16)).toUpperCase()),Nae=new Int8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,1,1,1,0,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,0]);function Iae(t){let e=t.length;if(e===0)return"";let r="",n=0,s=0;e:for(;s<e;s++){let i=t.charCodeAt(s);for(;i<128;){if(Nae[i]!==1&&(n<s&&(r+=t.slice(n,s)),n=s+1,r+=Zn[i]),++s===e)break e;i=t.charCodeAt(s)}if(n<s&&(r+=t.slice(n,s)),i<2048){n=s+1,r+=Zn[192|i>>6]+Zn[128|i&63];continue}if(i<55296||i>=57344){n=s+1,r+=Zn[224|i>>12]+Zn[128|i>>6&63]+Zn[128|i&63];continue}if(++s,s>=e)throw new Error("URI malformed");let o=t.charCodeAt(s)&1023;n=s+1,i=65536+((i&1023)<<10|o),r+=Zn[240|i>>18]+Zn[128|i>>12&63]+Zn[128|i>>6&63]+Zn[128|i&63]}return n===0?t:n<e?r+t.slice(n):r}mL.exports={encodeString:Iae}});var vL=$((Oge,_L)=>{"use strict";var{encodeString:zb}=yL();function gL(t){let e=typeof t;return e==="string"?zb(t):e==="bigint"?t.toString():e==="boolean"?t?"true":"false":e==="number"&&Number.isFinite(t)?t<1e21?""+t:zb(""+t):""}function Cae(t){let e="";if(t===null||typeof t!="object")return e;let r="&",n=Object.keys(t),s=n.length,i=0;for(let o=0;o<s;o++){let a=n[o],u=t[a],l=zb(a)+"=";if(o&&(e+=r),Array.isArray(u)){i=u.length;for(let c=0;c<i;c++)c&&(e+=r),e+=l,e+=gL(u[c])}else e+=l,e+=gL(u)}return e}_L.exports=Cae});var EL=$((Nge,_c)=>{"use strict";var $L=pL(),bL=vL(),wL={parse:$L,stringify:bL};_c.exports=wL;_c.exports.default=wL;_c.exports.parse=$L;_c.exports.stringify=bL});var vc=$((Ige,SL)=>{SL.exports={ROOT:0,GROUP:1,POSITION:2,SET:3,RANGE:4,REPETITION:5,REFERENCE:6,CHAR:7}});var Hb=$(yi=>{var Ke=vc(),Ub=()=>[{type:Ke.RANGE,from:48,to:57}],RL=()=>[{type:Ke.CHAR,value:95},{type:Ke.RANGE,from:97,to:122},{type:Ke.RANGE,from:65,to:90}].concat(Ub()),PL=()=>[{type:Ke.CHAR,value:9},{type:Ke.CHAR,value:10},{type:Ke.CHAR,value:11},{type:Ke.CHAR,value:12},{type:Ke.CHAR,value:13},{type:Ke.CHAR,value:32},{type:Ke.CHAR,value:160},{type:Ke.CHAR,value:5760},{type:Ke.RANGE,from:8192,to:8202},{type:Ke.CHAR,value:8232},{type:Ke.CHAR,value:8233},{type:Ke.CHAR,value:8239},{type:Ke.CHAR,value:8287},{type:Ke.CHAR,value:12288},{type:Ke.CHAR,value:65279}],Aae=()=>[{type:Ke.CHAR,value:10},{type:Ke.CHAR,value:13},{type:Ke.CHAR,value:8232},{type:Ke.CHAR,value:8233}];yi.words=()=>({type:Ke.SET,set:RL(),not:!1});yi.notWords=()=>({type:Ke.SET,set:RL(),not:!0});yi.ints=()=>({type:Ke.SET,set:Ub(),not:!1});yi.notInts=()=>({type:Ke.SET,set:Ub(),not:!0});yi.whitespace=()=>({type:Ke.SET,set:PL(),not:!1});yi.notWhitespace=()=>({type:Ke.SET,set:PL(),not:!0});yi.anyChar=()=>({type:Ke.SET,set:Aae(),not:!0})});var OL=$($c=>{var TL=vc(),Ua=Hb(),kae="@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^ ?",qae={0:0,t:9,n:10,v:11,f:12,r:13};$c.strToChars=function(t){var e=/(\[\\b\])|(\\)?\\(?:u([A-F0-9]{4})|x([A-F0-9]{2})|(0?[0-7]{2})|c([@A-Z[\\\]^?])|([0tnvfr]))/g;return t=t.replace(e,function(r,n,s,i,o,a,u,l){if(s)return r;var c=n?8:i?parseInt(i,16):o?parseInt(o,16):a?parseInt(a,8):u?kae.indexOf(u):qae[l],f=String.fromCharCode(c);return/[[\]{}^$.|?*+()]/.test(f)&&(f="\\"+f),f}),t};$c.tokenizeClass=(t,e)=>{for(var r=[],n=/\\(?:(w)|(d)|(s)|(W)|(D)|(S))|((?:(?:\\)(.)|([^\]\\]))-(?:\\)?([^\]]))|(\])|(?:\\)?([^])/g,s,i;(s=n.exec(t))!=null;)if(s[1])r.push(Ua.words());else if(s[2])r.push(Ua.ints());else if(s[3])r.push(Ua.whitespace());else if(s[4])r.push(Ua.notWords());else if(s[5])r.push(Ua.notInts());else if(s[6])r.push(Ua.notWhitespace());else if(s[7])r.push({type:TL.RANGE,from:(s[8]||s[9]).charCodeAt(0),to:s[10].charCodeAt(0)});else if(i=s[12])r.push({type:TL.CHAR,value:i.charCodeAt(0)});else return[r,n.lastIndex];$c.error(e,"Unterminated character class")};$c.error=(t,e)=>{throw new SyntaxError("Invalid regular expression: /"+t+"/: "+e)}});var NL=$(bc=>{var Yh=vc();bc.wordBoundary=()=>({type:Yh.POSITION,value:"b"});bc.nonWordBoundary=()=>({type:Yh.POSITION,value:"B"});bc.begin=()=>({type:Yh.POSITION,value:"^"});bc.end=()=>({type:Yh.POSITION,value:"$"})});var IL=$((qge,Kb)=>{var Ha=OL(),dn=vc(),go=Hb(),Wh=NL();Kb.exports=t=>{var e=0,r,n,s={type:dn.ROOT,stack:[]},i=s,o=s.stack,a=[],u=g=>{Ha.error(t,`Nothing to repeat at column ${g-1}`)},l=Ha.strToChars(t);for(r=l.length;e<r;)switch(n=l[e++],n){case"\\":switch(n=l[e++],n){case"b":o.push(Wh.wordBoundary());break;case"B":o.push(Wh.nonWordBoundary());break;case"w":o.push(go.words());break;case"W":o.push(go.notWords());break;case"d":o.push(go.ints());break;case"D":o.push(go.notInts());break;case"s":o.push(go.whitespace());break;case"S":o.push(go.notWhitespace());break;default:/\d/.test(n)?o.push({type:dn.REFERENCE,value:parseInt(n,10)}):o.push({type:dn.CHAR,value:n.charCodeAt(0)})}break;case"^":o.push(Wh.begin());break;case"$":o.push(Wh.end());break;case"[":var c;l[e]==="^"?(c=!0,e++):c=!1;var f=Ha.tokenizeClass(l.slice(e),t);e+=f[1],o.push({type:dn.SET,set:f[0],not:c});break;case".":o.push(go.anyChar());break;case"(":var h={type:dn.GROUP,stack:[],remember:!0};n=l[e],n==="?"&&(n=l[e+1],e+=2,n==="="?h.followedBy=!0:n==="!"?h.notFollowedBy=!0:n!==":"&&Ha.error(t,`Invalid group, character '${n}' after '?' at column ${e-1}`),h.remember=!1),o.push(h),a.push(i),i=h,o=h.stack;break;case")":a.length===0&&Ha.error(t,`Unmatched ) at column ${e-1}`),i=a.pop(),o=i.options?i.options[i.options.length-1]:i.stack;break;case"|":i.options||(i.options=[i.stack],delete i.stack);var d=[];i.options.push(d),o=d;break;case"{":var p=/^(\d+)(,(\d+)?)?\}/.exec(l.slice(e)),m,v;p!==null?(o.length===0&&u(e),m=parseInt(p[1],10),v=p[2]?p[3]?parseInt(p[3],10):1/0:m,e+=p[0].length,o.push({type:dn.REPETITION,min:m,max:v,value:o.pop()})):o.push({type:dn.CHAR,value:123});break;case"?":o.length===0&&u(e),o.push({type:dn.REPETITION,min:0,max:1,value:o.pop()});break;case"+":o.length===0&&u(e),o.push({type:dn.REPETITION,min:1,max:1/0,value:o.pop()});break;case"*":o.length===0&&u(e),o.push({type:dn.REPETITION,min:0,max:1/0,value:o.pop()});break;default:o.push({type:dn.CHAR,value:n.charCodeAt(0)})}return a.length!==0&&Ha.error(t,"Unterminated group"),s};Kb.exports.types=dn});var kL=$((jge,AL)=>{"use strict";var CL=IL(),jae=CL.types;AL.exports=function(t,e){e||(e={});var r=e.limit===void 0?25:e.limit;Dae(t)?t=t.source:typeof t!="string"&&(t=String(t));try{t=CL(t)}catch{return!1}var n=0;return function s(i,o){var a,u,l;if(i.type===jae.REPETITION&&(o++,n++,o>1||n>r))return!1;if(i.options){for(a=0,l=i.options.length;a<l;a++)if(u=s({stack:i.options[a]},o),!u)return!1}var c=i.stack||i.value&&i.value.stack;if(!c)return!0;for(a=0;a<c.length;a++)if(u=s(c[a],o),!u)return!1;return!0}(t,0)};function Dae(t){return{}.toString.call(t)==="[object RegExp]"}});var Xh=$((Dge,qL)=>{"use strict";qL.exports={name:"__fmw_internal_strategy_merged_tree_http_method__",storage:function(){let t={};return{get:e=>t[e]||null,set:(e,r)=>{t[e]=r}}},deriveConstraint:t=>t.method,mustMatchWhenDerived:!0}});var VL=$((Lge,ML)=>{"use strict";var jL=Vn(),DL=Xh(),LL=Symbol("treeData");function xL(t,e=""){let r="",n=Object.keys(t);for(let s=0;s<n.length;s++){let i=n[s],o=t[i],a=s===n.length-1,u=a?"\u2514\u2500\u2500 ":"\u251C\u2500\u2500 ",l=a?"    ":"\u2502   ",f=(o[LL]||"").split(`
`).join(`
`+e+l);r+=e+u+i+f+`
`,r+=xL(o,e+l)}return r}function Lae(t){let e=t.name||"";return e=e.replace("bound","").trim(),e=(e||"anonymous")+"()",e}function FL(t){return Array.isArray(t)?t.map(e=>FL(e)):typeof t=="symbol"?t.toString():typeof t=="function"?Lae(t):t}function xae(t,e){if(!e.includeMeta)return{};let r=e.buildPrettyMeta(t),n={},s=e.includeMeta;Array.isArray(s)||(s=Reflect.ownKeys(r));for(let i of s){if(!Object.prototype.hasOwnProperty.call(r,i))continue;let o=i.toString(),a=r[i];if(a!=null){let u=JSON.stringify(FL(a));n[o]=u}}return n}function Fae(t){let e="";for(let[r,n]of Object.entries(t))e+=`
\u2022 (${r}) ${n}`;return e}function Mae(t){let e={...t.opts.constraints},r=e[DL.name];return delete e[DL.name],{...t,method:r,opts:{constraints:e}}}function Vae(t){let e=` (${t.method})`,r=t.opts.constraints||{};return Object.keys(r).length!==0&&(e+=" "+JSON.stringify(r)),e+=Fae(t.metaData),e}function zae(t){return t.reduce((e,r)=>{for(let n of e)if(jL(r.opts.constraints,n.opts.constraints)&&jL(r.metaData,n.metaData))return n.method+=", "+r.method,e;return e.push(r),e},[])}function Uae(t,e,r){let n=t.routes;return r.method===void 0&&(n=n.map(Mae)),n=n.map(s=>(s.metaData=xae(s,r),s)),r.method===void 0&&(n=zae(n)),n.map(Vae).join(`
${e}`)}function Qh(t,e,r,n){if((t.isLeafNode||n.commonPrefix!==!1)&&(r=r||"(empty root node)",e=e[r]={},t.isLeafNode&&(e[LL]=Uae(t,r,n)),r=""),t.staticChildren)for(let s of Object.values(t.staticChildren))Qh(s,e,r+s.prefix,n);if(t.parametricChildren)for(let s of Object.values(t.parametricChildren)){let i=Array.from(s.nodePaths).join("|");Qh(s,e,r+i,n)}t.wildcardChild&&Qh(t.wildcardChild,e,"*",n)}function Hae(t,e){let r={};return Qh(t,r,t.prefix,e),xL(r)}ML.exports={prettyPrintTree:Hae}});var UL=$((xge,zL)=>{"use strict";var Kae=Xh(),Bb=class{constructor(){this.unconstrainedHandler=null,this.constraints=[],this.handlers=[],this.constrainedHandlerStores=null}getMatchingHandler(e){return e===void 0?this.unconstrainedHandler:this._getHandlerMatchingConstraints(e)}addHandler(e,r){let n=r.params,s=r.opts.constraints||{},i={params:n,constraints:s,handler:r.handler,store:r.store||null,_createParamsObject:this._compileCreateParamsObject(n)},o=Object.keys(s);o.length===0&&(this.unconstrainedHandler=i);for(let u of o)this.constraints.includes(u)||(u==="version"?this.constraints.unshift(u):this.constraints.push(u));let a=o.includes(Kae.name);if(!a&&this.handlers.length>=32)throw new Error("find-my-way supports a maximum of 32 route handlers per node when there are constraints, limit reached");this.handlers.push(i),this.handlers.sort((u,l)=>Object.keys(u.constraints).length-Object.keys(l.constraints).length),a||this._compileGetHandlerMatchingConstraints(e,s)}_compileCreateParamsObject(e){let r=[];for(let n=0;n<e.length;n++)r.push(`'${e[n]}': paramsArray[${n}]`);return new Function("paramsArray",`return {${r.join(",")}}`)}_getHandlerMatchingConstraints(){return null}_buildConstraintStore(e,r){for(let n=0;n<this.handlers.length;n++){let i=this.handlers[n].constraints[r];if(i!==void 0){let o=e.get(i)||0;o|=1<<n,e.set(i,o)}}}_constrainedIndexBitmask(e){let r=0;for(let n=0;n<this.handlers.length;n++)this.handlers[n].constraints[e]!==void 0&&(r|=1<<n);return~r}_compileGetHandlerMatchingConstraints(e){this.constrainedHandlerStores={};for(let n of this.constraints){let s=e.newStoreForConstraint(n);this.constrainedHandlerStores[n]=s,this._buildConstraintStore(s,n)}let r=[];r.push(`
    let candidates = ${(1<<this.handlers.length)-1}
    let mask, matches
    `);for(let n of this.constraints){r.push(`
      mask = ${this._constrainedIndexBitmask(n)}
      value = derivedConstraints.${n}
      `);let i=e.strategies[n].mustMatchWhenDerived?"matches":"(matches | mask)";r.push(`
      if (value === undefined) {
        candidates &= mask
      } else {
        matches = this.constrainedHandlerStores.${n}.get(value) || 0
        candidates &= ${i}
      }
      if (candidates === 0) return null;
      `)}for(let n in e.strategies)e.strategies[n].mustMatchWhenDerived&&!this.constraints.includes(n)&&r.push(`if (derivedConstraints.${n} !== undefined) return null`);r.push("return this.handlers[Math.floor(Math.log2(candidates))]"),this._getHandlerMatchingConstraints=new Function("derivedConstraints",r.join(`
`))}};zL.exports=Bb});var KL=$((Fge,HL)=>{"use strict";var Bae=UL(),np={STATIC:0,PARAMETRIC:1,WILDCARD:2},Zh=class{constructor(){this.isLeafNode=!1,this.routes=null,this.handlerStorage=null}addRoute(e,r){this.routes===null&&(this.routes=[]),this.handlerStorage===null&&(this.handlerStorage=new Bae),this.isLeafNode=!0,this.routes.push(e),this.handlerStorage.addHandler(r,e)}},ep=class extends Zh{constructor(){super(),this.staticChildren={}}findStaticMatchingChild(e,r){let n=this.staticChildren[e.charAt(r)];return n===void 0||!n.matchPrefix(e,r)?null:n}createStaticChild(e){if(e.length===0)return this;let r=this.staticChildren[e.charAt(0)];if(r){let s=1;for(;s<r.prefix.length;s++)if(e.charCodeAt(s)!==r.prefix.charCodeAt(s)){r=r.split(this,s);break}return r.createStaticChild(e.slice(s))}let n=e.charAt(0);return this.staticChildren[n]=new Ka(e),this.staticChildren[n]}},Ka=class extends ep{constructor(e){super(),this.prefix=e,this.wildcardChild=null,this.parametricChildren=[],this.kind=np.STATIC,this._compilePrefixMatch()}createParametricChild(e,r,n){let s=e&&e.source,i=this.parametricChildren.find(o=>(o.regex&&o.regex.source)===s);return i?(i.nodePaths.add(n),i):(i=new tp(e,r,n),this.parametricChildren.push(i),this.parametricChildren.sort((o,a)=>o.isRegex?a.isRegex?o.staticSuffix===null?1:a.staticSuffix===null?-1:a.staticSuffix.endsWith(o.staticSuffix)?1:o.staticSuffix.endsWith(a.staticSuffix)?-1:0:-1:1),i)}createWildcardChild(){return this.wildcardChild?this.wildcardChild:(this.wildcardChild=new rp,this.wildcardChild)}split(e,r){let n=this.prefix.slice(0,r),s=this.prefix.slice(r);this.prefix=s,this._compilePrefixMatch();let i=new Ka(n);return i.staticChildren[s.charAt(0)]=this,e.staticChildren[n.charAt(0)]=i,i}getNextNode(e,r,n,s){let i=this.findStaticMatchingChild(e,r),o=0;if(i===null){if(this.parametricChildren.length===0)return this.wildcardChild;i=this.parametricChildren[0],o=1}this.wildcardChild!==null&&n.push({paramsCount:s,brotherPathIndex:r,brotherNode:this.wildcardChild});for(let a=this.parametricChildren.length-1;a>=o;a--)n.push({paramsCount:s,brotherPathIndex:r,brotherNode:this.parametricChildren[a]});return i}_compilePrefixMatch(){if(this.prefix.length===1){this.matchPrefix=()=>!0;return}let e=[];for(let r=1;r<this.prefix.length;r++){let n=this.prefix.charCodeAt(r);e.push(`path.charCodeAt(i + ${r}) === ${n}`)}this.matchPrefix=new Function("path","i",`return ${e.join(" && ")}`)}},tp=class extends ep{constructor(e,r,n){super(),this.isRegex=!!e,this.regex=e||null,this.staticSuffix=r||null,this.kind=np.PARAMETRIC,this.nodePaths=new Set([n])}getNextNode(e,r){return this.findStaticMatchingChild(e,r)}},rp=class extends Zh{constructor(){super(),this.kind=np.WILDCARD}getNextNode(){return null}};HL.exports={StaticNode:Ka,ParametricNode:tp,WildcardNode:rp,NODE_TYPES:np}});var GL=$((Mge,BL)=>{"use strict";var Gae=require("assert");function wc(){if(!(this instanceof wc))return new wc;this.store={},this.maxMajor=0,this.maxMinors={},this.maxPatches={}}wc.prototype.set=function(t,e){if(typeof t!="string")throw new TypeError("Version should be a string");let[r,n,s]=t.split(".");return r=Number(r)||0,n=Number(n)||0,s=Number(s)||0,r>=this.maxMajor&&(this.maxMajor=r,this.store.x=e,this.store["*"]=e,this.store["x.x"]=e,this.store["x.x.x"]=e),n>=(this.maxMinors[r]||0)&&(this.maxMinors[r]=n,this.store[`${r}.x`]=e,this.store[`${r}.x.x`]=e),s>=(this.store[`${r}.${n}`]||0)&&(this.maxPatches[`${r}.${n}`]=s,this.store[`${r}.${n}.x`]=e),this.store[`${r}.${n}.${s}`]=e,this};wc.prototype.get=function(t){return this.store[t]};BL.exports={name:"version",mustMatchWhenDerived:!0,storage:wc,validate(t){Gae(typeof t=="string","Version should be a string")}}});var YL=$((Vge,JL)=>{"use strict";var Jae=require("assert");function Yae(){let t={},e=[];return{get:r=>{let n=t[r];if(n)return n;for(let s of e)if(s.host.test(r))return s.value},set:(r,n)=>{r instanceof RegExp?e.push({host:r,value:n}):t[r]=n}}}JL.exports={name:"host",mustMatchWhenDerived:!1,storage:Yae,validate(t){Jae(typeof t=="string"||Object.prototype.toString.call(t)==="[object RegExp]","Host should be a string or a RegExp")}}});var XL=$((zge,WL)=>{"use strict";var Wae=GL(),Xae=YL(),Gb=require("assert"),Jb=class{constructor(e){if(this.strategies={version:Wae,host:Xae},this.strategiesInUse=new Set,this.asyncStrategiesInUse=new Set,e)for(let r of Object.values(e))this.addConstraintStrategy(r)}isStrategyUsed(e){return this.strategiesInUse.has(e)||this.asyncStrategiesInUse.has(e)}hasConstraintStrategy(e){let r=this.strategies[e];return r!==void 0?r.isCustom||this.isStrategyUsed(e):!1}addConstraintStrategy(e){if(Gb(typeof e.name=="string"&&e.name!=="","strategy.name is required."),Gb(e.storage&&typeof e.storage=="function","strategy.storage function is required."),Gb(e.deriveConstraint&&typeof e.deriveConstraint=="function","strategy.deriveConstraint function is required."),this.strategies[e.name]&&this.strategies[e.name].isCustom)throw new Error(`There already exists a custom constraint with the name ${e.name}.`);if(this.isStrategyUsed(e.name))throw new Error(`There already exists a route with ${e.name} constraint.`);e.isCustom=!0,e.isAsync=e.deriveConstraint.length===3,this.strategies[e.name]=e,e.mustMatchWhenDerived&&this.noteUsage({[e.name]:e})}deriveConstraints(e,r,n){let s=this.deriveSyncConstraints(e,r);if(n===void 0)return s;this.deriveAsyncConstraints(s,e,r,n)}deriveSyncConstraints(e,r){}noteUsage(e){if(e){let r=this.strategiesInUse.size;for(let n in e)this.strategies[n].isAsync?this.asyncStrategiesInUse.add(n):this.strategiesInUse.add(n);r!==this.strategiesInUse.size&&this._buildDeriveConstraints()}}newStoreForConstraint(e){if(!this.strategies[e])throw new Error(`No strategy registered for constraint key ${e}`);return this.strategies[e].storage()}validateConstraints(e){for(let r in e){let n=e[r];if(typeof n>"u")throw new Error("Can't pass an undefined constraint value, must pass null or no key at all");let s=this.strategies[r];if(!s)throw new Error(`No strategy registered for constraint key ${r}`);s.validate&&s.validate(n)}}deriveAsyncConstraints(e,r,n,s){let i=this.asyncStrategiesInUse.size;if(i===0){s(null,e);return}e=e||{};for(let o of this.asyncStrategiesInUse)this.strategies[o].deriveConstraint(r,n,(u,l)=>{if(u!==null){s(u);return}e[o]=l,--i===0&&s(null,e)})}_buildDeriveConstraints(){if(this.strategiesInUse.size===0)return;let e=["return {"];for(let r of this.strategiesInUse){let n=this.strategies[r];if(n.isCustom)e.push(`  ${n.name}: this.strategies.${r}.deriveConstraint(req, ctx),`);else if(r==="version")e.push("   version: req.headers['accept-version'],");else if(r==="host")e.push("   host: req.headers.host || req.headers[':authority'],");else throw new Error("unknown non-custom strategy for compiling constraint derivation function")}e.push("}"),this.deriveSyncConstraints=new Function("req","ctx",e.join(`
`)).bind(this)}};WL.exports=Jb});var ZL=$((Uge,QL)=>{"use strict";var Qae=["ACL","BIND","CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LINK","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCALENDAR","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REBIND","REPORT","SEARCH","SOURCE","SUBSCRIBE","TRACE","UNBIND","UNLINK","UNLOCK","UNSUBSCRIBE"];QL.exports=Qae});var rx=$((Hge,tx)=>{"use strict";function ex(t,e){return t===50?e===53?"%":e===51?"#":e===52?"$":e===54?"&":e===66||e===98?"+":e===67||e===99?",":e===70||e===102?"/":null:t===51?e===65||e===97?":":e===66||e===98?";":e===68||e===100?"=":e===70||e===102?"?":null:t===52&&e===48?"@":null}function Zae(t){let e=!1,r=!1,n="";for(let i=1;i<t.length;i++){let o=t.charCodeAt(i);if(o===37){let a=t.charCodeAt(i+1),u=t.charCodeAt(i+2);ex(a,u)===null?e=!0:(r=!0,a===50&&u===53&&(e=!0,t=t.slice(0,i+1)+"25"+t.slice(i+1),i+=2),i+=2)}else if(o===63||o===59||o===35){n=t.slice(i+1),t=t.slice(0,i);break}}return{path:e?decodeURI(t):t,querystring:n,shouldDecodeParam:r}}function eue(t){let e=t.indexOf("%");if(e===-1)return t;let r="",n=e;for(let s=e;s<t.length;s++)if(t.charCodeAt(s)===37){let i=t.charCodeAt(s+1),o=t.charCodeAt(s+2),a=ex(i,o);r+=t.slice(n,s)+a,n=s+3}return t.slice(0,e)+r+t.slice(n)}tx.exports={safeDecodeURI:Zae,safeDecodeURIComponent:eue}});var tw=$((Kge,ux)=>{"use strict";var It=require("assert"),tue=EL(),Qb=kL(),ox=Vn(),{prettyPrintTree:nx}=VL(),{StaticNode:sx,NODE_TYPES:Yb}=KL(),rue=XL(),Ba=ZL(),Wb=Xh(),{safeDecodeURI:nue,safeDecodeURIComponent:ix}=rx(),ax=/^https?:\/\/.*?\//,_o=/(\/:[^/()]*?)\?(\/?)/;if(!Qb(ax))throw new Error("the FULL_PATH_REGEXP is not safe, update this module");if(!Qb(_o))throw new Error("the OPTIONAL_PARAM_REGEXP is not safe, update this module");function Rt(t){if(!(this instanceof Rt))return new Rt(t);t=t||{},this._opts=t,t.defaultRoute?(It(typeof t.defaultRoute=="function","The default route must be a function"),this.defaultRoute=t.defaultRoute):this.defaultRoute=null,t.onBadUrl?(It(typeof t.onBadUrl=="function","The bad url handler must be a function"),this.onBadUrl=t.onBadUrl):this.onBadUrl=null,t.buildPrettyMeta?(It(typeof t.buildPrettyMeta=="function","buildPrettyMeta must be a function"),this.buildPrettyMeta=t.buildPrettyMeta):this.buildPrettyMeta=aue,t.querystringParser?(It(typeof t.querystringParser=="function","querystringParser must be a function"),this.querystringParser=t.querystringParser):this.querystringParser=e=>e===""?{}:tue.parse(e),this.caseSensitive=t.caseSensitive===void 0?!0:t.caseSensitive,this.ignoreTrailingSlash=t.ignoreTrailingSlash||!1,this.ignoreDuplicateSlashes=t.ignoreDuplicateSlashes||!1,this.maxParamLength=t.maxParamLength||100,this.allowUnsafeRegex=t.allowUnsafeRegex||!1,this.constrainer=new rue(t.constraints),this.routes=[],this.trees={}}Rt.prototype.on=function(e,r,n,s,i){typeof n=="function"&&(s!==void 0&&(i=s),s=n,n={}),It(typeof r=="string","Path should be a string"),It(r.length>0,"The path could not be empty"),It(r[0]==="/"||r[0]==="*","The first character of a path should be `/` or `*`"),It(typeof s=="function","Handler should be a function");let o=r.match(_o);if(o){It(r.length===o.index+o[0].length,"Optional Parameter needs to be the last parameter of the path");let l=r.replace(_o,"$1$2"),c=r.replace(_o,"$2");this.on(e,l,n,s,i),this.on(e,c,n,s,i);return}let a=r;this.ignoreDuplicateSlashes&&(r=Zb(r)),this.ignoreTrailingSlash&&(r=ew(r));let u=Array.isArray(e)?e:[e];for(let l of u)It(typeof l=="string","Method should be a string"),It(Ba.includes(l),`Method '${l}' is not an http method.`),this._on(l,r,n,s,i,a)};Rt.prototype._on=function(e,r,n,s,i){let o={};n.constraints!==void 0&&(It(typeof n.constraints=="object"&&n.constraints!==null,"Constraints should be an object"),Object.keys(n.constraints).length!==0&&(o=n.constraints)),this.constrainer.validateConstraints(o),this.constrainer.noteUsage(o),this.trees[e]===void 0&&(this.trees[e]=new sx("/"));let a=r;if(a==="*"&&this.trees[e].prefix.length!==0){let h=this.trees[e];this.trees[e]=new sx(""),this.trees[e].staticChildren["/"]=h}let u=this.trees[e],l=u.prefix.length,c=[];for(let h=0;h<=a.length;h++){if(a.charCodeAt(h)===58&&a.charCodeAt(h+1)===58){h++;continue}let d=a.charCodeAt(h)===58&&a.charCodeAt(h+1)!==58,p=a.charCodeAt(h)===42;if(d||p||h===a.length&&h!==l){let m=a.slice(l,h);this.caseSensitive||(m=m.toLowerCase()),m=m.split("::").join(":"),m=m.split("%").join("%25"),u=u.createStaticChild(m)}if(d){let m=!1,v=[],g=h+1;for(let w=g;;w++){let _=a.charCodeAt(w),y=_===40,b=_===45||_===46,T=_===47||w===a.length;if(y||b||T){let S=a.slice(g,w);if(c.push(S),m=m||y||b,y){let I=oue(a,w),O=a.slice(w,I+1);this.allowUnsafeRegex||It(Qb(new RegExp(O)),`The regex '${O}' is not safe!`),v.push(iue(O)),w=I+1}else v.push("(.*?)");let N=w;for(;w<a.length;w++){let I=a.charCodeAt(w);if(I===47)break;if(I===58)if(a.charCodeAt(w+1)===58)w++;else break}let A=a.slice(N,w);if(A&&(A=A.split("::").join(":"),A=A.split("%").join("%25"),v.push(sue(A))),g=w+1,T||a.charCodeAt(w)===47||w===a.length){let I=m?"()"+A:A,O=a.slice(h,w);a=a.slice(0,h+1)+I+a.slice(w),h+=I.length;let q=m?new RegExp("^"+v.join("")+"$"):null;u=u.createParametricChild(q,A||null,O),l=h+1;break}}}}else if(p&&(c.push("*"),u=u.createWildcardChild(),l=h+1,h!==a.length-1))throw new Error("Wildcard must be the last character in the route")}this.caseSensitive||(a=a.toLowerCase()),a==="*"&&(a="/*");for(let h of this.routes){let d=h.opts.constraints||{};if(h.method===e&&h.pattern===a&&ox(d,o))throw new Error(`Method '${e}' already declared for route '${a}' with constraints '${JSON.stringify(o)}'`)}let f={method:e,path:r,pattern:a,params:c,opts:n,handler:s,store:i};this.routes.push(f),u.addRoute(f,this.constrainer)};Rt.prototype.hasConstraintStrategy=function(t){return this.constrainer.hasConstraintStrategy(t)};Rt.prototype.addConstraintStrategy=function(t){this.constrainer.addConstraintStrategy(t),this._rebuild(this.routes)};Rt.prototype.reset=function(){this.trees={},this.routes=[]};Rt.prototype.off=function(e,r,n){It(typeof r=="string","Path should be a string"),It(r.length>0,"The path could not be empty"),It(r[0]==="/"||r[0]==="*","The first character of a path should be `/` or `*`"),It(typeof n>"u"||typeof n=="object"&&!Array.isArray(n)&&n!==null,"Constraints should be an object or undefined.");let s=r.match(_o);if(s){It(r.length===s.index+s[0].length,"Optional Parameter needs to be the last parameter of the path");let o=r.replace(_o,"$1$2"),a=r.replace(_o,"$2");this.off(e,o,n),this.off(e,a,n);return}this.ignoreDuplicateSlashes&&(r=Zb(r)),this.ignoreTrailingSlash&&(r=ew(r));let i=Array.isArray(e)?e:[e];for(let o of i)this._off(o,r,n)};Rt.prototype._off=function(e,r,n){It(typeof e=="string","Method should be a string"),It(Ba.includes(e),`Method '${e}' is not an http method.`);function s(u){return e!==u.method||r!==u.path}function i(u){return s(u)||!ox(n,u.opts.constraints||{})}let o=n?i:s,a=this.routes.filter(o);this._rebuild(a)};Rt.prototype.lookup=function(e,r,n,s){if(typeof n=="function"&&(s=n,n=void 0),s===void 0){let i=this.constrainer.deriveConstraints(e,n),o=this.find(e.method,e.url,i);return this.callHandler(o,e,r,n)}this.constrainer.deriveConstraints(e,n,(i,o)=>{if(i!==null){s(i);return}try{let a=this.find(e.method,e.url,o),u=this.callHandler(a,e,r,n);s(null,u)}catch(a){s(a)}})};Rt.prototype.callHandler=function(e,r,n,s){return e===null?this._defaultRoute(r,n,s):s===void 0?e.handler(r,n,e.params,e.store,e.searchParams):e.handler.call(s,r,n,e.params,e.store,e.searchParams)};Rt.prototype.find=function(e,r,n){let s=this.trees[e];if(s===void 0)return null;r.charCodeAt(0)!==47&&(r=r.replace(ax,"/")),this.ignoreDuplicateSlashes&&(r=Zb(r));let i,o,a;try{i=nue(r),r=i.path,o=i.querystring,a=i.shouldDecodeParam}catch{return this._onBadUrl(r)}this.ignoreTrailingSlash&&(r=ew(r));let u=r;this.caseSensitive===!1&&(r=r.toLowerCase());let l=this.maxParamLength,c=s.prefix.length,f=[],h=r.length,d=[];for(;;){if(c===h&&s.isLeafNode){let m=s.handlerStorage.getMatchingHandler(n);if(m!==null)return{handler:m.handler,store:m.store,params:m._createParamsObject(f),searchParams:this.querystringParser(o)}}let p=s.getNextNode(r,c,d,f.length);if(p===null){if(d.length===0)return null;let m=d.pop();c=m.brotherPathIndex,f.splice(m.paramsCount),p=m.brotherNode}if(s=p,s.kind===Yb.STATIC){c+=s.prefix.length;continue}if(s.kind===Yb.WILDCARD){let m=u.slice(c);a&&(m=ix(m)),f.push(m),c=h;continue}if(s.kind===Yb.PARAMETRIC){let m=u.indexOf("/",c);m===-1&&(m=h);let v=u.slice(c,m);if(a&&(v=ix(v)),s.isRegex){let g=s.regex.exec(v);if(g===null)continue;for(let w=1;w<g.length;w++){let _=g[w];if(_.length>l)return null;f.push(_)}}else{if(v.length>l)return null;f.push(v)}c=m}}};Rt.prototype._rebuild=function(t){this.reset();for(let e of t){let{method:r,path:n,opts:s,handler:i,store:o}=e;this._on(r,n,s,i,o)}};Rt.prototype._defaultRoute=function(t,e,r){if(this.defaultRoute!==null)return r===void 0?this.defaultRoute(t,e):this.defaultRoute.call(r,t,e);e.statusCode=404,e.end()};Rt.prototype._onBadUrl=function(t){if(this.onBadUrl===null)return null;let e=this.onBadUrl;return{handler:(r,n,s)=>e(t,r,n),params:{},store:null}};Rt.prototype.prettyPrint=function(t={}){let e=t.method;if(t.buildPrettyMeta=this.buildPrettyMeta.bind(this),e===void 0){let{version:n,host:s,...i}=this.constrainer.strategies;i[Wb.name]=Wb;let o=new Rt({...this._opts,constraints:i}),a=this.routes.map(u=>{let l={...u.opts.constraints,[Wb.name]:u.method};return{...u,method:"MERGED",opts:{constraints:l}}});return o._rebuild(a),nx(o.trees.MERGED,t)}let r=this.trees[e];return nx(r,t)};for(Xb in Ba){if(!Ba.hasOwnProperty(Xb))continue;let t=Ba[Xb],e=t.toLowerCase();if(Rt.prototype[e])throw new Error("Method already exists: "+e);Rt.prototype[e]=function(r,n,s){return this.on(t,r,n,s)}}var Xb;Rt.prototype.all=function(t,e,r){this.on(Ba,t,e,r)};ux.exports=Rt;function sue(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Zb(t){return t.replace(/\/\/+/g,"/")}function ew(t){return t.length>1&&t.charCodeAt(t.length-1)===47?t.slice(0,-1):t}function iue(t){return t.charCodeAt(1)===94&&(t=t.slice(0,1)+t.slice(2)),t.charCodeAt(t.length-2)===36&&(t=t.slice(0,t.length-2)+t.slice(t.length-1)),t}function oue(t,e){for(var r=1;e<t.length;){if(e++,t[e]==="\\"){e++;continue}if(t[e]===")"?r--:t[e]==="("&&r++,!r)return e}throw new TypeError('Invalid regexp expression in "'+t+'"')}function aue(t){return t?t.store?Object.assign({},t.store):{}:{}}});var rw=$((Bge,lx)=>{"use strict";var{kFourOhFourContext:uue,kReplySerializerDefault:lue,kSchemaErrorFormatter:cue,kErrorHandler:fue,kReply:due,kRequest:hue,kBodyLimit:pue,kLogLevel:mue,kContentTypeParser:yue,kRouteByFastify:gue,kRequestCacheValidateFns:_ue,kReplyCacheSerializeFns:vue,kPublicRouteContext:$ue}=xt();function bue({schema:t,handler:e,config:r,errorHandler:n,bodyLimit:s,logLevel:i,logSerializers:o,attachValidation:a,validatorCompiler:u,serializerCompiler:l,replySerializer:c,schemaErrorFormatter:f,exposeHeadRoute:h,prefixTrailingSlash:d,server:p,isFastify:m}){this.schema=t,this.handler=e,this.Reply=p[due],this.Request=p[hue],this.contentTypeParser=p[yue],this.onRequest=null,this.onSend=null,this.onError=null,this.onTimeout=null,this.preHandler=null,this.onResponse=null,this.preSerialization=null,this.onRequestAbort=null,this.config=r,this.errorHandler=n||p[fue],this._middie=null,this._parserOptions={limit:s||p[pue]},this.exposeHeadRoute=h,this.prefixTrailingSlash=d,this.logLevel=i||p[mue],this.logSerializers=o,this[uue]=null,this.attachValidation=a,this[lue]=c,this.schemaErrorFormatter=f||p[cue]||Eue,this[gue]=m,this[_ue]=null,this[vue]=null,this.validatorCompiler=u||null,this.serializerCompiler=l||null,this[$ue]=wue(this),this.server=p}function wue(t){return Object.create(null,{schema:{enumerable:!0,get(){return t.schema}},config:{enumerable:!0,get(){return t.config}}})}function Eue(t,e){let r="",n=", ";for(var s=0;s!==t.length;++s){let i=t[s];r+=e+(i.instancePath||"")+" "+i.message+n}return new Error(r.slice(0,-n.length))}lx.exports=bue});var fx=$((Gge,cx)=>{"use strict";function nw(t,e,r,n){if(r===void 0)return e.header("content-length","0"),n(null,null);if(typeof r.resume=="function")return r.on("error",i=>{e.log.error({err:i},"Error on Stream found for HEAD route")}),r.resume(),n(null,null);let s=""+Buffer.byteLength(r);e.header("content-length",s),n(null,null)}function Sue(t){return t==null?nw:Array.isArray(t)?[...t,nw]:[t,nw]}cx.exports={parseHeadOnSendHandlers:Sue}});var Tx=$((Jge,Px)=>{"use strict";var Rue=tw(),Pue=rw(),dx=sm(),{hookRunner:Sx,hookIterator:aw,onRequestAbortHookRunner:Tue,lifecycleHooks:hx}=Ti(),{supportedMethods:Oue}=Iy(),{normalizeSchema:Nue}=au(),{parseHeadOnSendHandlers:Iue}=fx(),sp=Pi(),{compileSchemasForValidation:Cue,compileSchemasForSerialization:Aue}=Zp(),{FST_ERR_SCH_VALIDATION_BUILD:kue,FST_ERR_SCH_SERIALIZATION_BUILD:que,FST_ERR_DEFAULT_ROUTE_INVALID_TYPE:jue,FST_ERR_DUPLICATED_ROUTE:Due,FST_ERR_INVALID_URL:Lue,FST_ERR_SEND_UNDEFINED_ERR:xue,FST_ERR_HOOK_INVALID_HANDLER:px,FST_ERR_ROUTE_OPTIONS_NOT_OBJ:Fue,FST_ERR_ROUTE_DUPLICATED_HANDLER:Mue,FST_ERR_ROUTE_HANDLER_NOT_FN:mx,FST_ERR_ROUTE_MISSING_HANDLER:Vue,FST_ERR_ROUTE_METHOD_NOT_SUPPORTED:zue,FST_ERR_ROUTE_BODY_VALIDATION_SCHEMA_NOT_SUPPORTED:Uue,FST_ERR_ROUTE_BODY_LIMIT_OPTION_NOT_INT:Hue}=er(),{kRoutePrefix:Kue,kLogLevel:Bue,kLogSerializers:yx,kHooks:gx,kSchemaController:Gue,kOptions:_x,kReplySerializerDefault:sw,kReplyIsError:Jue,kRequestPayloadStream:ip,kDisableRequestLogging:Yue,kSchemaErrorFormatter:Wue,kErrorHandler:vx,kHasBeenDecorated:$x,kRequestAcceptVersion:iw,kRouteByFastify:ow,kRouteContext:bx}=xt(),{buildErrorHandler:Xue}=uu();function Que(t){let e=Rue(t.config),r,n,s,i,o,a,u,l,c,f,h,d,p,m,v,g=!1;return{setup(A,I){r=I.avvio,n=I.fourOhFour,i=I.logger,o=I.hasLogger,a=I.setupResponseListeners,u=I.throwIfAlreadyStarted,m=I.validateHTTPVersion,p=A.exposeHeadRoutes,s=A.requestIdLogLabel,l=A.genReqId,c=A.disableRequestLogging,f=A.ignoreTrailingSlash,h=A.ignoreDuplicateSlashes,d=Object.prototype.hasOwnProperty.call(A,"return503OnClosing")?A.return503OnClosing:!0,v=I.keepAliveConnections},routing:e.lookup.bind(e),route:S,hasRoute:T,prepareRoute:b,getDefaultRoute:function(){return sp.emit("FSTDEP014"),e.defaultRoute},setDefaultRoute:function(A){if(sp.emit("FSTDEP014"),typeof A!="function")throw new jue;e.defaultRoute=A},routeHandler:N,closeRoutes:()=>{g=!0},printRoutes:e.prettyPrint.bind(e),addConstraintStrategy:w,hasConstraintStrategy:_,isAsyncConstraint:y};function w(A){return u("Cannot add constraint strategy!"),e.addConstraintStrategy(A)}function _(A){return e.hasConstraintStrategy(A)}function y(){return e.constrainer.asyncStrategiesInUse.size>0}function b({method:A,url:I,options:O,handler:q,isFastify:L}){if(typeof I!="string")throw new Lue(typeof I);if(!q&&typeof O=="function")q=O,O={};else if(q&&typeof q=="function"){if(Object.prototype.toString.call(O)!=="[object Object]")throw new Fue(A,I);if(O.handler)throw typeof O.handler=="function"?new Mue(A,I):new mx(A,I)}return O=Object.assign({},O,{method:A,url:I,path:I,handler:q||O&&O.handler}),S.call(this,{options:O,isFastify:L})}function T({options:A}){return e.find(A.method,A.url||"",A.constraints)!==null}function S({options:A,isFastify:I}){let O={...A},{exposeHeadRoute:q}=O,Z=q!=null?q:p,Pe=Z&&A.method==="GET"?{...A}:null;u("Cannot add route!");let V=O.url||O.path||"";if(Array.isArray(O.method))for(var te=0;te<O.method.length;++te)wx(O.method[te],V,O.schema);else wx(O.method,V,O.schema);if(!O.handler)throw new Vue(O.method,V);if(O.errorHandler!==void 0&&typeof O.errorHandler!="function")throw new mx(O.method,V);Rx(O.bodyLimit);let ct=this[Kue];if(V==="/"&&ct.length>0&&O.method!=="HEAD")switch(O.prefixTrailingSlash){case"slash":U.call(this,{path:V,isFastify:I});break;case"no-slash":U.call(this,{path:"",isFastify:I});break;case"both":default:U.call(this,{path:"",isFastify:I}),f!==!0&&(h!==!0||!ct.endsWith("/"))&&U.call(this,{path:V,prefixing:!0,isFastify:I})}else V[0]==="/"&&ct.endsWith("/")?U.call(this,{path:V.slice(1),isFastify:I}):U.call(this,{path:V,isFastify:I});return this;function U({path:ft,prefixing:ur=!1,isFastify:xe=!1}){let qr=ct+ft;if(O.url=qr,O.path=qr,O.routePath=ft,O.prefix=ct,O.logLevel=O.logLevel||this[Bue],(this[yx]||O.logSerializers)&&(O.logSerializers=Object.assign(Object.create(this[yx]),O.logSerializers)),O.attachValidation==null&&(O.attachValidation=!1),ur===!1)for(let j of this[gx].onRoute)j.call(this,O);for(let j of hx)if(O&&j in O){if(Array.isArray(O[j])){for(let x of O[j])if(typeof x!="function")throw new px(j,Object.prototype.toString.call(x))}else if(O[j]!==void 0&&typeof O[j]!="function")throw new px(j,Object.prototype.toString.call(O[j]))}let Vt=O.constraints||{},Ce={...O.config,url:qr,method:O.method},ie=new Pue({schema:O.schema,handler:O.handler.bind(this),config:Ce,errorHandler:O.errorHandler,bodyLimit:O.bodyLimit,logLevel:O.logLevel,logSerializers:O.logSerializers,attachValidation:O.attachValidation,schemaErrorFormatter:O.schemaErrorFormatter,replySerializer:this[sw],validatorCompiler:O.validatorCompiler,serializerCompiler:O.serializerCompiler,exposeHeadRoute:Z,prefixTrailingSlash:O.prefixTrailingSlash||"both",server:this,isFastify:xe});O.version&&(sp.emit("FSTDEP008"),Vt.version=O.version);let Pt=e.find("HEAD",O.url,Vt),Fe=Pt!=null;Fe&&!ie[ow]&&Pt.store[ow]&&e.off("HEAD",O.url,{constraints:Vt});try{e.on(O.method,O.url,{constraints:Vt},N,ie)}catch(j){if(!ie[ow])throw j.message.includes(`Method '${O.method}' already declared for route '${O.url}'`)?new Due(O.method,O.url):j}if(this.after((j,x)=>{ie.errorHandler=O.errorHandler?Xue(this[vx],O.errorHandler):this[vx],ie._parserOptions.limit=O.bodyLimit||null,ie.logLevel=O.logLevel,ie.logSerializers=O.logSerializers,ie.attachValidation=O.attachValidation,ie[sw]=this[sw],ie.schemaErrorFormatter=O.schemaErrorFormatter||this[Wue]||ie.schemaErrorFormatter,r.once("preReady",()=>{for(let M of hx){let z=this[gx][M].concat(O[M]||[]).map(Me=>Me.bind(this));ie[M]=z.length?z:null}for(;!ie.Request[$x]&&ie.Request.parent;)ie.Request=ie.Request.parent;for(;!ie.Reply[$x]&&ie.Reply.parent;)ie.Reply=ie.Reply.parent;if(n.setContext(this,ie),O.schema){ie.schema=Nue(ie.schema,this.initialConfig);let M=this[Gue];!O.validatorCompiler&&(O.schema.body||O.schema.headers||O.schema.querystring||O.schema.params)&&M.setupValidator(this[_x]);try{let z=typeof O?.validatorCompiler=="function"||M.isCustomValidatorCompiler;Cue(ie,O.validatorCompiler||M.validatorCompiler,z)}catch(z){throw new kue(O.method,qr,z.message)}O.schema.response&&!O.serializerCompiler&&M.setupSerializer(this[_x]);try{Aue(ie,O.serializerCompiler||M.serializerCompiler)}catch(z){throw new que(O.method,qr,z.message)}}}),x(j)}),Z&&A.method==="GET"&&!Fe){let j=Iue(Pe.onSend);b.call(this,{method:"HEAD",url:ft,options:{...Pe,onSend:j},isFastify:!0})}else Fe&&q&&sp.emit("FSTDEP007")}}function N(A,I,O,q,L){let Z=l(A),Pe={[s]:Z},V={level:q.logLevel};q.logSerializers&&(V.serializers=q.logSerializers);let te=i.child(Pe,V);if(te[Yue]=c,!m(A.httpVersion)){te.info({res:{statusCode:505}},"request aborted - invalid HTTP version");let ur='{"error":"HTTP Version Not Supported","message":"HTTP Version Not Supported","statusCode":505}',xe={"Content-Type":"application/json","Content-Length":ur.length};I.writeHead(505,xe),I.end(ur);return}if(g===!0&&(A.httpVersionMajor!==2&&I.setHeader("Connection","close"),d)){let ur={"Content-Type":"application/json","Content-Length":"80"};I.writeHead(503,ur),I.end('{"error":"Service Unavailable","message":"Service Unavailable","statusCode":503}'),te.info({res:{statusCode:503}},"request aborted - refusing to accept new requests as server is closing");return}String.prototype.toLowerCase.call(A.headers.connection||"")==="keep-alive"&&v.has(A.socket)===!1&&(v.add(A.socket),A.socket.on("close",rle.bind({keepAliveConnections:v,socket:A.socket}))),A.headers[iw]!==void 0&&(A.headers["accept-version"]=A.headers[iw],A.headers[iw]=void 0);let U=new q.Request(Z,O,A,L,te,q),ft=new q.Reply(I,U,te);c===!1&&te.info({req:U},"incoming request"),(o===!0||q.onResponse!==null)&&a(ft),q.onRequest!==null?Sx(q.onRequest,aw,U,ft,Ex):Ex(null,U,ft),q.onRequestAbort!==null&&A.on("close",()=>{A.aborted&&Tue(q.onRequestAbort,aw,U,Zue.bind(null,ft))}),q.onTimeout!==null&&(U.raw.socket._meta||U.raw.socket.on("timeout",ele),U.raw.socket._meta={context:q,request:U,reply:ft})}}function Zue(t,e){e&&t.log.error({err:e},"onRequestAborted hook failed")}function ele(){let{context:t,request:e,reply:r}=this._meta;Sx(t.onTimeout,aw,e,r,nle)}function wx(t,e,r){if(Oue.indexOf(t)===-1)throw new zue(t);if((t==="GET"||t==="HEAD")&&r&&r.body)throw new Uue(t,e)}function Rx(t){if(t!==void 0&&(!Number.isInteger(t)||t<=0))throw new Hue(t)}function Ex(t,e,r){if(r.sent!==!0){if(t!=null){r[Jue]=!0,r.send(t);return}e[ip]=e.raw,e[bx].preParsing!==null?tle(e[bx].preParsing,e,r,dx):dx(null,e,r)}}function tle(t,e,r,n){let s=0;function i(u,l){if(r.sent)return;if(typeof l<"u"&&(e[ip]=l),u||s===t.length){n(u,e,r);return}let c=t[s++],f;try{f=c(e,r,e[ip],i)}catch(h){i(h);return}f&&typeof f.then=="function"&&f.then(o,a)}function o(u){i(null,u)}function a(u){u||(u=new xue),i(u)}i(null,e[ip])}function rle(){this.keepAliveConnections.delete(this.socket)}function nle(){}Px.exports={buildRouting:Que,validateBodyLimitOption:Rx}});var kx=$((Yge,Ax)=>{"use strict";var sle=tw(),Ox=Pf(),Nx=Uf(),ile=rw(),{kRoutePrefix:ole,kCanSetNotFoundHandler:Ec,kFourOhFourLevelInstance:op,kFourOhFourContext:Ns,kHooks:ale,kErrorHandler:Ix}=xt(),{lifecycleHooks:ule}=Ti(),{buildErrorHandler:Cx}=uu(),lle={config:{},onSend:[],onError:[],errorHandler:Cx()},{FST_ERR_NOT_FOUND:cle}=er();function fle(t){let{logger:e,genReqId:r}=t,n=sle({onBadUrl:a(),defaultRoute:f}),s=null;return{router:n,setNotFoundHandler:l,setContext:u,arrange404:i};function i(h){h[op]=h,h[Ec]=!0,n.onBadUrl=n.onBadUrl.bind(h)}function o(h,d){let{url:p,method:m}=h.raw,v=`Route ${m}:${p} not found`;h.log.info(v),d.code(404).send({message:v,error:"Not Found",statusCode:404})}function a(){return function(d,p,m){let v=r(p),g=e.child({reqId:v}),w=this[op][Ns],_=new Nx(v,null,p,null,g,w),y=new Ox(m,_,g);s(_,y)}}function u(h,d){let p=Object.assign({},h[Ns]);p.onSend=d.onSend,d[Ns]=p}function l(h,d,p,m){this[Ec]===void 0&&(this[Ec]=!0),this[Ns]===void 0&&(this[Ns]=null);let v=this,g=this[ole]||"/";if(this[Ec]===!1)throw new Error(`Not found handler already set for Fastify instance with prefix: '${g}'`);typeof h=="object"&&(h.preHandler&&(Array.isArray(h.preHandler)?h.preHandler=h.preHandler.map(w=>w.bind(v)):h.preHandler=h.preHandler.bind(v)),h.preValidation&&(Array.isArray(h.preValidation)?h.preValidation=h.preValidation.map(w=>w.bind(v)):h.preValidation=h.preValidation.bind(v))),typeof h=="function"&&(d=h,h=void 0),h=h||{},d?(this[op][Ec]=!1,d=d.bind(this),s=d):(d=o,s=o),this.after((w,_)=>{c.call(this,g,h,d,p,m),_(w)})}function c(h,d,p,m,v){let g=new ile({schema:d.schema,handler:p,config:d.config||{},server:this});if(m.once("preReady",()=>{let w=this[Ns];for(let _ of ule){let y=this[ale][_].concat(d[_]||[]).map(b=>b.bind(this));w[_]=y.length?y:null}w.errorHandler=d.errorHandler?Cx(this[Ix],d.errorHandler):this[Ix]}),this[Ns]!==null&&h==="/"){Object.assign(this[Ns],g);return}this[op][Ns]=g,n.all(h+(h.endsWith("/")?"*":"/*"),v,g),n.all(h,v,g)}function f(h,d){let p=r(h),m=e.child({reqId:p});m.info({req:h},"incoming request");let v=new Nx(p,null,h,null,m,lle),g=new Ox(d,v,m);v.log.warn("the default handler for 404 did not catch this, this is likely a fastify bug, please report it"),v.log.warn(n.prettyPrint()),g.code(404).send(new cle)}}Ax.exports=fle});var jx=$((Wge,ap)=>{"use strict";ap.exports=Ue;ap.exports.default=Ue;var qx={type:"object",additionalProperties:!1,properties:{connectionTimeout:{type:"integer",default:0},keepAliveTimeout:{type:"integer",default:72e3},forceCloseConnections:{oneOf:[{type:"string",pattern:"idle"},{type:"boolean"}]},maxRequestsPerSocket:{type:"integer",default:0,nullable:!0},requestTimeout:{type:"integer",default:0},bodyLimit:{type:"integer",default:1048576},caseSensitive:{type:"boolean",default:!0},allowUnsafeRegex:{type:"boolean",default:!1},http2:{type:"boolean"},https:{if:{not:{oneOf:[{type:"boolean"},{type:"null"},{type:"object",additionalProperties:!1,required:["allowHTTP1"],properties:{allowHTTP1:{type:"boolean"}}}]}},then:{setDefaultValue:!0}},ignoreTrailingSlash:{type:"boolean",default:!1},ignoreDuplicateSlashes:{type:"boolean",default:!1},disableRequestLogging:{type:"boolean",default:!1},jsonShorthand:{type:"boolean",default:!0},maxParamLength:{type:"integer",default:100},onProtoPoisoning:{type:"string",default:"error"},onConstructorPoisoning:{type:"string",default:"error"},pluginTimeout:{type:"integer",default:1e4},requestIdHeader:{anyOf:[{enum:[!1]},{type:"string"}],default:"request-id"},requestIdLogLabel:{type:"string",default:"reqId"},http2SessionTimeout:{type:"integer",default:72e3},exposeHeadRoutes:{type:"boolean",default:!0},versioning:{type:"object",additionalProperties:!0,required:["storage","deriveVersion"],properties:{storage:{},deriveVersion:{}}},constraints:{type:"object",additionalProperties:{type:"object",required:["name","storage","validate","deriveConstraint"],additionalProperties:!0,properties:{name:{type:"string"},storage:{},validate:{},deriveConstraint:{}}}}}},dle=Object.prototype.hasOwnProperty,hle=new RegExp("idle","u");function Ue(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(o===0)if(t&&typeof t=="object"&&!Array.isArray(t)){t.connectionTimeout===void 0&&(t.connectionTimeout=0),t.keepAliveTimeout===void 0&&(t.keepAliveTimeout=72e3),t.maxRequestsPerSocket===void 0&&(t.maxRequestsPerSocket=0),t.requestTimeout===void 0&&(t.requestTimeout=0),t.bodyLimit===void 0&&(t.bodyLimit=1048576),t.caseSensitive===void 0&&(t.caseSensitive=!0),t.allowUnsafeRegex===void 0&&(t.allowUnsafeRegex=!1),t.ignoreTrailingSlash===void 0&&(t.ignoreTrailingSlash=!1),t.ignoreDuplicateSlashes===void 0&&(t.ignoreDuplicateSlashes=!1),t.disableRequestLogging===void 0&&(t.disableRequestLogging=!1),t.jsonShorthand===void 0&&(t.jsonShorthand=!0),t.maxParamLength===void 0&&(t.maxParamLength=100),t.onProtoPoisoning===void 0&&(t.onProtoPoisoning="error"),t.onConstructorPoisoning===void 0&&(t.onConstructorPoisoning="error"),t.pluginTimeout===void 0&&(t.pluginTimeout=1e4),t.requestIdHeader===void 0&&(t.requestIdHeader="request-id"),t.requestIdLogLabel===void 0&&(t.requestIdLogLabel="reqId"),t.http2SessionTimeout===void 0&&(t.http2SessionTimeout=72e3),t.exposeHeadRoutes===void 0&&(t.exposeHeadRoutes=!0);let p=o;for(let m in t)dle.call(qx.properties,m)||delete t[m];if(p===o){let m=t.connectionTimeout,v=o;if(!(typeof m=="number"&&!(m%1)&&!isNaN(m)&&isFinite(m))){let g=typeof m,w;if(w===void 0)if(g==="boolean"||m===null||g==="string"&&m&&m==+m&&!(m%1))w=+m;else return Ue.errors=[{instancePath:e+"/connectionTimeout",schemaPath:"#/properties/connectionTimeout/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;w!==void 0&&(m=w,t!==void 0&&(t.connectionTimeout=w))}var a=v===o;if(a){let g=t.keepAliveTimeout,w=o;if(!(typeof g=="number"&&!(g%1)&&!isNaN(g)&&isFinite(g))){let y=typeof g,b;if(b===void 0)if(y==="boolean"||g===null||y==="string"&&g&&g==+g&&!(g%1))b=+g;else return Ue.errors=[{instancePath:e+"/keepAliveTimeout",schemaPath:"#/properties/keepAliveTimeout/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;b!==void 0&&(g=b,t!==void 0&&(t.keepAliveTimeout=b))}var a=w===o;if(a){if(t.forceCloseConnections!==void 0){let y=t.forceCloseConnections,b=o,T=o,S=!1,N=null,A=o;if(typeof y!="string"){let q=typeof y,L;if(L===void 0)if(q=="number"||q=="boolean")L=""+y;else if(y===null)L="";else{let Z={instancePath:e+"/forceCloseConnections",schemaPath:"#/properties/forceCloseConnections/oneOf/0/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[Z]:i.push(Z),o++}L!==void 0&&(y=L,t!==void 0&&(t.forceCloseConnections=L))}if(o===A&&typeof y=="string"&&!hle.test(y)){let q={instancePath:e+"/forceCloseConnections",schemaPath:"#/properties/forceCloseConnections/oneOf/0/pattern",keyword:"pattern",params:{pattern:"idle"},message:'must match pattern "idle"'};i===null?i=[q]:i.push(q),o++}var u=A===o;u&&(S=!0,N=0);let I=o;if(typeof y!="boolean"){let q;if(q===void 0)if(y==="false"||y===0||y===null)q=!1;else if(y==="true"||y===1)q=!0;else{let L={instancePath:e+"/forceCloseConnections",schemaPath:"#/properties/forceCloseConnections/oneOf/1/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"};i===null?i=[L]:i.push(L),o++}q!==void 0&&(y=q,t!==void 0&&(t.forceCloseConnections=q))}var u=I===o;if(u&&S?(S=!1,N=[N,1]):u&&(S=!0,N=1),S)o=T,i!==null&&(T?i.length=T:i=null);else{let q={instancePath:e+"/forceCloseConnections",schemaPath:"#/properties/forceCloseConnections/oneOf",keyword:"oneOf",params:{passingSchemas:N},message:"must match exactly one schema in oneOf"};return i===null?i=[q]:i.push(q),o++,Ue.errors=i,!1}var a=b===o}else var a=!0;if(a){let y=t.maxRequestsPerSocket,b=o;if(!(typeof y=="number"&&!(y%1)&&!isNaN(y)&&isFinite(y))&&y!==null){let S=typeof y,N;if(N===void 0)if(S==="boolean"||y===null||S==="string"&&y&&y==+y&&!(y%1))N=+y;else if(y===""||y===0||y===!1)N=null;else return Ue.errors=[{instancePath:e+"/maxRequestsPerSocket",schemaPath:"#/properties/maxRequestsPerSocket/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;N!==void 0&&(y=N,t!==void 0&&(t.maxRequestsPerSocket=N))}var a=b===o;if(a){let S=t.requestTimeout,N=o;if(!(typeof S=="number"&&!(S%1)&&!isNaN(S)&&isFinite(S))){let I=typeof S,O;if(O===void 0)if(I==="boolean"||S===null||I==="string"&&S&&S==+S&&!(S%1))O=+S;else return Ue.errors=[{instancePath:e+"/requestTimeout",schemaPath:"#/properties/requestTimeout/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;O!==void 0&&(S=O,t!==void 0&&(t.requestTimeout=O))}var a=N===o;if(a){let I=t.bodyLimit,O=o;if(!(typeof I=="number"&&!(I%1)&&!isNaN(I)&&isFinite(I))){let L=typeof I,Z;if(Z===void 0)if(L==="boolean"||I===null||L==="string"&&I&&I==+I&&!(I%1))Z=+I;else return Ue.errors=[{instancePath:e+"/bodyLimit",schemaPath:"#/properties/bodyLimit/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;Z!==void 0&&(I=Z,t!==void 0&&(t.bodyLimit=Z))}var a=O===o;if(a){let L=t.caseSensitive,Z=o;if(typeof L!="boolean"){let V;if(V===void 0)if(L==="false"||L===0||L===null)V=!1;else if(L==="true"||L===1)V=!0;else return Ue.errors=[{instancePath:e+"/caseSensitive",schemaPath:"#/properties/caseSensitive/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;V!==void 0&&(L=V,t!==void 0&&(t.caseSensitive=V))}var a=Z===o;if(a){let V=t.allowUnsafeRegex,te=o;if(typeof V!="boolean"){let U;if(U===void 0)if(V==="false"||V===0||V===null)U=!1;else if(V==="true"||V===1)U=!0;else return Ue.errors=[{instancePath:e+"/allowUnsafeRegex",schemaPath:"#/properties/allowUnsafeRegex/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;U!==void 0&&(V=U,t!==void 0&&(t.allowUnsafeRegex=U))}var a=te===o;if(a){if(t.http2!==void 0){let U=t.http2,ft=o;if(typeof U!="boolean"){let xe;if(xe===void 0)if(U==="false"||U===0||U===null)xe=!1;else if(U==="true"||U===1)xe=!0;else return Ue.errors=[{instancePath:e+"/http2",schemaPath:"#/properties/http2/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;xe!==void 0&&(U=xe,t!==void 0&&(t.http2=xe))}var a=ft===o}else var a=!0;if(a){if(t.https!==void 0){let U=t.https,ft=o,ur=o,xe=!0,qr=o,Vt=o,Ce=o,ie=o,Pt=!1,Fe=null,j=o;if(typeof U!="boolean"){let z;if(z===void 0)if(U==="false"||U===0||U===null)z=!1;else if(U==="true"||U===1)z=!0;else{let Me={};i===null?i=[Me]:i.push(Me),o++}z!==void 0&&(U=z,t!==void 0&&(t.https=z))}var l=j===o;l&&(Pt=!0,Fe=0);let x=o;if(U!==null){let z;if(z===void 0)if(U===""||U===0||U===!1)z=null;else{let Me={};i===null?i=[Me]:i.push(Me),o++}z!==void 0&&(U=z,t!==void 0&&(t.https=z))}var l=x===o;if(l&&Pt)Pt=!1,Fe=[Fe,1];else{l&&(Pt=!0,Fe=1);let z=o;if(o===z)if(U&&typeof U=="object"&&!Array.isArray(U)){let J;if(U.allowHTTP1===void 0&&(J="allowHTTP1")){let We={};i===null?i=[We]:i.push(We),o++}else{let We=o;for(let vt in U)vt!=="allowHTTP1"&&delete U[vt];if(We===o&&U.allowHTTP1!==void 0){let vt=U.allowHTTP1;if(typeof vt!="boolean"){let Xe;if(Xe===void 0)if(vt==="false"||vt===0||vt===null)Xe=!1;else if(vt==="true"||vt===1)Xe=!0;else{let kt={};i===null?i=[kt]:i.push(kt),o++}Xe!==void 0&&(vt=Xe,U!==void 0&&(U.allowHTTP1=Xe))}}}}else{let J={};i===null?i=[J]:i.push(J),o++}var l=z===o;l&&Pt?(Pt=!1,Fe=[Fe,2]):l&&(Pt=!0,Fe=2)}if(Pt)o=ie,i!==null&&(ie?i.length=ie:i=null);else{let z={};i===null?i=[z]:i.push(z),o++}var c=Ce===o;if(c){let z={};i===null?i=[z]:i.push(z),o++}else o=Vt,i!==null&&(Vt?i.length=Vt:i=null);var f=qr===o;if(o=ur,i!==null&&(ur?i.length=ur:i=null),f){let z=o;t.https=!0;var f=z===o;xe=f}if(!xe){let z={instancePath:e+"/https",schemaPath:"#/properties/https/if",keyword:"if",params:{failingKeyword:"then"},message:'must match "then" schema'};return i===null?i=[z]:i.push(z),o++,Ue.errors=i,!1}var a=ft===o}else var a=!0;if(a){let U=t.ignoreTrailingSlash,ft=o;if(typeof U!="boolean"){let xe;if(xe===void 0)if(U==="false"||U===0||U===null)xe=!1;else if(U==="true"||U===1)xe=!0;else return Ue.errors=[{instancePath:e+"/ignoreTrailingSlash",schemaPath:"#/properties/ignoreTrailingSlash/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;xe!==void 0&&(U=xe,t!==void 0&&(t.ignoreTrailingSlash=xe))}var a=ft===o;if(a){let xe=t.ignoreDuplicateSlashes,qr=o;if(typeof xe!="boolean"){let Ce;if(Ce===void 0)if(xe==="false"||xe===0||xe===null)Ce=!1;else if(xe==="true"||xe===1)Ce=!0;else return Ue.errors=[{instancePath:e+"/ignoreDuplicateSlashes",schemaPath:"#/properties/ignoreDuplicateSlashes/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;Ce!==void 0&&(xe=Ce,t!==void 0&&(t.ignoreDuplicateSlashes=Ce))}var a=qr===o;if(a){let Ce=t.disableRequestLogging,ie=o;if(typeof Ce!="boolean"){let Fe;if(Fe===void 0)if(Ce==="false"||Ce===0||Ce===null)Fe=!1;else if(Ce==="true"||Ce===1)Fe=!0;else return Ue.errors=[{instancePath:e+"/disableRequestLogging",schemaPath:"#/properties/disableRequestLogging/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;Fe!==void 0&&(Ce=Fe,t!==void 0&&(t.disableRequestLogging=Fe))}var a=ie===o;if(a){let Fe=t.jsonShorthand,j=o;if(typeof Fe!="boolean"){let M;if(M===void 0)if(Fe==="false"||Fe===0||Fe===null)M=!1;else if(Fe==="true"||Fe===1)M=!0;else return Ue.errors=[{instancePath:e+"/jsonShorthand",schemaPath:"#/properties/jsonShorthand/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;M!==void 0&&(Fe=M,t!==void 0&&(t.jsonShorthand=M))}var a=j===o;if(a){let M=t.maxParamLength,z=o;if(!(typeof M=="number"&&!(M%1)&&!isNaN(M)&&isFinite(M))){let J=typeof M,We;if(We===void 0)if(J==="boolean"||M===null||J==="string"&&M&&M==+M&&!(M%1))We=+M;else return Ue.errors=[{instancePath:e+"/maxParamLength",schemaPath:"#/properties/maxParamLength/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;We!==void 0&&(M=We,t!==void 0&&(t.maxParamLength=We))}var a=z===o;if(a){let J=t.onProtoPoisoning,We=o;if(typeof J!="string"){let Xe=typeof J,kt;if(kt===void 0)if(Xe=="number"||Xe=="boolean")kt=""+J;else if(J===null)kt="";else return Ue.errors=[{instancePath:e+"/onProtoPoisoning",schemaPath:"#/properties/onProtoPoisoning/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;kt!==void 0&&(J=kt,t!==void 0&&(t.onProtoPoisoning=kt))}var a=We===o;if(a){let Xe=t.onConstructorPoisoning,kt=o;if(typeof Xe!="string"){let $t=typeof Xe,At;if(At===void 0)if($t=="number"||$t=="boolean")At=""+Xe;else if(Xe===null)At="";else return Ue.errors=[{instancePath:e+"/onConstructorPoisoning",schemaPath:"#/properties/onConstructorPoisoning/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;At!==void 0&&(Xe=At,t!==void 0&&(t.onConstructorPoisoning=At))}var a=kt===o;if(a){let $t=t.pluginTimeout,At=o;if(!(typeof $t=="number"&&!($t%1)&&!isNaN($t)&&isFinite($t))){let hn=typeof $t,ts;if(ts===void 0)if(hn==="boolean"||$t===null||hn==="string"&&$t&&$t==+$t&&!($t%1))ts=+$t;else return Ue.errors=[{instancePath:e+"/pluginTimeout",schemaPath:"#/properties/pluginTimeout/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;ts!==void 0&&($t=ts,t!==void 0&&(t.pluginTimeout=ts))}var a=At===o;if(a){let hn=t.requestIdHeader,ts=o,Xa=o,Is=!1,pn=o;if(hn!==!1){let Zt={instancePath:e+"/requestIdHeader",schemaPath:"#/properties/requestIdHeader/anyOf/0/enum",keyword:"enum",params:{allowedValues:qx.properties.requestIdHeader.anyOf[0].enum},message:"must be equal to one of the allowed values"};i===null?i=[Zt]:i.push(Zt),o++}var h=pn===o;if(Is=Is||h,!Is){let Zt=o;if(typeof hn!="string"){let Cs=typeof hn,it;if(it===void 0)if(Cs=="number"||Cs=="boolean")it=""+hn;else if(hn===null)it="";else{let jr={instancePath:e+"/requestIdHeader",schemaPath:"#/properties/requestIdHeader/anyOf/1/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[jr]:i.push(jr),o++}it!==void 0&&(hn=it,t!==void 0&&(t.requestIdHeader=it))}var h=Zt===o;Is=Is||h}if(Is)o=Xa,i!==null&&(Xa?i.length=Xa:i=null);else{let Zt={instancePath:e+"/requestIdHeader",schemaPath:"#/properties/requestIdHeader/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[Zt]:i.push(Zt),o++,Ue.errors=i,!1}var a=ts===o;if(a){let Zt=t.requestIdLogLabel,Ac=o;if(typeof Zt!="string"){let it=typeof Zt,jr;if(jr===void 0)if(it=="number"||it=="boolean")jr=""+Zt;else if(Zt===null)jr="";else return Ue.errors=[{instancePath:e+"/requestIdLogLabel",schemaPath:"#/properties/requestIdLogLabel/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;jr!==void 0&&(Zt=jr,t!==void 0&&(t.requestIdLogLabel=jr))}var a=Ac===o;if(a){let it=t.http2SessionTimeout,jr=o;if(!(typeof it=="number"&&!(it%1)&&!isNaN(it)&&isFinite(it))){let Dr=typeof it,qt;if(qt===void 0)if(Dr==="boolean"||it===null||Dr==="string"&&it&&it==+it&&!(it%1))qt=+it;else return Ue.errors=[{instancePath:e+"/http2SessionTimeout",schemaPath:"#/properties/http2SessionTimeout/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;qt!==void 0&&(it=qt,t!==void 0&&(t.http2SessionTimeout=qt))}var a=jr===o;if(a){let Dr=t.exposeHeadRoutes,qt=o;if(typeof Dr!="boolean"){let Tt;if(Tt===void 0)if(Dr==="false"||Dr===0||Dr===null)Tt=!1;else if(Dr==="true"||Dr===1)Tt=!0;else return Ue.errors=[{instancePath:e+"/exposeHeadRoutes",schemaPath:"#/properties/exposeHeadRoutes/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;Tt!==void 0&&(Dr=Tt,t!==void 0&&(t.exposeHeadRoutes=Tt))}var a=qt===o;if(a){if(t.versioning!==void 0){let Tt=t.versioning,$i=o;if(o===$i)if(Tt&&typeof Tt=="object"&&!Array.isArray(Tt)){let mn;if(Tt.storage===void 0&&(mn="storage")||Tt.deriveVersion===void 0&&(mn="deriveVersion"))return Ue.errors=[{instancePath:e+"/versioning",schemaPath:"#/properties/versioning/required",keyword:"required",params:{missingProperty:mn},message:"must have required property '"+mn+"'"}],!1}else return Ue.errors=[{instancePath:e+"/versioning",schemaPath:"#/properties/versioning/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=$i===o}else var a=!0;if(a)if(t.constraints!==void 0){let Tt=t.constraints,$i=o;if(o===$i)if(Tt&&typeof Tt=="object"&&!Array.isArray(Tt))for(let mn in Tt){let Lr=Tt[mn],rs=o;if(o===rs)if(Lr&&typeof Lr=="object"&&!Array.isArray(Lr)){let As;if(Lr.name===void 0&&(As="name")||Lr.storage===void 0&&(As="storage")||Lr.validate===void 0&&(As="validate")||Lr.deriveConstraint===void 0&&(As="deriveConstraint"))return Ue.errors=[{instancePath:e+"/constraints/"+mn.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/constraints/additionalProperties/required",keyword:"required",params:{missingProperty:As},message:"must have required property '"+As+"'"}],!1;if(Lr.name!==void 0){let ks=Lr.name;if(typeof ks!="string"){let kc=typeof ks,Dn;if(Dn===void 0)if(kc=="number"||kc=="boolean")Dn=""+ks;else if(ks===null)Dn="";else return Ue.errors=[{instancePath:e+"/constraints/"+mn.replace(/~/g,"~0").replace(/\//g,"~1")+"/name",schemaPath:"#/properties/constraints/additionalProperties/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;Dn!==void 0&&(ks=Dn,Lr!==void 0&&(Lr.name=Dn))}}}else return Ue.errors=[{instancePath:e+"/constraints/"+mn.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/constraints/additionalProperties/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var d=rs===o;if(!d)break}else return Ue.errors=[{instancePath:e+"/constraints",schemaPath:"#/properties/constraints/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=$i===o}else var a=!0}}}}}}}}}}}}}}}}}}}}}}}}else return Ue.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return Ue.errors=i,o===0}ap.exports.defaultInitOptions={connectionTimeout:0,keepAliveTimeout:72e3,maxRequestsPerSocket:0,requestTimeout:0,bodyLimit:1048576,caseSensitive:!0,allowUnsafeRegex:!1,disableRequestLogging:!1,jsonShorthand:!0,ignoreTrailingSlash:!1,ignoreDuplicateSlashes:!1,maxParamLength:100,onProtoPoisoning:"error",onConstructorPoisoning:"error",pluginTimeout:1e4,requestIdHeader:"request-id",requestIdLogLabel:"reqId",http2SessionTimeout:72e3,exposeHeadRoutes:!0}});var Dx=$((Xge,lp)=>{"use strict";var up=jx(),ple=ou()({circles:!0,proto:!1}),{FST_ERR_INIT_OPTS_INVALID:mle}=er();function yle(t){let e=ple(t);if(!up(e)){let r=new mle(JSON.stringify(up.errors.map(n=>n.message)));throw r.errors=up.errors,r}return uw(e)}function uw(t){let e=Object.getOwnPropertyNames(t);for(let r of e){let n=t[r];ArrayBuffer.isView(n)&&!(n instanceof DataView)||(t[r]=n&&typeof n=="object"?uw(n):n)}return Object.freeze(t)}lp.exports=yle;lp.exports.defaultInitOptions=up.defaultInitOptions;lp.exports.utils={deepFreezeObject:uw}});var Kx=$((Qge,Hx)=>{"use strict";var{kAvvioBoot:gle,kChildren:Lx,kRoutePrefix:xx,kLogLevel:Fx,kLogSerializers:lw,kHooks:cw,kSchemaController:Ga,kContentTypeParser:Mx,kReply:Vx,kRequest:zx,kFourOhFour:_le,kPluginNameChain:Ux}=xt(),vle=Pf(),$le=Uf(),ble=qb(),wle=zy(),{buildHooks:Ele}=Ti(),Ja=Mb();Hx.exports=function(e,r,n){if(Ja.registerPlugin.call(e,r))return e[Ux].push(Ja.getDisplayName(r)),e;let i=Object.create(e);e[Lx].push(i),i.ready=e[gle].bind(i),i[Lx]=[],i[Vx]=vle.buildReply(i[Vx]),i[zx]=$le.buildRequest(i[zx]),i[Mx]=wle.helpers.buildContentTypeParser(i[Mx]),i[cw]=Ele(i[cw]),i[xx]=Sle(i[xx],n.prefix),i[Fx]=n.logLevel||i[Fx],i[Ga]=ble.buildSchemaController(e[Ga]),i.getSchema=i[Ga].getSchema.bind(i[Ga]),i.getSchemas=i[Ga].getSchemas.bind(i[Ga]),i[Ja.registeredPlugins]=Object.create(i[Ja.registeredPlugins]),i[Ux]=[Ja.getPluginName(r)||Ja.getFuncPreview(r)],(i[lw]||n.logSerializers)&&(i[lw]=Object.assign(Object.create(i[lw]),n.logSerializers)),n.prefix&&i[_le].arrange404(i);for(let o of i[cw].onRegister)o.call(this,i,n);return i};function Sle(t,e){return e?(t.endsWith("/")&&e[0]==="/"?e=e.slice(1):e[0]!=="/"&&(e="/"+e),t+e):t}});var Gx=$((Zge,Bx)=>{"use strict";Bx.exports=function(){return{[Symbol.iterator]:function*(){},add(){},delete(){},has(){return!0}}}});var Jx=$(fw=>{"use strict";fw.parse=Ple;fw.serialize=Tle;var Rle=Object.prototype.toString,cp=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function Ple(t,e){if(typeof t!="string")throw new TypeError("argument str must be a string");for(var r={},n=e||{},s=n.decode||Ole,i=0;i<t.length;){var o=t.indexOf("=",i);if(o===-1)break;var a=t.indexOf(";",i);if(a===-1)a=t.length;else if(a<o){i=t.lastIndexOf(";",o-1)+1;continue}var u=t.slice(i,o).trim();if(r[u]===void 0){var l=t.slice(o+1,a).trim();l.charCodeAt(0)===34&&(l=l.slice(1,-1)),r[u]=Cle(l,s)}i=a+1}return r}function Tle(t,e,r){var n=r||{},s=n.encode||Nle;if(typeof s!="function")throw new TypeError("option encode is invalid");if(!cp.test(t))throw new TypeError("argument name is invalid");var i=s(e);if(i&&!cp.test(i))throw new TypeError("argument val is invalid");var o=t+"="+i;if(n.maxAge!=null){var a=n.maxAge-0;if(isNaN(a)||!isFinite(a))throw new TypeError("option maxAge is invalid");o+="; Max-Age="+Math.floor(a)}if(n.domain){if(!cp.test(n.domain))throw new TypeError("option domain is invalid");o+="; Domain="+n.domain}if(n.path){if(!cp.test(n.path))throw new TypeError("option path is invalid");o+="; Path="+n.path}if(n.expires){var u=n.expires;if(!Ile(u)||isNaN(u.valueOf()))throw new TypeError("option expires is invalid");o+="; Expires="+u.toUTCString()}if(n.httpOnly&&(o+="; HttpOnly"),n.secure&&(o+="; Secure"),n.priority){var l=typeof n.priority=="string"?n.priority.toLowerCase():n.priority;switch(l){case"low":o+="; Priority=Low";break;case"medium":o+="; Priority=Medium";break;case"high":o+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}}if(n.sameSite){var c=typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite;switch(c){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return o}function Ole(t){return t.indexOf("%")!==-1?decodeURIComponent(t):t}function Nle(t){return encodeURIComponent(t)}function Ile(t){return Rle.call(t)==="[object Date]"||t instanceof Date}function Cle(t,e){try{return e(t)}catch{return t}}});var Xx=$((t0e,Wx)=>{"use strict";var{URL:Yx}=require("url"),dw="http://localhost";Wx.exports=function(e,r){(typeof e=="string"||Object.prototype.toString.call(e)==="[object String]")&&e.startsWith("//")&&(e=dw+e);let n=typeof e=="object"?Object.assign(new Yx(dw),e):new Yx(e,dw);if(typeof r=="string"){r=new URLSearchParams(r);for(let s of r.keys()){n.searchParams.delete(s);for(let i of r.getAll(s))n.searchParams.append(s,i)}}else{let s=Object.assign({},e.query,r);for(let i in s){let o=s[i];if(Array.isArray(o)){n.searchParams.delete(i);for(let a of o)n.searchParams.append(i,a)}else n.searchParams.set(i,o)}}return n}});var tF=$((r0e,fp)=>{"use strict";var{Readable:Qx,addAbortSignal:Ale}=require("stream"),pw=require("util"),kle=Jx(),qle=require("assert"),Zx=Hp()(),jle=Xx(),{EventEmitter:Dle}=require("events");Zx.create("FastifyDeprecationLightMyRequest","FST_LIGHTMYREQUEST_DEP01",'You are accessing "request.connection", use "request.socket" instead.');function Lle(t){return t.port?t.host:t.hostname+(t.protocol==="https:"?":443":":80")}var hw=class extends Dle{constructor(e){super(),this.remoteAddress=e}};function eF(t){return new e(this);function e(r){es.call(r,{...t,Request:void 0}),Object.assign(this,r);for(let n of Object.keys(es.prototype))this.constructor.prototype[n]=es.prototype[n];return pw.inherits(this.constructor,t.Request),this}}function es(t){Qx.call(this,{autoDestroy:!1});let e=jle(t.url||t.path,t.query);this.url=e.pathname+e.search,this.aborted=!1,this.httpVersionMajor=1,this.httpVersionMinor=1,this.httpVersion="1.1",this.method=t.method?t.method.toUpperCase():"GET",this.headers={},this.rawHeaders=[];let r=t.headers||{};for(let o in r){let a=o.toLowerCase();if((a==="user-agent"||a==="content-type")&&r[o]===void 0){this.headers[a]=void 0;continue}let u=r[o];qle(u!==void 0,'invalid value "undefined" for header '+o),this.headers[a]=""+u}if("user-agent"in this.headers||(this.headers["user-agent"]="lightMyRequest"),this.headers.host=this.headers.host||t.authority||Lle(e),t.cookies){let{cookies:o}=t,a=Object.keys(o).map(u=>kle.serialize(u,o[u]));this.headers.cookie&&a.unshift(this.headers.cookie),this.headers.cookie=a.join("; ")}this.socket=new hw(t.remoteAddress||"127.0.0.1"),Object.defineProperty(this,"connection",{get(){return Zx.emit("FST_LIGHTMYREQUEST_DEP01"),this.socket},configurable:!0});let n=t.signal;n&&Ale(n,this);let s=t.payload||t.body||null,i=s&&typeof s.resume=="function";s&&typeof s!="string"&&!i&&!Buffer.isBuffer(s)&&(s=JSON.stringify(s),"content-type"in this.headers||(this.headers["content-type"]="application/json")),s&&!i&&!Object.prototype.hasOwnProperty.call(this.headers,"content-length")&&(this.headers["content-length"]=(Buffer.isBuffer(s)?s.length:Buffer.byteLength(s)).toString());for(let o of Object.keys(this.headers))this.rawHeaders.push(o,this.headers[o]);return this._lightMyRequest={payload:s,isDone:!1,simulate:t.simulate||{}},this}pw.inherits(es,Qx);pw.inherits(eF,es);es.prototype.prepare=function(t){let e=this._lightMyRequest.payload;if(!e||typeof e.resume!="function")return t();let r=[];e.on("data",n=>r.push(Buffer.from(n))),e.on("end",()=>{let n=Buffer.concat(r);return this.headers["content-length"]=this.headers["content-length"]||""+n.length,this._lightMyRequest.payload=n,t()}),e.resume()};es.prototype._read=function(t){setImmediate(()=>{if(this._lightMyRequest.isDone){this._lightMyRequest.simulate.end!==!1&&this.push(null);return}this._lightMyRequest.isDone=!0,this._lightMyRequest.payload&&(this._lightMyRequest.simulate.split?(this.push(this._lightMyRequest.payload.slice(0,1)),this.push(this._lightMyRequest.payload.slice(1))):this.push(this._lightMyRequest.payload)),this._lightMyRequest.simulate.error&&this.emit("error",new Error("Simulated")),this._lightMyRequest.simulate.close&&this.emit("close"),this._lightMyRequest.simulate.end!==!1&&this.push(null)})};es.prototype.destroy=function(t){this.destroyed||(this.destroyed=!0,t&&(this._error=!0,process.nextTick(()=>this.emit("error",t))),process.nextTick(()=>this.emit("close")))};fp.exports=es;fp.exports.Request=es;fp.exports.CustomRequest=eF});var nF=$((n0e,Sc)=>{"use strict";var Ya={decodeValues:!0,map:!1,silent:!1};function mw(t){return typeof t=="string"&&!!t.trim()}function yw(t,e){var r=t.split(";").filter(mw),n=r.shift(),s=xle(n),i=s.name,o=s.value;e=e?Object.assign({},Ya,e):Ya;try{o=e.decodeValues?decodeURIComponent(o):o}catch(u){console.error("set-cookie-parser encountered an error while decoding a cookie with value '"+o+"'. Set options.decodeValues to false to disable this feature.",u)}var a={name:i,value:o};return r.forEach(function(u){var l=u.split("="),c=l.shift().trimLeft().toLowerCase(),f=l.join("=");c==="expires"?a.expires=new Date(f):c==="max-age"?a.maxAge=parseInt(f,10):c==="secure"?a.secure=!0:c==="httponly"?a.httpOnly=!0:c==="samesite"?a.sameSite=f:a[c]=f}),a}function xle(t){var e="",r="",n=t.split("=");return n.length>1?(e=n.shift(),r=n.join("=")):r=t,{name:e,value:r}}function rF(t,e){if(e=e?Object.assign({},Ya,e):Ya,!t)return e.map?{}:[];if(t.headers)if(typeof t.headers.getSetCookie=="function")t=t.headers.getSetCookie();else if(t.headers["set-cookie"])t=t.headers["set-cookie"];else{var r=t.headers[Object.keys(t.headers).find(function(s){return s.toLowerCase()==="set-cookie"})];!r&&t.headers.cookie&&!e.silent&&console.warn("Warning: set-cookie-parser appears to have been called on a request object. It is designed to parse Set-Cookie headers from responses, not Cookie headers from requests. Set the option {silent: true} to suppress this warning."),t=r}if(Array.isArray(t)||(t=[t]),e=e?Object.assign({},Ya,e):Ya,e.map){var n={};return t.filter(mw).reduce(function(s,i){var o=yw(i,e);return s[o.name]=o,s},n)}else return t.filter(mw).map(function(s){return yw(s,e)})}function Fle(t){if(Array.isArray(t))return t;if(typeof t!="string")return[];var e=[],r=0,n,s,i,o,a;function u(){for(;r<t.length&&/\s/.test(t.charAt(r));)r+=1;return r<t.length}function l(){return s=t.charAt(r),s!=="="&&s!==";"&&s!==","}for(;r<t.length;){for(n=r,a=!1;u();)if(s=t.charAt(r),s===","){for(i=r,r+=1,u(),o=r;r<t.length&&l();)r+=1;r<t.length&&t.charAt(r)==="="?(a=!0,r=o,e.push(t.substring(n,i)),n=r):r=i+1}else r+=1;(!a||r>=t.length)&&e.push(t.substring(n,t.length))}return e}Sc.exports=rF;Sc.exports.parse=rF;Sc.exports.parseString=yw;Sc.exports.splitCookiesString=Fle});var oF=$((s0e,iF)=>{"use strict";var Rc=require("http"),{Writable:Mle}=require("stream"),Vle=require("util"),zle=nF();function gi(t,e,r){Rc.ServerResponse.call(this,t),this._lightMyRequest={headers:null,trailers:{},payloadChunks:[]},this.setHeader("foo","bar"),this.removeHeader("foo"),this.assignSocket(Hle()),this._promiseCallback=typeof r=="function";let n=!1,s=o=>{if(n=!0,this._promiseCallback)return process.nextTick(()=>e(o));process.nextTick(()=>e(null,o))},i=o=>{if(!n){if(n=!0,this._promiseCallback)return process.nextTick(()=>r(o));process.nextTick(()=>e(o,null))}};this.once("finish",()=>{let o=Ule(this);o.raw.req=t,s(o)}),this.connection.once("error",i),this.once("error",i),this.once("close",i)}Vle.inherits(gi,Rc.ServerResponse);gi.prototype.setTimeout=function(t,e){return this.timeoutHandle=setTimeout(()=>{this.emit("timeout")},t),this.on("timeout",e),this};gi.prototype.writeHead=function(){let t=Rc.ServerResponse.prototype.writeHead.apply(this,arguments);return sF(this),t};gi.prototype.write=function(t,e,r){return this.timeoutHandle&&clearTimeout(this.timeoutHandle),Rc.ServerResponse.prototype.write.call(this,t,e,r),this._lightMyRequest.payloadChunks.push(Buffer.from(t,e)),!0};gi.prototype.end=function(t,e,r){t&&this.write(t,e),Rc.ServerResponse.prototype.end.call(this,r),this.emit("finish"),this.destroy()};gi.prototype.destroy=function(t){this.destroyed||(this.destroyed=!0,t&&process.nextTick(()=>this.emit("error",t)),process.nextTick(()=>this.emit("close")))};gi.prototype.addTrailers=function(t){for(let e in t)this._lightMyRequest.trailers[e.toLowerCase().trim()]=t[e].toString().trim()};function Ule(t){t._lightMyRequest.headers===null&&sF(t);let e={raw:{res:t},headers:t._lightMyRequest.headers,statusCode:t.statusCode,statusMessage:t.statusMessage,trailers:{},get cookies(){return zle.parse(this)}},r=Buffer.concat(t._lightMyRequest.payloadChunks);return e.rawPayload=r,e.payload=r.toString(),e.body=e.payload,e.trailers=t._lightMyRequest.trailers,e.json=function(){return JSON.parse(e.payload)},e}function Hle(){return new Mle({write(t,e,r){setImmediate(r)}})}function sF(t){t._lightMyRequest.headers=Object.assign({},t.getHeaders()),["Date","Connection","Transfer-Encoding"].forEach(e=>{let r=new RegExp("\\r\\n"+e+": ([^\\r]*)\\r\\n"),n=t._header.match(r);n&&(t._lightMyRequest.headers[e.toLowerCase()]=n[1])})}iF.exports=gi});var aF=$((i0e,gw)=>{"use strict";gw.exports=Ct;gw.exports.default=Ct;var Kle={type:"object",properties:{url:{oneOf:[{type:"string"},{type:"object",properties:{protocol:{type:"string"},hostname:{type:"string"},pathname:{type:"string"}},additionalProperties:!0,required:["pathname"]}]},path:{oneOf:[{type:"string"},{type:"object",properties:{protocol:{type:"string"},hostname:{type:"string"},pathname:{type:"string"}},additionalProperties:!0,required:["pathname"]}]},cookies:{type:"object",additionalProperties:!0},headers:{type:"object",additionalProperties:!0},query:{anyOf:[{type:"object",additionalProperties:!0},{type:"string"}]},simulate:{type:"object",properties:{end:{type:"boolean"},split:{type:"boolean"},error:{type:"boolean"},close:{type:"boolean"}}},authority:{type:"string"},remoteAddress:{type:"string"},method:{type:"string",enum:["ACL","BIND","CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LINK","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCALENDAR","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REBIND","REPORT","SEARCH","SOURCE","SUBSCRIBE","TRACE","UNBIND","UNLINK","UNLOCK","UNSUBSCRIBE","acl","bind","checkout","connect","copy","delete","get","head","link","lock","m-search","merge","mkactivity","mkcalendar","mkcol","move","notify","options","patch","post","propfind","proppatch","purge","put","rebind","report","search","source","subscribe","trace","unbind","unlink","unlock","unsubscribe"]},validate:{type:"boolean"}},additionalProperties:!0,oneOf:[{required:["url"]},{required:["path"]}]};function Ct(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0,a=o,u=!1,l=null,c=o;if(t&&typeof t=="object"&&!Array.isArray(t)){let y;if(t.url===void 0&&(y="url")){let b={instancePath:e,schemaPath:"#/oneOf/0/required",keyword:"required",params:{missingProperty:y},message:"must have required property '"+y+"'"};i===null?i=[b]:i.push(b),o++}}var h=c===o;h&&(u=!0,l=0);let f=o;if(t&&typeof t=="object"&&!Array.isArray(t)){let y;if(t.path===void 0&&(y="path")){let b={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:y},message:"must have required property '"+y+"'"};i===null?i=[b]:i.push(b),o++}}var h=f===o;if(h&&u?(u=!1,l=[l,1]):h&&(u=!0,l=1),u)o=a,i!==null&&(a?i.length=a:i=null);else{let y={instancePath:e,schemaPath:"#/oneOf",keyword:"oneOf",params:{passingSchemas:l},message:"must match exactly one schema in oneOf"};return i===null?i=[y]:i.push(y),o++,Ct.errors=i,!1}if(o===0)if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.url!==void 0){let y=t.url,b=o,T=o,S=!1,N=null,A=o;if(typeof y!="string"){let O=typeof y,q;if(q===void 0)if(O=="number"||O=="boolean")q=""+y;else if(y===null)q="";else{let L={instancePath:e+"/url",schemaPath:"#/properties/url/oneOf/0/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[L]:i.push(L),o++}q!==void 0&&(y=q,t!==void 0&&(t.url=q))}var p=A===o;p&&(S=!0,N=0);let I=o;if(o===I)if(y&&typeof y=="object"&&!Array.isArray(y)){let O;if(y.pathname===void 0&&(O="pathname")){let q={instancePath:e+"/url",schemaPath:"#/properties/url/oneOf/1/required",keyword:"required",params:{missingProperty:O},message:"must have required property '"+O+"'"};i===null?i=[q]:i.push(q),o++}else{if(y.protocol!==void 0){let q=y.protocol,L=o;if(typeof q!="string"){let Z=typeof q,Pe;if(Pe===void 0)if(Z=="number"||Z=="boolean")Pe=""+q;else if(q===null)Pe="";else{let V={instancePath:e+"/url/protocol",schemaPath:"#/properties/url/oneOf/1/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[V]:i.push(V),o++}Pe!==void 0&&(q=Pe,y!==void 0&&(y.protocol=Pe))}var d=L===o}else var d=!0;if(d){if(y.hostname!==void 0){let q=y.hostname,L=o;if(typeof q!="string"){let Pe=typeof q,V;if(V===void 0)if(Pe=="number"||Pe=="boolean")V=""+q;else if(q===null)V="";else{let te={instancePath:e+"/url/hostname",schemaPath:"#/properties/url/oneOf/1/properties/hostname/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[te]:i.push(te),o++}V!==void 0&&(q=V,y!==void 0&&(y.hostname=V))}var d=L===o}else var d=!0;if(d)if(y.pathname!==void 0){let q=y.pathname,L=o;if(typeof q!="string"){let Pe=typeof q,V;if(V===void 0)if(Pe=="number"||Pe=="boolean")V=""+q;else if(q===null)V="";else{let te={instancePath:e+"/url/pathname",schemaPath:"#/properties/url/oneOf/1/properties/pathname/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[te]:i.push(te),o++}V!==void 0&&(q=V,y!==void 0&&(y.pathname=V))}var d=L===o}else var d=!0}}}else{let O={instancePath:e+"/url",schemaPath:"#/properties/url/oneOf/1/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[O]:i.push(O),o++}var p=I===o;if(p&&S?(S=!1,N=[N,1]):p&&(S=!0,N=1),S)o=T,i!==null&&(T?i.length=T:i=null);else{let O={instancePath:e+"/url",schemaPath:"#/properties/url/oneOf",keyword:"oneOf",params:{passingSchemas:N},message:"must match exactly one schema in oneOf"};return i===null?i=[O]:i.push(O),o++,Ct.errors=i,!1}var m=b===o}else var m=!0;if(m){if(t.path!==void 0){let y=t.path,b=o,T=o,S=!1,N=null,A=o;if(typeof y!="string"){let q=typeof y,L;if(L===void 0)if(q=="number"||q=="boolean")L=""+y;else if(y===null)L="";else{let Z={instancePath:e+"/path",schemaPath:"#/properties/path/oneOf/0/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[Z]:i.push(Z),o++}L!==void 0&&(y=L,t!==void 0&&(t.path=L))}var g=A===o;g&&(S=!0,N=0);let I=o;if(o===I)if(y&&typeof y=="object"&&!Array.isArray(y)){let q;if(y.pathname===void 0&&(q="pathname")){let L={instancePath:e+"/path",schemaPath:"#/properties/path/oneOf/1/required",keyword:"required",params:{missingProperty:q},message:"must have required property '"+q+"'"};i===null?i=[L]:i.push(L),o++}else{if(y.protocol!==void 0){let L=y.protocol,Z=o;if(typeof L!="string"){let Pe=typeof L,V;if(V===void 0)if(Pe=="number"||Pe=="boolean")V=""+L;else if(L===null)V="";else{let te={instancePath:e+"/path/protocol",schemaPath:"#/properties/path/oneOf/1/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[te]:i.push(te),o++}V!==void 0&&(L=V,y!==void 0&&(y.protocol=V))}var v=Z===o}else var v=!0;if(v){if(y.hostname!==void 0){let L=y.hostname,Z=o;if(typeof L!="string"){let V=typeof L,te;if(te===void 0)if(V=="number"||V=="boolean")te=""+L;else if(L===null)te="";else{let ct={instancePath:e+"/path/hostname",schemaPath:"#/properties/path/oneOf/1/properties/hostname/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[ct]:i.push(ct),o++}te!==void 0&&(L=te,y!==void 0&&(y.hostname=te))}var v=Z===o}else var v=!0;if(v)if(y.pathname!==void 0){let L=y.pathname,Z=o;if(typeof L!="string"){let V=typeof L,te;if(te===void 0)if(V=="number"||V=="boolean")te=""+L;else if(L===null)te="";else{let ct={instancePath:e+"/path/pathname",schemaPath:"#/properties/path/oneOf/1/properties/pathname/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[ct]:i.push(ct),o++}te!==void 0&&(L=te,y!==void 0&&(y.pathname=te))}var v=Z===o}else var v=!0}}}else{let q={instancePath:e+"/path",schemaPath:"#/properties/path/oneOf/1/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[q]:i.push(q),o++}var g=I===o;if(g&&S?(S=!1,N=[N,1]):g&&(S=!0,N=1),S)o=T,i!==null&&(T?i.length=T:i=null);else{let q={instancePath:e+"/path",schemaPath:"#/properties/path/oneOf",keyword:"oneOf",params:{passingSchemas:N},message:"must match exactly one schema in oneOf"};return i===null?i=[q]:i.push(q),o++,Ct.errors=i,!1}var m=b===o}else var m=!0;if(m){if(t.cookies!==void 0){let y=t.cookies,b=o;if(o===b&&!(y&&typeof y=="object"&&!Array.isArray(y)))return Ct.errors=[{instancePath:e+"/cookies",schemaPath:"#/properties/cookies/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var m=b===o}else var m=!0;if(m){if(t.headers!==void 0){let y=t.headers,b=o;if(o===b&&!(y&&typeof y=="object"&&!Array.isArray(y)))return Ct.errors=[{instancePath:e+"/headers",schemaPath:"#/properties/headers/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var m=b===o}else var m=!0;if(m){if(t.query!==void 0){let y=t.query,b=o,T=o,S=!1,N=o;if(o===N&&!(y&&typeof y=="object"&&!Array.isArray(y))){let I={instancePath:e+"/query",schemaPath:"#/properties/query/anyOf/0/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[I]:i.push(I),o++}var w=N===o;if(S=S||w,!S){let I=o;if(typeof y!="string"){let q=typeof y,L;if(L===void 0)if(q=="number"||q=="boolean")L=""+y;else if(y===null)L="";else{let Z={instancePath:e+"/query",schemaPath:"#/properties/query/anyOf/1/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[Z]:i.push(Z),o++}L!==void 0&&(y=L,t!==void 0&&(t.query=L))}var w=I===o;S=S||w}if(S)o=T,i!==null&&(T?i.length=T:i=null);else{let I={instancePath:e+"/query",schemaPath:"#/properties/query/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[I]:i.push(I),o++,Ct.errors=i,!1}var m=b===o}else var m=!0;if(m){if(t.simulate!==void 0){let y=t.simulate,b=o;if(o===b)if(y&&typeof y=="object"&&!Array.isArray(y)){if(y.end!==void 0){let S=y.end,N=o;if(typeof S!="boolean"){let A;if(A===void 0)if(S==="false"||S===0||S===null)A=!1;else if(S==="true"||S===1)A=!0;else return Ct.errors=[{instancePath:e+"/simulate/end",schemaPath:"#/properties/simulate/properties/end/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;A!==void 0&&(S=A,y!==void 0&&(y.end=A))}var _=N===o}else var _=!0;if(_){if(y.split!==void 0){let S=y.split,N=o;if(typeof S!="boolean"){let I;if(I===void 0)if(S==="false"||S===0||S===null)I=!1;else if(S==="true"||S===1)I=!0;else return Ct.errors=[{instancePath:e+"/simulate/split",schemaPath:"#/properties/simulate/properties/split/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;I!==void 0&&(S=I,y!==void 0&&(y.split=I))}var _=N===o}else var _=!0;if(_){if(y.error!==void 0){let S=y.error,N=o;if(typeof S!="boolean"){let I;if(I===void 0)if(S==="false"||S===0||S===null)I=!1;else if(S==="true"||S===1)I=!0;else return Ct.errors=[{instancePath:e+"/simulate/error",schemaPath:"#/properties/simulate/properties/error/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;I!==void 0&&(S=I,y!==void 0&&(y.error=I))}var _=N===o}else var _=!0;if(_)if(y.close!==void 0){let S=y.close,N=o;if(typeof S!="boolean"){let I;if(I===void 0)if(S==="false"||S===0||S===null)I=!1;else if(S==="true"||S===1)I=!0;else return Ct.errors=[{instancePath:e+"/simulate/close",schemaPath:"#/properties/simulate/properties/close/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;I!==void 0&&(S=I,y!==void 0&&(y.close=I))}var _=N===o}else var _=!0}}}else return Ct.errors=[{instancePath:e+"/simulate",schemaPath:"#/properties/simulate/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var m=b===o}else var m=!0;if(m){if(t.authority!==void 0){let y=t.authority,b=o;if(typeof y!="string"){let S=typeof y,N;if(N===void 0)if(S=="number"||S=="boolean")N=""+y;else if(y===null)N="";else return Ct.errors=[{instancePath:e+"/authority",schemaPath:"#/properties/authority/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;N!==void 0&&(y=N,t!==void 0&&(t.authority=N))}var m=b===o}else var m=!0;if(m){if(t.remoteAddress!==void 0){let y=t.remoteAddress,b=o;if(typeof y!="string"){let S=typeof y,N;if(N===void 0)if(S=="number"||S=="boolean")N=""+y;else if(y===null)N="";else return Ct.errors=[{instancePath:e+"/remoteAddress",schemaPath:"#/properties/remoteAddress/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;N!==void 0&&(y=N,t!==void 0&&(t.remoteAddress=N))}var m=b===o}else var m=!0;if(m){if(t.method!==void 0){let y=t.method,b=o;if(typeof y!="string"){let S=typeof y,N;if(N===void 0)if(S=="number"||S=="boolean")N=""+y;else if(y===null)N="";else return Ct.errors=[{instancePath:e+"/method",schemaPath:"#/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;N!==void 0&&(y=N,t!==void 0&&(t.method=N))}if(!(y==="ACL"||y==="BIND"||y==="CHECKOUT"||y==="CONNECT"||y==="COPY"||y==="DELETE"||y==="GET"||y==="HEAD"||y==="LINK"||y==="LOCK"||y==="M-SEARCH"||y==="MERGE"||y==="MKACTIVITY"||y==="MKCALENDAR"||y==="MKCOL"||y==="MOVE"||y==="NOTIFY"||y==="OPTIONS"||y==="PATCH"||y==="POST"||y==="PROPFIND"||y==="PROPPATCH"||y==="PURGE"||y==="PUT"||y==="REBIND"||y==="REPORT"||y==="SEARCH"||y==="SOURCE"||y==="SUBSCRIBE"||y==="TRACE"||y==="UNBIND"||y==="UNLINK"||y==="UNLOCK"||y==="UNSUBSCRIBE"||y==="acl"||y==="bind"||y==="checkout"||y==="connect"||y==="copy"||y==="delete"||y==="get"||y==="head"||y==="link"||y==="lock"||y==="m-search"||y==="merge"||y==="mkactivity"||y==="mkcalendar"||y==="mkcol"||y==="move"||y==="notify"||y==="options"||y==="patch"||y==="post"||y==="propfind"||y==="proppatch"||y==="purge"||y==="put"||y==="rebind"||y==="report"||y==="search"||y==="source"||y==="subscribe"||y==="trace"||y==="unbind"||y==="unlink"||y==="unlock"||y==="unsubscribe"))return Ct.errors=[{instancePath:e+"/method",schemaPath:"#/properties/method/enum",keyword:"enum",params:{allowedValues:Kle.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;var m=b===o}else var m=!0;if(m)if(t.validate!==void 0){let y=t.validate,b=o;if(typeof y!="boolean"){let S;if(S===void 0)if(y==="false"||y===0||y===null)S=!1;else if(y==="true"||y===1)S=!0;else return Ct.errors=[{instancePath:e+"/validate",schemaPath:"#/properties/validate/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;S!==void 0&&(y=S,t!==void 0&&(t.validate=S))}var m=b===o}else var m=!0}}}}}}}}}else return Ct.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return Ct.errors=i,o===0}});var cF=$((o0e,Tc)=>{"use strict";var Ble=require("assert"),_w=tF(),dp=oF(),pp="The dispatch function has already been invoked",uF=aF();function vw(t,e,r){return typeof r>"u"?new Pc(t,e):hp(t,e,r)}function lF(t,e,r,n){return r.once("error",function(s){this.destroyed&&n.destroy(s)}),r.once("close",function(){this.destroyed&&!this._error&&n.destroy()}),r.prepare(()=>t.call(e,r,n))}function hp(t,e,r){if(e=typeof e=="string"?{url:e}:e,e.validate!==!1&&(Ble(typeof t=="function","dispatchFunc should be a function"),!uF(e)))throw new Error(uF.errors.map(o=>o.message));let n=e.server||{},s=e.Request?_w.CustomRequest:_w;if(t.request&&t.request.app===t&&(Object.setPrototypeOf(Object.getPrototypeOf(t.request),s.prototype),Object.setPrototypeOf(Object.getPrototypeOf(t.response),dp.prototype)),typeof r=="function"){let i=new s(e),o=new dp(i,r);return lF(t,n,i,o)}else return new Promise((i,o)=>{let a=new s(e),u=new dp(a,i,o);lF(t,n,a,u)})}function Pc(t,e){typeof e=="string"?this.option={url:e}:this.option=Object.assign({},e),this.dispatch=t,this._hasInvoked=!1,this._promise=null,this.option.autoStart!==!1&&process.nextTick(()=>{this._hasInvoked||this.end()})}var Gle=["delete","get","head","options","patch","post","put","trace"];Gle.forEach(t=>{Pc.prototype[t]=function(e){if(this._hasInvoked===!0||this._promise)throw new Error(pp);return this.option.url=e,this.option.method=t.toUpperCase(),this}});var Jle=["body","cookies","headers","payload","query"];Jle.forEach(t=>{Pc.prototype[t]=function(e){if(this._hasInvoked===!0||this._promise)throw new Error(pp);return this.option[t]=e,this}});Pc.prototype.end=function(t){if(this._hasInvoked===!0||this._promise)throw new Error(pp);if(this._hasInvoked=!0,typeof t=="function")hp(this.dispatch,this.option,t);else return this._promise=hp(this.dispatch,this.option),this._promise};Object.getOwnPropertyNames(Promise.prototype).forEach(t=>{t!=="constructor"&&(Pc.prototype[t]=function(...e){if(!this._promise){if(this._hasInvoked===!0)throw new Error(pp);this._hasInvoked=!0,this._promise=hp(this.dispatch,this.option)}return this._promise[t](...e)})});function Yle(t){return t instanceof _w||t instanceof dp||t&&t.constructor&&t.constructor.name==="_CustomLMRRequest"}Tc.exports=vw;Tc.exports.default=vw;Tc.exports.inject=vw;Tc.exports.isInjection=Yle});var wF=$((a0e,vp)=>{"use strict";var Wle="4.15.0",Xle=dE(),fF=require("http"),Oc,{kAvvioBoot:mp,kChildren:$w,kServerBindings:dF,kBodyLimit:Qle,kRoutePrefix:hF,kLogLevel:Zle,kLogSerializers:ece,kHooks:Nc,kSchemaController:_i,kRequestAcceptVersion:tce,kReplySerializerDefault:pF,kContentTypeParser:rce,kReply:nce,kRequest:sce,kFourOhFour:ice,kState:vi,kOptions:oce,kPluginNameChain:Ic,kSchemaErrorFormatter:bw,kErrorHandler:yp,kKeepAliveConnections:ww,kFourOhFourContext:ace}=xt(),{createServer:uce,compileValidateHTTPVersion:lce}=SE(),Cc=Pf(),gp=Uf(),{supportedMethods:cce}=Iy(),Wa=jy(),vo=zy(),mF=qb(),{Hooks:fce,hookRunnerApplication:dce,supportedHooks:Ew}=Ti(),{createLogger:hce}=Xm(),pce=Mb(),mce=iL(),{buildRouting:yce,validateBodyLimitOption:gce}=Tx(),_ce=kx(),bF=Dx(),vce=Kx(),$ce=Pi(),bce=Gx(),{appendStackTrace:wce,AVVIO_ERRORS_MAP:yF,...$o}=er(),{defaultInitOptions:Hr}=bF,{FST_ERR_ASYNC_CONSTRAINT:Ece,FST_ERR_BAD_URL:Sce,FST_ERR_FORCE_CLOSE_CONNECTIONS_IDLE_NOT_AVAILABLE:Rce,FST_ERR_OPTIONS_NOT_OBJ:Pce,FST_ERR_QSP_NOT_FN:Tce,FST_ERR_SCHEMA_CONTROLLER_BUCKET_OPT_NOT_FN:Oce,FST_ERR_AJV_CUSTOM_OPTIONS_OPT_NOT_OBJ:Nce,FST_ERR_AJV_CUSTOM_OPTIONS_OPT_NOT_ARR:Ice,FST_ERR_VERSION_CONSTRAINT_NOT_STR:Cce,FST_ERR_INSTANCE_ALREADY_LISTENING:Ace,FST_ERR_REOPENED_CLOSE_SERVER:kce,FST_ERR_ROUTE_REWRITE_NOT_STR:qce,FST_ERR_SCHEMA_ERROR_FORMATTER_NOT_FN:gF}=$o,{buildErrorHandler:_F}=uu(),vF={config:{},onSend:[],onError:[],[ace]:null};function jce(t){let e={};return["errorHandler","logLevel","logSerializers"].concat(Ew).forEach(n=>{e[n]=t.store[n]}),Object.assign({},e)}function _p(t){if(t=t||{},typeof t!="object")throw new Pce;if(t.querystringParser&&typeof t.querystringParser!="function")throw new Tce(typeof t.querystringParser);if(t.schemaController&&t.schemaController.bucket&&typeof t.schemaController.bucket!="function")throw new Oce(typeof t.schemaController.bucket);gce(t.bodyLimit);let e=t.requestIdHeader===!1?!1:t.requestIdHeader||Hr.requestIdHeader,r=mce(e,t.genReqId),n=t.requestIdLogLabel||"reqId",s=t.bodyLimit||Hr.bodyLimit,i=t.disableRequestLogging||!1,o=Object.assign({customOptions:{},plugins:[]},t.ajv),a=t.frameworkErrors;if(!o.customOptions||Object.prototype.toString.call(o.customOptions)!=="[object Object]")throw new Nce(typeof o.customOptions);if(!o.plugins||!Array.isArray(o.plugins))throw new Ice(typeof o.plugins);let{logger:u,hasLogger:l}=hce(t);t.connectionTimeout=t.connectionTimeout||Hr.connectionTimeout,t.keepAliveTimeout=t.keepAliveTimeout||Hr.keepAliveTimeout,t.maxRequestsPerSocket=t.maxRequestsPerSocket||Hr.maxRequestsPerSocket,t.requestTimeout=t.requestTimeout||Hr.requestTimeout,t.logger=u,t.genReqId=r,t.requestIdHeader=e,t.requestIdLogLabel=n,t.disableRequestLogging=i,t.ajv=o,t.clientErrorHandler=t.clientErrorHandler||V;let c=bF(t);t.exposeHeadRoutes=c.exposeHeadRoutes;let f=t.constraints;t.versioning&&($ce.emit("FSTDEP009"),f={...f,version:{name:"version",mustMatchWhenDerived:!0,storage:t.versioning.storage,deriveConstraint:t.versioning.deriveVersion,validate(j){if(typeof j!="string")throw new Cce}}});let h=yce({config:{defaultRoute:te,onBadUrl:ct,constraints:f,ignoreTrailingSlash:t.ignoreTrailingSlash||Hr.ignoreTrailingSlash,ignoreDuplicateSlashes:t.ignoreDuplicateSlashes||Hr.ignoreDuplicateSlashes,maxParamLength:t.maxParamLength||Hr.maxParamLength,caseSensitive:t.caseSensitive,allowUnsafeRegex:t.allowUnsafeRegex||Hr.allowUnsafeRegex,buildPrettyMeta:jce,querystringParser:t.querystringParser}}),d=_ce(t),p=Fe(h,t);t.http2SessionTimeout=c.http2SessionTimeout;let{server:m,listen:v}=uce(t,p),g=typeof m.closeAllConnections=="function",w=typeof m.closeIdleConnections=="function",_=t.forceCloseConnections;if(_==="idle"&&!w)throw new Rce;typeof _!="boolean"&&(_=w?"idle":!1);let y=!g&&_===!0?new Set:bce(),b=Cc.setupResponseListeners,T=mF.buildSchemaController(null,t.schemaController),S={[vi]:{listening:!1,closing:!1,started:!1},[ww]:y,[oce]:t,[$w]:[],[dF]:[],[Qle]:s,[hF]:"",[Zle]:"",[ece]:null,[Nc]:new fce,[_i]:T,[bw]:null,[yp]:_F(),[pF]:null,[rce]:new vo(s,t.onProtoPoisoning||Hr.onProtoPoisoning,t.onConstructorPoisoning||Hr.onConstructorPoisoning),[nce]:Cc.buildReply(Cc),[sce]:gp.buildRequest(gp,t.trustProxy),[ice]:d,[pce.registeredPlugins]:[],[Ic]:["fastify"],[mp]:null,routing:p,getDefaultRoute:h.getDefaultRoute.bind(h),setDefaultRoute:h.setDefaultRoute.bind(h),delete:function(x,M,z){return h.prepareRoute.call(this,{method:"DELETE",url:x,options:M,handler:z})},get:function(x,M,z){return h.prepareRoute.call(this,{method:"GET",url:x,options:M,handler:z})},head:function(x,M,z){return h.prepareRoute.call(this,{method:"HEAD",url:x,options:M,handler:z})},patch:function(x,M,z){return h.prepareRoute.call(this,{method:"PATCH",url:x,options:M,handler:z})},post:function(x,M,z){return h.prepareRoute.call(this,{method:"POST",url:x,options:M,handler:z})},put:function(x,M,z){return h.prepareRoute.call(this,{method:"PUT",url:x,options:M,handler:z})},options:function(x,M,z){return h.prepareRoute.call(this,{method:"OPTIONS",url:x,options:M,handler:z})},all:function(x,M,z){return h.prepareRoute.call(this,{method:cce,url:x,options:M,handler:z})},route:function(x){return h.route.call(this,{options:x})},hasRoute:function(x){return h.hasRoute.call(this,{options:x})},log:u,withTypeProvider:L,addHook:Z,addSchema:Pe,getSchema:T.getSchema.bind(T),getSchemas:T.getSchemas.bind(T),setValidatorCompiler:ur,setSerializerCompiler:qr,setSchemaController:Vt,setReplySerializer:Ce,setSchemaErrorFormatter:xe,addContentTypeParser:vo.helpers.addContentTypeParser,hasContentTypeParser:vo.helpers.hasContentTypeParser,getDefaultJsonParser:vo.defaultParsers.getDefaultJsonParser,defaultTextParser:vo.defaultParsers.defaultTextParser,removeContentTypeParser:vo.helpers.removeContentTypeParser,removeAllContentTypeParsers:vo.helpers.removeAllContentTypeParsers,register:null,after:null,ready:null,onClose:null,close:null,printPlugins:null,hasPlugin:function(j){return this[Ic].includes(j)},listen:v,server:m,addresses:function(){let j=this[dF].map(x=>x.address());return j.push(this.server.address()),j.filter(x=>x)},decorate:Wa.add,hasDecorator:Wa.exist,decorateReply:Wa.decorateReply,decorateRequest:Wa.decorateRequest,hasRequestDecorator:Wa.existRequest,hasReplyDecorator:Wa.existReply,inject:O,printRoutes:Pt,setNotFoundHandler:ft,setErrorHandler:ie,initialConfig:c,addConstraintStrategy:h.addConstraintStrategy.bind(h),hasConstraintStrategy:h.hasConstraintStrategy.bind(h)};Object.defineProperties(S,{pluginName:{configurable:!0,get(){return this[Ic].length>1?this[Ic].join(" -> "):this[Ic][0]}},prefix:{configurable:!0,get(){return this[hF]}},validatorCompiler:{configurable:!0,get(){return this[_i].getValidatorCompiler()}},serializerCompiler:{configurable:!0,get(){return this[_i].getSerializerCompiler()}},version:{configurable:!0,get(){return Wle}},errorHandler:{configurable:!0,get(){return this[yp].func}}}),t.schemaErrorFormatter&&($F(t.schemaErrorFormatter),S[bw]=t.schemaErrorFormatter.bind(S));let N=Number(t.pluginTimeout),A=Xle(S,{autostart:!1,timeout:isNaN(N)===!1?N:Hr.pluginTimeout,expose:{use:"register"}});A.override=vce,A.on("start",()=>S[vi].started=!0),S[mp]=S.ready,S.ready=q,S.printPlugins=A.prettyPrint.bind(A),A.once("preReady",()=>{S.onClose((j,x)=>{if(S[vi].closing=!0,h.closeRoutes(),S[vi].listening){if(j.server.close(x),_==="idle")j.server.closeIdleConnections();else if(g&&_)j.server.closeAllConnections();else if(_===!0)for(let M of S[ww])M.destroy(),S[ww].delete(M)}else x(null)})}),S.setNotFoundHandler(),d.arrange404(S),h.setup(t,{avvio:A,fourOhFour:d,logger:u,hasLogger:l,setupResponseListeners:b,throwIfAlreadyStarted:I,validateHTTPVersion:lce(t),keepAliveConnections:y}),m.on("clientError",t.clientErrorHandler.bind(S));try{let x=require("diagnostics_channel").channel("fastify.initialization");x.hasSubscribers&&x.publish({fastify:S})}catch{}return S;function I(j){if(S[vi].started)throw new Ace(j)}function O(j,x){if(Oc===void 0&&(Oc=cF()),S[vi].started){if(S[vi].closing){let M=new kce;if(x){x(M);return}else return Promise.reject(M)}return Oc(p,j,x)}if(x)this.ready(M=>{M?x(M,null):Oc(p,j,x)});else return Oc((M,z)=>{this.ready(function(Me){if(Me){z.emit("error",Me);return}p(M,z)})},j)}function q(j){let x,M;if(process.nextTick(z),!j)return new Promise(function(J,We){x=J,M=We});function z(){S[mp]((J,We)=>{J||S[vi].started?Me(J):dce("onReady",S[mp],S,Me),We()})}function Me(J){if(J=J!=null&&yF[J.code]!=null?wce(J,new yF[J.code](J.message)):J,j)J?j(J):j(void 0,S);else{if(J)return M(J);x(S)}}}function L(){return this}function Z(j,x){if(I('Cannot call "addHook"!'),x==null)throw new $o.FST_ERR_HOOK_INVALID_HANDLER(j,x);if(j==="onSend"||j==="preSerialization"||j==="onError"||j==="preParsing"){if(x.constructor.name==="AsyncFunction"&&x.length===4)throw new $o.FST_ERR_HOOK_INVALID_ASYNC_HANDLER}else if(j==="onReady"){if(x.constructor.name==="AsyncFunction"&&x.length!==0)throw new $o.FST_ERR_HOOK_INVALID_ASYNC_HANDLER}else if(j==="onRequestAbort"){if(x.constructor.name==="AsyncFunction"&&x.length!==1)throw new $o.FST_ERR_HOOK_INVALID_ASYNC_HANDLER}else if(x.constructor.name==="AsyncFunction"&&x.length===3)throw new $o.FST_ERR_HOOK_INVALID_ASYNC_HANDLER;return j==="onClose"?this.onClose(x):j==="onReady"?this[Nc].add(j,x):j==="onRoute"?(this[Nc].validate(j,x),this[Nc].add(j,x)):this.after((z,Me)=>{M.call(this,j,x),Me(z)}),this;function M(z,Me){this[Nc].add(z,Me),this[$w].forEach(J=>M.call(J,z,Me))}}function Pe(j){return I('Cannot call "addSchema"!'),this[_i].add(j),this[$w].forEach(x=>x.addSchema(j)),this}function V(j,x){if(j.code==="ECONNRESET"||x.destroyed)return;let M,z,Me,J;j.code==="ERR_HTTP_REQUEST_TIMEOUT"?(z="408",Me=fF.STATUS_CODES[z],M=`{"error":"${Me}","message":"Client Timeout","statusCode":408}`,J="timeout"):(z="400",Me=fF.STATUS_CODES[z],M=`{"error":"${Me}","message":"Client Error","statusCode":400}`,J="error"),this.log.trace({err:j},`client ${J}`),x.writable&&x.write(`HTTP/1.1 ${z} ${Me}\r
Content-Length: ${M.length}\r
Content-Type: application/json\r
\r
${M}`),x.destroy(j)}function te(j,x){j.headers["accept-version"]!==void 0&&(j.headers[tce]=j.headers["accept-version"],j.headers["accept-version"]=void 0),d.router.lookup(j,x)}function ct(j,x,M){if(a){let Me=r(x),J=u.child({reqId:Me});J.info({req:x},"incoming request");let We=new gp(Me,null,x,null,J,vF),vt=new Cc(M,We,J);return a(new Sce(j),We,vt)}let z=`{"error":"Bad Request","message":"'${j}' is not a valid url component","statusCode":400}`;M.writeHead(400,{"Content-Type":"application/json","Content-Length":z.length}),M.end(z)}function U(j,x,M){if(j!==!1)return function(Me){if(Me){if(a){let We=r(x),vt=u.child({reqId:We});vt.info({req:x},"incoming request");let Xe=new gp(We,null,x,null,vt,vF),kt=new Cc(M,Xe,vt);return a(new Ece,Xe,kt)}let J='{"error":"Internal Server Error","message":"Unexpected error from async constraint","statusCode":500}';M.writeHead(500,{"Content-Type":"application/json","Content-Length":J.length}),M.end(J)}}}function ft(j,x){return I('Cannot call "setNotFoundHandler"!'),d.setNotFoundHandler.call(this,j,x,A,h.routeHandler),this}function ur(j){return I('Cannot call "setValidatorCompiler"!'),this[_i].setValidatorCompiler(j),this}function xe(j){return I('Cannot call "setSchemaErrorFormatter"!'),$F(j),this[bw]=j.bind(this),this}function qr(j){return I('Cannot call "setSerializerCompiler"!'),this[_i].setSerializerCompiler(j),this}function Vt(j){I('Cannot call "setSchemaController"!');let x=this[_i],M=mF.buildSchemaController(x,Object.assign({},x.opts,j));return this[_i]=M,this.getSchema=M.getSchema.bind(M),this.getSchemas=M.getSchemas.bind(M),this}function Ce(j){return I('Cannot call "setReplySerializer"!'),this[pF]=j,this}function ie(j){return I('Cannot call "setErrorHandler"!'),this[yp]=_F(this[yp],j.bind(this)),this}function Pt(j={}){return j.includeMeta=j.includeHooks?j.includeMeta?Ew.concat(j.includeMeta):Ew:j.includeMeta,h.printRoutes(j)}function Fe(j,{rewriteUrl:x,logger:M}){let z;return function(J,We){if(z===void 0&&(z=j.isAsyncConstraint()),x){let vt=J.url,Xe=x(J);if(vt!==Xe)if(M.debug({originalUrl:vt,url:Xe},"rewrite url"),typeof Xe=="string")J.url=Xe;else{let kt=new qce(J.url,typeof Xe);J.destroy(kt)}}j.routing(J,We,U(z,J,We))}}}_p.errorCodes=$o;function $F(t){if(typeof t!="function")throw new gF(typeof t);if(t.constructor.name==="AsyncFunction")throw new gF("AsyncFunction")}vp.exports=_p;vp.exports.fastify=_p;vp.exports.default=_p});var Lce={};UF(Lce,{default:()=>Dce});module.exports=HF(Lce);var EF=qw(Lw()),SF=qw(wF());(0,EF.config)();var Sw=(0,SF.default)({logger:!0});Sw.all("/",(t,e)=>{let{query:r,body:n,params:s,headers:i,raw:o,log:a}=t;console.log({query:r,body:n,params:s,headers:i}),a.info({query:r,body:n,params:s,headers:i}),a.debug({query:r,body:n,params:s,headers:i}),e.send({hello:"world"})});var Dce=async(t,e)=>{await Sw.ready(),Sw.server.emit("request",t,e)};
/*! Bundled license information:

forwarded/index.js:
  (*!
   * forwarded
   * Copyright(c) 2014-2017 Douglas Christopher Wilson
   * MIT Licensed
   *)

proxy-addr/index.js:
  (*!
   * proxy-addr
   * Copyright(c) 2014-2016 Douglas Christopher Wilson
   * MIT Licensed
   *)

tiny-lru/dist/tiny-lru.cjs:
  (**
   * tiny-lru
   *
   * @copyright 2023 Jason Mulligan <jason.mulligan@avoidwork.com>
   * @license BSD-3-Clause
   * @version 10.4.1
   *)

uri-js/dist/es5/uri.all.js:
  (** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js *)

cookie/index.js:
  (*!
   * cookie
   * Copyright(c) 2012-2014 Roman Shtylman
   * Copyright(c) 2015 Douglas Christopher Wilson
   * MIT Licensed
   *)
*/
